{"version":3,"sources":["webpack://demos/./src/demos/_utils/d3utils.js","webpack://demos/./src/demos/mareys-schedule/mareys-schedule.js","webpack://demos/./src/pages/d3js/mareys-schedule.js"],"names":["d3utils","colorsScale","colors","extent","c","d3","scale","linear","domain","range","colorScale","length","p","filterBlackOpacity","id","svg","deviation","slope","filter","append","attr","height","width","x","y","in","stdDeviation","dx","dy","type","feMerge","filterColor","extra","result","in2","mode","middleTitle","text","top","class","transform","String","style","selector","margin","select","bottom","left","right","tooltip","customOpts","opts","_","merge","elementSelector","followElement","followMouse","leftOffst","tOpts","container","viewport","topOffst","$","hover","e","css","pageX","pageY","position","trains","stations","innerWidth","formatTime","time","format","parseTime","s","t","parse","getHours","setDate","getDate","slider","change","times","each","sliderValue","wholeMinutes","fragment","hours","Math","floor","minutes","finalTime","push","timeRange","xAxis","axis","ticks","tickFormat","d","distance","station","selectAll","data","enter","name","call","orient","train","test","index","on","line","trainTitle","trainData","direction","stops","last","train_index","ampm","date","getMinutes","redraw","tsv","ROOT_PATH","i","k","split","key","zone","number","map","_error","stop","demoInfo","pageContext","links","main","scripts","className"],"mappings":"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","file":"component---src-pages-d-3-js-mareys-schedule-js-b447a4e881b44d634cec.js","sourcesContent":["const d3utils = {\n  colorsScale(colors, extent) {\n    const c = d3.scale.linear().domain(extent).range([0, 1])\n    const colorScale = d3.scale\n      .linear()\n      .domain(d3.range(0, 1, 1.0 / colors.length))\n      .range(colors)\n\n    return function (p) {\n      return colorScale(c(p))\n    }\n  },\n  filterBlackOpacity(id, svg, deviation, slope) {\n    const defs = svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr({\n      height: \"500%\",\n      id: `drop-shadow-${id}`,\n      width: \"500%\",\n      x: \"-200%\",\n      y: \"-200%\",\n    })\n\n    filter.append(\"feGaussianBlur\").attr({\n      in: \"SourceAlpha\",\n      stdDeviation: deviation,\n    })\n    filter.append(\"feOffset\").attr({\n      dx: 1,\n      dy: 1,\n    })\n    filter.append(\"feComponentTransfer\").append(\"feFuncA\").attr({\n      slope,\n      type: \"linear\",\n    })\n\n    const feMerge = filter.append(\"feMerge\")\n\n    feMerge.append(\"feMergeNode\")\n\n    return feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\")\n  },\n  filterColor(id, svg, deviation, slope, extra) {\n    if (extra == null) {\n      extra = false\n    }\n\n    const defs = svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr({\n      id: `drop-shadow-${id}`,\n    })\n\n    if (extra) {\n      filter.attr({\n        height: \"500%\",\n        width: \"500%\",\n        x: \"-200%\",\n        y: \"-200%\",\n      })\n    }\n\n    filter.append(\"feOffset\").attr({\n      dx: 0.5,\n      dy: 0.5,\n      in: \"SourceGraphic\",\n      result: \"offOut\",\n    })\n    filter.append(\"feGaussianBlur\").attr({\n      in: \"offOut\",\n      result: \"blurOut\",\n      stdDeviation: deviation,\n    })\n    filter.append(\"feBlend\").attr({\n      in: \"SourceGraphic\",\n      in2: \"blurOut\",\n      mode: \"normal\",\n    })\n\n    return filter.append(\"feComponentTransfer\").append(\"feFuncA\").attr({\n      slope,\n      type: \"linear\",\n    })\n  },\n  middleTitle(svg, width, text, top) {\n    if (top == null) {\n      top = -15\n    }\n\n    svg\n      .append(\"text\")\n      .attr({\n        class: \"chart-title\",\n        \"text-anchor\": \"middle\",\n        transform: `translate(${String(width / 2)},${top})`,\n      })\n      .text(text)\n      .style(\"font-weight\", \"bold\")\n  },\n  svg(selector, width, height, margin) {\n    return d3\n      .select(selector)\n      .text(\"\")\n      .append(\"svg\")\n      .attr({\n        height: height + margin.top + margin.bottom,\n        width: width + margin.left + margin.right,\n      })\n      .append(\"g\")\n      .attr({\n        transform: `translate(${margin.left},${margin.top})`,\n      })\n  },\n  tooltip(selector, customOpts) {\n    if (customOpts == null) {\n      customOpts = {}\n    }\n\n    const defaultOpts = {\n      elementSelector: \"\",\n      followElement: false,\n      followMouse: false,\n      leftOffst: 60,\n      tOpts: {\n        container: \"body\",\n        viewport: {\n          selector: \"#chart svg\",\n        },\n      },\n      topOffst: 40,\n    }\n\n    const opts = _.merge(defaultOpts, customOpts)\n\n    $(selector).tooltip(opts.tOpts)\n\n    if (opts.followMouse) {\n      $(selector).hover((e) =>\n        $(\".tooltip\").css({\n          left: `${String(e.pageX - opts.leftOffst)}px`,\n          top: `${String(e.pageY - opts.topOffst)}px`,\n        })\n      )\n    } else if (opts.followElement) {\n      $(selector).hover(() =>\n        $(\".tooltip\").css({\n          left: `${String(\n            $(opts.elementSelector).position().left - opts.leftOffst\n          )}px`,\n          top: `${String(\n            $(opts.elementSelector).position().top - opts.topOffst\n          )}px`,\n        })\n      )\n    }\n  },\n}\n\nexport default d3utils\n","import d3utils from \"@/demos/_utils/d3utils\"\n\nconst main = () => {\n  let trains = false\n\n  const stations = []\n  const margin = {\n    bottom: 50,\n    left: 120,\n    right: 50,\n    top: 80,\n  }\n\n  const width = $(\"#chart\").innerWidth() - margin.left - margin.right\n  const height = 600 - margin.top - margin.bottom\n  const formatTime = d3.time.format(\"%I:%M%p\")\n\n  const parseTime = function (s) {\n    const t = formatTime.parse(s)\n\n    if (t !== null && t.getHours() < 3) {\n      t.setDate(t.getDate() + 1)\n    }\n\n    return t\n  }\n\n  const typeFn = function (d, i) {\n    let p = null\n\n    if (!i) {\n      for (const k in d) {\n        if (/^stop\\|/.test(k)) {\n          p = k.split(\"|\")\n          stations.push({\n            distance: +p[2],\n            key: k,\n            name: p[1],\n            zone: +p[3],\n          })\n        }\n      }\n    }\n\n    return {\n      direction: d.direction,\n      number: d.number,\n      stops: stations\n        .map((s) => ({\n          station: s,\n          time: parseTime(d[s.key]),\n        }))\n        .filter((s) => s.time !== null),\n      type: d.type,\n    }\n  }\n\n  const formatAMPM = function (date) {\n    let hours = date.getHours()\n    let minutes = date.getMinutes()\n    const ampm = hours >= 12 ? \"PM\" : \"AM\"\n\n    hours = hours % 12\n    hours = hours ? hours : 12\n    minutes = minutes < 10 ? `0${minutes}` : minutes\n\n    const strTime = `${hours}:${minutes} ${ampm}`\n\n    return strTime\n  }\n\n  const redraw = function (timeRange) {\n    const x = d3.time\n      .scale()\n      .domain([parseTime(timeRange[0]), parseTime(timeRange[1])])\n      .range([0, width])\n    const y = d3.scale.linear().range([0, height])\n    const xAxis = d3.svg.axis().scale(x).ticks(8).tickFormat(formatTime)\n\n    const svg = d3utils.svg(\"#chart\", width, height, margin)\n\n    d3utils.middleTitle(\n      svg,\n      width,\n      \"E.J. Mareyâ€™s graphical train schedule \" + \" (4:30AM - 1:30AM)\",\n      -40\n    )\n    d3utils.filterBlackOpacity(\"trains\", svg, 2, 0.2)\n    svg\n      .append(\"defs\")\n      .append(\"clipPath\")\n      .attr(\"id\", \"clip\")\n      .append(\"rect\")\n      .attr(\"y\", -margin.top)\n      .attr(\"width\", width)\n      .attr(\"height\", height + margin.top + margin.bottom)\n    y.domain(d3.extent(stations, (d) => d.distance))\n\n    const station = svg\n      .append(\"g\")\n      .attr(\"class\", \"station\")\n      .selectAll(\"g\")\n      .data(stations)\n      .enter()\n      .append(\"g\")\n      .attr(\"transform\", (d) => `translate(0,${y(d.distance)})`)\n\n    station\n      .append(\"text\")\n      .attr(\"x\", -6)\n      .attr(\"dy\", \".35em\")\n      .text((d) => d.name)\n    station.append(\"line\").attr(\"x2\", width)\n    svg.append(\"g\").attr(\"class\", \"x top axis\").call(xAxis.orient(\"top\"))\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"x bottom axis\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .call(xAxis.orient(\"bottom\"))\n\n    const mouseover = function (d) {\n      return d3\n        .select(`.train-${d.index}`)\n        .select(\"path\")\n        .style(\"stroke-width\", \"5px\")\n    }\n\n    const mouseleave = function (d) {\n      return d3\n        .select(`.train-${d.index}`)\n        .select(\"path\")\n        .style('\"stroke-width\"', \"2.5px\")\n    }\n\n    const train = svg\n      .append(\"g\")\n      .attr(\"class\", \"train\")\n      .attr(\"clip-path\", \"url(#clip)\")\n      .selectAll(\"g\")\n      .data(trains.filter((d) => /[NLB]/.test(d.type)))\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", (d) => `${d.type} train-${d.index}`)\n      .on(\"mouseover\", mouseover)\n      .on(\"mouseleave\", mouseleave)\n    const line = d3.svg\n      .line()\n      .x((d) => x(d.time))\n      .y((d) => y(d.station.distance))\n\n    const trainTitle = function (trainData) {\n      let title = \"\"\n\n      if (trainData.direction === \"S\") {\n        title = `${trainData.stops[0].station.name} -> ${\n          _.last(trainData.stops).station.name\n        }`\n      } else {\n        title = `${_.last(trainData.stops).station.name} -> ${\n          trainData.stops[0].station.name\n        }`\n      }\n\n      return title\n    }\n\n    train\n      .append(\"path\")\n      .attr(\"d\", (d) => line(d.stops))\n      .append(\"title\")\n      .text((d) => trainTitle(d))\n\n    train\n      .selectAll(\"circle\")\n      .data((d) => d.stops)\n      .enter()\n      .append(\"circle\")\n      .attr(\n        \"transform\",\n        (d) => `translate(${x(d.time)},${y(d.station.distance)})`\n      )\n      .style(\"filter\", \"url(#drop-shadow-trains)\")\n      .attr(\"r\", \"5px\")\n      .append(\"title\")\n      .text(\n        (d) =>\n          `${trainTitle(trains[d.train_index])}\\n${\n            d.station.name\n          } at ${formatAMPM(d.time)}`\n      )\n  }\n\n  const slider = $(\".slider\")\n\n  const convertHour = function () {\n    const times = []\n\n    _.each(slider.slider(\"values\"), (sliderValue) => {\n      const wholeMinutes = (sliderValue / 100) * 1200\n\n      let fragment = \"AM\"\n      let hours = Math.floor(wholeMinutes / 60)\n      let minutes = Math.floor(wholeMinutes % 60)\n\n      if (minutes > 30) {\n        minutes = minutes - 30\n        hours = hours + 1\n      } else {\n        minutes = minutes + 30\n      }\n\n      hours = hours + 4\n\n      if (hours > 23) {\n        if (hours === 24) {\n          hours = hours - 12\n        } else {\n          hours = hours - 24\n        }\n      } else if (hours > 11) {\n        fragment = \"PM\"\n\n        if (hours !== 12) {\n          hours = hours - 12\n        }\n      }\n\n      if (minutes < 10) {\n        minutes = `0${String(minutes)}`\n      }\n\n      const finalTime = `${String(hours)}:${minutes}${fragment}`\n\n      return times.push(finalTime)\n    })\n\n    return redraw(times)\n  }\n\n  slider.slider({\n    change: convertHour,\n    range: true,\n  })\n\n  return d3.tsv(\n    `${ROOT_PATH}data/d3js/mareys-schedule/data.tsv`,\n    typeFn,\n    (_error, data) => {\n      trains = data\n      _.each(trains, (train, index) => {\n        train.index = index\n\n        return _.each(train.stops, (stop) => {\n          stop.train_index = index\n        })\n      })\n\n      return slider.slider(\"values\", [10, 50])\n    }\n  )\n}\n\nexport default main\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/mareys-schedule/mareys-schedule\"\n\nimport \"@/demos/mareys-schedule/mareys-schedule.styl\"\n\nconst MareysSchedule = ({ pageContext: { demoInfo } }) => (\n  <Demo\n    demoInfo={demoInfo}\n    links={[\n      \"/vendors/jquery-ui/themes/base/theme.css\",\n      \"/vendors/jquery-ui/themes/base/slider.css\",\n    ]}\n    main={main}\n    scripts={[\n      \"/vendors/d3/d3.min.js\",\n      \"/vendors/jquery-ui/jquery-ui.min.js\",\n      \"/vendors/jquery-ui/ui/slider.js\",\n      \"/js/d3js-utils.js\",\n    ]}\n  >\n    <div>\n      <div className=\"slider\" />\n    </div>\n    <div className=\"mareys-schedule-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default MareysSchedule\n"],"sourceRoot":""}