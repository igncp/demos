(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[201],{3843:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(7294),a=n(4275),i=n(8634),o=n(2656),u=n.n(o),c=n(5221),l="trend-line-module--axis--df010",s=50,d=50,f=50,p=50,m=500-p-s,h=function(e){var t=e.line,n=e.lineData;return function(){var e=(0,c.FTZ)().domain([0,1]).range((0,c.w6H)(1,n.length+1));return function(r){var a=n.slice(0,e(r));return t(a)}}},v=function(){function e(e){var t=this;this.state={isZoomed:!1},this.handleResize=function(){t.render(!1)};var n=e.initialZoomed,r=e.rootElId,a=(0,c.Ys)("#"+r),i=a.append("svg"),o=i.append("g"),u=o.append("g"),l=o.append("g"),s=o.append("path"),d=o.append("path"),f=o.append("text");this.elements={chartText:f,dashedLine:d,fullLine:s,rootEl:a,svg:i,svgG:o,xAxis:u,yAxis:l},this.config=e,this.renderContent(n),window.addEventListener("resize",this.handleResize)}var t=e.prototype;return t.renderContent=function(e){this.state.isZoomed=e,this.render(!0)},t.render=function(e){var t=e?2e3:0,n=this.config,r=n.getDashedLineX,a=n.getDashedLineY,i=n.getFullLineX,o=n.getFullLineY,u=n.lineData,v=n.rootElId,g=this.config,y=this.elements,x=y.chartText,w=y.dashedLine,L=y.fullLine,E=y.svg,Z=y.svgG,b=y.xAxis,D=y.yAxis,T=this.state.isZoomed,C=document.getElementById(v);C.classList.add("trend-line-module--trendLineChart--39352");var k=C.getBoundingClientRect().width-d-f;E.attr("height",m+p+s).attr("width",k+d+f),Z.attr("transform","translate("+d+","+f+")");var V=(0,c.Xf)().range([0,k]).domain((0,c.Wem)(u,i)),Y=(0,c.BYU)().range([m,0]).domain([T?(0,c.VV$)(u,o):0,(0,c.Fp7)(u,o)]),F=(0,c.LLu)(V),z=(0,c.y4O)(Y),A=(0,c.jvg)().x((function(e){return V(i(e))})).y((function(e){return Y(o(e))}));b.attr("class","x "+l).attr("transform","translate(0,"+m+")").call(F),D.attr("class","y "+l).call(z),L.datum(u).interrupt().transition().duration(t).attrTween("d",h({line:A,lineData:u})).attr("class","trend-line-module--line--8249c");var X=(0,c.jvg)().x((function(e){return V(r(e))})).y((function(e){return Y(a(e))}));w.datum(u).attr("d",null).interrupt().transition().delay(t).duration(t).attrTween("d",h({line:X,lineData:u})).attr("class","trend-line-module--rline--34ea5"),x.attr("transform","translate("+.7*k+","+.7*m+")").style("opacity",t?0:1).interrupt().transition().delay(2*t).text(g.chartText).style("opacity",1)},e}(),g="chart",y=function(){var e=(0,i.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.pvA)("/demos/data/d3js/trend-line/data.tsv");case 2:return t=e.sent,n=(0,c.Z1g)("%Y-%m-%d"),e.abrupt("return",t.map((function(e){return{arbitraryValue:+e.value,occurred:n(e.occurred)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){return e.occurred},w=function(e){return e.arbitraryValue},L=function(e){return e.occurred},E=function(e){var t=e.initialZoomed,n=e.lineData,r=function(e){var t={},n=e.length,r=0,a=0,i=0,o=0,u=0;return e.forEach((function(e){a+=e.arbitraryValue,u+=e.arbitraryValue*e.arbitraryValue,i+=e.occurred.getTime()*e.arbitraryValue,r+=e.occurred.getTime(),o+=e.occurred.getTime()*e.occurred.getTime()})),t.slope=(n*i-r*a)/(n*o-r*r),t.intercept=(a-t.slope*r)/n,t.r2=Math.pow((n*i-r*a)/Math.sqrt((n*o-r*r)*(n*u-a*a)),2),t}(n);return{chartText:"Slope: "+r.slope.toExponential(3),getDashedLineX:L,getDashedLineY:function(e){return r.intercept+r.slope*+e.occurred},getFullLineX:x,getFullLineY:w,initialZoomed:t,lineData:n,rootElId:g}},Z=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,r=E({initialZoomed:(n=function(){return document.querySelector('input[value="zoom"]').checked})(),lineData:t}),a=new v(r),(0,c.td_)('input[name="mode"]').on("change",(function(){var e=n();a.renderContent(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Z,D=function(e){var t=e.pageContext;return r.createElement(a.Z,{main:b,pageContext:t},r.createElement("form",null,r.createElement("label",null,r.createElement("input",{defaultChecked:!0,name:"mode",type:"radio",value:"zoom"})," Zoom"),r.createElement("label",null,r.createElement("input",{name:"mode",type:"radio",value:"normal"})," Normal")),r.createElement("div",{id:g}))}},2656:function(e,t,n){e.exports=n(3076)},8634:function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(l){return void n(l)}u.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function u(e){r(o,a,i,u,c,"next",e)}function c(e){r(o,a,i,u,c,"throw",e)}u(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-trend-line-tsx-84027d047d2faaf861e9.js.map