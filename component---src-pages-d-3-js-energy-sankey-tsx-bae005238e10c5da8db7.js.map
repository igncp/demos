{"version":3,"file":"component---src-pages-d-3-js-energy-sankey-tsx-bae005238e10c5da8db7.js","mappings":"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","sources":["webpack://demos/./src/demos/energy-sankey/ui-constants.ts","webpack://demos/./src/demos/energy-sankey/energy-sankey-chart-data.ts","webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/sum.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/max.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/min.js","webpack://demos/./node_modules/d3-sankey/src/align.js","webpack://demos/./node_modules/d3-sankey/src/constant.js","webpack://demos/./node_modules/d3-sankey/src/sankey.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-path/src/path.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/array.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/constant.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/point.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/link/index.js","webpack://demos/./node_modules/d3-sankey/src/sankeyLinkHorizontal.js","webpack://demos/./src/demos/energy-sankey/energy-sankey.module.css","webpack://demos/./src/demos/energy-sankey/sankey-chart.ts","webpack://demos/./src/demos/energy-sankey/energy-sankey.ts","webpack://demos/./src/pages/d3js/energy-sankey.tsx"],"sourcesContent":["const CONTAINER_ID = \"chart\"\nconst ATTR_SANKEY_LINK = \"data-sankey-link\"\nconst ATTR_SANKEY_NODE = \"data-sankey-node\"\nconst TRANSITION_DURATION = 500\n\nexport { ATTR_SANKEY_LINK, ATTR_SANKEY_NODE, CONTAINER_ID, TRANSITION_DURATION }\n","import { format as formatD3, json } from \"d3\"\n\nimport { ChartConfig } from \"./sankey-chart\"\nimport { CONTAINER_ID } from \"./ui-constants\"\n\ntype EnergyDataLink = {\n  source: string\n  target: string\n  value: number // eslint-disable-line id-denylist\n}\n\ntype EnergyDataNode = {\n  category: string\n  name: string\n}\n\ntype EnergyData = {\n  links: EnergyDataLink[]\n  nodes: EnergyDataNode[]\n  units: string\n}\n\nconst fetchData = () =>\n  json(`${ROOT_PATH}data/d3js/energy-sankey/data.json`) as Promise<EnergyData>\n\ntype Config = ChartConfig<EnergyDataNode, EnergyDataLink>\n\nconst getNodeId: Config[\"getNodeId\"] = (energyNode) => energyNode.name\nconst getNodeText: Config[\"getNodeText\"] = (energyNode) => energyNode.name\n\nconst createChartConfig = ({\n  energySankeyData,\n  onNodeClick,\n}: {\n  energySankeyData: EnergyData\n  onNodeClick: Config[\"onNodeClick\"]\n}): Config => {\n  const format = (numberValue: number) => {\n    const formatFn = formatD3(\",.0f\")\n\n    return `${formatFn(numberValue)} ${energySankeyData.units}`\n  }\n\n  const getNodeTitle: Config[\"getNodeTitle\"] = ({ nodeValue, sankeyNode }) =>\n    [\n      sankeyNode.category === sankeyNode.name ? \"\" : sankeyNode.category,\n      sankeyNode.name,\n      format(nodeValue),\n    ]\n      .filter(Boolean)\n      .join(\"\\n\")\n\n  const getLinkTitle: Config[\"getLinkTitle\"] = ({\n    sankeyLink,\n    sankeyLinkSource,\n    sankeyLinkTarget,\n  }) =>\n    `${sankeyLinkSource.name} → ${sankeyLinkTarget.name}\\n${format(\n      sankeyLink.value\n    )}`\n\n  return {\n    chartLinks: energySankeyData.links,\n    chartNodes: energySankeyData.nodes,\n    getLinkTitle,\n    getNodeId,\n    getNodeText,\n    getNodeTitle,\n    onNodeClick,\n    rootElId: CONTAINER_ID,\n  }\n}\n\nexport { createChartConfig, fetchData }\n","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function sum(values, valueof) {\n  var sum = 0;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value = +value) {\n          sum += value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if (_value = +valueof(_value, ++index, values)) {\n          sum += _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return sum;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function max(values, valueof) {\n  var max;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (max < _value || max === undefined && _value >= _value)) {\n          max = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return max;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function min(values, valueof) {\n  var min;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (min > _value || min === undefined && _value >= _value)) {\n          min = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return min;\n}","import { min } from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\nexport function center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n}","export default function constant(x) {\n  return function () {\n    return x;\n  };\n}","import _slicedToArray from \"/home/runner/work/demos/demos/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { max, min, sum } from \"d3-array\";\nimport { justify } from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths(_ref) {\n  var nodes = _ref.nodes;\n\n  var _iterator = _createForOfIteratorHelper(nodes),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var node = _step.value;\n      var y0 = node.y0;\n      var y1 = y0;\n\n      var _iterator2 = _createForOfIteratorHelper(node.sourceLinks),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var link = _step2.value;\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(node.targetLinks),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _link = _step3.value;\n          _link.y1 = y1 + _link.width / 2;\n          y1 += _link.width;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nexport default function Sankey() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1; // extent\n\n  var dx = 24; // nodeWidth\n\n  var dy = 8,\n      py; // nodePadding\n\n  var id = defaultId;\n  var align = justify;\n  var sort;\n  var linkSort;\n  var nodes = defaultNodes;\n  var links = defaultLinks;\n  var iterations = 6;\n\n  function sankey() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments)\n    };\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function (graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function (_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function (_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function (_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function (_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks(_ref2) {\n    var nodes = _ref2.nodes,\n        links = _ref2.links;\n\n    var _iterator4 = _createForOfIteratorHelper(nodes.entries()),\n        _step4;\n\n    try {\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        var _step4$value = _slicedToArray(_step4.value, 2),\n            i = _step4$value[0],\n            node = _step4$value[1];\n\n        node.index = i;\n        node.sourceLinks = [];\n        node.targetLinks = [];\n      }\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n\n    var nodeById = new Map(nodes.map(function (d, i) {\n      return [id(d, i, nodes), d];\n    }));\n\n    var _iterator5 = _createForOfIteratorHelper(links.entries()),\n        _step5;\n\n    try {\n      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n        var _step5$value = _slicedToArray(_step5.value, 2),\n            _i = _step5$value[0],\n            link = _step5$value[1];\n\n        link.index = _i;\n        var source = link.source,\n            target = link.target;\n        if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n        if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n        source.sourceLinks.push(link);\n        target.targetLinks.push(link);\n      }\n    } catch (err) {\n      _iterator5.e(err);\n    } finally {\n      _iterator5.f();\n    }\n\n    if (linkSort != null) {\n      var _iterator6 = _createForOfIteratorHelper(nodes),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _step6$value = _step6.value,\n              sourceLinks = _step6$value.sourceLinks,\n              targetLinks = _step6$value.targetLinks;\n          sourceLinks.sort(linkSort);\n          targetLinks.sort(linkSort);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }\n\n  function computeNodeValues(_ref3) {\n    var nodes = _ref3.nodes;\n\n    var _iterator7 = _createForOfIteratorHelper(nodes),\n        _step7;\n\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var node = _step7.value;\n        node.value = node.fixedValue === undefined ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value)) : node.fixedValue;\n      }\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n  }\n\n  function computeNodeDepths(_ref4) {\n    var nodes = _ref4.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator8 = _createForOfIteratorHelper(current),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var node = _step8.value;\n          node.depth = x;\n\n          var _iterator9 = _createForOfIteratorHelper(node.sourceLinks),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var target = _step9.value.target;\n              next.add(target);\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeHeights(_ref5) {\n    var nodes = _ref5.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator10 = _createForOfIteratorHelper(current),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var node = _step10.value;\n          node.height = x;\n\n          var _iterator11 = _createForOfIteratorHelper(node.targetLinks),\n              _step11;\n\n          try {\n            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n              var source = _step11.value.source;\n              next.add(source);\n            }\n          } catch (err) {\n            _iterator11.e(err);\n          } finally {\n            _iterator11.f();\n          }\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeLayers(_ref6) {\n    var nodes = _ref6.nodes;\n    var x = max(nodes, function (d) {\n      return d.depth;\n    }) + 1;\n    var kx = (x1 - x0 - dx) / (x - 1);\n    var columns = new Array(x);\n\n    var _iterator12 = _createForOfIteratorHelper(nodes),\n        _step12;\n\n    try {\n      for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n        var node = _step12.value;\n        var i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n        node.layer = i;\n        node.x0 = x0 + i * kx;\n        node.x1 = node.x0 + dx;\n        if (columns[i]) columns[i].push(node);else columns[i] = [node];\n      }\n    } catch (err) {\n      _iterator12.e(err);\n    } finally {\n      _iterator12.f();\n    }\n\n    if (sort) {\n      var _iterator13 = _createForOfIteratorHelper(columns),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var column = _step13.value;\n          column.sort(sort);\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n    }\n\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    var ky = min(columns, function (c) {\n      return (y1 - y0 - (c.length - 1) * py) / sum(c, value);\n    });\n\n    var _iterator14 = _createForOfIteratorHelper(columns),\n        _step14;\n\n    try {\n      for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n        var _nodes = _step14.value;\n        var y = y0;\n\n        var _iterator15 = _createForOfIteratorHelper(_nodes),\n            _step15;\n\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var _node = _step15.value;\n            _node.y0 = y;\n            _node.y1 = y + _node.value * ky;\n            y = _node.y1 + py;\n\n            var _iterator16 = _createForOfIteratorHelper(_node.sourceLinks),\n                _step16;\n\n            try {\n              for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                var link = _step16.value;\n                link.width = link.value * ky;\n              }\n            } catch (err) {\n              _iterator16.e(err);\n            } finally {\n              _iterator16.f();\n            }\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n\n        y = (y1 - y + py) / (_nodes.length + 1);\n\n        for (var i = 0; i < _nodes.length; ++i) {\n          var node = _nodes[i];\n          node.y0 += y * (i + 1);\n          node.y1 += y * (i + 1);\n        }\n\n        reorderLinks(_nodes);\n      }\n    } catch (err) {\n      _iterator14.e(err);\n    } finally {\n      _iterator14.f();\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    var columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, function (c) {\n      return c.length;\n    }) - 1));\n    initializeNodeBreadths(columns);\n\n    for (var i = 0; i < iterations; ++i) {\n      var alpha = Math.pow(0.99, i);\n      var beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  } // Reposition each node based on its incoming (target) links.\n\n\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (var i = 1, n = columns.length; i < n; ++i) {\n      var column = columns[i];\n\n      var _iterator17 = _createForOfIteratorHelper(column),\n          _step17;\n\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var target = _step17.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator18 = _createForOfIteratorHelper(target.targetLinks),\n              _step18;\n\n          try {\n            for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n              var _step18$value = _step18.value,\n                  source = _step18$value.source,\n                  _value = _step18$value.value;\n              var v = _value * (target.layer - source.layer);\n              y += targetTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator18.e(err);\n          } finally {\n            _iterator18.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy = (y / w - target.y0) * alpha;\n\n          target.y0 += _dy;\n          target.y1 += _dy;\n          reorderNodeLinks(target);\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  } // Reposition each node based on its outgoing (source) links.\n\n\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (var n = columns.length, i = n - 2; i >= 0; --i) {\n      var column = columns[i];\n\n      var _iterator19 = _createForOfIteratorHelper(column),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var source = _step19.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator20 = _createForOfIteratorHelper(source.sourceLinks),\n              _step20;\n\n          try {\n            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n              var _step20$value = _step20.value,\n                  target = _step20$value.target,\n                  _value2 = _step20$value.value;\n              var v = _value2 * (target.layer - source.layer);\n              y += sourceTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator20.e(err);\n          } finally {\n            _iterator20.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy2 = (y / w - source.y0) * alpha;\n\n          source.y0 += _dy2;\n          source.y1 += _dy2;\n          reorderNodeLinks(source);\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    var i = nodes.length >> 1;\n    var subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  } // Push any overlapping nodes down.\n\n\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      var node = nodes[i];\n\n      var _dy3 = (y - node.y0) * alpha;\n\n      if (_dy3 > 1e-6) node.y0 += _dy3, node.y1 += _dy3;\n      y = node.y1 + py;\n    }\n  } // Push any overlapping nodes up.\n\n\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      var node = nodes[i];\n\n      var _dy4 = (node.y1 - y) * alpha;\n\n      if (_dy4 > 1e-6) node.y0 -= _dy4, node.y1 -= _dy4;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks(_ref7) {\n    var sourceLinks = _ref7.sourceLinks,\n        targetLinks = _ref7.targetLinks;\n\n    if (linkSort === undefined) {\n      var _iterator21 = _createForOfIteratorHelper(targetLinks),\n          _step21;\n\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var _sourceLinks = _step21.value.source.sourceLinks;\n\n          _sourceLinks.sort(ascendingTargetBreadth);\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n\n      var _iterator22 = _createForOfIteratorHelper(sourceLinks),\n          _step22;\n\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _targetLinks = _step22.value.target.targetLinks;\n\n          _targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      var _iterator23 = _createForOfIteratorHelper(nodes),\n          _step23;\n\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var _step23$value = _step23.value,\n              sourceLinks = _step23$value.sourceLinks,\n              targetLinks = _step23$value.targetLinks;\n          sourceLinks.sort(ascendingTargetBreadth);\n          targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n    }\n  } // Returns the target.y0 that would produce an ideal link from source to target.\n\n\n  function targetTop(source, target) {\n    var y = source.y0 - (source.sourceLinks.length - 1) * py / 2;\n\n    var _iterator24 = _createForOfIteratorHelper(source.sourceLinks),\n        _step24;\n\n    try {\n      for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n        var _step24$value = _step24.value,\n            node = _step24$value.target,\n            width = _step24$value.width;\n        if (node === target) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator24.e(err);\n    } finally {\n      _iterator24.f();\n    }\n\n    var _iterator25 = _createForOfIteratorHelper(target.targetLinks),\n        _step25;\n\n    try {\n      for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n        var _step25$value = _step25.value,\n            _node2 = _step25$value.source,\n            _width = _step25$value.width;\n        if (_node2 === source) break;\n        y -= _width;\n      }\n    } catch (err) {\n      _iterator25.e(err);\n    } finally {\n      _iterator25.f();\n    }\n\n    return y;\n  } // Returns the source.y0 that would produce an ideal link from source to target.\n\n\n  function sourceTop(source, target) {\n    var y = target.y0 - (target.targetLinks.length - 1) * py / 2;\n\n    var _iterator26 = _createForOfIteratorHelper(target.targetLinks),\n        _step26;\n\n    try {\n      for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n        var _step26$value = _step26.value,\n            node = _step26$value.source,\n            width = _step26$value.width;\n        if (node === source) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator26.e(err);\n    } finally {\n      _iterator26.f();\n    }\n\n    var _iterator27 = _createForOfIteratorHelper(source.sourceLinks),\n        _step27;\n\n    try {\n      for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n        var _step27$value = _step27.value,\n            _node3 = _step27$value.target,\n            _width2 = _step27$value.width;\n        if (_node3 === target) break;\n        y -= _width2;\n      }\n    } catch (err) {\n      _iterator27.e(err);\n    } finally {\n      _iterator27.f();\n    }\n\n    return y;\n  }\n\n  return sankey;\n}","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path();\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function moveTo(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function lineTo(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {\n    this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    } // Is this arc empty? We’re done.\n\n\n    if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    } // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function rect(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n  },\n  toString: function toString() {\n    return this._;\n  }\n};\nexport default path;","export var slice = Array.prototype.slice;","export default function (x) {\n  return function constant() {\n    return x;\n  };\n}","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import { path } from \"d3-path\";\nimport { slice } from \"../array.js\";\nimport constant from \"../constant.js\";\nimport { x as pointX, y as pointY } from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer,\n        argv = slice.call(arguments),\n        s = source.apply(this, argv),\n        t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function (_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function (_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\nexport function linkVertical() {\n  return link(curveVertical);\n}\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}","import { linkHorizontal } from \"d3-shape\";\n\nfunction horizontalSource(d) {\n  return [d.source.x1, d.y0];\n}\n\nfunction horizontalTarget(d) {\n  return [d.target.x0, d.y1];\n}\n\nexport default function () {\n  return linkHorizontal().source(horizontalSource).target(horizontalTarget);\n}","// extracted by mini-css-extract-plugin\nexport var chartNode = \"energy-sankey-module--chartNode--9f05c\";\nexport var chartLinkG = \"energy-sankey-module--chartLinkG--74bd7\";\nexport var chartLink = \"energy-sankey-module--chartLink--b4a8a\";","import anime from \"animejs\"\nimport chroma from \"chroma-js\"\nimport { Selection, scaleOrdinal, schemePastel2, select } from \"d3\"\nimport {\n  SankeyLink,\n  SankeyNode,\n  sankey as sankeyD3,\n  sankeyLeft,\n  sankeyLinkHorizontal,\n} from \"d3-sankey\"\nimport $ from \"jquery\"\nimport \"jquery-ui/themes/base/all.css\"\n\nimport * as styles from \"./energy-sankey.module.css\"\nimport {\n  ATTR_SANKEY_LINK,\n  ATTR_SANKEY_NODE,\n  TRANSITION_DURATION,\n} from \"./ui-constants\"\n\nif (typeof window !== \"undefined\") {\n  require(\"jquery-ui/ui/widgets/tooltip\")\n}\n\ntype AddedGradients = {\n  [key: string]: boolean\n}\n\ntype State = {\n  addedGradients: AddedGradients\n  isInTransition: boolean\n  linkSelected: boolean\n  selectedNode: string\n}\n\nconst getRandomInt = ({ max, min }: { max: number; min: number }): number => {\n  const minRound = Math.ceil(min)\n  const maxRound = Math.floor(max)\n\n  return Math.floor(Math.random() * (maxRound - minRound + 1)) + minRound\n}\n\nconst createGradients = ({\n  addedGradients,\n  fromColor,\n  svg,\n  toColor,\n}: {\n  addedGradients: AddedGradients\n  fromColor: string\n  svg: Selection<SVGSVGElement, unknown, HTMLElement, unknown>\n  toColor: string\n}): string => {\n  const id = `link-gradient-${fromColor}-${toColor}`.replace(/#/g, \"\")\n\n  if (id in addedGradients) {\n    return id\n  }\n\n  const duration = getRandomInt({\n    max: 3,\n    min: 1,\n  })\n  const colorScale = chroma.scale([fromColor, toColor])\n\n  const text = `\n<linearGradient id=\"${id}\">\n  <stop offset=\"0%\" stop-color=\"${fromColor}\" />\n  <stop offset=\"50%\" stop-color=\"${colorScale(0.5)}\">\n    <animate attributeName=\"offset\"\n      values=\"${[5, 6, 7, 8, 9, 8, 7, 6, 5, 4, 3, 2, 3, 4]\n        .map((offsetValue) => `.${offsetValue}`)\n        .join(\";\")}\"\n      dur=\"${duration}s\"\n      repeatCount=\"indefinite\" />\n  </stop>\n  <stop offset=\"100%\" stop-color=\"${toColor}\" />\n</linearGradient>\n`.trim()\n\n  svg.append(\"defs\").html(text)\n\n  addedGradients[id] = true\n\n  return id\n}\n\nconst sankeyHeight = 1000\nconst legendHeight = 0\nconst svgHeight = sankeyHeight + legendHeight\n\ntype ChartConfig<NodeData, LinkData> = {\n  chartLinks: LinkData[]\n  chartNodes: NodeData[]\n  getLinkTitle: (linkInfo: {\n    sankeyLink: LinkData\n    sankeyLinkSource: NodeData\n    sankeyLinkTarget: NodeData\n  }) => string\n  getNodeId: (node: NodeData) => string\n  getNodeText: (node: NodeData) => string\n  getNodeTitle: (nodeInfo: {\n    nodeValue: number\n    sankeyNode: NodeData\n  }) => string\n  onNodeClick?: (node: NodeData) => boolean\n  rootElId: string\n}\n\ntype ChartElements = {\n  linkG: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  nodeG: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  svg: Selection<SVGSVGElement, unknown, HTMLElement, unknown>\n}\n\nclass SankeyChart<NodeData, LinkData> {\n  private readonly config: ChartConfig<NodeData, LinkData>\n  private readonly state: State = {\n    addedGradients: {},\n    isInTransition: false,\n    linkSelected: false,\n    selectedNode: \"\",\n  }\n\n  private readonly elements: ChartElements\n\n  public constructor(chartConfig: ChartConfig<NodeData, LinkData>) {\n    this.config = chartConfig\n\n    const svg = select(`#${chartConfig.rootElId}`).append(\"svg\")\n    const nodeG = svg.append(\"g\").attr(\"stroke\", \"#000\")\n    const linkG = svg.append(\"g\").attr(\"fill\", \"none\")\n\n    this.elements = {\n      linkG,\n      nodeG,\n      svg,\n    }\n\n    this.render()\n  }\n\n  private render() {\n    const {\n      config: { chartLinks, chartNodes, getNodeId, onNodeClick, rootElId },\n      config: chartConfig,\n      elements,\n    } = this\n\n    const container = document.getElementById(rootElId) as HTMLElement\n\n    const color = (() => {\n      const colorFn = scaleOrdinal(schemePastel2)\n\n      return (sankeyNode: NodeData) => colorFn(getNodeId(sankeyNode))\n    })()\n\n    const { width } = container.getBoundingClientRect()\n\n    elements.svg.attr(\"height\", svgHeight).attr(\"width\", width)\n\n    const sankeyVal = sankeyD3<NodeData, LinkData>()\n      .nodeId(getNodeId)\n      .nodeAlign(sankeyLeft)\n      .nodeWidth(15)\n      .nodePadding(10)\n      .extent([\n        [1, 5],\n        [width - 1, sankeyHeight - 5],\n      ])\n\n    const { links, nodes } = sankeyVal({\n      links: chartLinks.map((sankeyLink) =>\n        Object.assign({}, sankeyLink)\n      ) as unknown as Array<SankeyLink<NodeData, LinkData>>,\n      nodes: chartNodes.map((sankeyNode) =>\n        Object.assign({}, sankeyNode)\n      ) as NodeData[],\n    })\n\n    let lastAnime = () => {}\n\n    const nodeClickHandler = ({\n      linkPath,\n      sankeyNode,\n    }: {\n      linkPath: Selection<\n        SVGPathElement,\n        SankeyLink<NodeData, LinkData>,\n        SVGGElement,\n        unknown\n      >\n      sankeyNode: SankeyNode<NodeData, LinkData>\n    }) => {\n      if (this.state.isInTransition) {\n        return\n      }\n\n      if (onNodeClick) {\n        const shouldPreventDefault = onNodeClick(sankeyNode)\n\n        if (shouldPreventDefault) {\n          return\n        }\n      }\n\n      if (this.state.selectedNode === getNodeId(sankeyNode)) {\n        linkPath.attr(\"display\", null).style(\"opacity\", null)\n        this.state.selectedNode = \"\"\n      } else {\n        this.state.isInTransition = true\n\n        if (this.state.selectedNode) {\n          linkPath\n            .style(\"opacity\", (sankeyLink) =>\n              [\n                getNodeId(sankeyLink.source as NodeData),\n                getNodeId(sankeyLink.target as NodeData),\n              ].includes(this.state.selectedNode)\n                ? null\n                : 0\n            )\n            .attr(\"display\", null)\n        }\n\n        requestAnimationFrame(() => {\n          linkPath\n            .transition()\n            .duration(TRANSITION_DURATION)\n            .style(\"opacity\", (sankeyLink) =>\n              [\n                getNodeId(sankeyLink.source as NodeData),\n                getNodeId(sankeyLink.target as NodeData),\n              ].includes(getNodeId(sankeyNode))\n                ? null\n                : 0\n            )\n            .on(\"end\", () => {\n              this.state.isInTransition = false\n              linkPath.attr(\"display\", (sankeyLink) =>\n                [\n                  getNodeId(sankeyLink.source as NodeData),\n                  getNodeId(sankeyLink.target as NodeData),\n                ].includes(getNodeId(sankeyNode))\n                  ? null\n                  : \"none\"\n              )\n            })\n\n          this.state.selectedNode = getNodeId(sankeyNode)\n        })\n      }\n    }\n\n    const node = elements.nodeG\n      .selectAll(\"rect\")\n      .data<SankeyNode<NodeData, LinkData>>(nodes)\n      .join(\"rect\")\n      .attr(\"class\", styles.chartNode)\n      .attr(\"x\", (sankeyNode) => sankeyNode.x0!)\n      .attr(\"y\", (sankeyNode) => sankeyNode.y0!)\n      .attr(\"height\", (sankeyNode) => sankeyNode.y1! - sankeyNode.y0!)\n      .attr(\"width\", (sankeyNode) => sankeyNode.x1! - sankeyNode.x0!)\n      .attr(ATTR_SANKEY_NODE, true)\n      .attr(\"fill\", color)\n      .on(\"mouseenter\", function onMouseEnter() {\n        lastAnime()\n\n        const animationFirst = anime({\n          direction: \"alternate\",\n          duration: 1000,\n          easing: \"easeInOutSine\",\n          loop: false,\n          strokeDashoffset: [anime.setDashoffset, 0],\n          targets: this,\n        })\n        const animationSecond = anime({\n          direction: \"alternate\",\n          duration: 2000,\n          easing: \"spring(1, 80, 10, 0)\",\n          loop: true,\n          opacity: [0.6, 1, 0.6],\n          targets: this,\n        })\n\n        lastAnime = () => {\n          animationFirst.seek(animationFirst.duration)\n          animationSecond.seek(0)\n          anime.remove(this)\n          lastAnime = () => {}\n        }\n      })\n      .on(\"mouseleave\", () => {\n        lastAnime()\n      })\n      .on(\"click\", (...[, sankeyNode]) => {\n        nodeClickHandler({\n          linkPath, // eslint-disable-line @typescript-eslint/no-use-before-define\n          sankeyNode,\n        })\n      })\n\n    node.attr(\"title\", (sankeyNode) =>\n      chartConfig.getNodeTitle({\n        nodeValue: sankeyNode.value!,\n        sankeyNode,\n      })\n    )\n\n    $(`.${styles.chartNode}`).tooltip({\n      track: true,\n    })\n\n    const link = elements.linkG\n      .selectAll(\"g\")\n      .data<SankeyLink<NodeData, LinkData>>(links)\n      .join(\"g\")\n      .attr(\"class\", styles.chartLinkG)\n\n    const linkPathGenerator = sankeyLinkHorizontal()\n    const { state } = this\n\n    const linkPath = link\n      .append(\"path\")\n      .attr(\"d\", (sankeyLink) => {\n        const isHorizontalLine = sankeyLink.y0 === sankeyLink.y1\n\n        return linkPathGenerator(\n          // this is necessary for the default gradientUnits (objectBoundingBox) to work\n          // https://stackoverflow.com/a/34687362\n          isHorizontalLine\n            ? {\n                ...sankeyLink,\n                y1: sankeyLink.y1! + 0.1,\n              }\n            : sankeyLink\n        )\n      })\n      .attr(\"stroke\", (sankeyLink) => {\n        const fromColor = color(sankeyLink.source as NodeData)\n        const toColor = color(sankeyLink.target as NodeData)\n\n        const id = createGradients({\n          addedGradients: state.addedGradients,\n          fromColor,\n          svg: elements.svg,\n          toColor,\n        })\n\n        return `url(#${id})`\n      })\n      .attr(ATTR_SANKEY_LINK, true)\n      .attr(\"class\", styles.chartLink)\n      .attr(\"stroke-width\", (sankeyLink) => Math.max(1, sankeyLink.width!))\n      .on(\"click\", function onLinkClick() {\n        if (state.isInTransition) {\n          return\n        }\n\n        const currentLink = select(this)\n\n        if (state.linkSelected) {\n          linkPath.attr(\"display\", null).style(\"opacity\", null)\n        } else {\n          linkPath.attr(\"display\", \"none\")\n          currentLink.attr(\"display\", null)\n        }\n\n        state.selectedNode = \"\"\n        state.linkSelected = !state.linkSelected\n      })\n\n    link.attr(\"title\", (sankeyLink) =>\n      chartConfig.getLinkTitle({\n        sankeyLink,\n        sankeyLinkSource: sankeyLink.source as NodeData,\n        sankeyLinkTarget: sankeyLink.target as NodeData,\n      })\n    )\n\n    $(`.${styles.chartLink}`).tooltip({\n      track: true,\n    })\n\n    elements.nodeG.each(function appendOnEnd(this) {\n      const parentEl = this.parentNode as HTMLElement\n\n      parentEl.appendChild(this)\n    })\n\n    elements.svg\n      .append(\"g\")\n      .attr(\"font-family\", \"sans-serif\")\n      .selectAll(\"text\")\n      .data(nodes)\n      .join(\"text\")\n      .attr(\"x\", (sankeyNode) =>\n        sankeyNode.x0! < width / 2 ? sankeyNode.x1! + 6 : sankeyNode.x0! - 6\n      )\n      .attr(\"y\", (sankeyNode) => (sankeyNode.y1! + sankeyNode.y0!) / 2)\n      .attr(\"dy\", \"0.35em\")\n      .style(\"font-size\", \"16px\")\n      .attr(\"text-anchor\", (sankeyNode) =>\n        sankeyNode.x0! < width / 2 ? \"start\" : \"end\"\n      )\n      .style(\"pointer-events\", \"none\")\n      .text(chartConfig.getNodeText)\n  }\n}\n\nexport { SankeyChart, ChartConfig }\n","import hotkeys from \"hotkeys-js\"\nimport qs from \"query-string\"\n\nimport { createChartConfig, fetchData } from \"./energy-sankey-chart-data\"\nimport { SankeyChart } from \"./sankey-chart\"\nimport { CONTAINER_ID } from \"./ui-constants\"\n\nconst main = async () => {\n  hotkeys(\"control\", () => {})\n\n  const energySankeyData = await fetchData()\n\n  const chartConfig = createChartConfig({\n    energySankeyData,\n    onNodeClick: (node) => {\n      if (!hotkeys.isPressed(\"control\")) {\n        return false\n      }\n\n      window.open(\n        `https://www.google.com/search?${qs.stringify({\n          ie: \"UTF-8\",\n          q: `Energy ${node.name}`,\n        })}`\n      )\n\n      return true\n    },\n  })\n\n  new SankeyChart(chartConfig)\n}\n\nexport { CONTAINER_ID }\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main, { CONTAINER_ID } from \"@/demos/energy-sankey/energy-sankey\"\n\nconst EnergySankey = ({ pageContext }: DemoPageProps) => (\n  <Demo main={main} pageContext={pageContext}>\n    <div id={CONTAINER_ID} />\n  </Demo>\n)\n\nexport default EnergySankey\n"],"names":["CONTAINER_ID","getNodeId","energyNode","name","getNodeText","createChartConfig","energySankeyData","onNodeClick","format","numberValue","formatD3","formatFn","units","chartLinks","links","chartNodes","nodes","getLinkTitle","sankeyLink","sankeyLinkSource","sankeyLinkTarget","value","getNodeTitle","nodeValue","sankeyNode","category","filter","Boolean","join","rootElId","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","from","test","_unsupportedIterableToArray","length","i","F","s","done","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","sum","values","valueof","undefined","_step","_iterator","_step2","index","_iterator2","_value","max","left","node","depth","justify","sourceLinks","constant","x","ascendingSourceBreadth","a","b","ascendingBreadth","source","ascendingTargetBreadth","target","y0","d","defaultId","defaultNodes","graph","defaultLinks","find","nodeById","id","get","Error","computeLinkBreadths","_ref","y1","link","width","_step3","_iterator3","targetLinks","_link","Sankey","py","sort","linkSort","x0","x1","dx","dy","align","iterations","sankey","apply","arguments","computeNodeLinks","computeNodeValues","computeNodeDepths","computeNodeHeights","computeNodeBreadths","_ref2","_step4","_iterator4","entries","_step4$value","_step5","Map","map","_iterator5","_step5$value","_i","push","_step6","_iterator6","_step6$value","_ref3","_step7","_iterator7","fixedValue","Math","_ref4","current","Set","size","_step8","_iterator8","_step9","_iterator9","add","_ref5","_step10","_iterator10","height","_step11","_iterator11","initializeNodeBreadths","columns","_step14","ky","min","c","_iterator14","_step15","_nodes","y","_iterator15","_node","_step16","_iterator16","reorderLinks","_ref6","_step12","kx","_iterator12","floor","layer","_step13","_iterator13","computeNodeLayers","alpha","pow","beta","relaxRightToLeft","relaxLeftToRight","_step17","column","_iterator17","_step18","w","_iterator18","_step18$value","v","targetTop","_dy","reorderNodeLinks","resolveCollisions","_step19","_iterator19","_step20","_iterator20","_step20$value","sourceTop","_dy2","subject","resolveCollisionsBottomToTop","resolveCollisionsTopToBottom","_dy3","_dy4","_ref7","_step21","_iterator21","_step22","_iterator22","_step23","_iterator23","_step23$value","_step24","_iterator24","_step24$value","_step25","_iterator25","_step25$value","_node2","_width","_step26","_iterator26","_step26$value","_step27","_iterator27","_step27$value","_node3","_width2","update","nodeId","_","nodeAlign","nodeSort","nodeWidth","nodePadding","extent","pi","PI","tau","epsilon","tauEpsilon","Path","this","_x0","_y0","_x1","_y1","path","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","x2","y2","arcTo","r","x21","y21","x01","y01","l01_2","abs","x20","y20","l21_2","l20_2","l21","sqrt","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","cos","sin","cw","da","rect","h","p","linkSource","linkTarget","curve","context","buffer","argv","t","curveHorizontal","horizontalSource","horizontalTarget","chartNode","chartLink","window","require","createGradients","addedGradients","fromColor","svg","toColor","replace","duration","minRound","ceil","maxRound","random","getRandomInt","text","chroma","colorScale","offsetValue","trim","append","html","SankeyChart","chartConfig","state","isInTransition","linkSelected","selectedNode","config","select","nodeG","attr","linkG","elements","render","colorFn","container","document","getElementById","color","scaleOrdinal","schemePastel2","getBoundingClientRect","sankeyHeight","sankeyD3","sankeyLeft","sankeyVal","assign","lastAnime","nodeClickHandler","linkPath","style","includes","requestAnimationFrame","transition","on","selectAll","data","styles","animationFirst","anime","direction","easing","loop","strokeDashoffset","targets","animationSecond","opacity","seek","$","tooltip","track","linkPathGenerator","sankeyLinkHorizontal","isHorizontalLine","currentLink","each","parentNode","appendChild","main","hotkeys","json","ROOT_PATH","open","qs","ie","q","pageContext"],"sourceRoot":""}