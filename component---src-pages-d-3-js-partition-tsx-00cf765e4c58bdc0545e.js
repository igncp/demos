"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[505],{9646:function(t,e,n){var a;n.d(e,{Z:function(){return v}});var r=new Uint8Array(16);function o(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(r)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(t){return"string"==typeof t&&i.test(t)},d=[],u=0;u<256;++u)d.push((u+256).toString(16).substr(1));var c,l,f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n},h=0,p=0;var v=function(t,e,n){var a=e&&n||0,r=e||new Array(16),i=(t=t||{}).node||c,s=void 0!==t.clockseq?t.clockseq:l;if(null==i||null==s){var d=t.random||(t.rng||o)();null==i&&(i=c=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==s&&(s=l=16383&(d[6]<<8|d[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,g=u-h+(v-p)/1e4;if(g<0&&void 0===t.clockseq&&(s=s+1&16383),(g<0||u>h)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=u,p=v,l=s;var m=(1e4*(268435455&(u+=122192928e5))+v)%4294967296;r[a++]=m>>>24&255,r[a++]=m>>>16&255,r[a++]=m>>>8&255,r[a++]=255&m;var y=u/4294967296*1e4&268435455;r[a++]=y>>>8&255,r[a++]=255&y,r[a++]=y>>>24&15|16,r[a++]=y>>>16&255,r[a++]=s>>>8|128,r[a++]=255&s;for(var x=0;x<6;++x)r[a+x]=i[x];return e||f(r)}},9144:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});var a=n(7294),r=n(1745),o=n(5861),i=n(7757),s=n.n(i),d=n(5633),u=n(8747),c=n.n(u),l=n(9646),f="chart",h="type-form",p="color-method",v="data-id",g=function(){function t(t){this.state={x:0,y:0},this.elements=t,this.setupDrag()}return t.prototype.setupDrag=function(){var t=this,e=this.elements,n=e.container,a=e.dragSurface,r=function(e){t.state.x+=e.dx,t.state.y+=e.dy,a.attr("transform","translate("+t.state.x+","+t.state.y+")")},o=(0,d.ohM)().on("drag",r);n.style("cursor","move").call(o).on("drag",r).on("wheel",null)},t}(),m=n(2982),y=function(t){var e,n,a,r,o;return{depth:null!==(e=null==t?void 0:t.depth)&&void 0!==e?e:0,x0:null!==(n=null==t?void 0:t.x0)&&void 0!==n?n:0,x1:null!==(a=null==t?void 0:t.x1)&&void 0!==a?a:0,y0:null!==(r=null==t?void 0:t.y0)&&void 0!==r?r:0,y1:null!==(o=null==t?void 0:t.y1)&&void 0!==o?o:0}},x=function(t){var e=t.fn,n=t.getNodeId,a=t.initialData,r=t.isText;return function(t){var o=a.find((function(e){return e&&n(e.data)===n(t.data)})),i=y(t),s=y(o),u=i.x0===i.x1||r&&0===t.depth?i:Object.assign({},s,{y0:i.y0,y1:i.y1}),c=(0,d.sXR)(u,i);return function(t){var n=c(t);return e(n)}}},w=function(){function t(t){this.config=t,this.state={descendants:[],focusedPath:[]},this.state.descendants=this.getDataHierarchy()}var e=t.prototype;return e.setDescendants=function(){this.state.descendants=this.getDataHierarchy()},e.getDescendants=function(){return this.state.descendants},e.getDataHierarchy=function(){var t=this.config,e=t.getHierarchySum,n=t.getNodeId,a=t.rootData,r=this.state.focusedPath,o=this.config.getMaxRadius(),i=function t(e){var n=e.children;return n?Math.max.apply(Math,(0,m.Z)(n.map((function(e){return t(e)}))))+1:0},s=function t(e){var a=e.level,o=e.node,i=r[a],s="number"==typeof i,d=Object.assign({},"children"in o&&{children:o.children.filter((function(t){return!s||n(t)===i})).map((function(e){return t({level:a+1,node:e})}))});return Object.assign({},o,d)}({level:0,node:a});return function(t){var e=t.getHierarchySum,n=t.radius,a=t.rootNode;return(0,d.uKc)().size([2*Math.PI,n])((0,d.bT9)(a).sum(e)).descendants()}({getHierarchySum:e,radius:o/i(a)*i(s),rootNode:s})},e.setFocusedPathFromNode=function(t){var e=this.config.getNodeId;this.state.focusedPath=function t(n){return n.parent?t(n.parent).concat([e(n.data)]):[]}(t)},e.getFocusedPathRef=function(){return this.state.focusedPath},e.setFocusedPath=function(t){this.state.focusedPath=t},t}();"undefined"!=typeof window&&n(5356);var M="#de7c03",N=d.nmz,D=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0},C=function(t){return Math.abs(t.x0-t.x1)*t.y1<25?0:t.x0<=Math.PI/2&&t.x1>=3*Math.PI/2?1:Math.abs((t.x0+t.x1)/2-Math.PI)<.2&&0!==t.depth?0:1};function S(){var t=(0,d.Ys)(this).node();t.parentNode.prepend(t)}var b,E,I,P=function(){function t(t){var e=this;this.getPathStrokeColor=function(t){var n=e.dataModule.getFocusedPathRef(),a=e.config.getNodeId;return n.includes(a(t.data))?"darkred":"#000"},this.fillColor=function(t){var n=e.dataModule.getFocusedPathRef(),a=e.colorScale,r=e.config,o=r.getNodeColorOption,i=r.getNodeId;return n.includes(i(t.data))?"#f6ddf2":a(o({depth:t.depth,node:t.data}))},this.handleResize=function(){e.render()},this.config=t;var n=t.getHierarchySum,a=t.getNodeId,r=t.rootData;this.dataModule=new w({getHierarchySum:n,getMaxRadius:function(){return e.getDimensions().radius},getNodeId:a,rootData:r});var o=t.rootElId,i=(0,d.Ys)("#"+o).append("svg"),s=i.append("g"),u=s.append("g");new g({container:i,dragSurface:s}),this.state={drag:{x:0,y:0},isClearingSelection:!1},this.selectors={path:"path-"+(0,l.Z)().slice(0,6),text:"text-"+(0,l.Z)().slice(0,6)},this.dataModule.setDescendants(),this.colorScale=(0,d.PKp)(d.rp.concat(d.i4X)),this.elements={svg:i,svgDrag:s,svgG:u},window.addEventListener("resize",this.handleResize)}var e=t.prototype;return e.update=function(){this.dataModule.setDescendants(),this.renderDescendants()},e.render=function(){var t=this.getDimensions().width,e=this.elements,n=e.svg,a=e.svgG;n.attr("width",t).attr("height",700),a.attr("transform","translate("+t/2+",364)"),this.renderDescendants()},e.getDimensions=function(){var t=this.config.rootElId,e=document.getElementById(t).getBoundingClientRect().width,n=Math.max(e,700);return{chartWidth:n,radius:Math.min(n,700)/2,width:e}},e.renderDescendants=function(){var t=this,e=this.config,n=e.getColorOptions,a=e.getNodeId,r=e.getNodeLabel,o=e.getNodeTitle,i=this.elements.svgG,s=this.selectors,u=this.dataModule.getDescendants(),l=new Set;u.forEach((function(t){l.add(t.depth)})),this.colorScale.domain(n({depths:Array.from(l),nodes:u.map((function(t){return t.data}))}));var f=(0,d.Nb1)().startAngle((function(t){return t.x0})).endAngle((function(t){return t.x1})).innerRadius((function(t){return t.y0})).outerRadius((function(t){return t.y1})).padAngle(.01),h=function(t){return function(e){if(!e.depth)return"";var n,a=t.centroid(Object.assign({},e,{x0:(n=e.x0,n+.05*(n>Math.PI?-1:1))}));return["rotate("+function(){if(e.x0<=Math.PI/2&&e.x1>=3*Math.PI/2)return 0;var t=90+180*(e.x0+(e.x1-e.x0)/2)/Math.PI;return t>90&&t<270?t-180:t}()+","+a[0]+","+a[1]+")","translate("+a[0]+","+a[1]+")"].join(" ")}}(f),p=i.selectAll("path"),g=p.data(),m=p.data(u,(function(t){return"path-"+a(t.data)})),w=this.state.isClearingSelection?0:2e3;this.state.isClearingSelection=!1;var b=function(t){return!D()||0===t.depth},E=function(t){t.style("cursor",(function(t){return b(t)?"pointer":"move"}))},I=function(e){e.attr(v,(function(t){return a(t.data)})).style("fill",t.fillColor).style("stroke",t.getPathStrokeColor).call(E)},P=m.enter().append("path").attr("class",s.path).style("stroke-width","3px").style("stroke-dasharray","1,3").attr("d",f).call(I),k=m.exit();k.each(S),k.transition().duration(w).ease(N).attrTween("d",(function(t){var e=y(t),n=(0,d.sXR)(e,Object.assign({},e,{x0:0,x1:0}));return function(t){var e=n(t);return f(e)}})).remove(),m.call(I).transition().duration(w).ease(N).attrTween("d",x({fn:f,getNodeId:a,initialData:g,isText:!1}));var A=i.selectAll("text"),R=A.data(),T=A.data(u,(function(t){return"text-"+a(t.data)}));T.exit().remove();var z=function(t){t.text((function(t){var e=r(t.data);return e.length>8?e.slice(0,8)+"...":e})).attr(v,(function(t){return a(t.data)})).call(E)},H=T.enter().append("text").attr("class",s.text).style("fill","#333").style("cursor","default").style("font","bold 12px Arial").attr("text-anchor","middle").attr("transform",h).style("opacity",C).call(z);H.each(S),P.each(S),T.call(z).transition("movement").duration(w).ease(N).attrTween("transform",x({fn:h,getNodeId:a,initialData:R,isText:!0})),T.transition("opacity").duration(w).ease(N).style("opacity",C),[P,H].forEach((function(e){e.on("mouseover",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1],o=a(r.data);b(r)&&(i.selectAll('path[data-id="'+o+'"]').style("fill",M),i.select('text[data-id="'+o+'"]').style("fill","white"))})),e.on("mouseout",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[1],s=a(o.data);i.selectAll('path[data-id="'+s+'"]').style("fill",t.fillColor),i.select('text[data-id="'+s+'"]').style("fill","#000")})),e.on("click",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[1],s=t.dataModule.getFocusedPathRef(),d=a(o.data);if(o.parent)if(s.includes(d)){var u=s.indexOf(d);t.dataModule.setFocusedPath(s.slice(0,u))}else t.dataModule.setFocusedPathFromNode(o);else t.dataModule.setFocusedPath([]),t.state.isClearingSelection=!0;i.selectAll('path[data-id="'+d+'"]').style("fill",t.fillColor),i.select('text[data-id="'+d+'"]').style("fill",null),t.dataModule.setDescendants(),t.renderDescendants()})),e.attr("title",(function(t){return o({nodeData:t.data,valueNum:t.value})}))})),D()||(c()("."+s.path).tooltip({track:!0}),c()("."+s.text).tooltip({track:!0}))},t}();!function(t){t.count="count",t.size="size"}(E||(E={})),function(t){t.depth="depth",t.id="id"}(I||(I={}));var k=((b={})[I.depth]="Node depth",b[I.id]="Node ID",b),A=function(){var t={colorMethod:I.id,partitionType:E.count},e=document.getElementById(h),n=document.getElementById(p);Object.values(I).forEach((function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];var r=e[0],o=document.createElement("option");o.setAttribute("value",r),o.innerHTML=k[r],n.appendChild(o)})),n.value=t.colorMethod;var a=function(){};e.addEventListener("change",(function(){t.partitionType=Array.from(e.elements).find((function(t){return t.checked})).value,t.colorMethod=n.value,a()}));return{formState:t,onStateChangeHandler:function(t){a=t}}},R=function(){var t=(0,o.Z)(s().mark((function t(){var e,n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.AVB)("/demos/data/d3js/partition/flare.json");case 2:return e=t.sent,n=0,a=function t(e){var a=n+=1,r="children"in e?e.children.map(t):null;return Object.assign({},e,r&&{children:r},{id:a})},t.abrupt("return",a(e));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(t){return t.name},z=function(t){var e=t.nodeData,n=t.valueNum;return'Name: "'+e.name+'"\nSize: '+("number"==typeof e.size?e.size.toLocaleString("en-GB"):"-")+"\nValue: "+("number"==typeof n?n.toLocaleString("en-GB"):"-")},H=function(t){return t.id},O=function(t){var e=t.rootData,n=t.state,a=new Set;!function t(e){var n,r=e.id;(a.add(r),"children"in e)&&(null===(n=e.children)||void 0===n||n.forEach(t))}(e);return{getColorOptions:function(t){var e=t.depths;return n.colorMethod===I.depth?e:Array.from(a)},getHierarchySum:function(t){var e;return n.partitionType===E.count?1:null!==(e=t.size)&&void 0!==e?e:0},getNodeColorOption:function(t){var e=t.depth,a=t.node;return n.colorMethod===I.depth?e:a.id},getNodeId:H,getNodeLabel:T,getNodeTitle:z,rootData:e,rootElId:f}},j=function(){var t=(0,o.Z)(s().mark((function t(){var e,n,a,r,o,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=A(),n=e.formState,a=e.onStateChangeHandler,t.next=3,R();case 3:r=t.sent,o=O({rootData:r,state:n}),(i=new P(o)).render(),a((function(){i.update()}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=j,L="partition-page-module--label--4f05c",B=function(t){var e=t.pageContext;return a.createElement(r.Z,{main:F,pageContext:e},a.createElement("form",{className:"partition-page-module--form--e20ba",id:h},a.createElement("span",null,a.createElement("span",null,"Color Method: "),a.createElement("select",{className:"form-select partition-page-module--colorSelect--4faaa",id:p})),a.createElement("div",{className:"partition-page-module--radios--886a8"},a.createElement("label",{className:L},a.createElement("input",{className:"form-check-inpu",name:"mode",type:"radio",value:"size"})," ","Size"),a.createElement("label",{className:L},a.createElement("input",{defaultChecked:!0,name:"mode",type:"radio",value:"count"})," Count"))),a.createElement("div",{id:f}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-partition-tsx-00cf765e4c58bdc0545e.js.map