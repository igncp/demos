(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[540],{3244:function(t,a,e){"use strict";var n=e(8314),r=e(2492),i=e.n(r),s={colorsScale:function(t,a){var e=n.BYU().domain(a).range([0,1]),r=n.BYU().domain(n.w6H(0,1,1/t.length)).range(t);return function(t){return r(e(t))}},filterBlackOpacity:function(t,a,e,n){var r=a.append("defs").append("filter").attr("height","500%").attr("id","drop-shadow-"+t).attr("width","500%").attr("x","-200%").attr("y","-200%");r.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",e),r.append("feOffset").attr("dx",1).attr("dy",1),r.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear");var i=r.append("feMerge");return i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")},filterColor:function(t,a,e,n,r){null==r&&(r=!1);var i=a.append("defs").append("filter").attr("id","drop-shadow-"+t);return r&&i.attr("height","500%").attr("width","500%").attr("x","-200%").attr("y","-200%"),i.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),i.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",e),i.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),i.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear")},middleTitle:function(t,a,e,n){null==n&&(n=-15),t.append("text").attr("class","chart-title").attr("text-anchor","middle").attr("transform","translate("+String(a/2)+","+n+")").text(e).style("font-weight","bold")},svg:function(t,a,e,r){return n.Ys(t).text("").append("svg").attr("height",e+r.top+r.bottom).attr("width",a+r.left+r.right).append("g").attr("transform","translate("+r.left+","+r.top+")")},tooltip:function(t,a){null==a&&(a={});var e=i()({elementSelector:"",followElement:!1,followMouse:!1,leftOffst:60,tOpts:{container:"body",viewport:{selector:"#chart svg"}},topOffst:40},a);$(t).tooltip(e.tOpts),e.followMouse?$(t).hover((function(t){return $(".tooltip").css({left:String(t.pageX-e.leftOffst)+"px",top:String(t.pageY-e.topOffst)+"px"})})):e.followElement&&$(t).hover((function(){return $(".tooltip").css({left:String($(e.elementSelector).position().left-e.leftOffst)+"px",top:String($(e.elementSelector).position().top-e.topOffst)+"px"})}))}};a.Z=s},6033:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return g}});var n=e(7294),r=e(2247),i=e(2137),s=e(7757),o=e.n(s),d=e(8314),l=e(3244),c={bottom:0,left:20,right:20,top:60},u=700-c.top-c.bottom,h=function(t){var a=d.Z1g("%Y-%m-%d")(t);if(null!==a)return a;var e=isNaN(Number(t))?-t.replace(/[^0-9]/g,""):+t;return e<0||e>99?a=new Date(e,6,1):0===e?a=new Date(-1,6,1):(a=new Date(e,6,1)).setUTCFullYear(e),a},f=function(t){var a=t.getUTCFullYear();return a>=0?a.toString():" BC"+Math.abs(a)},p=function(){function t(t){var a=t.rootElId,e=document.getElementById(a);e.classList.add("timeline-chart");var n=e.getBoundingClientRect().width;this.width=n-c.left-c.right,this.bandY=0,this.bandNum=0,this.dataContent={},this.components=[],this.bands={};var r=l.Z.svg("#"+a,n,700,c);l.Z.middleTitle(r,n,"Philosophers through History",-20),l.Z.filterBlackOpacity("intervals",r,1,.2),r.append("clipPath").attr("id","chart-area").append("rect").attr("width",this.width).attr("height",u),r.on("mouseup",(function(){return d.td_(".interval rect").style("filter","url(#drop-shadow-intervals)")})),this.chart=r.append("g").attr("class","chart").attr("clip-path","url(#chart-area)")}var a=t.prototype;return a.data=function(t){var a=this,e=new Date,n=[];this.dataContent.items=t;var r=function(t,a){var e=t.start-a.start;return e<0?-1:e>0?1:(e=a.end-t.end)<0?-1:e>0?1:0},i=function(t,a){var e=t.start-a.start;return e<0?1:e>0?-1:(e=a.end-t.end)<0?1:e>0?-1:0};return this.dataContent.items.forEach((function(t){t.start=h(t.start),""===t.end?(t.end=new Date(t.start.getTime()+316224e7),t.instant=!0):(t.end=h(t.end),t.instant=!1),t.end>e&&(t.end=e)})),function(t,e,s){s=s||"backward";"ascending"===(e=e||"descending")?a.dataContent.items.sort(r):a.dataContent.items.sort(i),"forward"===s?t.forEach((function(t){for(var a=0,e=0,r=0,i=n.length;(0<=i?r<i:r>i)&&!(t.start>n[e]);e=0<=i?++r:--r)a++;t.track=a,n[a]=t.end})):t.forEach((function(t){for(var a=0,e=0,r=0,i=n.length;(0<=i?r<i:r>i)&&!(t.end<n[e]);e=0<=i?++r:--r)a++;t.track=a,n[a]=t.start}))}(this.dataContent.items,"descending","backward"),this.dataContent.nTracks=n.length,this.dataContent.minDate=d.VV$(this.dataContent.items,(function(t){return t.start})),this.dataContent.maxDate=d.Fp7(this.dataContent.items,(function(t){return t.end})),this},a.xAxis=function(t){var a=this.bands[t],e=d.LLu(a.xScale).tickSize(6,0).tickFormat((function(t){return f(t)})),n=this.chart.append("g").attr("class","axis").attr("transform","translate(0,"+(a.y+a.h)+")");return n.redraw=function(){return n.call(e)},a.parts.push(n),this.components.push(n),this},a.createTooltip=function(){return l.Z.tooltip(".part.instant, .part.interval",{followMouse:!0,leftOffst:80}),this},a.band=function(t,a){var e={};e.id="band"+this.bandNum,e.x=0,e.y=this.bandY,e.w=this.width,e.h=u*(a||1),e.trackOffset=0,e.trackHeight=Math.min((e.h-e.trackOffset)/this.dataContent.nTracks,20),e.itemHeight=.7*e.trackHeight,e.parts=[],e.instantWidth=100,e.xScale=d.Xf().domain([this.dataContent.minDate,this.dataContent.maxDate]).range([0,e.w]),e.yScale=function(t){return e.trackOffset+t*e.trackHeight},e.yearsScale=this.dataContent.maxDate.getUTCFullYear()-this.dataContent.minDate.getUTCFullYear(),e.g=this.chart.append("g").attr("id",e.id).attr("transform","translate(0,"+e.y+")"),e.g.append("rect").attr("class","band").attr("width",e.w).attr("height",e.h);var n=e.g.selectAll("g").data(this.dataContent.items).enter().append("svg").attr("y",(function(t){return e.yScale(t.track)})).attr("height",e.itemHeight).attr("data-title",(function(t){return t.instant?t.label+": "+f(t.start):t.label+": "+f(t.start)+" - "+f(t.end)})).attr("class",(function(t){return t.instant?"part instant":"part interval"})),r=d.Ys("#band"+this.bandNum).selectAll(".interval");r.append("rect").attr("height","80%").attr("width","80%").attr("x","1px").attr("y",".5px").style("filter","url(#drop-shadow-intervals)"),r.append("text").attr("class","intervalLabel").attr("x",3).attr("y",9.5);var i=d.Ys("#band"+this.bandNum).selectAll(".instant");return i.append("circle").attr("cx",e.itemHeight/2).attr("cy",e.itemHeight/2).attr("r",5),i.append("text").attr("class","instantLabel").attr("x",15).attr("y",10),e.addActions=function(t){return t.forEach((function(t){return n.on(t[0],t[1])}))},e.redraw=function(){return n.attr("x",(function(t){return e.xScale(t.start)})).attr("width",(function(t){return e.xScale(t.end)-e.xScale(t.start)})).select("text").text((function(t){var a=(e.xScale(t.end)-e.xScale(t.start))/9;return t.label.length>a?t.label.substr(0,a-1)+"..":t.label})),e.parts.forEach((function(t){return t.redraw()}))},this.bands[t]=e,this.components.push(e),this.bandY+=e.h+25,this.bandNum+=1,this},a.labels=function(t){var a=this.bands[t],e=a.y+a.h-10,n=[["start","bandMinMaxLabel",0,4,function(t){return f(t)},"Start of the selected interval",a.x+30,e],["end","bandMinMaxLabel",a.w-46,a.w-4,function(t,a){return f(a)},"End of the selected interval",a.x+a.w-152,e],["middle","bandMidLabel",(a.w-46)/2,a.w/2,function(t,a){return a.getUTCFullYear()-t.getUTCFullYear()},"Length of the selected interval",a.x+a.w/2-75,e]],r=this.chart.append("g").attr("id",t+"Labels").attr("transform","translate(0,"+(a.y+a.h+1)+")").selectAll("#"+t+"Labels").data(n).enter().append("g");r.append("rect").attr("class","bandLabel").attr("x",(function(t){return t[2]})).attr("width",46).attr("height",20).style("opacity",1);var i=r.append("text").attr("class",(function(t){return t[1]})).attr("id",(function(t){return t[0]})).attr("x",(function(t){return t[3]})).attr("y",15).attr("text-anchor",(function(t){return t[0]}));return i.redraw=function(){var t=a.xScale.domain()[0],e=a.xScale.domain()[1];return i.text((function(a){return a[4](t,e)}))},a.parts.push(i),this.components.push(i),this},a.brush=function(t,a){var e=this,n=this.bands[t],r=d.Yud(),i=d.Xf().domain([0,1e3]).range([this.dataContent.minDate.getTime(),this.dataContent.maxDate.getTime()]);return r.on("brush",(function(t){var r=n.xScale.domain();t.selection&&(r=[i(t.selection[0]),i(t.selection[1])]),d.td_(".interval rect").style("filter","none"),a.forEach((function(t){e.bands[t].xScale.domain(r),e.bands[t].redraw()}))})),n.g.append("svg").attr("class","x brush").call(r).selectAll("rect").attr("y",1).attr("height",n.h-1),this},a.redraw=function(){return this.components.forEach((function(t){return t.redraw()}))},t}(),m=function(){var t=(0,i.Z)(o().mark((function t(){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.gyn("/demos/data/d3js/timeline/data.csv");case 2:a=t.sent,new p({rootElId:"chart"}).data(a).band("mainBand",.82).band("naviBand",.08).xAxis("mainBand").xAxis("naviBand").labels("mainBand").labels("naviBand").brush("naviBand",["mainBand"]).createTooltip().redraw();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(t){var a=t.pageContext.demoInfo;return n.createElement(r.Z,{demoInfo:a,main:m},n.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-timeline-tsx-a9b8e53684b8b0d1e55c.js.map