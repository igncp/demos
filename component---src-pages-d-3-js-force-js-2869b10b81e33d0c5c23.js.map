{"version":3,"sources":["webpack://demos/./src/demos/force/force.js","webpack://demos/./src/pages/d3js/force.js"],"names":["data","async","parallel","next","d3","json","_error","root","nodes","links","filter","el","source","target","width","$","innerWidth","force","layout","size","linkDistance","charge","linkStrength","d","strength","on","path","attr","dx","x","dy","y","dr","Math","sqrt","linkLabel","deltaX","deltaY","node","start","svg","select","append","selectAll","enter","String","text","name","call","drag","demoInfo","pageContext","main","scripts","className","id"],"mappings":"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","file":"component---src-pages-d-3-js-force-js-2869b10b81e33d0c5c23.js","sourcesContent":["const main = () => {\n  const data = {}\n\n  const renderGraph = function () {\n    let links = data.links.filter((el) => el.source !== el.target)\n\n    const { nodes } = data\n    const width = $(\"#chart\").innerWidth()\n    const height = 600\n\n    const tick = function () {\n      path.attr(\"d\", (d) => {\n        const dx = d.target.x - d.source.x\n        const dy = d.target.y - d.source.y\n        const dr = Math.sqrt(dx * dx + dy * dy)\n\n        return `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`\n      })\n      linkLabel\n        .attr(\"x\", (d) => {\n          const deltaX = d.target.x - d.source.x\n\n          if (d.source.y < d.target.y) {\n            return d.source.x + deltaX * 0.3 + 15\n          }\n\n          return d.source.x + deltaX * 0.3 - 15\n        })\n        .attr(\"y\", (d) => {\n          const deltaY = d.target.y - d.source.y\n\n          return d.source.y + deltaY * 0.3\n        })\n        .attr(\"text-anchor\", (d) => {\n          if (d.source.y < d.target.y) {\n            return \"beginning\"\n          }\n\n          return \"end\"\n        })\n\n      return node.attr(\"transform\", (d) => `translate(${d.x},${d.y})`)\n    }\n\n    const force = d3.layout\n      .force()\n      .nodes(nodes)\n      .links(links)\n      .size([width, height])\n      .linkDistance(60)\n      .charge(-400)\n      .linkStrength((d) => d.strength)\n      .on(\"tick\", tick)\n      .start()\n\n    const svg = d3\n      .select(\"#chart\")\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n\n    svg\n      .append(\"svg:defs\")\n      .selectAll(\"marker\")\n      .data([\"end\"])\n      .enter()\n      .append(\"svg:marker\")\n      .attr(\"id\", String)\n      .attr(\"viewBox\", \"0 -5 10 10\")\n      .attr(\"refX\", 15)\n      .attr(\"refY\", -1.5)\n      .attr(\"markerWidth\", 6)\n      .attr(\"markerHeight\", 6)\n      .attr(\"orient\", \"auto\")\n      .append(\"svg:path\")\n      .attr(\"d\", \"M0,-5L10,0L0,5\")\n    links = svg\n      .selectAll(\".link\")\n      .data(force.links())\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"link\")\n\n    const path = links\n      .append(\"svg:path\")\n      .attr(\"class\", \"link\")\n      .attr(\"marker-end\", \"url(#end)\")\n\n    const linkLabel = links.append(\"text\").text((d) => d.name)\n\n    const node = svg\n      .selectAll(\".node\")\n      .data(force.nodes())\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"node\")\n      .call(force.drag)\n\n    node.append(\"circle\").attr(\"r\", 5)\n\n    return node\n      .append(\"text\")\n      .attr(\"x\", 12)\n      .attr(\"dy\", \".35em\")\n      .text((d) => d.name)\n  }\n\n  return async.parallel(\n    [\n      function (next) {\n        return d3.json(\"/data/d3js/force/nodes.json\", (_error, root) => {\n          data.nodes = root\n\n          return next()\n        })\n      },\n      function (next) {\n        return d3.json(\"/data/d3js/force/links.json\", (_error, root) => {\n          data.links = root\n\n          return next()\n        })\n      },\n    ],\n    renderGraph\n  )\n}\n\nexport default main\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/force/force\"\n\nimport \"../../demos/force/force.styl\"\n\nconst Force = ({ pageContext: { demoInfo } }) => (\n  <Demo demoInfo={demoInfo} main={main} scripts={[\"/vendors/d3/d3.min.js\"]}>\n    <div className=\"force-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default Force\n"],"sourceRoot":""}