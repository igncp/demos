"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[305],{2738:function(t,e,r){r.r(e),r.d(e,{default:function(){return Y}});var n=r(7294),a=r(4275),o=r(8634),i=r(2656),c=r.n(i),u=r(2094),l=r(2149),s="multiline-voronoi-module--axis--2WPgb",p="multiline-voronoi-module--cities--o95QD",d="multiline-voronoi-module--cityHover--1wUSq",m="multiline-voronoi-module--voronoi--17R-N",f="multiline-voronoi-module--formVoronoi--3E18p",v="chart",h="show-voronoi",g="%Y-%m",y=["January","February","March","April","May","June","July","August","September","October","November","December"],x="US Unemployment Rate",w=function(t){return t.cityName.trim()+": "},b=function(t){var e=y[t.date.getMonth()]+" of "+t.date.getFullYear();return" "+(100*t.employmentRate).toFixed(2)+"% - "+e},k=function(){var t=(0,o.Z)(c().mark((function t(){var e,r,n,a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,u.i$Z)(g),r=(0,u.Z1g)(g),t.next=4,(0,u.pvA)("/demos/data/d3js/multiline-voronoi/data.tsv");case 4:return n=t.sent,a=Object.keys(n[0]).map((function(t){return r(t)})).filter(Number),o=n.map((function(t){var r=t.name.replace(/(msa|necta div|met necta|met div)$/i,"").trim();return{metrics:a.map((function(n){var a=e(n),o=t[a],i=Number(o)/100;return{cityName:r,date:n,employmentRate:i}})),name:r}})),t.abrupt("return",{cities:o,months:a});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=70,N=80,E=70,C=60,F=function(t){var e=t.cities,r=t.months,n=t.rootElId,a=(0,u.PKp)(u.i4X),o={clickToggle:!1,voronoiGroup:null},i=document.getElementById(n);i.classList.add("multiline-voronoi-module--multilineVoronoiChart--2aVN8");var c=i.getBoundingClientRect().width-N-E,f=500-C-A,v=(0,u.Xf)().range([0,c]),h=(0,u.BYU)().range([f,0]),g=function(t){return v(t.date)},y=function(t){return h(t.employmentRate)},k={},F=(0,u.Ys)("#"+n).append("svg").attr("width",c+N+E).attr("height",f+C+A).append("g").attr("transform","translate("+N+","+C+")");v.domain((0,u.Wem)(r)),h.domain([0,(0,u.Fp7)(e,(function(t){return(0,u.Fp7)(t.metrics,(function(t){return t.employmentRate}))}))]).nice(),F.append("g").attr("class",s+" axis--x").attr("transform","translate(0,"+f+")").call((0,u.LLu)(v)),F.append("g").attr("class",s+" axis--y").call((0,u.y4O)(h).ticks(10,"%")).append("text").attr("x",20).attr("dy",".32em").style("font-weight","bold").text(x);var S=F.append("g").attr("transform","translate(-100,-100)").attr("class","multiline-voronoi-module--focus--2F38m");!function(t){var e=t.append("defs").append("filter").attr("id","drop-shadow");e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",1),e.append("feOffset").attr("dx",1).attr("dy",1),e.append("feComponentTransfer").append("feFuncA").attr("slope","1").attr("type","linear");var r=e.append("feMerge");r.append("feMergeNode"),r.append("feMergeNode").attr("in","SourceGraphic")}(F);var R=(0,u.jvg)().x(g).y(y),Y=function(t){F.append("g").attr("class",p).selectAll("path").data(t).enter().append("path").attr("d",(function(t){return k[t.name]=this,R(t.metrics)})).style("stroke",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return a(n.toString())})).style("filter",(function(){return"url(#drop-shadow)"})),B(t)},B=function(t){S.append("circle").attr("r",3.5),S.append("text").attr("class","text1").attr("y",-30),S.append("text").attr("class","text2").attr("y",-10);var r=t.reduce((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],a=e[1];return a.metrics.forEach((function(t){n.push(t)})),n}),[]),n=l.Z.from(r,g,y).voronoi([-N,-C,c+E,f+A]);o.voronoiGroup=F.append("g").attr("class",m),o.voronoiGroup.selectAll("path").data(r).enter().append("path").attr("d",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1];return n.renderCell(a)})).on("mouseover",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1],a=k[n.cityName];(0,u.Ys)(a).classed(d,!0),a.parentNode.appendChild(a),S.attr("transform","translate("+g(n)+","+y(n)+")"),S.select(".text1").text(w(n)),S.select(".text2").text(b(n))})).on("mouseout",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1],a=k[n.cityName];return(0,u.Ys)(a).classed(d,!1),S.attr("transform","translate(-100,-100)")})).on("click",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[1];o.clickToggle=!o.clickToggle,(0,u.td_)("."+p).remove(),(0,u.td_)("."+m).remove();var i=o.clickToggle?[e.find((function(t){return t.name===a.cityName}))]:e;Y(i)}))};return Y(e),{setVoronoi:function(t){o.voronoiGroup.classed("multiline-voronoi-module--voronoiShow--PdA3D",t)}}},S=function(){var t=(0,o.Z)(c().mark((function t(){var e,r,n,a,o,i,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=v,t.next=3,k();case 3:r=t.sent,n=r.cities,a=r.months,o=F({cities:n,months:a,rootElId:e}),i=o.setVoronoi,l=document.getElementById(f),document.getElementById(e).appendChild(l),(0,u.Ys)("#show-voronoi").property("disabled",!1).on("change",(function(t){i(t.target.checked||!1)}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=S,Y=function(t){var e=t.pageContext;return n.createElement(a.Z,{main:R,pageContext:e},n.createElement("form",{id:f},n.createElement("input",{id:h,type:"checkbox"})," ",n.createElement("label",{htmlFor:h},"Show Voronoi lines")),n.createElement("div",{id:v}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-multiline-voronoi-tsx-e1db1a06547aae6291e7.js.map