{"version":3,"sources":["webpack://demos/./node_modules/hotkeys-js/dist/hotkeys.esm.js","webpack://demos/./src/demos/population-circles/population-circles.ts","webpack://demos/./src/demos/population-circles/population-circles.module.css","webpack://demos/./src/pages/d3js/population-circles.tsx"],"names":["isff","navigator","userAgent","toLowerCase","indexOf","addEvent","object","event","method","addEventListener","attachEvent","concat","window","getMods","modifier","key","mods","slice","length","i","getKeys","keys","replace","split","index","lastIndexOf","splice","_keyMap","backspace","tab","clear","enter","return","esc","escape","space","left","up","right","down","del","delete","ins","insert","home","end","pageup","pagedown","capslock","num_0","num_1","num_2","num_3","num_4","num_5","num_6","num_7","num_8","num_9","num_multiply","num_add","num_enter","num_subtract","num_decimal","num_divide","'","_modifier","shift","alt","option","ctrl","control","cmd","command","modifierMap","16","18","17","91","shiftKey","ctrlKey","altKey","metaKey","_mods","_handlers","k","_downKeys","_scope","elementHasBindEvent","code","x","toUpperCase","charCodeAt","setScope","scope","getScope","eachUnbind","_ref","_ref$splitKey","splitKey","forEach","originKey","unbindKeys","len","lastKey","keyCode","map","record","a1","a2","arr1","arr2","isIndex","compareArray","eventHandler","handler","modifiersMatch","y","Object","prototype","hasOwnProperty","call","shortcut","preventDefault","returnValue","stopPropagation","cancelBubble","dispatch","asterisk","which","charCode","hotkeys","filter","this","push","keyName","keyNum","e","getModifierState","type","keydown","keyup","_i","keyShortcut","_downKeysCurrent","a","sort","join","element","document","undefined","toString","isElementBind","clearModifier","_api","deleteScope","newScope","handlers","getPressedKeyCodes","isPressed","target","srcElement","tagName","flag","isContentEditable","readOnly","unbind","keysInfo","Array","isArray","info","_len","arguments","args","_key","_hotkeys","noConflict","deep","margin","renderChart","municipalities","rootElId","width","getElementById","getBoundingClientRect","height","state","populationRange","prop","valueIdx","color","scaleOrdinal","_d","idx","schemeCategory10","svg","select","append","attr","header","text","style","svgContent","transitionChart","itemsWithCount","municipality","values","dataValues","dataItem","count","valueToIdx","reduce","acc","val","sortedDataValues","b","percentiles","percentile","idx2","filteredData","_municipality","structure","hierarchy","children","sum","d","leaves","pack","size","padding","getYear","dateStr","Date","getFullYear","date","data","year","totalNum","l","toFixed","leaf","selectAll","exit","remove","getTitle","itemsName","females","males","total","name","Number","toLocaleString","maximumFractionDigits","minimumFractionDigits","transition","duration","ease","easeCircleInOut","on","_e","selection","anim","anime","complete","strokeWidth","targets","node","seek","open","qs","q","r","setupLetter","circles","texts","easeSinInOut","$","tooltip","track","onPopulationPercentilesChange","newValues","onTimeSeriesChange","newIndex","onTypeChange","newType","json","ROOT_PATH","value","slider","change","_a","v","range","max","min","pageContext","links","main","scripts","id","label","radioIndex","className","defaultChecked","htmlFor","styles"],"mappings":"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","file":"component---src-pages-d-3-js-population-circles-tsx-ab27492f2ef792a58aeb.js","sourcesContent":["/*!\n * hotkeys-js v3.8.7\n * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.\n * \n * Copyright (c) 2021 kenny wong <wowohoo@qq.com>\n * http://jaywcjlove.github.io/hotkeys\n * \n * Licensed under the MIT license.\n */\nvar isff = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase().indexOf('firefox') > 0 : false; // 绑定事件\n\nfunction addEvent(object, event, method) {\n  if (object.addEventListener) {\n    object.addEventListener(event, method, false);\n  } else if (object.attachEvent) {\n    object.attachEvent(\"on\".concat(event), function () {\n      method(window.event);\n    });\n  }\n} // 修饰键转换成对应的键码\n\n\nfunction getMods(modifier, key) {\n  var mods = key.slice(0, key.length - 1);\n\n  for (var i = 0; i < mods.length; i++) {\n    mods[i] = modifier[mods[i].toLowerCase()];\n  }\n\n  return mods;\n} // 处理传的key字符串转换成数组\n\n\nfunction getKeys(key) {\n  if (typeof key !== 'string') key = '';\n  key = key.replace(/\\s/g, ''); // 匹配任何空白字符,包括空格、制表符、换页符等等\n\n  var keys = key.split(','); // 同时设置多个快捷键，以','分割\n\n  var index = keys.lastIndexOf(''); // 快捷键可能包含','，需特殊处理\n\n  for (; index >= 0;) {\n    keys[index - 1] += ',';\n    keys.splice(index, 1);\n    index = keys.lastIndexOf('');\n  }\n\n  return keys;\n} // 比较修饰键的数组\n\n\nfunction compareArray(a1, a2) {\n  var arr1 = a1.length >= a2.length ? a1 : a2;\n  var arr2 = a1.length >= a2.length ? a2 : a1;\n  var isIndex = true;\n\n  for (var i = 0; i < arr1.length; i++) {\n    if (arr2.indexOf(arr1[i]) === -1) isIndex = false;\n  }\n\n  return isIndex;\n}\n\nvar _keyMap = {\n  backspace: 8,\n  tab: 9,\n  clear: 12,\n  enter: 13,\n  return: 13,\n  esc: 27,\n  escape: 27,\n  space: 32,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  del: 46,\n  delete: 46,\n  ins: 45,\n  insert: 45,\n  home: 36,\n  end: 35,\n  pageup: 33,\n  pagedown: 34,\n  capslock: 20,\n  num_0: 96,\n  num_1: 97,\n  num_2: 98,\n  num_3: 99,\n  num_4: 100,\n  num_5: 101,\n  num_6: 102,\n  num_7: 103,\n  num_8: 104,\n  num_9: 105,\n  num_multiply: 106,\n  num_add: 107,\n  num_enter: 108,\n  num_subtract: 109,\n  num_decimal: 110,\n  num_divide: 111,\n  '⇪': 20,\n  ',': 188,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '-': isff ? 173 : 189,\n  '=': isff ? 61 : 187,\n  ';': isff ? 59 : 186,\n  '\\'': 222,\n  '[': 219,\n  ']': 221,\n  '\\\\': 220\n}; // Modifier Keys\n\nvar _modifier = {\n  // shiftKey\n  '⇧': 16,\n  shift: 16,\n  // altKey\n  '⌥': 18,\n  alt: 18,\n  option: 18,\n  // ctrlKey\n  '⌃': 17,\n  ctrl: 17,\n  control: 17,\n  // metaKey\n  '⌘': 91,\n  cmd: 91,\n  command: 91\n};\nvar modifierMap = {\n  16: 'shiftKey',\n  18: 'altKey',\n  17: 'ctrlKey',\n  91: 'metaKey',\n  shiftKey: 16,\n  ctrlKey: 17,\n  altKey: 18,\n  metaKey: 91\n};\nvar _mods = {\n  16: false,\n  18: false,\n  17: false,\n  91: false\n};\nvar _handlers = {}; // F1~F12 special key\n\nfor (var k = 1; k < 20; k++) {\n  _keyMap[\"f\".concat(k)] = 111 + k;\n}\n\nvar _downKeys = []; // 记录摁下的绑定键\n\nvar _scope = 'all'; // 默认热键范围\n\nvar elementHasBindEvent = []; // 已绑定事件的节点记录\n// 返回键码\n\nvar code = function code(x) {\n  return _keyMap[x.toLowerCase()] || _modifier[x.toLowerCase()] || x.toUpperCase().charCodeAt(0);\n}; // 设置获取当前范围（默认为'所有'）\n\n\nfunction setScope(scope) {\n  _scope = scope || 'all';\n} // 获取当前范围\n\n\nfunction getScope() {\n  return _scope || 'all';\n} // 获取摁下绑定键的键值\n\n\nfunction getPressedKeyCodes() {\n  return _downKeys.slice(0);\n} // 表单控件控件判断 返回 Boolean\n// hotkey is effective only when filter return true\n\n\nfunction filter(event) {\n  var target = event.target || event.srcElement;\n  var tagName = target.tagName;\n  var flag = true; // ignore: isContentEditable === 'true', <input> and <textarea> when readOnly state is false, <select>\n\n  if (target.isContentEditable || (tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT') && !target.readOnly) {\n    flag = false;\n  }\n\n  return flag;\n} // 判断摁下的键是否为某个键，返回true或者false\n\n\nfunction isPressed(keyCode) {\n  if (typeof keyCode === 'string') {\n    keyCode = code(keyCode); // 转换成键码\n  }\n\n  return _downKeys.indexOf(keyCode) !== -1;\n} // 循环删除handlers中的所有 scope(范围)\n\n\nfunction deleteScope(scope, newScope) {\n  var handlers;\n  var i; // 没有指定scope，获取scope\n\n  if (!scope) scope = getScope();\n\n  for (var key in _handlers) {\n    if (Object.prototype.hasOwnProperty.call(_handlers, key)) {\n      handlers = _handlers[key];\n\n      for (i = 0; i < handlers.length;) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);else i++;\n      }\n    }\n  } // 如果scope被删除，将scope重置为all\n\n\n  if (getScope() === scope) setScope(newScope || 'all');\n} // 清除修饰键\n\n\nfunction clearModifier(event) {\n  var key = event.keyCode || event.which || event.charCode;\n\n  var i = _downKeys.indexOf(key); // 从列表中清除按压过的键\n\n\n  if (i >= 0) {\n    _downKeys.splice(i, 1);\n  } // 特殊处理 cmmand 键，在 cmmand 组合快捷键 keyup 只执行一次的问题\n\n\n  if (event.key && event.key.toLowerCase() === 'meta') {\n    _downKeys.splice(0, _downKeys.length);\n  } // 修饰键 shiftKey altKey ctrlKey (command||metaKey) 清除\n\n\n  if (key === 93 || key === 224) key = 91;\n\n  if (key in _mods) {\n    _mods[key] = false; // 将修饰键重置为false\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = false;\n    }\n  }\n}\n\nfunction unbind(keysInfo) {\n  // unbind(), unbind all keys\n  if (!keysInfo) {\n    Object.keys(_handlers).forEach(function (key) {\n      return delete _handlers[key];\n    });\n  } else if (Array.isArray(keysInfo)) {\n    // support like : unbind([{key: 'ctrl+a', scope: 's1'}, {key: 'ctrl-a', scope: 's2', splitKey: '-'}])\n    keysInfo.forEach(function (info) {\n      if (info.key) eachUnbind(info);\n    });\n  } else if (typeof keysInfo === 'object') {\n    // support like unbind({key: 'ctrl+a, ctrl+b', scope:'abc'})\n    if (keysInfo.key) eachUnbind(keysInfo);\n  } else if (typeof keysInfo === 'string') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    } // support old method\n    // eslint-disable-line\n\n\n    var scope = args[0],\n        method = args[1];\n\n    if (typeof scope === 'function') {\n      method = scope;\n      scope = '';\n    }\n\n    eachUnbind({\n      key: keysInfo,\n      scope: scope,\n      method: method,\n      splitKey: '+'\n    });\n  }\n} // 解除绑定某个范围的快捷键\n\n\nvar eachUnbind = function eachUnbind(_ref) {\n  var key = _ref.key,\n      scope = _ref.scope,\n      method = _ref.method,\n      _ref$splitKey = _ref.splitKey,\n      splitKey = _ref$splitKey === void 0 ? '+' : _ref$splitKey;\n  var multipleKeys = getKeys(key);\n  multipleKeys.forEach(function (originKey) {\n    var unbindKeys = originKey.split(splitKey);\n    var len = unbindKeys.length;\n    var lastKey = unbindKeys[len - 1];\n    var keyCode = lastKey === '*' ? '*' : code(lastKey);\n    if (!_handlers[keyCode]) return; // 判断是否传入范围，没有就获取范围\n\n    if (!scope) scope = getScope();\n    var mods = len > 1 ? getMods(_modifier, unbindKeys) : [];\n    _handlers[keyCode] = _handlers[keyCode].map(function (record) {\n      // 通过函数判断，是否解除绑定，函数相等直接返回\n      var isMatchingMethod = method ? record.method === method : true;\n\n      if (isMatchingMethod && record.scope === scope && compareArray(record.mods, mods)) {\n        return {};\n      }\n\n      return record;\n    });\n  });\n}; // 对监听对应快捷键的回调函数进行处理\n\n\nfunction eventHandler(event, handler, scope) {\n  var modifiersMatch; // 看它是否在当前范围\n\n  if (handler.scope === scope || handler.scope === 'all') {\n    // 检查是否匹配修饰符（如果有返回true）\n    modifiersMatch = handler.mods.length > 0;\n\n    for (var y in _mods) {\n      if (Object.prototype.hasOwnProperty.call(_mods, y)) {\n        if (!_mods[y] && handler.mods.indexOf(+y) > -1 || _mods[y] && handler.mods.indexOf(+y) === -1) {\n          modifiersMatch = false;\n        }\n      }\n    } // 调用处理程序，如果是修饰键不做处理\n\n\n    if (handler.mods.length === 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91] || modifiersMatch || handler.shortcut === '*') {\n      if (handler.method(event, handler) === false) {\n        if (event.preventDefault) event.preventDefault();else event.returnValue = false;\n        if (event.stopPropagation) event.stopPropagation();\n        if (event.cancelBubble) event.cancelBubble = true;\n      }\n    }\n  }\n} // 处理keydown事件\n\n\nfunction dispatch(event) {\n  var asterisk = _handlers['*'];\n  var key = event.keyCode || event.which || event.charCode; // 表单控件过滤 默认表单控件不触发快捷键\n\n  if (!hotkeys.filter.call(this, event)) return; // Gecko(Firefox)的command键值224，在Webkit(Chrome)中保持一致\n  // Webkit左右 command 键值不一样\n\n  if (key === 93 || key === 224) key = 91;\n  /**\n   * Collect bound keys\n   * If an Input Method Editor is processing key input and the event is keydown, return 229.\n   * https://stackoverflow.com/questions/25043934/is-it-ok-to-ignore-keydown-events-with-keycode-229\n   * http://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html\n   */\n\n  if (_downKeys.indexOf(key) === -1 && key !== 229) _downKeys.push(key);\n  /**\n   * Jest test cases are required.\n   * ===============================\n   */\n\n  ['ctrlKey', 'altKey', 'shiftKey', 'metaKey'].forEach(function (keyName) {\n    var keyNum = modifierMap[keyName];\n\n    if (event[keyName] && _downKeys.indexOf(keyNum) === -1) {\n      _downKeys.push(keyNum);\n    } else if (!event[keyName] && _downKeys.indexOf(keyNum) > -1) {\n      _downKeys.splice(_downKeys.indexOf(keyNum), 1);\n    } else if (keyName === 'metaKey' && event[keyName] && _downKeys.length === 3) {\n      /**\n       * Fix if Command is pressed:\n       * ===============================\n       */\n      if (!(event.ctrlKey || event.shiftKey || event.altKey)) {\n        _downKeys = _downKeys.slice(_downKeys.indexOf(keyNum));\n      }\n    }\n  });\n  /**\n   * -------------------------------\n   */\n\n  if (key in _mods) {\n    _mods[key] = true; // 将特殊字符的key注册到 hotkeys 上\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = true;\n    }\n\n    if (!asterisk) return;\n  } // 将 modifierMap 里面的修饰键绑定到 event 中\n\n\n  for (var e in _mods) {\n    if (Object.prototype.hasOwnProperty.call(_mods, e)) {\n      _mods[e] = event[modifierMap[e]];\n    }\n  }\n  /**\n   * https://github.com/jaywcjlove/hotkeys/pull/129\n   * This solves the issue in Firefox on Windows where hotkeys corresponding to special characters would not trigger.\n   * An example of this is ctrl+alt+m on a Swedish keyboard which is used to type μ.\n   * Browser support: https://caniuse.com/#feat=keyboardevent-getmodifierstate\n   */\n\n\n  if (event.getModifierState && !(event.altKey && !event.ctrlKey) && event.getModifierState('AltGraph')) {\n    if (_downKeys.indexOf(17) === -1) {\n      _downKeys.push(17);\n    }\n\n    if (_downKeys.indexOf(18) === -1) {\n      _downKeys.push(18);\n    }\n\n    _mods[17] = true;\n    _mods[18] = true;\n  } // 获取范围 默认为 `all`\n\n\n  var scope = getScope(); // 对任何快捷键都需要做的处理\n\n  if (asterisk) {\n    for (var i = 0; i < asterisk.length; i++) {\n      if (asterisk[i].scope === scope && (event.type === 'keydown' && asterisk[i].keydown || event.type === 'keyup' && asterisk[i].keyup)) {\n        eventHandler(event, asterisk[i], scope);\n      }\n    }\n  } // key 不在 _handlers 中返回\n\n\n  if (!(key in _handlers)) return;\n\n  for (var _i = 0; _i < _handlers[key].length; _i++) {\n    if (event.type === 'keydown' && _handlers[key][_i].keydown || event.type === 'keyup' && _handlers[key][_i].keyup) {\n      if (_handlers[key][_i].key) {\n        var record = _handlers[key][_i];\n        var splitKey = record.splitKey;\n        var keyShortcut = record.key.split(splitKey);\n        var _downKeysCurrent = []; // 记录当前按键键值\n\n        for (var a = 0; a < keyShortcut.length; a++) {\n          _downKeysCurrent.push(code(keyShortcut[a]));\n        }\n\n        if (_downKeysCurrent.sort().join('') === _downKeys.sort().join('')) {\n          // 找到处理内容\n          eventHandler(event, record, scope);\n        }\n      }\n    }\n  }\n} // 判断 element 是否已经绑定事件\n\n\nfunction isElementBind(element) {\n  return elementHasBindEvent.indexOf(element) > -1;\n}\n\nfunction hotkeys(key, option, method) {\n  _downKeys = [];\n  var keys = getKeys(key); // 需要处理的快捷键列表\n\n  var mods = [];\n  var scope = 'all'; // scope默认为all，所有范围都有效\n\n  var element = document; // 快捷键事件绑定节点\n\n  var i = 0;\n  var keyup = false;\n  var keydown = true;\n  var splitKey = '+'; // 对为设定范围的判断\n\n  if (method === undefined && typeof option === 'function') {\n    method = option;\n  }\n\n  if (Object.prototype.toString.call(option) === '[object Object]') {\n    if (option.scope) scope = option.scope; // eslint-disable-line\n\n    if (option.element) element = option.element; // eslint-disable-line\n\n    if (option.keyup) keyup = option.keyup; // eslint-disable-line\n\n    if (option.keydown !== undefined) keydown = option.keydown; // eslint-disable-line\n\n    if (typeof option.splitKey === 'string') splitKey = option.splitKey; // eslint-disable-line\n  }\n\n  if (typeof option === 'string') scope = option; // 对于每个快捷键进行处理\n\n  for (; i < keys.length; i++) {\n    key = keys[i].split(splitKey); // 按键列表\n\n    mods = []; // 如果是组合快捷键取得组合快捷键\n\n    if (key.length > 1) mods = getMods(_modifier, key); // 将非修饰键转化为键码\n\n    key = key[key.length - 1];\n    key = key === '*' ? '*' : code(key); // *表示匹配所有快捷键\n    // 判断key是否在_handlers中，不在就赋一个空数组\n\n    if (!(key in _handlers)) _handlers[key] = [];\n\n    _handlers[key].push({\n      keyup: keyup,\n      keydown: keydown,\n      scope: scope,\n      mods: mods,\n      shortcut: keys[i],\n      method: method,\n      key: keys[i],\n      splitKey: splitKey\n    });\n  } // 在全局document上设置快捷键\n\n\n  if (typeof element !== 'undefined' && !isElementBind(element) && window) {\n    elementHasBindEvent.push(element);\n    addEvent(element, 'keydown', function (e) {\n      dispatch(e);\n    });\n    addEvent(window, 'focus', function () {\n      _downKeys = [];\n    });\n    addEvent(element, 'keyup', function (e) {\n      dispatch(e);\n      clearModifier(e);\n    });\n  }\n}\n\nvar _api = {\n  setScope: setScope,\n  getScope: getScope,\n  deleteScope: deleteScope,\n  getPressedKeyCodes: getPressedKeyCodes,\n  isPressed: isPressed,\n  filter: filter,\n  unbind: unbind\n};\n\nfor (var a in _api) {\n  if (Object.prototype.hasOwnProperty.call(_api, a)) {\n    hotkeys[a] = _api[a];\n  }\n}\n\nif (typeof window !== 'undefined') {\n  var _hotkeys = window.hotkeys;\n\n  hotkeys.noConflict = function (deep) {\n    if (deep && window.hotkeys === hotkeys) {\n      window.hotkeys = _hotkeys;\n    }\n\n    return hotkeys;\n  };\n\n  window.hotkeys = hotkeys;\n}\n\nexport default hotkeys;","import {\n  easeCircleInOut,\n  easeSinInOut,\n  hierarchy,\n  json,\n  pack,\n  scaleOrdinal,\n  schemeCategory10,\n  select,\n} from \"d3\"\nimport anime from \"animejs\"\nimport hotkeys from \"hotkeys-js\"\nimport qs from \"query-string\"\n\ntype PopulationRecord = {\n  count: number\n  date: string\n}\n\ntype Municipality = {\n  name: string\n  values: {\n    females: PopulationRecord[]\n    males: PopulationRecord[]\n    total: PopulationRecord[]\n  }\n}\n\nconst fetchData = () =>\n  (json(\n    `${ROOT_PATH}data/d3js/population-circles/data.json`\n  ) as unknown) as Promise<Municipality[]>\n\nconst margin = {\n  bottom: 0,\n  left: 0,\n  right: 0,\n  top: 70,\n}\n\nconst formatPopulation = (val: number) =>\n  Number(val.toFixed(0)).toLocaleString(undefined, {\n    maximumFractionDigits: 0,\n    minimumFractionDigits: 0,\n  })\n\ntype RenderChart = (o: {\n  municipalities: Municipality[]\n  rootElId: string\n}) => {\n  onPopulationPercentilesChange: (vals: [number, number]) => void\n  onTimeSeriesChange: (val: number) => void\n  onTypeChange: (type: string) => void\n}\n\nconst renderChart: RenderChart = ({ municipalities, rootElId }) => {\n  const { width } = (document.getElementById(\n    rootElId\n  ) as any).getBoundingClientRect()\n  const height = 400\n\n  const state = {\n    populationRange: [0, 1],\n    prop: \"total\",\n    valueIdx: 0,\n  }\n\n  const color = scaleOrdinal(\n    municipalities.map((_d: any, idx: any) => idx),\n    schemeCategory10\n  )\n\n  const svg = select(`#${rootElId}`)\n    .append(\"svg\")\n    .attr(\"viewBox\", [0, 0, width, height + margin.top] as any)\n    .attr(\"font-size\", 10)\n    .attr(\"font-family\", \"sans-serif\")\n    .attr(\"text-anchor\", \"middle\")\n\n  const header = svg\n    .append(\"text\")\n    .text(\"\")\n    .attr(\"transform\", `translate(${width / 2}, 50)`)\n    .style(\"font-size\", \"20px\")\n    .style(\"text-anchor\", \"right\")\n\n  const svgContent = svg\n    .append(\"g\")\n    .attr(\"transform\", `translate(${margin.left}, ${margin.top})`)\n\n  const transitionChart = () => {\n    const itemsWithCount = municipalities.filter((municipality: any) => {\n      const {\n        values: {\n          [state.prop]: { [state.valueIdx]: dataItem },\n        },\n      } = municipality\n\n      return !!dataItem\n    })\n    const dataValues = itemsWithCount.map((municipality: any) => {\n      const {\n        values: {\n          [state.prop]: { [state.valueIdx]: dataItem },\n        },\n      } = municipality\n\n      return dataItem ? dataItem.count : null\n    })\n    const valueToIdx = dataValues.reduce((acc: any, val: any, idx: any) => {\n      if (val === null) {\n        return acc\n      }\n\n      acc[val] = acc[val] || []\n      acc[val].push(idx)\n\n      return acc\n    }, {})\n    const sortedDataValues = dataValues.sort((a: any, b: any) => a - b)\n\n    const percentiles = sortedDataValues.reduce(\n      (acc: any, val: any, idx: any) => {\n        const percentile = idx / sortedDataValues.length\n        const { [val]: unsortedIndexes } = valueToIdx\n\n        unsortedIndexes.forEach((idx2: any) => {\n          acc[idx2] = percentile\n        })\n\n        return acc\n      },\n      []\n    )\n\n    const filteredData = itemsWithCount.filter(\n      (_municipality: any, idx: any) => {\n        const { [idx]: percentile } = percentiles\n\n        return (\n          typeof percentile === \"number\" &&\n          percentile >= state.populationRange[0] &&\n          percentile <= state.populationRange[1]\n        )\n      }\n    )\n\n    const structure = hierarchy({ children: filteredData }).sum((d: any) => {\n      if (!d.values) {\n        return 1\n      }\n\n      const {\n        values: {\n          [state.prop]: { [state.valueIdx]: dataItem },\n        },\n      } = d\n\n      return dataItem ? dataItem.count : 0\n    })\n    const root = pack()\n      .size(state.prop === \"total\" ? [width, height] : [width / 2, height / 2])\n      .padding(3)(structure)\n\n    const leaves = root.leaves()\n\n    const getYear = (dateStr: any) => new Date(dateStr).getFullYear()\n\n    const {\n      data: {\n        values: {\n          [state.prop]: {\n            [state.valueIdx]: { date },\n          },\n        },\n      },\n    } = leaves[0] as any\n\n    const year = getYear(date)\n\n    const { length: totalNum } = leaves.filter(\n      (l: any) => l.data.values[state.prop].length >= state.valueIdx + 1\n    )\n\n    header.text(\n      `Population in Malaga: ${year}${\n        state.populationRange[0] === 0 && state.populationRange[1] === 1\n          ? \"\"\n          : ` - From ${(state.populationRange[0] * 100).toFixed(\n              0\n            )} percentile to ${(state.populationRange[1] * 100).toFixed(\n              0\n            )} percentile`\n      } - ${totalNum} municipalities`\n    )\n\n    const leaf = svgContent.selectAll(\".leaf\").data(leaves)\n\n    leaf.exit().remove()\n\n    const getTitle = (d: any) => {\n      const {\n        data: {\n          values: {\n            [state.prop]: { [state.valueIdx]: dataItem },\n          },\n        },\n      } = d\n\n      if (!dataItem) {\n        return \"\"\n      }\n\n      const { [state.prop]: itemsName } = {\n        females: \"females\",\n        males: \"males\",\n        total: \"people\",\n      } as Record<string, string>\n\n      return `${d.data.name} - ${formatPopulation(\n        dataItem.count\n      )} ${itemsName} - ${getYear(dataItem.date)}`\n    }\n\n    leaf\n      .attr(\"title\", getTitle)\n      .transition()\n      .duration(1000)\n      .ease(easeCircleInOut)\n      .attr(\"transform\", (d) => {\n        if (state.prop !== \"total\") {\n          return `translate(${d.x + width / 4},${d.y + height / 4})`\n        }\n\n        return `translate(${d.x + 1},${d.y + 1})`\n      })\n\n    const enter = leaf\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"leaf\")\n      .attr(\"title\", getTitle)\n      .attr(\"transform\", (d) => `translate(${d.x + 1},${d.y + 1})`)\n      .on(\"mouseenter\", function (_e, d: any) {\n        const selection = select(this).select(\".circle\")\n\n        const anim = anime({\n          complete: () => {\n            d.anim = null\n          },\n          strokeWidth: \"5px\",\n          targets: [selection.node()],\n        })\n\n        d.anim = anim\n      })\n      .on(\"mouseleave\", function (_e, d: any) {\n        const selection = select(this).select(\".circle\")\n\n        if (d.anim) {\n          d.anim.seek(0)\n          d.anim.remove(selection.node())\n          d.anim = null\n        }\n\n        anime({\n          strokeWidth: \"0px\",\n          targets: [selection.node()],\n        })\n      })\n      .on(\"click\", (_e, d: any) => {\n        if (!hotkeys.isPressed(\"control\")) {\n          return\n        }\n\n        window.open(\n          `https://www.google.com/search?${qs.stringify({\n            q: `Malaga ${d.data.name}`,\n          })}`\n        )\n      })\n\n    enter\n      .append(\"circle\")\n      .attr(\"r\", (d) => d.r)\n      .attr(\"class\", \"circle\")\n      .attr(\"fill-opacity\", 0.7)\n      .attr(\"fill\", (_d, idx) => color(idx))\n      .attr(\"stroke-width\", \"0px\")\n      .attr(\"stroke\", \"green\")\n\n    const setupLetter = (l: any) => {\n      l.text((d: any) => d.data.name[0])\n        .style(\"font-size\", (d: any) => `${d.r.toFixed(0)}px`)\n        .attr(\"dy\", (d: any) => d.r / 3)\n    }\n\n    setupLetter(enter.append(\"text\").attr(\"class\", \"letter\"))\n\n    const circles = leaf.selectAll(\".circle\").data((d) => d)\n    const texts = leaf.selectAll(\".letter\").data((d) => d)\n\n    circles\n      .transition()\n      .duration(1000)\n      .ease(easeSinInOut)\n      .attr(\"r\", (d) => d.r)\n\n    setupLetter(texts.transition().duration(1000).ease(easeSinInOut))\n\n    $(\".leaf\").tooltip({\n      track: true,\n    })\n  }\n\n  transitionChart()\n\n  return {\n    onPopulationPercentilesChange: (newValues: [number, number]) => {\n      state.populationRange = newValues\n      transitionChart()\n    },\n    onTimeSeriesChange: (newIndex: number) => {\n      state.valueIdx = newIndex\n      transitionChart()\n    },\n    onTypeChange: (newType: string) => {\n      state.prop = newType\n      transitionChart()\n    },\n  }\n}\n\nconst main = async () => {\n  hotkeys(\"control\", () => {})\n\n  const municipalities = await fetchData()\n\n  const {\n    onPopulationPercentilesChange,\n    onTimeSeriesChange,\n    onTypeChange,\n  } = renderChart({\n    municipalities,\n    rootElId: \"chart\",\n  })\n\n  select(\"form\").on(\"change\", (e) => {\n    onTypeChange(e.target.value)\n  })\n\n  $(\".population-slider\").slider({\n    change: (_a, b: any) => {\n      const newValues = b.values.map((v: any) => v / 100)\n\n      onPopulationPercentilesChange(newValues)\n    },\n    range: true,\n    values: [0, 100],\n  })\n\n  const max = municipalities[0].values.total.length - 1\n\n  $(\".time-slider\").slider({\n    change: (_a, b) => {\n      onTimeSeriesChange(b.value as number)\n    },\n    max,\n    min: 0,\n    value: 0,\n  })\n}\n\nexport default main\n","// extracted by mini-css-extract-plugin\nexport var radio = \"population-circles-module--radio--1S8Dr\";\nexport var slider = \"population-circles-module--slider--3hzyU\";","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/population-circles/population-circles\"\nimport * as styles from \"@/demos/population-circles/population-circles.module.css\"\n\nconst PopulationCircles = ({ pageContext }: DemoPageProps) => (\n  <Demo\n    links={[\"/vendors/jquery-ui/themes/base/jquery-ui.min.css\"]}\n    main={main}\n    pageContext={pageContext}\n    scripts={[\"/vendors/jquery-ui/jquery-ui.min.js\"]}\n  >\n    <form>\n      {[\n        { id: \"total\", label: \"Total\" },\n        { id: \"males\", label: \"Males\" },\n        { id: \"females\", label: \"Females\" },\n      ].map(({ id, label }, radioIndex) => (\n        <div className={styles.radio} key={id}>\n          <input\n            defaultChecked={radioIndex === 0}\n            id={id}\n            name=\"type\"\n            type=\"radio\"\n            value={id}\n          />\n          <label htmlFor={id}>{label}</label>\n        </div>\n      ))}\n    </form>\n    <div className={styles.slider}>\n      <p>Time</p>\n      <div className=\"time-slider\" />\n    </div>\n    <div className={styles.slider}>\n      <p>Population Percentile</p>\n      <div className=\"population-slider\" />\n    </div>\n    <div id=\"chart\" />\n  </Demo>\n)\n\nexport default PopulationCircles\n"],"sourceRoot":""}