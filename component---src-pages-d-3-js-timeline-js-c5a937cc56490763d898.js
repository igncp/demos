(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[449],{2137:function(t,e,n){"use strict";function r(t,e,n,r,a,i,o){try{var l=t[i](o),s=l.value}catch(c){return void n(c)}l.done?e(s):Promise.resolve(s).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function l(t){r(o,a,i,l,s,"next",t)}function s(t){r(o,a,i,l,s,"throw",t)}l(void 0)}))}}n.d(e,{Z:function(){return a}})},7440:function(t,e,n){"use strict";var r=n(2492),a=n.n(r),i={colorsScale:function(t,e){var n=d3.scale.linear().domain(e).range([0,1]),r=d3.scale.linear().domain(d3.range(0,1,1/t.length)).range(t);return function(t){return r(n(t))}},filterBlackOpacity:function(t,e,n,r){var a=e.append("defs").append("filter").attr({height:"500%",id:"drop-shadow-"+t,width:"500%",x:"-200%",y:"-200%"});a.append("feGaussianBlur").attr({in:"SourceAlpha",stdDeviation:n}),a.append("feOffset").attr({dx:1,dy:1}),a.append("feComponentTransfer").append("feFuncA").attr({slope:r,type:"linear"});var i=a.append("feMerge");return i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")},filterColor:function(t,e,n,r,a){null==a&&(a=!1);var i=e.append("defs").append("filter").attr({id:"drop-shadow-"+t});return a&&i.attr({height:"500%",width:"500%",x:"-200%",y:"-200%"}),i.append("feOffset").attr({dx:.5,dy:.5,in:"SourceGraphic",result:"offOut"}),i.append("feGaussianBlur").attr({in:"offOut",result:"blurOut",stdDeviation:n}),i.append("feBlend").attr({in:"SourceGraphic",in2:"blurOut",mode:"normal"}),i.append("feComponentTransfer").append("feFuncA").attr({slope:r,type:"linear"})},middleTitle:function(t,e,n,r){null==r&&(r=-15),t.append("text").attr({class:"chart-title","text-anchor":"middle",transform:"translate("+String(e/2)+","+r+")"}).text(n).style("font-weight","bold")},svg:function(t,e,n,r){return d3.select(t).text("").append("svg").attr({height:n+r.top+r.bottom,width:e+r.left+r.right}).append("g").attr({transform:"translate("+r.left+","+r.top+")"})},tooltip:function(t,e){null==e&&(e={});var n=a()({elementSelector:"",followElement:!1,followMouse:!1,leftOffst:60,tOpts:{container:"body",viewport:{selector:"#chart svg"}},topOffst:40},e);$(t).tooltip(n.tOpts),n.followMouse?$(t).hover((function(t){return $(".tooltip").css({left:String(t.pageX-n.leftOffst)+"px",top:String(t.pageY-n.topOffst)+"px"})})):n.followElement&&$(t).hover((function(){return $(".tooltip").css({left:String($(n.elementSelector).position().left-n.leftOffst)+"px",top:String($(n.elementSelector).position().top-n.topOffst)+"px"})}))}};e.Z=i},8760:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});var r=n(7294),a=n(7538),i=n(2137),o=n(7757),l=n.n(o),s=n(8236),c=n(7440),d={bottom:0,left:20,right:20,top:60},u=700-d.top-d.bottom,f=function(t){var e=d3.time.format("%Y-%m-%d").parse(t);if(null!==e)return e;var n=isNaN(t)?-t.replace(/[^0-9]/g,""):+t;return n<0||n>99?e=new Date(n,6,1):0===n?e=new Date(-1,6,1):(e=new Date(n,6,1)).setUTCFullYear(("0000"+n).slice(-4)),e},p=function(t,e){e=e||" BC";var n=t.getUTCFullYear();return n>0?n.toString():(e[0],e-n)},h=function(t){var e=t.dataset;(function(t){var e=t.rootElId,n=document.getElementById(e).getBoundingClientRect().width,r=n-d.left-d.right,a=0,i=0,o={},l={},h=[],m={},g=c.Z.svg("#"+e,n,700,d);c.Z.middleTitle(g,n,"Philosophers through History",-20),c.Z.filterBlackOpacity("intervals",g,1,.2),g.append("clipPath").attr("id","chart-area").append("rect").attr("width",r).attr("height",u),g.on("mouseup",(function(){return d3.selectAll(".interval rect").style("filter","url(#drop-shadow-intervals)")}));var v=g.append("g").attr("class","chart").attr("clip-path","url(#chart-area)");return o.data=function(t){var e=new Date,n=[];l.items=t;var r,a,i=function(t,e){var n=t.start-e.start;return n<0?-1:n>0?1:(n=e.end-t.end)<0?-1:n>0?1:0},c=function(t,e){var n=t.start-e.start;return n<0?1:n>0?-1:(n=e.end-t.end)<0?1:n>0?-1:0};return l.items.forEach((function(t){t.start=f(t.start),""===t.end?(t.end=new Date(t.start.getTime()+316224e7),t.instant=!0):(t.end=f(t.end),t.instant=!1),t.end>e&&(t.end=e)})),r=l.items,a=(a="backward")||"backward","ascending"===("descending"||"descending")?l.items.sort(i):l.items.sort(c),"forward"===a?r.forEach((function(t){for(var e=0,r=0,a=0,i=n.length;(0<=i?a<i:a>i)&&!(t.start>n[r]);r=0<=i?++a:--a)e++;t.track=e,n[e]=t.end})):r.forEach((function(t){for(var e=0,r=0,a=0,i=n.length;(0<=i?a<i:a>i)&&!(t.end<n[r]);r=0<=i?++a:--a)e++;t.track=e,n[e]=t.start})),l.nTracks=n.length,l.minDate=s.VV$(l.items,(function(t){return t.start})),l.maxDate=s.Fp7(l.items,(function(t){return t.end})),o},o.tooltip={create:function(){return c.Z.tooltip(".part.instant, .part.interval",{followMouse:!0,leftOffst:80}),o}},o.band=function(t,e){var n={};n.id="band"+i,n.x=0,n.y=a,n.w=r,n.h=u*(e||1),n.trackOffset=0,n.trackHeight=Math.min((n.h-n.trackOffset)/l.nTracks,20),n.itemHeight=.7*n.trackHeight,n.parts=[],n.instantWidth=100,n.xScale=d3.time.scale().domain([l.minDate,l.maxDate]).range([0,n.w]),n.yScale=function(t){return n.trackOffset+t*n.trackHeight},n.yearsScale=l.maxDate.getUTCFullYear()-l.minDate.getUTCFullYear(),n.g=v.append("g").attr("id",n.id).attr("transform","translate(0,"+n.y+")"),n.g.append("rect").attr("class","band").attr("width",n.w).attr("height",n.h);var s=n.g.selectAll("g").data(l.items).enter().append("svg").attr("y",(function(t){return n.yScale(t.track)})).attr("height",n.itemHeight).attr("data-title",(function(t){return t.instant?t.label+": "+p(t.start):t.label+": "+p(t.start)+" - "+p(t.end)})).attr("class",(function(t){return t.instant?"part instant":"part interval"})),c=d3.select("#band"+i).selectAll(".interval");c.append("rect").attr("height","80%").attr("width","80%").attr("x","1px").attr("y",".5px").style("filter","url(#drop-shadow-intervals)"),c.append("text").attr("class","intervalLabel").attr("x",3).attr("y",9.5);var d=d3.select("#band"+i).selectAll(".instant");return d.append("circle").attr("cx",n.itemHeight/2).attr("cy",n.itemHeight/2).attr("r",5),d.append("text").attr("class","instantLabel").attr("x",15).attr("y",10),n.addActions=function(t){return t.forEach((function(t){return s.on(t[0],t[1])}))},n.redraw=function(){return s.attr("x",(function(t){return n.xScale(t.start)})).attr("width",(function(t){return n.xScale(t.end)-n.xScale(t.start)})).select("text").text((function(t){var e=(n.xScale(t.end)-n.xScale(t.start))/9;return t.label.length>e?t.label.substr(0,e-1)+"..":t.label})),n.parts.forEach((function(t){return t.redraw()}))},m[t]=n,h.push(n),a+=n.h+25,i+=1,o},o.labels=function(t){var e=m[t],n=e.y+e.h-10,r=[["start","bandMinMaxLabel",0,4,function(t){return p(t)},"Start of the selected interval",e.x+30,n],["end","bandMinMaxLabel",e.w-46,e.w-4,function(t,e){return p(e)},"End of the selected interval",e.x+e.w-152,n],["middle","bandMidLabel",(e.w-46)/2,e.w/2,function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},"Length of the selected interval",e.x+e.w/2-75,n]],a=v.append("g").attr("id",t+"Labels").attr("transform","translate(0,"+(e.y+e.h+1)+")").selectAll("#"+t+"Labels").data(r).enter().append("g");a.append("rect").attr("class","bandLabel").attr("x",(function(t){return t[2]})).attr("width",46).attr("height",20).style("opacity",1);var i=a.append("text").attr("class",(function(t){return t[1]})).attr("id",(function(t){return t[0]})).attr("x",(function(t){return t[3]})).attr("y",15).attr("text-anchor",(function(t){return t[0]}));return i.redraw=function(){var t=e.xScale.domain()[0],n=e.xScale.domain()[1];return i.text((function(e){return e[4](t,n)}))},e.parts.push(i),h.push(i),o},o.xAxis=function(t,e){var n=m[t],r=d3.svg.axis().scale(n.xScale).orient(e||"bottom").tickSize(6,0).tickFormat((function(t){return p(t)})),a=v.append("g").attr("class","axis").attr("transform","translate(0,"+(n.y+n.h)+")");return a.redraw=function(){return a.call(r)},n.parts.push(a),h.push(a),o},o.brush=function(t,e){var n=m[t],r=d3.svg.brush().x(n.xScale.range([0,n.w]));return r.on("brush",(function(){var t=r.empty()?n.xScale.domain():r.extent();d3.selectAll(".interval rect").style("filter","none"),e.forEach((function(e){m[e].xScale.domain(t),m[e].redraw()}))})),n.g.append("svg").attr("class","x brush").call(r).selectAll("rect").attr("y",1).attr("height",n.h-1),o},o.redraw=function(){return h.forEach((function(t){return t.redraw()}))},o})({rootElId:t.rootElId}).data(e).band("mainBand",.82).band("naviBand",.08).xAxis("mainBand").xAxis("naviBand").labels("mainBand").labels("naviBand").brush("naviBand",["mainBand"]).tooltip.create().redraw()},m=function(){var t=(0,i.Z)(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){d3.csv("/data/d3js/timeline/data.csv",(function(e){return t(e)}))}));case 2:e=t.sent,h({dataset:e,rootElId:"chart"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(t){var e=t.pageContext.demoInfo;return r.createElement(a.Z,{demoInfo:e,main:m,scripts:["/vendors/d3/d3.min.js"]},r.createElement("div",{className:"timeline-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-timeline-js-c5a937cc56490763d898.js.map