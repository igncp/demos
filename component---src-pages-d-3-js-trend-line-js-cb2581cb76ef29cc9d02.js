(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[912],{2137:function(e,t,n){"use strict";function r(e,t,n,r,a,o,c){try{var u=e[o](c),i=u.value}catch(l){return void n(l)}u.done?t(i):Promise.resolve(i).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var c=e.apply(t,n);function u(e){r(c,a,o,u,i,"next",e)}function i(e){r(c,a,o,u,i,"throw",e)}u(void 0)}))}}n.d(t,{Z:function(){return a}})},3637:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(7294),a=n(7538),o=n(2137),c=n(7757),u=n.n(c),i=n(8236),l=50,d=50,s=50,m=50,p=500-m-l,f=2e3,v=function(e,t){var n=d3.scale.quantile().domain([0,1]).range(d3.range(1,e.length+1));return function(r){var a=e.slice(0,n(r));return t(a)}},h=function(e){var t=e.data,n=e.rootElId,r=document.getElementById(n).getBoundingClientRect().width-d-s,a=d3.time.format("%Y-%m-%d").parse;t.forEach((function(e){e.occurred=a(e.occurred),e.value=+e.value}));var o=function(){var e=d3.select('input[value="zoom"]')[0][0].checked,a=d3.select("#"+n).text("").append("svg").attr("height",p+m+l).attr("width",r+d+s).append("g").attr("transform","translate("+d+","+s+")"),o=d3.time.scale().range([0,r]),c=i.BYU().range([p,0]),u=d3.svg.axis().scale(o).orient("bottom"),h=d3.svg.axis().scale(c).orient("left"),g=d3.svg.line().x((function(e){return o(e.occurred)})).y((function(e){return c(e.value)}));o.domain(d3.extent(t,(function(e){return e.occurred}))),c.domain([e?d3.min(t,(function(e){return e.value})):0,i.Fp7(t,(function(e){return e.value}))]),a.append("g").attr("class","x axis").attr("transform","translate(0,"+p+")").call(u),a.append("g").attr("class","y axis").call(h),a.append("path").datum(t).transition().duration(f).attrTween("d",(function(){return v(t,g)})).attr("class","line");var x=function(e){var t={},n=e.length,r=0,a=0,o=0,c=0,u=0;return e.forEach((function(e){r+=e.occurred.getTime(),a+=e.value,c+=e.occurred.getTime()*e.occurred.getTime(),u+=e.value*e.value,o+=e.occurred.getTime()*e.value})),t.slope=(n*o-r*a)/(n*c-r*r),t.intercept=(a-t.slope*r)/n,t.r2=Math.pow((n*o-r*a)/Math.sqrt((n*c-r*r)*(n*u-a*a)),2),t}(t),y=d3.svg.line().x((function(e){return o(e.occurred)})).y((function(e){var t=x.intercept+x.slope*e.occurred;return c(t)}));a.append("path").datum(t).transition().delay(f).duration(f).attrTween("d",(function(){return v(t,y)})).attr("class","rline"),a.append("text").attr("transform","translate("+.7*r+","+.7*p+")").style("opacity",0).transition(1e3).delay(4e3).text("Slope: "+x.slope.toExponential(3)).style("opacity",1)};o(),d3.selectAll('input[name="mode"]').on("change",o)},g=function(){var e=(0,o.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="chart",e.next=3,i.pvA("/demos/data/d3js/trend-line/data.tsv");case 3:n=e.sent,h({data:n,rootElId:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){var t=e.pageContext.demoInfo;return r.createElement(a.Z,{demoInfo:t,main:g,scripts:["/vendors/d3/d3.min.js"]},r.createElement("form",null,r.createElement("label",null,r.createElement("input",{defaultChecked:!0,name:"mode",type:"radio",value:"zoom"})," Zoom"),r.createElement("label",null,r.createElement("input",{name:"mode",type:"radio",value:"normal"})," Normal")),r.createElement("div",{className:"trend-line-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-trend-line-js-cb2581cb76ef29cc9d02.js.map