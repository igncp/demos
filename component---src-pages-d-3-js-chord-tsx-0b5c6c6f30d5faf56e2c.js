(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[923],{9646:function(t,e,r){"use strict";var n;r.d(e,{Z:function(){return v}});var a=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(t){return"string"==typeof t&&i.test(t)},u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));var d,l,f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r},h=0,p=0;var v=function(t,e,r){var n=e&&r||0,a=e||new Array(16),i=(t=t||{}).node||d,s=void 0!==t.clockseq?t.clockseq:l;if(null==i||null==s){var u=t.random||(t.rng||o)();null==i&&(i=d=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=l=16383&(u[6]<<8|u[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,m=c-h+(v-p)/1e4;if(m<0&&void 0===t.clockseq&&(s=s+1&16383),(m<0||c>h)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,p=v,l=s;var g=(1e4*(268435455&(c+=122192928e5))+v)%4294967296;a[n++]=g>>>24&255,a[n++]=g>>>16&255,a[n++]=g>>>8&255,a[n++]=255&g;var y=c/4294967296*1e4&268435455;a[n++]=y>>>8&255,a[n++]=255&y,a[n++]=y>>>24&15|16,a[n++]=y>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(var w=0;w<6;++w)a[n+w]=i[w];return e||f(a)}},6126:function(t,e,r){"use strict";var n;r.d(e,{H:function(){return a},d:function(){return n}}),function(t){t.STORYBOOK="storybook",t.TESTING="testing"}(n||(n={}));var a={SCRIPT:"/vendors/jquery-ui/jquery-ui.min.js",STYLE:"/vendors/jquery-ui/themes/base/jquery-ui.min.css"}},4091:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return k}});var n=r(7294),a=r(6126),o=r(4275),i=r(8634),s=r(2656),u=r.n(s),c=r(862),d="chart",l="update",f=function(t){var e=t.getDebits(),r=t.getCredits(),n=t.getCountriesList(),a=(0,c.WUZ)(",.3r"),o=function(t){return"$"+a(t)+"B."},i=n.map((function(t){return{id:t.id,label:t.name}})),s=function(t){return t.map((function(t){return t?+t.amount:0}))};return{chords:[e.map(s),r.map(s)],chordsTitles:["Debits","Credits"],getGroupTitle:function(t){var e=t.chartIndex,r=t.chordGroup;return n[r.index].name+" "+(e?"owes":"is owed")+" "+o(r.value)},getRibbonTitle:function(t){var e=t.chartIndex,r=t.sourceIndex,a=t.sourceValue,i=t.targetIndex,s=n[r],u=[n[i].name,s.name];return e&&u.reverse(),u[0]+" owes "+u[1]+" "+o(a)},groupItems:i,rootElId:d}},h=function(){function t(t){var e=t.countriesList,r=t.credits,n=t.debits;this.credits=r,this.debits=n,this.countriesList=e}t.fetchAndCreate=function(){var e=(0,i.Z)(u().mark((function e(){var r,n,a,o,i,s,d,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.gyn)("/demos/data/d3js/chord/data.csv");case 2:return r=e.sent,n=[],a={},o=[],i=[],s=0,d=function(t){return t in a||(a[t]={id:s,name:t},s+=1),a[t]},l=r.map((function(t){return Object.assign({},t,{creditor:d(t.creditor),debtor:Object.assign({},d(t.debtor),{risk:t.risk})})})),Array.from({length:s}).forEach((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];o[n]=[],i[n]=[],Array.from({length:s}).forEach((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1];o[n][a]=null,i[n][a]=null}))})),l.forEach((function(t){o[t.creditor.id][t.debtor.id]=t,i[t.debtor.id][t.creditor.id]=t,n[t.creditor.id]=t.creditor,n[t.debtor.id]=t.debtor})),e.abrupt("return",new t({countriesList:n,credits:i,debits:o}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var e=t.prototype;return e.getCredits=function(){return this.credits},e.getDebits=function(){return this.debits},e.getCountriesList=function(){return this.countriesList},t}(),p=r(9646),v="chord-module--chartTitle--83bf6",m="chord-module--chord--0b73b",g="chord-module--group--e9eeb",y="chord-module--groupLabel--fba6c",w=function(t){return t.source.index+"_"+t.target.index},b=function(t){return t.index},x=20,A=50,C=function(){function t(t){var e=this;this.handleWindowResize=function(){e.render()},this.config=t;var r=this.config,n=r.chords,a=r.rootElId;this.dropShadowGroupsId="drop-shadow-groups-"+(0,p.Z)().slice(0,6),this.ribbonItemClass="ribbon-item-"+(0,p.Z)().slice(0,6),this.chordGroupClass="chord-group-"+(0,p.Z)().slice(0,6);var o=(0,c.Ys)("#"+a).style("width","100%").style("justify-content","space-evenly");o.selectAll("div").data(n).enter().append("div");var i=o.selectAll("div"),s=i.append("svg"),u=s.append("g");this.elements={charts:u,chartsDivs:i,chartsSVGs:s,root:o},u.each((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[1],o=u.filter((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return a===n})),i=t.chordsTitles[a];o.append("text").text(i).attr("class",v).attr("text-anchor","middle")})),function(t){var e=t.charts,r=t.deviation,n=t.name,a=t.slope,o=e.append("defs").append("filter").attr("id",n);o.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),o.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",r),o.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),o.append("feComponentTransfer").append("feFuncA").attr("slope",a).attr("type","linear")}({charts:u,deviation:3,name:this.dropShadowGroupsId,slope:.5}),this.colorScale=(0,c.PKp)(c.i4X),this.render(),window.addEventListener("resize",this.handleWindowResize)}t.renderChart=function(e){return new t(e)};var e=t.prototype;return e.tearDown=function(){window.removeEventListener("resize",this.handleWindowResize)},e.refresh=function(){this.render(!0)},e.render=function(t){var e=this.colorScale,r=this.config,n=r.chords,a=r.getGroupTitle,o=r.getRibbonTitle,i=r.groupItems,s=r.rootElId,u=t?1e3:0,d=document.getElementById(s).getBoundingClientRect().width,l=d/n.length-20,f=d<768,h=f?d:l,p=this.elements,C=p.charts,E=p.chartsDivs,I=p.chartsSVGs,k=p.root,R=Math.min(l,h)/(f?1:n.length)-(f?0:20),S=R-20,T=(0,c.Nb1)().innerRadius(S).outerRadius(R);k.style("display",f?"flex":"inline-flex").style("flex-direction",f?"column":"row"),E.attr("width",f?d:l).style("height",h+A+x+"px"),I.attr("width",f?d:l).attr("height",h+A+x),C.attr("transform",f?"translate("+d/2+","+(h/2+A)+")":"translate("+l/2+","+(h/2+A)+")"),C.each((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1],a=C.filter((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1];return n===a}));a.select("."+v).attr("transform","translate(0,"+(-1*h/2-0)+")")}));var G=this.chordGroupClass,L=this.dropShadowGroupsId,V=this.ribbonItemClass;C.each((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],d=r[1],l=(0,c.Ys)(this),f=(0,c.fFo)().sortChords(c.$1i)(s),h=(0,c.N22)().radius(S),p=l.selectAll("."+m).data().reduce((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],a=e[1];return n[w(a)]=a,n}),{}),v=l.selectAll("."+m).data(f,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n}));v.enter().append("path").attr("class",m+" "+V),v.exit().remove(),l.selectAll("path."+m).style("fill",(function(t){return e(t.target.index)})).style("stroke",(function(t){var r=e(t.target.index);return(0,c.B8C)(r).darker().formatHex()})).style("stroke-width",2).attr("title",(function(t){return o({chartIndex:d,sourceIndex:t.source.index,sourceValue:t.source.value,targetIndex:t.target.index,targetValue:t.source.value})})).transition().duration(u).attrTween("d",(function(t){var e=p[w(t)],r=(0,c.sXR)(null!=e?e:t,t);return function(t){var e=r(t);return h(e)}}));var x=l.selectAll("."+g).data(f.groups,b).enter().append("g").attr("class",g);x.append("path").attr("class",G),x.append("text").attr("class","group-text").attr("x",6).attr("dy",15).append("textPath").attr("xlink:href",(function(t){return"#group"+t.index+"-"+d})).attr("class",y).text((function(t){return i[t.index].label}));var A=l.selectAll("."+G).data(),C=l.selectAll("."+g);C.selectAll("."+G).data(f.groups,b).style("fill",(function(t){return e(t.index)})).attr("id",(function(t){return"group"+t.index+"-"+d})).style("filter",(function(){return"url(#"+L+")"})).attr("title",(function(t){return a({chartIndex:d,chordGroup:t})})).transition().duration(u).attrTween("d",(function(t){var e=A[t.index],r=(0,c.sXR)(e,t);return function(t){return T(r(t))}})),C.selectAll(".group-text").selectAll("textPath").data(f.groups,b).transition().duration(u).style("opacity",(function(t){return Math.abs(t.startAngle-t.endAngle)>.4?1:0})),[V,G].forEach((function(t){$("."+t).tooltip({track:!0})}))}))},t}(),E=function(){var t=(0,i.Z)(u().mark((function t(){var e,r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.fetchAndCreate();case 2:e=t.sent,r=f(e),n=C.renderChart(r),document.getElementById(l).addEventListener("click",(function(){r.chords.forEach((function(t){t.forEach((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],a=e[1];n.forEach((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=e[1];if(a!==o){var i=Math.random()<.1;i&&(n[o]=Math.max(0,Math.floor(100*Math.random())-20))}}))}))})),n.refresh()}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=E,k=function(t){var e=t.pageContext;return n.createElement(o.Z,{links:[a.H.STYLE],main:I,pageContext:e,scripts:[a.H.SCRIPT]},n.createElement("form",{style:{marginBottom:20}},n.createElement("button",{className:"btn btn-info",id:l,type:"button"},"Update Random Value")),n.createElement("div",{id:d}))}},2656:function(t,e,r){t.exports=r(3076)},8634:function(t,e,r){"use strict";function n(t,e,r,n,a,o,i){try{var s=t[o](i),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,a)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var i=t.apply(e,r);function s(t){n(i,a,o,s,u,"next",t)}function u(t){n(i,a,o,s,u,"throw",t)}s(void 0)}))}}r.d(e,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-chord-tsx-0b5c6c6f30d5faf56e2c.js.map