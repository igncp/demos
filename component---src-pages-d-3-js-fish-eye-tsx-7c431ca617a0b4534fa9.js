(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[909],{5121:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return T}});var n=i(7294),o=i(4275),s=i(8634),r=i(2656),a=i.n(r),c=i(862),u=function(t){var e=t.method,i=t.source,n=t.target;return function(){var t=i[e].apply(i,arguments);return t===i?n:t}},d=function t(e){var i=e.distortion,n=e.focus,o=e.scale,s=i,r=n;function a(t){var e=o(t),i=e<r,n=(0,c.Wem)(o.range()),a=n[0],u=n[1],d=i?r-a:u-r;return 0===d&&(d=u-a),(i?-1:1)*d*(s+1)/(s+d/Math.abs(e-r))+r}var d=function(t){return function(e){return void 0===e?s:(t(e),a)}};return a.distortion=d((function(t){s=+t})),a.focus=d((function(t){r=+t})),a.copy=function(){return t({distortion:s,focus:r,scale:o.copy()})},a.nice=o.nice,a.ticks=o.ticks,a.tickFormat=o.tickFormat,a.domain=u({method:"domain",source:o,target:a}),a.range=u({method:"range",source:o,target:a}),a},l={scale:function(t){return d({distortion:3,focus:0,scale:t()})}},h="fish-eye-module--axis--33d9a",f="fish-eye-module--background--ac9ea",m="fish-eye-module--chartTitle--a1de9",v=70,p=70,g=50,x=80,y=700-x-v,b=function(){function t(t){this.width=0,this.config=t,this.setupRootEl(),this.setVars(),this.setDom()}var e=t.prototype;return e.render=function(){this.setChartTitle(),this.setBackground(),this.setPointer(),this.setAxis(),this.setLabels(),this.setDots(),this.setTitles(),this.updateDimensions(),this.bindMousemove(),this.bindMouseLeave(),this.bindClick(),this.bindResize()},e.setupRootEl=function(){var t=document.getElementById(this.config.rootElId);t.classList.add("fish-eye-module--fishEyeChart--20e7a"),this.width=t.getBoundingClientRect().width-p-g},e.setDom=function(){var t=(0,c.Ys)("#"+this.config.rootElId).append("svg"),e=t.append("g").attr("transform","translate("+p+","+x+")");this.dom={svg:t,svgG:e}},e.setChartTitle=function(){this.dom.svgG.append("text").attr("class",m).attr("text-anchor","middle").text(this.config.chartTitle).style("font-weight","bold")},e.setVars=function(){var t=(0,c.PKp)().domain(this.config.colorDomain).range(c.i4X),e=(0,c.PUr)().domain([0,5e8]).range([5,60]),i=l.scale(c.p2C).domain([300,1e5]).range([0,this.width]),n=l.scale(c.BYU).domain([20,90]).range([y,0]);this.vars={colorScale:t,focused:!1,radiusScale:e,xScale:i,yScale:n}},e.setAxis=function(){var t=(0,c.WUZ)(",d");this.dom.xAxis=(0,c.LLu)(this.vars.xScale).tickFormat((function(e){if(e<1e3)return t(e);var i=Math.round(e/1e3);return t(i)+"k"})).tickSize(-y),this.dom.yAxis=(0,c.y4O)(this.vars.yScale).tickSize(-this.width),this.dom.svgG.append("g").attr("class","x "+h).attr("transform","translate(0,"+y+")").call(this.dom.xAxis),this.dom.svgG.append("g").attr("class","y "+h).call(this.dom.yAxis)},e.setBackground=function(){return this.dom.svgG.append("rect").attr("class",f)},e.setLabels=function(){this.dom.svgG.append("text").attr("class","x label").attr("text-anchor","middle").text(this.config.xAxisLabel),this.dom.svgG.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-y/2).attr("y",-40).attr("dy",".75em").attr("transform","rotate(-90)").text(this.config.yAxisLabel)},e.position=function(t){var e=this;this.dom.dot.transition().duration(t).attr("cx",(function(t){var i=e.config.getXValue(t);return e.vars.xScale(i)})).attr("cy",(function(t){var i=e.config.getYValue(t);return e.vars.yScale(i)})).attr("r",(function(t){var i=e.config.getRadiusValue(t);return e.vars.radiusScale(i)})),this.dom.svgG.select(".x."+h).transition().duration(t).call(this.dom.xAxis),this.dom.svgG.select(".y."+h).transition().duration(t).call(this.dom.yAxis)},e.setDots=function(){var t=this;this.dom.dot=this.dom.svgG.append("g").attr("class","dots").selectAll(".dot").data(this.config.chartItems).enter().append("circle").attr("class","dot").style("fill",(function(e){var i=t.config.getColorValue(e);return t.vars.colorScale(i)})).style("stroke","black").style('"stroke-width"',"1px").sort((function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var o=i[0],s=i[1];return t.config.getRadiusValue(s)-t.config.getRadiusValue(o)})),this.position(0)},e.setTitles=function(){var t=this;this.dom.dot.append("title").text((function(e){return t.config.getCircleTitle(e)}))},e.setZoom=function(t){var e=t.animationDuration,i=t.distortion,n=t.focus;this.vars.xScale.distortion(i).focus(n[0]),this.vars.yScale.distortion(i).focus(n[1]),this.position(e)},e.zoom=function(t){var e=(0,c.cx$)(t);this.setZoom({animationDuration:0,distortion:2.5,focus:e})},e.setPointer=function(){this.dom.pointer=this.dom.svgG.append("text").text("+").attr("class","fish-eye-module--pointer--15827")},e.bindMousemove=function(){var t=this;return this.dom.svgG.on("mousemove",(function(e){t.vars.focused||t.zoom(e)}))},e.bindMouseLeave=function(){var t=this;return this.dom.svgG.on("mouseleave",(function(){t.vars.focused||t.setZoom({animationDuration:1e3,distortion:0,focus:[0,0]})}))},e.bindClick=function(){var t=this;this.dom.svgG.on("click",(function(e){if(t.vars.focused=!t.vars.focused,t.vars.focused){var i=(0,c.cx$)(t);t.dom.pointer.attr("x",i[0]).attr("y",i[1]).style("opacity",1)}else t.dom.pointer.style("opacity",0),t.zoom(e)}))},e.updateDimensions=function(){this.setupRootEl(),this.dom.svg.attr("width",this.width+p+g).attr("height",y+x+v),this.dom.svgG.select("."+m).attr("transform","translate("+this.width/2+",-40)"),this.dom.svgG.select("."+f).attr("width",this.width).attr("height",y),this.dom.svgG.select(".x.label").attr("y",y+26).attr("x",this.width/2),this.vars.xScale.range([0,this.width]),this.position(0)},e.bindResize=function(){var t=this;window.addEventListener("resize",(function(){t.updateDimensions()}))},t}(),w="chart",k=function(){var t=(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.AVB)("/demos/data/d3js/fish-eye/data.json"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(t){return t.income},C=function(t){return t.lifeExpectancy},S=function(t){return t.population},E=function(t){return t.region},G=function(t){for(var e=t.toString();;){var i=e.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(i===e)break;e=i}return e},L=function(t){return t.name+":\n- Income: "+G(t.income)+" $/P.C.\n- Population: "+G(t.population)+"\n- Life expectancy: "+t.lifeExpectancy+" years"},V=["Sub-Saharan Africa","South Asia","Middle East & North Africa","America","Europe & Central Asia","East Asia & Pacific"],D=function(t){return{chartItems:t,chartTitle:"Income Per Capita vs Life Expectancy vs Population vs Region - 180 Countries",colorDomain:V,getCircleTitle:L,getColorValue:E,getRadiusValue:S,getXValue:A,getYValue:C,rootElId:w,xAxisLabel:"income per capita, inflation-adjusted (dollars)",yAxisLabel:"life expectancy (years)"}},P=function(){var t=(0,s.Z)(a().mark((function t(){var e,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:e=t.sent,i=D(e),new b(i).render();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=P,T=function(t){var e=t.pageContext;return n.createElement(o.Z,{main:R,pageContext:e},n.createElement("div",{id:w}))}},2656:function(t,e,i){t.exports=i(3076)},8634:function(t,e,i){"use strict";function n(t,e,i,n,o,s,r){try{var a=t[s](r),c=a.value}catch(u){return void i(u)}a.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,i=arguments;return new Promise((function(o,s){var r=t.apply(e,i);function a(t){n(r,o,s,a,c,"next",t)}function c(t){n(r,o,s,a,c,"throw",t)}a(void 0)}))}}i.d(e,{Z:function(){return o}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-fish-eye-tsx-7c431ca617a0b4534fa9.js.map