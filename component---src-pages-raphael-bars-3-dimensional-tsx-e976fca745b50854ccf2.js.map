{"version":3,"sources":["webpack://demos/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://demos/./src/demos/_utils/browserRaphael.ts","webpack://demos/./src/demos/bars-3dimensional/bars-3dimensional.ts","webpack://demos/./src/demos/bars-3dimensional/bars-3dimensional.module.css","webpack://demos/./src/pages/raphael/bars-3dimensional.tsx"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","Raphael","window","require","fetchData","fetch","ROOT_PATH","response","json","data","results","Chart","rootElId","setCg","setDom","setData","render","drawAxis","keys","forEach","item","dom","els","el","paper","set","createCountries","seriesDisplayed","displayNextSeries","seriesLength","animateCountries","width","document","getElementById","getBoundingClientRect","cg","colorScheme","deep","easing","heightOffset","ratio","speed","classList","add","Object","length","keysLength","i","inner","animate","path","calcInnerPath","outer","calcOuterPath","fill","_i","attr","calcH0","it","se","calcH5","calcH10","index","push","transform","chart","querySelector","addEventListener","e","preventDefault","pageContext","main","style","marginBottom","textAlign","className","href","id"],"mappings":"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","file":"component---src-pages-raphael-bars-3-dimensional-tsx-e976fca745b50854ccf2.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","const Raphael = typeof window === \"undefined\" ? null : require(\"raphael\")\n\nexport default Raphael\n","import { RaphaelPaper } from \"raphael\"\n\nimport Raphael from \"@/demos/_utils/browserRaphael\"\n\nimport * as styles from \"./bars-3dimensional.module.css\"\n\nconst fetchData = async () => {\n  const response = await fetch(\n    `${ROOT_PATH}data/raphael/bars-3dimensional/data.json`\n  )\n  const data = await response.json()\n\n  return data.results\n}\n\ntype Data = {\n  [key: string]: number[]\n} & {\n  keys: string[]\n  keysLength: number\n  seriesDisplayed: number\n  seriesLength: number\n}\n\ntype Config = {\n  colorScheme: string[]\n  deep: number\n  easing: string\n  heightOffset: number\n  ratio: number\n  speed: number\n  width: number\n}\n\ntype Dom = {\n  els: { [k: string]: any }\n  paper: RaphaelPaper\n}\n\ntype ChartOpts = {\n  data: Data\n  rootElId: string\n}\n\nclass Chart {\n  private readonly rootElId: string\n  private cg!: Config\n  private dom!: Dom\n  private data!: Data\n\n  public constructor({ data, rootElId }: ChartOpts) {\n    this.rootElId = rootElId\n\n    this.setCg()\n    this.setDom()\n    this.setData(data)\n  }\n\n  public render() {\n    this.drawAxis()\n    this.data.keys.forEach((item) => {\n      this.dom.els[item].el = this.dom.paper.set()\n    })\n\n    this.createCountries(this.data.seriesDisplayed)\n  }\n\n  public displayNextSeries() {\n    const { data } = this\n\n    data.seriesDisplayed =\n      data.seriesDisplayed + 1 === data.seriesLength\n        ? 0\n        : data.seriesDisplayed + 1\n\n    this.animateCountries(data.seriesDisplayed)\n  }\n\n  private setCg() {\n    const { width } = (document.getElementById(\n      this.rootElId\n    ) as HTMLElement).getBoundingClientRect()\n\n    this.cg = {\n      colorScheme: [\"#C1252D\", \"#5F3A5F\", \"#51A8D0\"],\n      deep: 5,\n      easing: \"bounce\",\n      heightOffset: 100,\n      ratio: 0.6,\n      speed: 800,\n      width,\n    }\n  }\n\n  private setDom() {\n    this.dom = {\n      els: {},\n      paper: Raphael(this.rootElId, this.cg.width, 245),\n    }\n    ;(document.getElementById(this.rootElId) as HTMLElement).classList.add(\n      styles.bars3DimensionalChart\n    )\n  }\n\n  private setData(data: Data) {\n    data.keys = Object.keys(data)\n    data.seriesDisplayed = 0\n    data.seriesLength = data[data.keys[0]].length\n    data.keysLength = data.keys.length\n\n    this.data = data\n\n    data.keys.forEach((item: string) => {\n      this.dom.els[item] = {}\n    })\n  }\n\n  private animateCountries(i: number) {\n    const { data } = this\n\n    data.keys.forEach((item) => {\n      this.dom.els[item].inner.animate(\n        {\n          path: this.calcInnerPath(item, i),\n        },\n        this.cg.speed,\n        this.cg.easing\n      )\n      this.dom.els[item].outer.animate(\n        {\n          path: this.calcOuterPath(item, i),\n        },\n        this.cg.speed,\n        this.cg.easing\n      )\n\n      return this.dom.els[item].el.animate(\n        {\n          fill: this.cg.colorScheme[i],\n        },\n        this.cg.speed\n      )\n    })\n  }\n\n  private drawAxis() {\n    const {\n      dom: { paper },\n    } = this\n    const {\n      cg: { deep },\n    } = this\n\n    for (let i = 0, _i = 0; _i <= 3; i = ++_i) {\n      const path = `M5,${25 * i} ${this.cg.width},${\n        this.cg.heightOffset + i * 25\n      }`\n\n      paper.path(path).attr(\"stroke-dasharray\", \". \")\n    }\n\n    return paper\n      .path(\n        `M0,${deep + 100} ${deep},100 ${this.cg.width},${\n          100 + this.cg.heightOffset\n        } ${this.cg.width - deep},${100 + this.cg.heightOffset + deep}Z`\n      )\n      .attr(\"fill\", \"#999\")\n      .attr(\"stroke\", \"none\")\n  }\n\n  private calcH0(it: string, se: number): number {\n    return 100 - this.data[it]![se]!\n  }\n\n  private calcH5(it: string, se: number) {\n    return 100 - this.data[it][se] + 5 * this.cg.ratio\n  }\n\n  private calcH10(it: string, se: number) {\n    return 100 - this.data[it][se] + 10 * this.cg.ratio\n  }\n\n  private calcInnerPath(it: string, se: number) {\n    return (\n      `M0,${this.calcH5(it, se)} 15,${this.calcH10(it, se)} ` +\n      `15,${100 + 10 * this.cg.ratio} 0,${100 + 5 * this.cg.ratio}Z`\n    )\n  }\n\n  private calcOuterPath(it: string, se: number) {\n    return `M0,${this.calcH5(it, se)} 5,${this.calcH0(it, se)} 20,${this.calcH5(\n      it,\n      se\n    )} 20,${100 + 5 * this.cg.ratio} 15,${100 + 10 * this.cg.ratio} 0,${\n      100 + 5 * this.cg.ratio\n    }Z`\n  }\n\n  private createCountries(i: number) {\n    const { data } = this\n    const {\n      dom: { paper },\n    } = this\n\n    return data.keys.forEach((item, index) => {\n      this.dom.els[item].inner = paper.path(this.calcInnerPath(item, i))\n      this.dom.els[item].outer = paper\n        .path(this.calcOuterPath(item, i))\n        .attr(\"opacity\", 0.5)\n      this.dom.els[item].el.push(\n        this.dom.els[item].inner,\n        this.dom.els[item].outer\n      )\n      this.dom.els[item].el.transform(\n        `T ${(this.cg.width / data.keysLength) * index},` +\n          `${(this.cg.heightOffset / data.keysLength) * index}`\n      )\n\n      return this.dom.els[item].el\n        .attr(\"fill\", \"#C1252D\")\n        .attr(\"stroke\", \"none\")\n        .attr(\"title\", `${item}: ${data[item][i]}`)\n    })\n  }\n}\n\nconst main = async () => {\n  const data = await fetchData()\n\n  const chart = new Chart({\n    data,\n    rootElId: \"chart\",\n  })\n\n  chart.render()\n  ;(document.querySelector(\".animate-bars\") as HTMLElement).addEventListener(\n    \"click\",\n    (e) => {\n      e.preventDefault()\n\n      chart.displayNextSeries()\n    }\n  )\n}\n\nexport default main\n","// extracted by mini-css-extract-plugin\nexport var bars3DimensionalChart = \"bars-3dimensional-module--bars3DimensionalChart--2Z5ce\";","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/bars-3dimensional/bars-3dimensional\"\n\nconst Bars3Dimensional = ({ pageContext }: DemoPageProps) => (\n  <Demo main={main} pageContext={pageContext}>\n    <div\n      style={{\n        marginBottom: 20,\n        textAlign: \"center\",\n      }}\n    >\n      <a className=\"btn btn-info animate-bars\" href=\"\">\n        Change Series\n      </a>\n    </div>\n    <div id=\"chart\" />\n  </Demo>\n)\n\nexport default Bars3Dimensional\n"],"sourceRoot":""}