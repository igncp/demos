(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[923],{9646:function(t,r,e){"use strict";var n;e.d(r,{Z:function(){return v}});var a=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(t){return"string"==typeof t&&i.test(t)},u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));var d,l,f=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(u[t[r+0]]+u[t[r+1]]+u[t[r+2]]+u[t[r+3]]+"-"+u[t[r+4]]+u[t[r+5]]+"-"+u[t[r+6]]+u[t[r+7]]+"-"+u[t[r+8]]+u[t[r+9]]+"-"+u[t[r+10]]+u[t[r+11]]+u[t[r+12]]+u[t[r+13]]+u[t[r+14]]+u[t[r+15]]).toLowerCase();if(!s(e))throw TypeError("Stringified UUID is invalid");return e},h=0,p=0;var v=function(t,r,e){var n=r&&e||0,a=r||new Array(16),i=(t=t||{}).node||d,s=void 0!==t.clockseq?t.clockseq:l;if(null==i||null==s){var u=t.random||(t.rng||o)();null==i&&(i=d=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=l=16383&(u[6]<<8|u[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,m=c-h+(v-p)/1e4;if(m<0&&void 0===t.clockseq&&(s=s+1&16383),(m<0||c>h)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,p=v,l=s;var g=(1e4*(268435455&(c+=122192928e5))+v)%4294967296;a[n++]=g>>>24&255,a[n++]=g>>>16&255,a[n++]=g>>>8&255,a[n++]=255&g;var y=c/4294967296*1e4&268435455;a[n++]=y>>>8&255,a[n++]=255&y,a[n++]=y>>>24&15|16,a[n++]=y>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(var w=0;w<6;++w)a[n+w]=i[w];return r||f(a)}},6126:function(t,r,e){"use strict";var n;e.d(r,{H:function(){return a},d:function(){return n}}),function(t){t.STORYBOOK="storybook",t.TESTING="testing"}(n||(n={}));var a={SCRIPT:"/vendors/jquery-ui/jquery-ui.min.js",STYLE:"/vendors/jquery-ui/themes/base/jquery-ui.min.css"}},4091:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return k}});var n=e(7294),a=e(6126),o=e(4275),i=e(8634),s=e(2656),u=e.n(s),c=e(2094),d="chart",l="update",f=function(t){var r=t.getDebits(),e=t.getCredits(),n=t.getCountriesList(),a=(0,c.WUZ)(",.3r"),o=function(t){return"$"+a(t)+"B."},i=n.map((function(t){return{id:t.id,label:t.name}})),s=function(t){return t.map((function(t){return t?+t.amount:0}))};return{chords:[r.map(s),e.map(s)],chordsTitles:["Debits","Credits"],getGroupTitle:function(t){var r=t.chartIndex,e=t.chordGroup;return n[e.index].name+" "+(r?"owes":"is owed")+" "+o(e.value)},getRibbonTitle:function(t){var r=t.chartIndex,e=t.sourceIndex,a=t.sourceValue,i=t.targetIndex,s=n[e],u=[n[i].name,s.name];return r&&u.reverse(),u[0]+" owes "+u[1]+" "+o(a)},groupItems:i,rootElId:d}},h=function(){function t(t){var r=t.countriesList,e=t.credits,n=t.debits;this.credits=e,this.debits=n,this.countriesList=r}t.fetchAndCreate=function(){var r=(0,i.Z)(u().mark((function r(){var e,n,a,o,i,s,d,l;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.gyn)("/demos/data/d3js/chord/data.csv");case 2:return e=r.sent,n=[],a={},o=[],i=[],s=0,d=function(t){return t in a||(a[t]={id:s,name:t},s+=1),a[t]},l=e.map((function(t){return Object.assign({},t,{creditor:d(t.creditor),debtor:Object.assign({},d(t.debtor),{risk:t.risk})})})),Array.from({length:s}).forEach((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];o[n]=[],i[n]=[],Array.from({length:s}).forEach((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var a=r[1];o[n][a]=null,i[n][a]=null}))})),l.forEach((function(t){o[t.creditor.id][t.debtor.id]=t,i[t.debtor.id][t.creditor.id]=t,n[t.creditor.id]=t.creditor,n[t.debtor.id]=t.debtor})),r.abrupt("return",new t({countriesList:n,credits:i,debits:o}));case 13:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();var r=t.prototype;return r.getCredits=function(){return this.credits},r.getDebits=function(){return this.debits},r.getCountriesList=function(){return this.countriesList},t}(),p=e(9646),v="chord-module--chartTitle--33urD",m="chord-module--chord--1Zjd0",g="chord-module--group--309FH",y="chord-module--groupLabel--8huhS",w=function(t){return t.source.index+"_"+t.target.index},x=function(t){return t.index},b=20,A=50,C=function(){function t(t){var r=this;this.handleWindowResize=function(){r.render()},this.config=t;var e=this.config,n=e.chords,a=e.rootElId;this.dropShadowGroupsId="drop-shadow-groups-"+(0,p.Z)().slice(0,6),this.ribbonItemClass="ribbon-item-"+(0,p.Z)().slice(0,6),this.chordGroupClass="chord-group-"+(0,p.Z)().slice(0,6);var o=(0,c.Ys)("#"+a).style("width","100%").style("justify-content","space-evenly");o.selectAll("div").data(n).enter().append("div");var i=o.selectAll("div"),s=i.append("svg"),u=s.append("g");this.elements={charts:u,chartsDivs:i,chartsSVGs:s,root:o},u.each((function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var a=e[1],o=u.filter((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];return a===n})),i=t.chordsTitles[a];o.append("text").text(i).attr("class",v).attr("text-anchor","middle")})),function(t){var r=t.charts,e=t.deviation,n=t.name,a=t.slope,o=r.append("defs").append("filter").attr("id",n);o.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),o.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",e),o.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),o.append("feComponentTransfer").append("feFuncA").attr("slope",a).attr("type","linear")}({charts:u,deviation:3,name:this.dropShadowGroupsId,slope:.5}),this.colorScale=(0,c.PKp)(c.i4X),this.render(),window.addEventListener("resize",this.handleWindowResize)}t.renderChart=function(r){return new t(r)};var r=t.prototype;return r.tearDown=function(){window.removeEventListener("resize",this.handleWindowResize)},r.refresh=function(){this.render(!0)},r.render=function(t){var r=this.colorScale,e=this.config,n=e.chords,a=e.getGroupTitle,o=e.getRibbonTitle,i=e.groupItems,s=e.rootElId,u=t?1e3:0,d=document.getElementById(s).getBoundingClientRect().width,l=d/n.length-20,f=d<768,h=f?d:l,p=this.elements,C=p.charts,E=p.chartsDivs,I=p.chartsSVGs,k=p.root,R=Math.min(l,h)/(f?1:n.length)-(f?0:20),S=R-20,T=(0,c.Nb1)().innerRadius(S).outerRadius(R);k.style("display",f?"flex":"inline-flex").style("flex-direction",f?"column":"row"),E.attr("width",f?d:l).style("height",h+A+b+"px"),I.attr("width",f?d:l).attr("height",h+A+b),C.attr("transform",f?"translate("+d/2+","+(h/2+A)+")":"translate("+l/2+","+(h/2+A)+")"),C.each((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1],a=C.filter((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var a=r[1];return n===a}));a.select("."+v).attr("transform","translate(0,"+(-1*h/2-0)+")")}));var G=this.chordGroupClass,L=this.dropShadowGroupsId,j=this.ribbonItemClass;C.each((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=e[0],d=e[1],l=(0,c.Ys)(this),f=(0,c.fFo)().sortChords(c.$1i)(s),h=(0,c.N22)().radius(S),p=l.selectAll("."+m).data().reduce((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[0],a=r[1];return n[w(a)]=a,n}),{}),v=l.selectAll("."+m).data(f,(function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];return n}));v.enter().append("path").attr("class",m+" "+j),v.exit().remove(),l.selectAll("path."+m).style("fill",(function(t){return r(t.target.index)})).style("stroke",(function(t){var e=r(t.target.index);return(0,c.B8C)(e).darker().formatHex()})).style("stroke-width",2).attr("title",(function(t){return o({chartIndex:d,sourceIndex:t.source.index,sourceValue:t.source.value,targetIndex:t.target.index,targetValue:t.source.value})})).transition().duration(u).attrTween("d",(function(t){var r=p[w(t)],e=(0,c.sXR)(null!=r?r:t,t);return function(t){var r=e(t);return h(r)}}));var b=l.selectAll("."+g).data(f.groups,x).enter().append("g").attr("class",g);b.append("path").attr("class",G),b.append("text").attr("class","group-text").attr("x",6).attr("dy",15).append("textPath").attr("xlink:href",(function(t){return"#group"+t.index+"-"+d})).attr("class",y).text((function(t){return i[t.index].label}));var A=l.selectAll("."+G).data(),C=l.selectAll("."+g);C.selectAll("."+G).data(f.groups,x).style("fill",(function(t){return r(t.index)})).attr("id",(function(t){return"group"+t.index+"-"+d})).style("filter",(function(){return"url(#"+L+")"})).attr("title",(function(t){return a({chartIndex:d,chordGroup:t})})).transition().duration(u).attrTween("d",(function(t){var r=A[t.index],e=(0,c.sXR)(r,t);return function(t){return T(e(t))}})),C.selectAll(".group-text").selectAll("textPath").data(f.groups,x).transition().duration(u).style("opacity",(function(t){return Math.abs(t.startAngle-t.endAngle)>.4?1:0})),[j,G].forEach((function(t){$("."+t).tooltip({track:!0})}))}))},t}(),E=function(){var t=(0,i.Z)(u().mark((function t(){var r,e,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.fetchAndCreate();case 2:r=t.sent,e=f(r),n=C.renderChart(e),document.getElementById(l).addEventListener("click",(function(){e.chords.forEach((function(t){t.forEach((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[0],a=r[1];n.forEach((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var o=r[1];if(a!==o){var i=Math.random()<.1;i&&(n[o]=Math.max(0,Math.floor(100*Math.random())-20))}}))}))})),n.refresh()}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=E,k=function(t){var r=t.pageContext;return n.createElement(o.Z,{links:[a.H.STYLE],main:I,pageContext:r,scripts:[a.H.SCRIPT]},n.createElement("form",{style:{marginBottom:20}},n.createElement("button",{className:"btn btn-info",id:l,type:"button"},"Update Random Value")),n.createElement("div",{id:d}))}},2656:function(t,r,e){t.exports=e(3076)},8634:function(t,r,e){"use strict";function n(t,r,e,n,a,o,i){try{var s=t[o](i),u=s.value}catch(c){return void e(c)}s.done?r(u):Promise.resolve(u).then(n,a)}function a(t){return function(){var r=this,e=arguments;return new Promise((function(a,o){var i=t.apply(r,e);function s(t){n(i,a,o,s,u,"next",t)}function u(t){n(i,a,o,s,u,"throw",t)}s(void 0)}))}}e.d(r,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-chord-tsx-e69da2b9d9d193628bbe.js.map