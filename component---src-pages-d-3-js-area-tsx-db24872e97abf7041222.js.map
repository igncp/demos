{"version":3,"file":"component---src-pages-d-3-js-area-tsx-db24872e97abf7041222.js","mappings":"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","sources":["webpack://demos/./node_modules/uuid/dist/esm-browser/rng.js","webpack://demos/./node_modules/uuid/dist/esm-browser/regex.js","webpack://demos/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://demos/./node_modules/uuid/dist/esm-browser/validate.js","webpack://demos/./node_modules/uuid/dist/esm-browser/v1.js","webpack://demos/./src/demos/area/chart/area-chart.module.css","webpack://demos/./src/demos/area/chart/voronoi-group.ts","webpack://demos/./src/demos/area/chart/area-chart.ts","webpack://demos/./src/demos/area/income-chart-config.ts","webpack://demos/./src/demos/area/income-chart-controls.ts","webpack://demos/./src/demos/area/income-item-model.ts","webpack://demos/./src/demos/area/area.ts","webpack://demos/./src/pages/d3js/area.tsx"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","// extracted by mini-css-extract-plugin\nexport var areaChart = \"area-chart-module--areaChart--8ccff\";\nexport var line = \"area-chart-module--line--571fe\";\nexport var area = \"area-chart-module--area--5af1c\";\nexport var axis = \"area-chart-module--axis--6cab9\";\nexport var chartTitle = \"area-chart-module--chartTitle--ca932\";\nexport var x = \"area-chart-module--x--5ced5\";\nexport var minor = \"area-chart-module--minor--8ab97\";\nexport var y = \"area-chart-module--y--c7cbb\";\nexport var voronoi = \"area-chart-module--voronoi--25398\";\nexport var showVoronoi = \"area-chart-module--showVoronoi--5bec7\";\nexport var point = \"area-chart-module--point--3acfa\";","import {\n  BaseType,\n  Selection,\n  color as colorD3,\n  scaleOrdinal,\n  schemePastel2,\n} from \"d3\"\nimport { Delaunay } from \"d3-delaunay\"\n\nimport * as styles from \"./area-chart.module.css\"\n\ntype RenderOpts<Point> = {\n  animationDuration: number\n  boundaries: [number, number, number, number]\n  className: string\n  clipPath: string\n  extractXScale: (point: Point) => number\n  extractYScale: (point: Point) => number\n  filter: string\n  getItemId: (point: Point) => number\n  getTitle: (point: Point) => string\n  mouseenter: (_: unknown, point: Point) => void\n  mouseleave: (_: unknown, point: Point) => void\n  points: Point[]\n}\n\nclass VoronoiGroup<Point> {\n  private readonly voronoiGroup: Selection<\n    SVGGElement,\n    unknown,\n    BaseType,\n    unknown\n  >\n\n  private readonly state = {\n    hasVoronoi: false,\n  }\n\n  public constructor(\n    parent: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  ) {\n    this.voronoiGroup = parent.append(\"g\")\n  }\n\n  public toggleVoronoi() {\n    this.state.hasVoronoi = !this.state.hasVoronoi\n    this.setVoronoi()\n  }\n\n  public render({\n    animationDuration,\n    boundaries,\n    className,\n    clipPath,\n    extractXScale,\n    extractYScale,\n    filter,\n    getItemId,\n    getTitle,\n    mouseenter,\n    mouseleave,\n    points,\n  }: RenderOpts<Point>) {\n    const { voronoiGroup } = this\n    const voronoiData = voronoiGroup\n      .selectAll<SVGPathElement, Point>(\"path\")\n      .data(points, (point) => getItemId(point))\n\n    voronoiData.enter().append(\"path\")\n    voronoiData.exit().remove()\n\n    const colorScale = scaleOrdinal<number, string>(schemePastel2)\n\n    const voronoi = Delaunay.from(points, extractXScale, extractYScale).voronoi(\n      boundaries\n    )\n\n    voronoiGroup\n      .attr(\"clip-path\", clipPath)\n      .attr(\"class\", styles.voronoi)\n      .selectAll<SVGPathElement, Point>(\"path\")\n      .attr(\"fill\", (point) => {\n        const itemId = getItemId(point)\n        const colorHex = colorScale(itemId)\n        const itemColor = colorD3(colorHex)!\n\n        itemColor.opacity = 0.2\n\n        return itemColor.formatRgb()\n      })\n      .on(\"mouseenter\", mouseenter)\n      .on(\"mouseleave\", mouseleave)\n      .attr(\"class\", className)\n      .attr(\"title\", getTitle)\n      .style(\"filter\", filter)\n      .transition()\n      .duration(animationDuration)\n      .attr(\"d\", (point) => voronoi.renderCell(getItemId(point)))\n\n    this.setVoronoi()\n  }\n\n  private setVoronoi() {\n    const {\n      state: { hasVoronoi },\n      voronoiGroup,\n    } = this\n    const currentClass = voronoiGroup.attr(\"class\")\n    const { showVoronoi } = styles\n\n    const currentClassWithoutVoronoi = currentClass\n      .replace(showVoronoi, \"\")\n      .trim()\n\n    const newClass = hasVoronoi\n      ? `${currentClassWithoutVoronoi} ${showVoronoi}`\n      : currentClassWithoutVoronoi\n\n    voronoiGroup.attr(\"class\", newClass)\n  }\n}\n\nexport { VoronoiGroup }\n","import {\n  BaseType,\n  Selection,\n  area as areaD3,\n  axisBottom,\n  axisLeft,\n  format,\n  line as lineD3,\n  max,\n  min,\n  scaleLinear,\n  scaleQuantize,\n  select,\n} from \"d3\"\nimport $ from \"jquery\"\nimport \"jquery-ui/themes/base/all.css\"\nimport { v1 as uuidv1 } from \"uuid\"\n\nimport * as styles from \"./area-chart.module.css\"\nimport { VoronoiGroup } from \"./voronoi-group\"\n\nif (typeof window !== \"undefined\") {\n  require(\"jquery-ui/ui/widgets/tooltip\")\n}\n\nconst filterBlackOpacity = ({\n  deviation,\n  id,\n  slope,\n  svg,\n}: {\n  deviation: number\n  id: string\n  slope: number\n  svg: Selection<SVGGElement, unknown, HTMLElement, unknown>\n}) => {\n  const defs = svg.append(\"defs\")\n  const filter = defs\n    .append(\"filter\")\n    .attr(\"height\", \"500%\")\n    .attr(\"id\", `drop-shadow-${id}`)\n    .attr(\"width\", \"500%\")\n    .attr(\"x\", \"-200%\")\n    .attr(\"y\", \"-200%\")\n\n  filter\n    .append(\"feGaussianBlur\")\n    .attr(\"in\", \"SourceAlpha\")\n    .attr(\"stdDeviation\", deviation)\n\n  filter.append(\"feOffset\").attr(\"dx\", 1).attr(\"dy\", 1)\n  filter\n    .append(\"feComponentTransfer\")\n    .append(\"feFuncA\")\n    .attr(\"slope\", slope)\n    .attr(\"type\", \"linear\")\n\n  const feMerge = filter.append(\"feMerge\")\n\n  feMerge.append(\"feMergeNode\")\n\n  feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\")\n}\n\ntype ChartConfig<AreaPoint> = {\n  areaPoints: AreaPoint[]\n  chartTitle: string\n  chartTitleShort: string\n  getItemId: (areaPoint: AreaPoint) => number\n  getItemTitle: (areaPoint: AreaPoint) => string\n  getItemXValue: (areaPoint: AreaPoint) => number\n  getItemYValue: (areaPoint: AreaPoint) => number\n  rootElId: string\n}\n\ninterface BaseChart {\n  refresh: () => void\n  tearDown: () => void\n  toggleVoronoi: () => void\n}\n\ntype CommonSelection<El extends BaseType> = Selection<\n  El,\n  unknown,\n  HTMLElement,\n  unknown\n>\n\ntype ChartElements<AreaPoint> = Readonly<{\n  areaSel: CommonSelection<SVGPathElement>\n  backgroundBands: CommonSelection<SVGGElement>\n  chartTitleSel: CommonSelection<SVGTextElement>\n  clipRect: CommonSelection<SVGRectElement>\n  clipTopRect: CommonSelection<SVGRectElement>\n  lineSel: CommonSelection<SVGPathElement>\n  svg: CommonSelection<SVGSVGElement>\n  svgG: CommonSelection<SVGGElement>\n  voronoiGroup: VoronoiGroup<AreaPoint>\n  xAxisSel: CommonSelection<SVGGElement>\n  yAxisSel: CommonSelection<SVGGElement>\n}>\n\nclass AreaChart<AreaPoint> implements BaseChart {\n  private readonly config: ChartConfig<AreaPoint>\n  private readonly svgOpacityFilter: string\n  private readonly elements: ChartElements<AreaPoint>\n\n  private constructor(chartConfig: ChartConfig<AreaPoint>) {\n    this.config = chartConfig\n\n    const { rootElId } = chartConfig\n\n    const svg = select(`#${rootElId}`).append(\"svg\")\n    const svgG = svg.append(\"g\").attr(\"class\", styles.areaChart)\n    const backgroundBands = svgG.append(\"g\")\n    const chartTitleSel = svgG\n      .append(\"text\")\n      .attr(\"class\", styles.chartTitle)\n      .attr(\"text-anchor\", \"middle\")\n      .style(\"font-weight\", \"bold\")\n    const xAxisSel = svgG.append(\"g\")\n    const yAxisSel = svgG.append(\"g\")\n    const lineSel = svgG.append(\"path\")\n    const areaSel = svgG.append(\"path\")\n    const voronoiGroup = new VoronoiGroup<AreaPoint>(svgG)\n    const clipRect = svgG.append(\"clipPath\").attr(\"id\", \"clip\").append(\"rect\")\n\n    // This is exclusively for clipping the vertical axis\n    const clipTopRect = svgG\n      .append(\"clipPath\")\n      .attr(\"id\", \"clip-top\")\n      .append(\"rect\")\n\n    this.svgOpacityFilter = `opacity-${uuidv1().slice(0, 6)}`\n\n    filterBlackOpacity({\n      deviation: 2,\n      id: this.svgOpacityFilter,\n      slope: 0.5,\n      svg: svgG,\n    })\n\n    this.elements = {\n      areaSel,\n      backgroundBands,\n      chartTitleSel,\n      clipRect,\n      clipTopRect,\n      lineSel,\n      svg,\n      svgG,\n      voronoiGroup,\n      xAxisSel,\n      yAxisSel,\n    }\n\n    this.render(true)\n\n    window.addEventListener(\"resize\", this.handleWindowResize)\n  }\n\n  public static renderChart<AreaPoint>(chartConfig: ChartConfig<AreaPoint>) {\n    return new AreaChart(chartConfig)\n  }\n\n  public refresh() {\n    this.render(false)\n  }\n\n  public tearDown() {\n    window.removeEventListener(\"resize\", this.handleWindowResize)\n  }\n\n  public toggleVoronoi() {\n    this.elements.voronoiGroup.toggleVoronoi()\n  }\n\n  private render(cancelAnimation: boolean) {\n    const {\n      config: { rootElId },\n    } = this\n    const { width } = (\n      document.getElementById(rootElId) as HTMLElement\n    ).getBoundingClientRect()\n    const isSmallDevice = width < 500\n    const animationDuration = cancelAnimation || isSmallDevice ? 0 : 1000\n\n    const margin = {\n      bottom: 50,\n      left: isSmallDevice ? 50 : 70,\n      right: isSmallDevice ? 10 : 50,\n      top: 50,\n    }\n\n    const innerWidth = width - margin.left - margin.right\n    const height = 400 - margin.top - margin.bottom\n\n    const { config: chartConfig } = this\n\n    const { areaPoints } = chartConfig\n    const tooltipItemClass = `tooltip-item-${uuidv1().slice(0, 6)}`\n    const pointClassPrefix = `point-${uuidv1().slice(0, 6)}-`\n\n    const titleYOffset = -15\n    const axisTickSize = 10\n\n    const {\n      elements: {\n        areaSel,\n        backgroundBands,\n        chartTitleSel,\n        clipRect,\n        clipTopRect,\n        lineSel,\n        svg,\n        svgG,\n        voronoiGroup,\n        xAxisSel,\n        yAxisSel,\n      },\n    } = this\n\n    svg\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .attr(\"width\", innerWidth + margin.left + margin.right)\n\n    svgG.attr(\"transform\", `translate(${margin.left},${margin.top})`)\n\n    chartTitleSel\n      .attr(\n        \"transform\",\n        `translate(${width / 2 - margin.left},${titleYOffset})`\n      )\n      .text(() =>\n        isSmallDevice ? chartConfig.chartTitleShort : chartConfig.chartTitle\n      )\n\n    const xMax = max(areaPoints, chartConfig.getItemXValue) as number\n    const xMin = min(areaPoints, chartConfig.getItemXValue) as number\n\n    const yMax = max(areaPoints, chartConfig.getItemYValue) as number\n    const yMin = min(areaPoints, chartConfig.getItemYValue) as number\n\n    const xScale = scaleLinear().domain([xMin, xMax]).range([0, innerWidth])\n    const yScale = scaleLinear()\n      .domain([yMax + 0.05, yMin - 0.05])\n      .range([0, height])\n\n    const extractXScale = (areaPoint: AreaPoint) =>\n      xScale(chartConfig.getItemXValue(areaPoint))\n\n    const extractYScale = (areaPoint: AreaPoint) =>\n      yScale(chartConfig.getItemYValue(areaPoint))\n\n    const getSmallDeviceTicksScale = () =>\n      scaleQuantize()\n        .domain([0, 500])\n        .range(Array.from({ length: 6 }).map((...[, rangeIndex]) => rangeIndex))\n\n    const ticks = isSmallDevice ? getSmallDeviceTicksScale()(width) : null\n\n    const xAxis = axisBottom(xScale).tickFormat(format(\".0f\")).ticks(ticks)\n    const yAxis = axisLeft(yScale)\n      .tickFormat(format(\".0%\"))\n      .tickSize(axisTickSize)\n\n    xAxisSel\n      .attr(\"class\", `${styles.x} ${styles.axis}`)\n      .attr(\"transform\", `translate(0,${height})`)\n      .call(xAxis)\n      .selectAll(\"text\")\n      .attr(\"dy\", \"1.25em\")\n\n    yAxisSel\n      .attr(\"class\", `${styles.y} ${styles.axis}`)\n      .attr(\"clip-path\", \"url(#clip-top)\")\n      .transition()\n      .duration(animationDuration)\n      .call(yAxis)\n      .selectAll(\"text\")\n      .attr(\"dx\", \"-.25em\")\n\n    const area = areaD3<AreaPoint>()\n      .x(extractXScale)\n      .y0(height)\n      .y1(extractYScale)\n    const line = lineD3<AreaPoint>().x(extractXScale).y(extractYScale)\n\n    lineSel\n      .datum(areaPoints)\n      .attr(\"clip-path\", \"url(#clip)\")\n      .attr(\"class\", styles.line)\n      .transition()\n      .duration(animationDuration)\n      .attr(\"d\", line)\n\n    clipRect.attr(\"height\", height).attr(\"width\", innerWidth)\n\n    clipTopRect\n      .attr(\"height\", height)\n      .attr(\"width\", innerWidth)\n      .attr(\"transform\", \"translate(-50,-5)\")\n\n    areaSel\n      .datum(areaPoints)\n      .attr(\"class\", styles.area)\n      .attr(\"clip-path\", \"url(#clip)\")\n      .transition()\n      .duration(animationDuration)\n      .attr(\"d\", area)\n\n    const mouseenter = (...[, areaPoint]: [unknown, AreaPoint]) => {\n      select(`.${pointClassPrefix}${chartConfig.getItemId(areaPoint)}`).style(\n        \"display\",\n        \"block\"\n      )\n    }\n\n    const mouseleave = (...[, areaPoint]: [unknown, AreaPoint]) => {\n      select(`.${pointClassPrefix}${chartConfig.getItemId(areaPoint)}`).style(\n        \"display\",\n        \"none\"\n      )\n    }\n\n    const bandsPercentage = 2.5\n    const bandsData = Array.from({ length: 100 / bandsPercentage }).map(\n      (...[, bandIndex]) => (bandIndex * bandsPercentage) / 100\n    )\n    const bandHeight = Math.abs(yScale(bandsPercentage / 100) - yScale(0))\n\n    const bands = backgroundBands.selectAll(\"rect\").data(bandsData)\n\n    bands.enter().append(\"rect\")\n    bands.exit().remove()\n\n    backgroundBands\n      .selectAll<SVGRectElement, number>(\"rect\")\n      .attr(\"clip-path\", \"url(#clip)\")\n      .attr(\"x\", 0)\n      .attr(\"width\", innerWidth)\n      .attr(\"fill\", (...[, bandIndex]) =>\n        bandIndex % 2 ? \"#f7f7f7\" : \"#ffffff\"\n      )\n      .attr(\"class\", \"backgroundBands\")\n      .transition()\n      .duration(animationDuration)\n      .attr(\"height\", bandHeight)\n      .attr(\"y\", (bandPercentage) => yScale(bandPercentage))\n\n    const circleData = svgG.selectAll(\"circle\").data(areaPoints)\n\n    circleData.enter().append(\"circle\")\n    circleData.exit().remove()\n\n    svgG\n      .selectAll<SVGCircleElement, AreaPoint>(\"circle\")\n      .attr(\"r\", \"5px\")\n      .style(\"filter\", `url(#drop-shadow-${this.svgOpacityFilter})`)\n      .attr(\n        \"transform\",\n        (areaPoint: AreaPoint) =>\n          `translate(${extractXScale(areaPoint)},${extractYScale(areaPoint)})`\n      )\n      .attr(\n        \"class\",\n        (areaPoint) =>\n          `${\n            styles.point\n          } ${tooltipItemClass} ${pointClassPrefix}${chartConfig.getItemId(\n            areaPoint\n          )}`\n      )\n      .on(\"mouseenter\", mouseenter)\n      .on(\"mouseleave\", mouseleave)\n      .attr(\"title\", chartConfig.getItemTitle)\n\n    voronoiGroup.render({\n      animationDuration,\n      boundaries: [\n        -margin.left,\n        -margin.top,\n        innerWidth + margin.right,\n        height + margin.bottom,\n      ],\n      className: tooltipItemClass,\n      clipPath: \"url(#clip)\",\n      extractXScale,\n      extractYScale,\n      filter: `url(#drop-shadow-${this.svgOpacityFilter})`,\n      getItemId: chartConfig.getItemId,\n      getTitle: chartConfig.getItemTitle,\n      mouseenter,\n      mouseleave,\n      points: areaPoints,\n    })\n\n    $(`.${tooltipItemClass}`).tooltip({\n      track: true,\n    })\n  }\n\n  private readonly handleWindowResize = () => {\n    this.render(true)\n  }\n}\n\nexport { ChartConfig, AreaChart }\n","import { ChartConfig } from \"./chart/area-chart\"\nimport { IncomeItem } from \"./income-item-model\"\n\nconst CONTAINER_ID = \"chart\"\n\ntype Config = ChartConfig<IncomeItem>\n\nconst getItemXValue: Config[\"getItemXValue\"] = (incomeItem) =>\n  incomeItem.getYear()\nconst getItemYValue: Config[\"getItemYValue\"] = (incomeItem) =>\n  incomeItem.getNormalizedValue()\nconst getItemId: Config[\"getItemId\"] = (incomeItem) => incomeItem.getId()\nconst getItemTitle: Config[\"getItemTitle\"] = (incomeItem: IncomeItem) =>\n  incomeItem.getSummary()\nconst chartTitle = \"Share of top decile [aka top 10%] in national income\"\nconst chartTitleShort = chartTitle.replace(\" [aka top 10%]\", \"\")\n\nconst createChartConfig = (\n  dataPoints: IncomeItem[]\n): ChartConfig<IncomeItem> => ({\n  areaPoints: dataPoints,\n  chartTitle,\n  chartTitleShort,\n  getItemId,\n  getItemTitle,\n  getItemXValue,\n  getItemYValue,\n  rootElId: CONTAINER_ID,\n})\n\nexport { CONTAINER_ID, createChartConfig }\n","const TOGGLE_BUTTON_ID = \"toggle-voronoi\"\nconst UPDATE_BUTTON_ID = \"update-voronoi\"\n\nconst setupChartControls = ({\n  onToggleVoronoiClick,\n  onUpdateRandomValue,\n}: {\n  onToggleVoronoiClick: () => void\n  onUpdateRandomValue: () => void\n}) => {\n  const toggleButtonElement = document.getElementById(\n    TOGGLE_BUTTON_ID\n  ) as HTMLElement\n  const updateButtonElement = document.getElementById(\n    UPDATE_BUTTON_ID\n  ) as HTMLElement\n\n  toggleButtonElement.addEventListener(\"click\", (clickEvent: MouseEvent) => {\n    clickEvent.preventDefault()\n\n    onToggleVoronoiClick()\n  })\n\n  updateButtonElement.addEventListener(\"click\", (clickEvent: MouseEvent) => {\n    clickEvent.preventDefault()\n\n    onUpdateRandomValue()\n  })\n}\n\nexport { TOGGLE_BUTTON_ID, UPDATE_BUTTON_ID, setupChartControls }\n","import { csv } from \"d3\"\n\ntype IncomeItemBase = {\n  percent: number\n  year: number\n}\n\ntype IncomeItemData = Omit<IncomeItemBase, \"percent\"> & {\n  percentage: number\n  pointIndex: number\n}\n\nclass IncomeItem {\n  private readonly incomeItemData: IncomeItemData\n\n  private constructor(incomeItemData: IncomeItemData) {\n    this.incomeItemData = incomeItemData\n    this.incomeItemData.percentage = Number(this.incomeItemData.percentage)\n  }\n\n  public static async fetchAndCreateCollection(): Promise<IncomeItem[]> {\n    const response = (await (csv(\n      `${ROOT_PATH}data/d3js/area/data.csv`\n    ) as unknown)) as IncomeItemBase[]\n\n    const incomeItemsData = response.map((...[point, pointIndex]) => ({\n      ...point,\n      percentage: point.percent,\n      pointIndex,\n    }))\n\n    return incomeItemsData.map(\n      (incomeItemData) => new IncomeItem(incomeItemData)\n    )\n  }\n\n  public getYear() {\n    return this.incomeItemData.year\n  }\n\n  public changePercentage(percentageChange: number) {\n    const valueWithLowerBound = Math.max(\n      this.incomeItemData.percentage + percentageChange,\n      0\n    )\n    const newValue = Math.min(100, valueWithLowerBound)\n\n    this.incomeItemData.percentage = newValue\n  }\n\n  public getNormalizedValue() {\n    return this.incomeItemData.percentage / 100\n  }\n\n  public getId() {\n    return this.incomeItemData.pointIndex\n  }\n\n  public getSummary(): string {\n    const { incomeItemData } = this\n\n    return `Year: ${\n      incomeItemData.year\n    }, Percentage: ${incomeItemData.percentage.toFixed(2)}%`\n  }\n}\n\nexport { IncomeItem }\n","import { AreaChart } from \"./chart/area-chart\"\nimport { CONTAINER_ID, createChartConfig } from \"./income-chart-config\"\nimport { setupChartControls } from \"./income-chart-controls\"\nimport { IncomeItem } from \"./income-item-model\"\n\nconst main = async () => {\n  const dataPoints = await IncomeItem.fetchAndCreateCollection()\n  const chartConfig = createChartConfig(dataPoints)\n\n  const areaChart = AreaChart.renderChart<IncomeItem>(chartConfig)\n\n  setupChartControls({\n    onToggleVoronoiClick: () => {\n      areaChart.toggleVoronoi()\n    },\n    onUpdateRandomValue: () => {\n      Array.from({ length: 50 }).forEach(() => {\n        const randomIndex = Math.floor(Math.random() * dataPoints.length)\n        const randomChange = Math.random() * 10 * (Math.random() > 0.5 ? 1 : -1)\n\n        dataPoints[randomIndex].changePercentage(randomChange)\n      })\n\n      areaChart.refresh()\n    },\n  })\n}\n\nexport { CONTAINER_ID }\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main, { CONTAINER_ID } from \"@/demos/area/area\"\nimport {\n  TOGGLE_BUTTON_ID,\n  UPDATE_BUTTON_ID,\n} from \"@/demos/area/income-chart-controls\"\n\nconst Area = ({ pageContext }: DemoPageProps) => (\n  <Demo main={main} pageContext={pageContext}>\n    <form style={{ marginBottom: 20 }}>\n      <button className=\"btn btn-info\" id={TOGGLE_BUTTON_ID} type=\"button\">\n        Toggle Voronoi\n      </button>\n      <button\n        className=\"btn btn-success\"\n        id={UPDATE_BUTTON_ID}\n        style={{ marginLeft: 20 }}\n        type=\"button\"\n      >\n        Update Random Values\n      </button>\n    </form>\n    <div id={CONTAINER_ID} />\n  </Demo>\n)\n\nexport default Area\n"],"names":["getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","byteToHex","i","push","toString","substr","_nodeId","_clockseq","arr","offset","arguments","length","undefined","toLowerCase","TypeError","_lastMSecs","_lastNSecs","options","buf","b","Array","node","clockseq","seedBytes","random","msecs","Date","now","nsecs","dt","tl","tmh","n","axis","VoronoiGroup","parent","state","hasVoronoi","this","voronoiGroup","append","toggleVoronoi","setVoronoi","render","animationDuration","boundaries","className","clipPath","extractXScale","extractYScale","filter","getItemId","getTitle","mouseenter","mouseleave","points","voronoiData","selectAll","data","point","enter","exit","remove","colorScale","scaleOrdinal","schemePastel2","voronoi","Delaunay","attr","itemId","colorHex","itemColor","colorD3","opacity","formatRgb","on","style","transition","duration","renderCell","showVoronoi","currentClassWithoutVoronoi","replace","trim","newClass","window","require","AreaChart","chartConfig","handleWindowResize","config","rootElId","svg","select","svgG","backgroundBands","chartTitleSel","xAxisSel","yAxisSel","lineSel","areaSel","clipRect","clipTopRect","svgOpacityFilter","uuidv1","slice","deviation","id","slope","feMerge","filterBlackOpacity","elements","addEventListener","renderChart","refresh","tearDown","removeEventListener","cancelAnimation","width","document","getElementById","getBoundingClientRect","isSmallDevice","margin","innerWidth","height","areaPoints","tooltipItemClass","pointClassPrefix","text","chartTitleShort","chartTitle","xMax","max","getItemXValue","xMin","min","yMax","getItemYValue","yMin","xScale","scaleLinear","domain","range","yScale","areaPoint","ticks","scaleQuantize","from","map","rangeIndex","getSmallDeviceTicksScale","xAxis","axisBottom","tickFormat","format","yAxis","axisLeft","tickSize","styles","call","area","areaD3","x","y0","y1","line","lineD3","y","datum","bandsPercentage","bandsData","bandIndex","bandHeight","Math","abs","bands","bandPercentage","circleData","getItemTitle","$","tooltip","track","CONTAINER_ID","incomeItem","getYear","getNormalizedValue","getId","getSummary","createChartConfig","dataPoints","TOGGLE_BUTTON_ID","UPDATE_BUTTON_ID","setupChartControls","onToggleVoronoiClick","onUpdateRandomValue","toggleButtonElement","updateButtonElement","clickEvent","preventDefault","IncomeItem","incomeItemData","percentage","Number","fetchAndCreateCollection","csv","ROOT_PATH","response","incomeItemsData","pointIndex","percent","year","changePercentage","percentageChange","valueWithLowerBound","newValue","toFixed","main","areaChart","forEach","randomIndex","floor","randomChange","pageContext","marginBottom","type","marginLeft"],"sourceRoot":""}