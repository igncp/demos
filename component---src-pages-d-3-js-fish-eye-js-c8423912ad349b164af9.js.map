{"version":3,"sources":["webpack://demos/./src/demos/_utils/d3utils.js","webpack://demos/./src/demos/fish-eye/fish-eye.js","webpack://demos/./src/pages/d3js/fish-eye.js"],"names":["d3utils","colorsScale","colors","extent","c","d3","scale","linear","domain","range","colorScale","length","p","filterBlackOpacity","id","svg","deviation","slope","filter","append","attr","height","width","x","y","in","stdDeviation","dx","dy","type","feMerge","filterColor","extra","result","in2","mode","middleTitle","text","top","class","transform","String","style","selector","margin","select","bottom","left","right","tooltip","customOpts","opts","_","merge","elementSelector","followElement","followMouse","leftOffst","tOpts","container","viewport","topOffst","$","hover","e","css","pageX","pageY","position","ch","setCg","setDom","setVars","getData","render","setChartTitle","setBackground","setPointer","setFilter","setAxis","setLabels","setDots","setTitles","bindMousemove","bindClick","cg","innerWidth","dom","cb","json","ROOT_PATH","nations","data","vars","category10","focused","radiusScale","sqrt","xScale","fisheye","log","yScale","xAxis","axis","orient","tickFormat","format","tickSize","yAxis","call","dot","d","income","lifeExpectancy","population","selectAll","enter","fill","region","stroke","sort","a","b","name","humanizeNumber","mouse","this","distortion","focus","pointer","on","zoom","opacity","n","toString","n2","replace","ready","demoInfo","pageContext","main","scripts","className"],"mappings":"iGAAA,IAAMA,EAAU,CACdC,YADc,SACFC,EAAQC,GAClB,IAAMC,EAAIC,GAAGC,MAAMC,SAASC,OAAOL,GAAQM,MAAM,CAAC,EAAG,IAC/CC,EAAaL,GAAGC,MACnBC,SACAC,OAAOH,GAAGI,MAAM,EAAG,EAAG,EAAMP,EAAOS,SACnCF,MAAMP,GAET,OAAO,SAAUU,GACf,OAAOF,EAAWN,EAAEQ,MAGxBC,mBAZc,SAYKC,EAAIC,EAAKC,EAAWC,GACrC,IACMC,EADOH,EAAII,OAAO,QACJA,OAAO,UAAUC,KAAK,CACxCC,OAAQ,OACRP,GAAG,eAAgBA,EACnBQ,MAAO,OACPC,EAAG,QACHC,EAAG,UAGLN,EAAOC,OAAO,kBAAkBC,KAAK,CACnCK,GAAI,cACJC,aAAcV,IAEhBE,EAAOC,OAAO,YAAYC,KAAK,CAC7BO,GAAI,EACJC,GAAI,IAENV,EAAOC,OAAO,uBAAuBA,OAAO,WAAWC,KAAK,CAC1DH,QACAY,KAAM,WAGR,IAAMC,EAAUZ,EAAOC,OAAO,WAI9B,OAFAW,EAAQX,OAAO,eAERW,EAAQX,OAAO,eAAeC,KAAK,KAAM,kBAElDW,YAzCc,SAyCFjB,EAAIC,EAAKC,EAAWC,EAAOe,GACxB,MAATA,IACFA,GAAQ,GAGV,IACMd,EADOH,EAAII,OAAO,QACJA,OAAO,UAAUC,KAAK,CACxCN,GAAG,eAAgBA,IA6BrB,OA1BIkB,GACFd,EAAOE,KAAK,CACVC,OAAQ,OACRC,MAAO,OACPC,EAAG,QACHC,EAAG,UAIPN,EAAOC,OAAO,YAAYC,KAAK,CAC7BO,GAAI,GACJC,GAAI,GACJH,GAAI,gBACJQ,OAAQ,WAEVf,EAAOC,OAAO,kBAAkBC,KAAK,CACnCK,GAAI,SACJQ,OAAQ,UACRP,aAAcV,IAEhBE,EAAOC,OAAO,WAAWC,KAAK,CAC5BK,GAAI,gBACJS,IAAK,UACLC,KAAM,WAGDjB,EAAOC,OAAO,uBAAuBA,OAAO,WAAWC,KAAK,CACjEH,QACAY,KAAM,YAGVO,YAlFc,SAkFFrB,EAAKO,EAAOe,EAAMC,GACjB,MAAPA,IACFA,GAAO,IAGTvB,EACGI,OAAO,QACPC,KAAK,CACJmB,MAAO,cACP,cAAe,SACfC,UAAU,aAAcC,OAAOnB,EAAQ,GAA9B,IAAoCgB,EAApC,MAEVD,KAAKA,GACLK,MAAM,CACL,cAAe,UAGrB3B,IAnGc,SAmGV4B,EAAUrB,EAAOD,EAAQuB,GAC3B,OAAOvC,GACJwC,OAAOF,GACPN,KAAK,IACLlB,OAAO,OACPC,KAAK,CACJC,OAAQA,EAASuB,EAAON,IAAMM,EAAOE,OACrCxB,MAAOA,EAAQsB,EAAOG,KAAOH,EAAOI,QAErC7B,OAAO,KACPC,KAAK,CACJoB,UAAU,aAAcI,EAAOG,KAAtB,IAA8BH,EAAON,IAArC,OAGfW,QAjHc,SAiHNN,EAAUO,GACE,MAAdA,IACFA,EAAa,IAGf,IAcMC,EAAOC,EAAEC,MAdK,CAClBC,gBAAiB,GACjBC,eAAe,EACfC,aAAa,EACbC,UAAW,GACXC,MAAO,CACLC,UAAW,OACXC,SAAU,CACRjB,SAAU,eAGdkB,SAAU,IAGsBX,GAElCY,EAAEnB,GAAUM,QAAQE,EAAKO,OAErBP,EAAKK,YACPM,EAAEnB,GAAUoB,OAAM,SAACC,GAAD,OAChBF,EAAE,YAAYG,IAAI,CAChBlB,KAASN,OAAOuB,EAAEE,MAAQf,EAAKM,WAA3B,KACJnB,IAAQG,OAAOuB,EAAEG,MAAQhB,EAAKU,UAA3B,UAGEV,EAAKI,eACdO,EAAEnB,GAAUoB,OAAM,kBAChBD,EAAE,YAAYG,IAAI,CAChBlB,KAASN,OACPqB,EAAEX,EAAKG,iBAAiBc,WAAWrB,KAAOI,EAAKM,WAD7C,KAGJnB,IAAQG,OACNqB,EAAEX,EAAKG,iBAAiBc,WAAW9B,IAAMa,EAAKU,UAD7C,YASb,O,iHC5JMQ,EAAK,CAEXA,MAAW,WAKT,OAJAA,EAAGC,QACHD,EAAGE,SACHF,EAAGG,UAEIH,EAAGI,QAAQJ,EAAGK,SAGvBL,OAAY,WACVA,EAAGM,gBACHN,EAAGO,gBACHP,EAAGQ,aACHR,EAAGS,YACHT,EAAGU,UACHV,EAAGW,YACHX,EAAGY,UACHZ,EAAGa,YACHb,EAAGc,gBACHd,EAAGe,aAGLf,MAAW,WACTA,EAAGgB,GAAK,CACNzC,OAAQ,CACNE,OAAQ,GACRC,KAAM,GACNC,MAAO,GACPV,IAAK,KAGT+B,EAAGgB,GAAGhE,OAAS,IAAMgD,EAAGgB,GAAGzC,OAAON,IAAM+B,EAAGgB,GAAGzC,OAAOE,OAErDuB,EAAGgB,GAAG/D,MACJwC,EAAE,UAAUwB,aAAejB,EAAGgB,GAAGzC,OAAOG,KAAOsB,EAAGgB,GAAGzC,OAAOI,OAGhEqB,OAAY,WACVA,EAAGkB,IAAM,CACPxE,IAAKV,GACFwC,OAAO,UACP1B,OAAO,OACPC,KAAK,QAASiD,EAAGgB,GAAG/D,MAAQ+C,EAAGgB,GAAGzC,OAAOG,KAAOsB,EAAGgB,GAAGzC,OAAOI,OAC7D5B,KAAK,SAAUiD,EAAGgB,GAAGhE,OAASgD,EAAGgB,GAAGzC,OAAON,IAAM+B,EAAGgB,GAAGzC,OAAOE,QAC9D3B,OAAO,KACPC,KAAK,YANH,aAM6BiD,EAAGgB,GAAGzC,OAAOG,KAN1C,IAMkDsB,EAAGgB,GAAGzC,OAAON,IAN/D,OAUT+B,QAAa,SAAUmB,GACrBnF,GAAGoF,KAAQC,uCAAyC,SAACC,GAGnD,OAFAtB,EAAGuB,KAAOD,EAEHH,QAIXnB,cAAmB,WACjB,OAAOrE,gBACLqE,EAAGkB,IAAIxE,IACPsD,EAAGgB,GAAG/D,MACN,gFAEC,KAIL+C,QAAa,WACXA,EAAGwB,KAAO,CACRnF,WAAYL,GAAGC,MACZwF,aACAtF,OAAO,CACN,qBACA,aACA,6BACA,UACA,wBACA,wBAEJuF,SAAS,EACTC,YAAa3F,GAAGC,MAAM2F,OAAOzF,OAAO,CAAC,EAAG,MAAMC,MAAM,CAAC,EAAG,KACxDyF,OAAQ7F,GAAG8F,QACR7F,MAAMD,GAAGC,MAAM8F,KACf5F,OAAO,CAAC,IAAK,MACbC,MAAM,CAAC,EAAG4D,EAAGgB,GAAG/D,QACnB+E,OAAQhG,GAAG8F,QACR7F,MAAMD,GAAGC,MAAMC,QACfC,OAAO,CAAC,GAAI,KACZC,MAAM,CAAC4D,EAAGgB,GAAGhE,OAAQ,MAI5BgD,QAAa,WACXA,EAAGkB,IAAIe,MAAQjG,GAAGU,IACfwF,OACAC,OAAO,UACPlG,MAAM+D,EAAGwB,KAAKK,QACdO,WAAWpG,GAAGqG,OAAO,OACrBC,UAAUtC,EAAGgB,GAAGhE,QACnBgD,EAAGkB,IAAIqB,MAAQvG,GAAGU,IACfwF,OACAjG,MAAM+D,EAAGwB,KAAKQ,QACdG,OAAO,QACPG,UAAUtC,EAAGgB,GAAG/D,OACnB+C,EAAGkB,IAAIxE,IACJI,OAAO,KACPC,KAAK,QAAS,UACdA,KAAK,YAHR,eAGoCiD,EAAGgB,GAAGhE,OAH1C,KAIGwF,KAAKxC,EAAGkB,IAAIe,OACfjC,EAAGkB,IAAIxE,IAAII,OAAO,KAAKC,KAAK,QAAS,UAAUyF,KAAKxC,EAAGkB,IAAIqB,QAG7DvC,cAAmB,WACjB,OAAOA,EAAGkB,IAAIxE,IACXI,OAAO,QACPC,KAAK,QAAS,cACdA,KAAK,QAASiD,EAAGgB,GAAG/D,OACpBF,KAAK,SAAUiD,EAAGgB,GAAGhE,SAG1BgD,UAAe,WACbA,EAAGkB,IAAIxE,IACJI,OAAO,QACPC,KAAK,QAAS,WACdA,KAAK,cAAe,OACpBA,KAAK,IAAKiD,EAAGgB,GAAG/D,MAAQ,IACxBF,KAAK,IAAKiD,EAAGgB,GAAGhE,OAAS,IACzBgB,KAAK,mDAERgC,EAAGkB,IAAIxE,IACJI,OAAO,QACPC,KAAK,QAAS,WACdA,KAAK,cAAe,OACpBA,KAAK,KAAM,IACXA,KAAK,KAAM,IACXA,KAAK,KAAM,SACXA,KAAK,YAAa,eAClBiB,KAAK,4BAGVgC,UAAe,WACb,OAAOrE,gBAAoB,UAAWqE,EAAGkB,IAAIxE,IAAK,IAAK,IAAK,IAG9DsD,SAAc,SAAUyC,GACtBA,EACG1F,KAAK,MAAM,SAAC2F,GAAD,OAAO1C,EAAGwB,KAAKK,OAAOa,EAAEC,WACnC5F,KAAK,MAAM,SAAC2F,GAAD,OAAO1C,EAAGwB,KAAKQ,OAAOU,EAAEE,mBACnC7F,KAAK,KAAK,SAAC2F,GAAD,OAAO1C,EAAGwB,KAAKG,YAAYe,EAAEG,gBAG5C7C,QAAa,WACXA,EAAGkB,IAAIuB,IAAMzC,EAAGkB,IAAIxE,IACjBI,OAAO,KACPC,KAAK,QAAS,QACd+F,UAAU,QACVvB,KAAKvB,EAAGuB,MACRwB,QACAjG,OAAO,UACPC,KAAK,QAAS,OACdsB,MAAM,CACL2E,KADK,SACAN,GACH,OAAO1C,EAAGwB,KAAKnF,WAAWqG,EAAEO,SAE9BpG,OAAQ,4BACRqG,OAAQ,QACR,eAAgB,QAEjBV,KAAKxC,EAAGD,UACRoD,MAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAER,WAAaO,EAAEP,eAGrC7C,UAAe,WACbA,EAAGkB,IAAIuB,IACJ3F,OAAO,SACPkB,MACC,SAAC0E,GAAD,OACKA,EAAEY,KAAL,gBAAyBtD,EAAGuD,eAAeb,EAAEC,QAA1CD,0BACc1C,EAAGuD,eAAeb,EAAEG,YADlCH,wBAEmBA,EAAEE,eAFxB,aAMR5C,KAAU,WACR,IAAMwD,EAAQxH,GAAGwH,MAAMC,MAOvB,OALAzD,EAAGwB,KAAKK,OAAO6B,WAAW,KAAKC,MAAMH,EAAM,IAC3CxD,EAAGwB,KAAKQ,OAAO0B,WAAW,KAAKC,MAAMH,EAAM,IAC3CxD,EAAGkB,IAAIuB,IAAID,KAAKxC,EAAGD,UACnBC,EAAGkB,IAAIxE,IAAI8B,OAAO,WAAWgE,KAAKxC,EAAGkB,IAAIe,OAElCjC,EAAGkB,IAAIxE,IAAI8B,OAAO,WAAWgE,KAAKxC,EAAGkB,IAAIqB,QAGlDvC,WAAgB,WACdA,EAAGkB,IAAI0C,QAAU5D,EAAGkB,IAAIxE,IAAII,OAAO,QAAQkB,KAAK,KAAKjB,KAAK,QAAS,YAGrEiD,cAAmB,WACjB,OAAOA,EAAGkB,IAAIxE,IAAImH,GAAG,aAAa,WAC3B7D,EAAGwB,KAAKE,SACX1B,EAAG8D,KAAKtB,KAAKiB,UAKnBzD,UAAe,WACb,OAAOA,EAAGkB,IAAIxE,IAAImH,GAAG,SAAS,WAG5B,GAFA7D,EAAGwB,KAAKE,SAAW1B,EAAGwB,KAAKE,QAEvB1B,EAAGwB,KAAKE,QAAS,CACnB,IAAM8B,EAAQxH,GAAGwH,MAAMC,MAEvB,OAAOzD,EAAGkB,IAAI0C,QACX7G,KAAK,CACJG,EAAGsG,EAAM,GACTrG,EAAGqG,EAAM,KAEVnF,MAAM,CACL0F,QAAS,IAQf,OAJA/D,EAAGkB,IAAI0C,QAAQvF,MAAM,CACnB0F,QAAS,IAGJ/D,EAAG8D,KAAKtB,KAAKiB,UAIxBzD,eAAoB,SAAUgE,GAI5B,IAHAA,EAAIA,EAAEC,aAGO,CACX,IAAMC,EAAKF,EAAEG,QAAQ,uBAAwB,WAE7C,GAAIH,IAAME,EACR,MAEAF,EAAIE,EAIR,OAAOF,IAGT,aACEhE,EAAGoE,SCtOL,EAdgB,SAAC,GAAD,IAAkBC,EAAlB,EAAGC,YAAeD,SAAlB,OACd,gBAAC,IAAD,CACEA,SAAUA,EACVE,KAAMA,EACNC,QAAS,CACP,wBACA,yCACA,sBAGF,uBAAKC,UAAU,iBAAiBhI,GAAG","file":"component---src-pages-d-3-js-fish-eye-js-c8423912ad349b164af9.js","sourcesContent":["const d3utils = {\n  colorsScale(colors, extent) {\n    const c = d3.scale.linear().domain(extent).range([0, 1])\n    const colorScale = d3.scale\n      .linear()\n      .domain(d3.range(0, 1, 1.0 / colors.length))\n      .range(colors)\n\n    return function (p) {\n      return colorScale(c(p))\n    }\n  },\n  filterBlackOpacity(id, svg, deviation, slope) {\n    const defs = svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr({\n      height: \"500%\",\n      id: `drop-shadow-${id}`,\n      width: \"500%\",\n      x: \"-200%\",\n      y: \"-200%\",\n    })\n\n    filter.append(\"feGaussianBlur\").attr({\n      in: \"SourceAlpha\",\n      stdDeviation: deviation,\n    })\n    filter.append(\"feOffset\").attr({\n      dx: 1,\n      dy: 1,\n    })\n    filter.append(\"feComponentTransfer\").append(\"feFuncA\").attr({\n      slope,\n      type: \"linear\",\n    })\n\n    const feMerge = filter.append(\"feMerge\")\n\n    feMerge.append(\"feMergeNode\")\n\n    return feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\")\n  },\n  filterColor(id, svg, deviation, slope, extra) {\n    if (extra == null) {\n      extra = false\n    }\n\n    const defs = svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr({\n      id: `drop-shadow-${id}`,\n    })\n\n    if (extra) {\n      filter.attr({\n        height: \"500%\",\n        width: \"500%\",\n        x: \"-200%\",\n        y: \"-200%\",\n      })\n    }\n\n    filter.append(\"feOffset\").attr({\n      dx: 0.5,\n      dy: 0.5,\n      in: \"SourceGraphic\",\n      result: \"offOut\",\n    })\n    filter.append(\"feGaussianBlur\").attr({\n      in: \"offOut\",\n      result: \"blurOut\",\n      stdDeviation: deviation,\n    })\n    filter.append(\"feBlend\").attr({\n      in: \"SourceGraphic\",\n      in2: \"blurOut\",\n      mode: \"normal\",\n    })\n\n    return filter.append(\"feComponentTransfer\").append(\"feFuncA\").attr({\n      slope,\n      type: \"linear\",\n    })\n  },\n  middleTitle(svg, width, text, top) {\n    if (top == null) {\n      top = -15\n    }\n\n    svg\n      .append(\"text\")\n      .attr({\n        class: \"chart-title\",\n        \"text-anchor\": \"middle\",\n        transform: `translate(${String(width / 2)},${top})`,\n      })\n      .text(text)\n      .style({\n        \"font-weight\": \"bold\",\n      })\n  },\n  svg(selector, width, height, margin) {\n    return d3\n      .select(selector)\n      .text(\"\")\n      .append(\"svg\")\n      .attr({\n        height: height + margin.top + margin.bottom,\n        width: width + margin.left + margin.right,\n      })\n      .append(\"g\")\n      .attr({\n        transform: `translate(${margin.left},${margin.top})`,\n      })\n  },\n  tooltip(selector, customOpts) {\n    if (customOpts == null) {\n      customOpts = {}\n    }\n\n    const defaultOpts = {\n      elementSelector: \"\",\n      followElement: false,\n      followMouse: false,\n      leftOffst: 60,\n      tOpts: {\n        container: \"body\",\n        viewport: {\n          selector: \"#chart svg\",\n        },\n      },\n      topOffst: 40,\n    }\n\n    const opts = _.merge(defaultOpts, customOpts)\n\n    $(selector).tooltip(opts.tOpts)\n\n    if (opts.followMouse) {\n      $(selector).hover((e) =>\n        $(\".tooltip\").css({\n          left: `${String(e.pageX - opts.leftOffst)}px`,\n          top: `${String(e.pageY - opts.topOffst)}px`,\n        })\n      )\n    } else if (opts.followElement) {\n      $(selector).hover(() =>\n        $(\".tooltip\").css({\n          left: `${String(\n            $(opts.elementSelector).position().left - opts.leftOffst\n          )}px`,\n          top: `${String(\n            $(opts.elementSelector).position().top - opts.topOffst\n          )}px`,\n        })\n      )\n    }\n  },\n}\n\nexport default d3utils\n","import d3utils from \"@/demos/_utils/d3utils\"\n\nconst ch = {}\n\nch.ready = function () {\n  ch.setCg()\n  ch.setDom()\n  ch.setVars()\n\n  return ch.getData(ch.render)\n}\n\nch.render = function () {\n  ch.setChartTitle()\n  ch.setBackground()\n  ch.setPointer()\n  ch.setFilter()\n  ch.setAxis()\n  ch.setLabels()\n  ch.setDots()\n  ch.setTitles()\n  ch.bindMousemove()\n  ch.bindClick()\n}\n\nch.setCg = function () {\n  ch.cg = {\n    margin: {\n      bottom: 70,\n      left: 70,\n      right: 50,\n      top: 80,\n    },\n  }\n  ch.cg.height = 700 - ch.cg.margin.top - ch.cg.margin.bottom\n\n  ch.cg.width =\n    $(\"#chart\").innerWidth() - ch.cg.margin.left - ch.cg.margin.right\n}\n\nch.setDom = function () {\n  ch.dom = {\n    svg: d3\n      .select(\"#chart\")\n      .append(\"svg\")\n      .attr(\"width\", ch.cg.width + ch.cg.margin.left + ch.cg.margin.right)\n      .attr(\"height\", ch.cg.height + ch.cg.margin.top + ch.cg.margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${ch.cg.margin.left},${ch.cg.margin.top})`),\n  }\n}\n\nch.getData = function (cb) {\n  d3.json(`${ROOT_PATH}data/d3js/fish-eye/data.json`, (nations) => {\n    ch.data = nations\n\n    return cb()\n  })\n}\n\nch.setChartTitle = function () {\n  return d3utils.middleTitle(\n    ch.dom.svg,\n    ch.cg.width,\n    \"Income Per Capita vs \" +\n      \"Life Expectancy vs Population vs Region - 180 Countries\",\n    -40\n  )\n}\n\nch.setVars = function () {\n  ch.vars = {\n    colorScale: d3.scale\n      .category10()\n      .domain([\n        \"Sub-Saharan Africa\",\n        \"South Asia\",\n        \"Middle East & North Africa\",\n        \"America\",\n        \"Europe & Central Asia\",\n        \"East Asia & Pacific\",\n      ]),\n    focused: false,\n    radiusScale: d3.scale.sqrt().domain([0, 5e8]).range([5, 60]),\n    xScale: d3.fisheye\n      .scale(d3.scale.log)\n      .domain([300, 1e5])\n      .range([0, ch.cg.width]),\n    yScale: d3.fisheye\n      .scale(d3.scale.linear)\n      .domain([20, 90])\n      .range([ch.cg.height, 0]),\n  }\n}\n\nch.setAxis = function () {\n  ch.dom.xAxis = d3.svg\n    .axis()\n    .orient(\"bottom\")\n    .scale(ch.vars.xScale)\n    .tickFormat(d3.format(\",d\"))\n    .tickSize(-ch.cg.height)\n  ch.dom.yAxis = d3.svg\n    .axis()\n    .scale(ch.vars.yScale)\n    .orient(\"left\")\n    .tickSize(-ch.cg.width)\n  ch.dom.svg\n    .append(\"g\")\n    .attr(\"class\", \"x axis\")\n    .attr(\"transform\", `translate(0,${ch.cg.height})`)\n    .call(ch.dom.xAxis)\n  ch.dom.svg.append(\"g\").attr(\"class\", \"y axis\").call(ch.dom.yAxis)\n}\n\nch.setBackground = function () {\n  return ch.dom.svg\n    .append(\"rect\")\n    .attr(\"class\", \"background\")\n    .attr(\"width\", ch.cg.width)\n    .attr(\"height\", ch.cg.height)\n}\n\nch.setLabels = function () {\n  ch.dom.svg\n    .append(\"text\")\n    .attr(\"class\", \"x label\")\n    .attr(\"text-anchor\", \"end\")\n    .attr(\"x\", ch.cg.width - 26)\n    .attr(\"y\", ch.cg.height + 26)\n    .text(\"income per capita, inflation-adjusted (dollars)\")\n\n  ch.dom.svg\n    .append(\"text\")\n    .attr(\"class\", \"y label\")\n    .attr(\"text-anchor\", \"end\")\n    .attr(\"x\", -26)\n    .attr(\"y\", -40)\n    .attr(\"dy\", \".75em\")\n    .attr(\"transform\", \"rotate(-90)\")\n    .text(\"life expectancy (years)\")\n}\n\nch.setFilter = function () {\n  return d3utils.filterColor(\"circles\", ch.dom.svg, 1.5, 0.6, true)\n}\n\nch.position = function (dot) {\n  dot\n    .attr(\"cx\", (d) => ch.vars.xScale(d.income))\n    .attr(\"cy\", (d) => ch.vars.yScale(d.lifeExpectancy))\n    .attr(\"r\", (d) => ch.vars.radiusScale(d.population))\n}\n\nch.setDots = function () {\n  ch.dom.dot = ch.dom.svg\n    .append(\"g\")\n    .attr(\"class\", \"dots\")\n    .selectAll(\".dot\")\n    .data(ch.data)\n    .enter()\n    .append(\"circle\")\n    .attr(\"class\", \"dot\")\n    .style({\n      fill(d) {\n        return ch.vars.colorScale(d.region)\n      },\n      filter: \"url(#drop-shadow-circles)\",\n      stroke: \"black\",\n      \"stroke-width\": \"1px\",\n    })\n    .call(ch.position)\n    .sort((a, b) => b.population - a.population)\n}\n\nch.setTitles = function () {\n  ch.dom.dot\n    .append(\"title\")\n    .text(\n      (d) =>\n        `${d.name}:\\n- Income: ${ch.humanizeNumber(d.income)} $/P.C.\\n` +\n        `- Population: ${ch.humanizeNumber(d.population)}\\n` +\n        `- Life expectancy: ${d.lifeExpectancy} years`\n    )\n}\n\nch.zoom = function () {\n  const mouse = d3.mouse(this)\n\n  ch.vars.xScale.distortion(2.5).focus(mouse[0])\n  ch.vars.yScale.distortion(2.5).focus(mouse[1])\n  ch.dom.dot.call(ch.position)\n  ch.dom.svg.select(\".x.axis\").call(ch.dom.xAxis)\n\n  return ch.dom.svg.select(\".y.axis\").call(ch.dom.yAxis)\n}\n\nch.setPointer = function () {\n  ch.dom.pointer = ch.dom.svg.append(\"text\").text(\"+\").attr(\"class\", \"pointer\")\n}\n\nch.bindMousemove = function () {\n  return ch.dom.svg.on(\"mousemove\", function () {\n    if (!ch.vars.focused) {\n      ch.zoom.call(this)\n    }\n  })\n}\n\nch.bindClick = function () {\n  return ch.dom.svg.on(\"click\", function () {\n    ch.vars.focused = !ch.vars.focused\n\n    if (ch.vars.focused) {\n      const mouse = d3.mouse(this)\n\n      return ch.dom.pointer\n        .attr({\n          x: mouse[0],\n          y: mouse[1],\n        })\n        .style({\n          opacity: 1,\n        })\n    }\n\n    ch.dom.pointer.style({\n      opacity: 0,\n    })\n\n    return ch.zoom.call(this)\n  })\n}\n\nch.humanizeNumber = function (n) {\n  n = n.toString()\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const n2 = n.replace(/(\\d)(\\d{3})($|,|\\.)/g, \"$1,$2$3\")\n\n    if (n === n2) {\n      break\n    } else {\n      n = n2\n    }\n  }\n\n  return n\n}\n\nexport default () => {\n  ch.ready()\n}\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/fish-eye/fish-eye\"\n\nimport \"@/demos/fish-eye/fish-eye.styl\"\n\nconst FishEye = ({ pageContext: { demoInfo } }) => (\n  <Demo\n    demoInfo={demoInfo}\n    main={main}\n    scripts={[\n      \"/vendors/d3/d3.min.js\",\n      \"/vendors/d3-plugins/fisheye/fisheye.js\",\n      \"/js/d3js-utils.js\",\n    ]}\n  >\n    <div className=\"fish-eye-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default FishEye\n"],"sourceRoot":""}