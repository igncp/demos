(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[540],{2137:function(t,a,n){"use strict";function e(t,a,n,e,r,i,s){try{var d=t[i](s),c=d.value}catch(o){return void n(o)}d.done?a(c):Promise.resolve(c).then(e,r)}function r(t){return function(){var a=this,n=arguments;return new Promise((function(r,i){var s=t.apply(a,n);function d(t){e(s,r,i,d,c,"next",t)}function c(t){e(s,r,i,d,c,"throw",t)}d(void 0)}))}}n.d(a,{Z:function(){return r}})},6033:function(t,a,n){"use strict";n.r(a),n.d(a,{default:function(){return x}});var e=n(7294),r=n(1335),i=n(2137),s=n(7757),d=n.n(s),c=n(3241),o=0,u=20,h=20,l=60,f=700-l-o,p=function(t){var a=c.Z1g("%Y-%m-%d")(t);if(null!==a)return a;var n=isNaN(Number(t))?-t.replace(/[^0-9]/g,""):+t;return n<0||n>99?a=new Date(n,6,1):0===n?a=new Date(-1,6,1):(a=new Date(n,6,1)).setUTCFullYear(n),a},m=function(t){var a=t.getUTCFullYear();return a>=0?a.toString():" BC"+Math.abs(a)},v=function(){function t(t){var a=t.rootElId,n=document.getElementById(a);n.classList.add("timeline-chart");var e=n.getBoundingClientRect().width;this.width=e-u-h,this.bandY=0,this.bandNum=0,this.dataContent={},this.components=[],this.bands={};var r=c.Ys("#"+a).text("").append("svg").attr("height",700+l+o).attr("width",e+u+h).append("g").attr("transform","translate("+u+","+l+")");r.append("text").attr("class","chart-title").attr("text-anchor","middle").attr("transform","translate("+e/2+",-20)").text("Philosophers through History").style("font-weight","bold"),g("intervals",r,1,.2),r.append("clipPath").attr("id","chart-area").append("rect").attr("width",this.width).attr("height",f),r.on("mouseup",(function(){return c.td_(".interval rect").style("filter","url(#drop-shadow-intervals)")})),this.chart=r.append("g").attr("class","chart").attr("clip-path","url(#chart-area)")}var a=t.prototype;return a.data=function(t){var a=this,n=new Date,e=[];this.dataContent.items=t;var r=function(t,a){var n=t.start-a.start;return n<0?-1:n>0?1:(n=a.end-t.end)<0?-1:n>0?1:0},i=function(t,a){var n=t.start-a.start;return n<0?1:n>0?-1:(n=a.end-t.end)<0?1:n>0?-1:0};return this.dataContent.items.forEach((function(t){t.start=p(t.start),""===t.end?(t.end=new Date(t.start.getTime()+316224e7),t.instant=!0):(t.end=p(t.end),t.instant=!1),t.end>n&&(t.end=n)})),function(t,n,s){s=s||"backward";"ascending"===(n=n||"descending")?a.dataContent.items.sort(r):a.dataContent.items.sort(i),"forward"===s?t.forEach((function(t){for(var a=0,n=0,r=0,i=e.length;(0<=i?r<i:r>i)&&!(t.start>e[n]);n=0<=i?++r:--r)a++;t.track=a,e[a]=t.end})):t.forEach((function(t){for(var a=0,n=0,r=0,i=e.length;(0<=i?r<i:r>i)&&!(t.end<e[n]);n=0<=i?++r:--r)a++;t.track=a,e[a]=t.start}))}(this.dataContent.items,"descending","backward"),this.dataContent.nTracks=e.length,this.dataContent.minDate=c.VV$(this.dataContent.items,(function(t){return t.start})),this.dataContent.maxDate=c.Fp7(this.dataContent.items,(function(t){return t.end})),this},a.xAxis=function(t){var a=this.bands[t],n=c.LLu(a.xScale).tickSize(6,0).tickFormat((function(t){return m(t)})),e=this.chart.append("g").attr("class","axis").attr("transform","translate(0,"+(a.y+a.h)+")");return e.redraw=function(){return e.call(n)},a.parts.push(e),this.components.push(e),this},a.createTooltip=function(){return $(".part.instant, .part.interval").tooltip({track:!0}),this},a.band=function(t,a){var n={};n.id="band"+this.bandNum,n.x=0,n.y=this.bandY,n.w=this.width,n.h=f*(a||1),n.trackOffset=0,n.trackHeight=Math.min((n.h-n.trackOffset)/this.dataContent.nTracks,20),n.itemHeight=.7*n.trackHeight,n.parts=[],n.instantWidth=100,n.xScale=c.Xf().domain([this.dataContent.minDate,this.dataContent.maxDate]).range([0,n.w]),n.yScale=function(t){return n.trackOffset+t*n.trackHeight},n.yearsScale=this.dataContent.maxDate.getUTCFullYear()-this.dataContent.minDate.getUTCFullYear(),n.g=this.chart.append("g").attr("id",n.id).attr("transform","translate(0,"+n.y+")"),n.g.append("rect").attr("class","band").attr("width",n.w).attr("height",n.h);var e=n.g.selectAll("g").data(this.dataContent.items).enter().append("svg").attr("y",(function(t){return n.yScale(t.track)})).attr("height",n.itemHeight).attr("title",(function(t){return t.instant?t.label+": "+m(t.start):t.label+": "+m(t.start)+" - "+m(t.end)})).attr("class",(function(t){return t.instant?"part instant":"part interval"})),r=c.Ys("#band"+this.bandNum).selectAll(".interval");r.append("rect").attr("height","80%").attr("width","80%").attr("x","1px").attr("y",".5px").style("filter","url(#drop-shadow-intervals)"),r.append("text").attr("class","intervalLabel").attr("x",3).attr("y",9.5);var i=c.Ys("#band"+this.bandNum).selectAll(".instant");return i.append("circle").attr("cx",n.itemHeight/2).attr("cy",n.itemHeight/2).attr("r",5),i.append("text").attr("class","instantLabel").attr("x",15).attr("y",10),n.addActions=function(t){return t.forEach((function(t){return e.on(t[0],t[1])}))},n.redraw=function(){return e.attr("x",(function(t){return n.xScale(t.start)})).attr("width",(function(t){return n.xScale(t.end)-n.xScale(t.start)})).select("text").text((function(t){var a=(n.xScale(t.end)-n.xScale(t.start))/9;return t.label.length>a?t.label.substr(0,a-1)+"..":t.label})),n.parts.forEach((function(t){return t.redraw()}))},this.bands[t]=n,this.components.push(n),this.bandY+=n.h+25,this.bandNum+=1,this},a.labels=function(t){var a=this.bands[t],n=a.y+a.h-10,e=[["start","bandMinMaxLabel",0,4,function(t){return m(t)},"Start of the selected interval",a.x+30,n],["end","bandMinMaxLabel",a.w-46,a.w-4,function(t,a){return m(a)},"End of the selected interval",a.x+a.w-152,n],["middle","bandMidLabel",(a.w-46)/2,a.w/2,function(t,a){return a.getUTCFullYear()-t.getUTCFullYear()},"Length of the selected interval",a.x+a.w/2-75,n]],r=this.chart.append("g").attr("id",t+"Labels").attr("transform","translate(0,"+(a.y+a.h+1)+")").selectAll("#"+t+"Labels").data(e).enter().append("g");r.append("rect").attr("class","bandLabel").attr("x",(function(t){return t[2]})).attr("width",46).attr("height",20).style("opacity",1);var i=r.append("text").attr("class",(function(t){return t[1]})).attr("id",(function(t){return t[0]})).attr("x",(function(t){return t[3]})).attr("y",15).attr("text-anchor",(function(t){return t[0]}));return i.redraw=function(){var t=a.xScale.domain()[0],n=a.xScale.domain()[1];return i.text((function(a){return a[4](t,n)}))},a.parts.push(i),this.components.push(i),this},a.brush=function(t,a){var n=this,e=this.bands[t],r=c.Yud(),i=c.Xf().domain([0,1e3]).range([this.dataContent.minDate.getTime(),this.dataContent.maxDate.getTime()]);return r.on("brush",(function(t){var r=e.xScale.domain();t.selection&&(r=[i(t.selection[0]),i(t.selection[1])]),c.td_(".interval rect").style("filter","none"),a.forEach((function(t){n.bands[t].xScale.domain(r),n.bands[t].redraw()}))})),e.g.append("svg").attr("class","x brush").call(r).selectAll("rect").attr("y",1).attr("height",e.h-1),this},a.redraw=function(){return this.components.forEach((function(t){return t.redraw()})),this},t}(),g=function(t,a,n,e){var r=a.append("defs").append("filter").attr("height","500%").attr("id","drop-shadow-"+t).attr("width","500%").attr("x","-200%").attr("y","-200%");r.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",n),r.append("feOffset").attr("dx",1).attr("dy",1),r.append("feComponentTransfer").append("feFuncA").attr("slope",e).attr("type","linear");var i=r.append("feMerge");i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")},b=function(){var t=(0,i.Z)(d().mark((function t(){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.gyn("/demos/data/d3js/timeline/data.csv");case 2:a=t.sent,new v({rootElId:"chart"}).data(a).band("mainBand",.82).band("naviBand",.08).xAxis("mainBand").xAxis("naviBand").labels("mainBand").labels("naviBand").brush("naviBand",["mainBand"]).redraw().createTooltip();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(t){var a=t.pageContext.demoInfo;return e.createElement(r.Z,{demoInfo:a,links:["/vendors/jquery-ui/themes/base/jquery-ui.min.css"],main:b,scripts:["/vendors/jquery-ui/jquery-ui.min.js"]},e.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-timeline-tsx-1213826b5be0a304341f.js.map