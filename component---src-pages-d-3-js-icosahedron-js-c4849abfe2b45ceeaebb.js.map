{"version":3,"sources":["webpack://demos/./src/demos/icosahedron/icosahedron.js","webpack://demos/./src/pages/d3js/icosahedron.js"],"names":["ch","cg","color","d3","scale","category20","defaultVelocity","height","rotationFactor1","rotationFactor2","t0","Date","now","width","$","innerWidth","zeroVelocity","dom","faces","projection","geo","orthographic","svg","select","append","attr","vars","velocity","y","Math","atan2","PI","x","push","time","position","abs","sin","originalPos","rotate","calcNewPosition","each","d","forEach","p","i","polygon","style","area","join","on","String","setCg","setDom","setVars","selectAll","data","icosahedronFaces","enter","geom","map","fill","_d","index","timer","ready","demoInfo","pageContext","main","scripts","className","id"],"mappings":"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","file":"component---src-pages-d-3-js-icosahedron-js-c4849abfe2b45ceeaebb.js","sourcesContent":["const ch = {}\n\nch.setCg = function () {\n  ch.cg = {\n    color: d3.scale.category20(),\n    defaultVelocity: [1, 0.4, 0.07],\n    height: 500,\n    rotationFactor1: 1 / 1000,\n    rotationFactor2: 4,\n    t0: Date.now(),\n    width: $(\"#chart\").innerWidth(),\n    zeroVelocity: [0, 0, 0],\n  }\n}\n\nch.setDom = function () {\n  ch.dom = {\n    faces: \"\",\n    projection: d3.geo.orthographic().scale(ch.cg.height / 2 - 10),\n    svg: d3\n      .select(\"#chart\")\n      .append(\"svg\")\n      .attr(\"width\", ch.cg.width)\n      .attr(\"height\", ch.cg.height),\n  }\n}\n\nch.setVars = function () {\n  ch.vars = {\n    velocity: \"\",\n  }\n}\n\nch.icosahedronFaces = function () {\n  const faces = []\n  const y = (Math.atan2(1, 2) * 180) / Math.PI\n\n  for (let x = 0; x < 360; x += 72) {\n    faces.push(\n      [\n        [x + 0, -90],\n        [x + 0, -y],\n        [x + 72, -y],\n      ],\n      [\n        [x + 36, y],\n        [x + 72, -y],\n        [x + 0, -y],\n      ],\n      [\n        [x + 36, y],\n        [x + 0, -y],\n        [x - 36, y],\n      ],\n      [\n        [x + 36, y],\n        [x - 36, y],\n        [x - 36, 90],\n      ]\n    )\n  }\n\n  return faces\n}\n\nch.calcNewPosition = function (velocity, time, position) {\n  return [\n    velocity[0] *\n      Math.abs(Math.sin(time * ch.cg.rotationFactor1) * ch.cg.rotationFactor2) +\n      position[0],\n    velocity[1] + position[1],\n    position[2] + velocity[2],\n  ]\n}\n\nch.timer = function () {\n  const time = Date.now() - ch.cg.t0\n  const originalPos = ch.dom.projection.rotate()\n\n  ch.dom.projection.rotate(\n    ch.calcNewPosition(ch.vars.velocity, time, originalPos)\n  )\n  ch.dom.faces\n    .each((d) =>\n      d.forEach((p, i) => {\n        d.polygon[i] = ch.dom.projection(p)\n\n        return null\n      })\n    )\n    .style(\"display\", (d) => {\n      if (d.polygon.area() > 0) {\n        return null\n      }\n\n      return \"none\"\n    })\n    .attr(\"d\", (d) => `M${d.polygon.join(\"L\")}Z`)\n    .on(\"click\", () => {\n      if (String(ch.vars.velocity) === String(ch.cg.zeroVelocity)) {\n        ch.vars.velocity = ch.cg.defaultVelocity\n      }\n\n      ch.vars.velocity = ch.cg.zeroVelocity\n    })\n\n  return null\n}\n\nch.ready = function () {\n  ch.setCg()\n  ch.setDom()\n  ch.setVars()\n  ch.dom.faces = ch.dom.svg\n    .selectAll(\"path\")\n    .data(ch.icosahedronFaces)\n    .enter()\n    .append(\"path\")\n    .each((d) => {\n      d.polygon = d3.geom.polygon(d.map(ch.dom.projection))\n    })\n    .style({\n      fill(_d, index) {\n        return ch.cg.color(index)\n      },\n    })\n  ch.vars.velocity = ch.cg.defaultVelocity\n\n  return d3.timer(ch.timer)\n}\n\nexport default () => {\n  ch.ready()\n}\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/icosahedron/icosahedron\"\n\nimport \"@/demos/icosahedron/icosahedron.styl\"\n\nconst Icosahedron = ({ pageContext: { demoInfo } }) => (\n  <Demo demoInfo={demoInfo} main={main} scripts={[\"/vendors/d3/d3.min.js\"]}>\n    <div className=\"icosahedron-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default Icosahedron\n"],"sourceRoot":""}