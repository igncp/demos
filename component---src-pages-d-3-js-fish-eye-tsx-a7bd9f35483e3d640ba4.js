(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[909],{2137:function(t,e,n){"use strict";function r(t,e,n,r,a,i,s){try{var o=t[i](s),c=o.value}catch(u){return void n(u)}o.done?e(c):Promise.resolve(c).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var s=t.apply(e,n);function o(t){r(s,a,i,o,c,"next",t)}function c(t){r(s,a,i,o,c,"throw",t)}o(void 0)}))}}n.d(e,{Z:function(){return a}})},4932:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return k}});var r=n(7294),a=n(1335),i=n(2137),s=n(7757),o=n.n(s),c=n(6231);function u(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function d(t,e,n){function r(r){var a=t(r),i=a<n,s=c.Wem(t.range()),o=s[0],u=s[1],d=i?n-o:u-n;return 0==d&&(d=u-o),(i?-1:1)*d*(e+1)/(e+d/Math.abs(a-n))+n}return r.distortion=function(t){return arguments.length?(e=+t,r):e},r.focus=function(t){return arguments.length?(n=+t,r):n},r.copy=function(){return d(t.copy(),e,n)},r.nice=t.nice,r.ticks=t.ticks,r.tickFormat=t.tickFormat,r.range=t.range,function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.forEach((function(n){t[n]=u(t,e,e[n])})),t}(r,t,"domain","range")}var l={circular:function(){var t=200,e=2,n=null,r=null,a=[0,0];function i(e){var i=e.x-a[0],s=e.y-a[1],o=Math.sqrt(i*i+s*s);if(!o||o>=t)return{x:e.x,y:e.y,z:o>=t?1:10};var c=n*(1-Math.exp(-o*r))/o*.75+.25;return{x:a[0]+i*c,y:a[1]+s*c,z:Math.min(c,10)}}function s(){return n=(n=Math.exp(e))/(n-1)*t,r=e/t,i}return i.radius=function(e){return arguments.length?(t=+e,s()):t},i.distortion=function(t){return arguments.length?(e=+t,s()):e},i.focus=function(t){return arguments.length?(a=t,i):a},s()},scale:function(t){return d(t(),3,0)}},h=function(){var t=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.AVB("/demos/data/d3js/fish-eye/data.json"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(t){for(var e=t.toString();;){var n=e.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(e===n)break;e=n}return e},p=70,m=70,v=50,x=80,y=700-x-p,g=function(){function t(t){var e=t.rootElId,n=t.data;this.rootElId=e,this.data=n,this.setupRootEl(),this.setVars(),this.setDom()}var e=t.prototype;return e.render=function(){this.setChartTitle(),this.setBackground(),this.setPointer(),this.setFilter(),this.setAxis(),this.setLabels(),this.setDots(),this.setTitles(),this.bindMousemove(),this.bindClick()},e.setupRootEl=function(){var t=document.getElementById(this.rootElId);t.classList.add("fish-eye-chart"),this.width=t.getBoundingClientRect().width-m-v},e.setDom=function(){this.dom={svg:c.Ys("#"+this.rootElId).append("svg").attr("width",this.width+m+v).attr("height",y+x+p).append("g").attr("transform","translate("+m+","+x+")")}},e.setChartTitle=function(){this.dom.svg.append("text").attr("class","chart-title").attr("text-anchor","middle").attr("transform","translate("+this.width/2+",-40)").text("Income Per Capita vs Life Expectancy vs Population vs Region - 180 Countries").style("font-weight","bold")},e.setVars=function(){var t=c.PKp().domain(["Sub-Saharan Africa","South Asia","Middle East & North Africa","America","Europe & Central Asia","East Asia & Pacific"]).range(c.i4X),e=c.PUr().domain([0,5e8]).range([5,60]),n=l.scale(c.p2C).domain([300,1e5]).range([0,this.width]),r=l.scale(c.BYU).domain([20,90]).range([y,0]);this.vars={colorScale:t,focused:!1,radiusScale:e,xScale:n,yScale:r}},e.setAxis=function(){this.dom.xAxis=c.LLu(this.vars.xScale).tickFormat(c.WUZ(",d")).tickSize(-y),this.dom.yAxis=c.y4O(this.vars.yScale).tickSize(-this.width),this.dom.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+y+")").call(this.dom.xAxis),this.dom.svg.append("g").attr("class","y axis").call(this.dom.yAxis)},e.setBackground=function(){return this.dom.svg.append("rect").attr("class","background").attr("width",this.width).attr("height",y)},e.setLabels=function(){this.dom.svg.append("text").attr("class","x label").attr("text-anchor","end").attr("x",this.width-26).attr("y",y+26).text("income per capita, inflation-adjusted (dollars)"),this.dom.svg.append("text").attr("class","y label").attr("text-anchor","end").attr("x",-26).attr("y",-40).attr("dy",".75em").attr("transform","rotate(-90)").text("life expectancy (years)")},e.setFilter=function(){var t=this.dom.svg.append("defs").append("filter").attr("id","drop-shadow-circles");t.attr("height","500%").attr("width","500%").attr("x","-200%").attr("y","-200%"),t.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),t.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",1.5),t.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),t.append("feComponentTransfer").append("feFuncA").attr("slope",.6).attr("type","linear")},e.position=function(){var t=this;this.dom.dot.attr("cx",(function(e){return t.vars.xScale(e.income)})).attr("cy",(function(e){return t.vars.yScale(e.lifeExpectancy)})).attr("r",(function(e){return t.vars.radiusScale(e.population)}))},e.setDots=function(){var t=this;this.dom.dot=this.dom.svg.append("g").attr("class","dots").selectAll(".dot").data(this.data).enter().append("circle").attr("class","dot").style("fill",(function(e){return t.vars.colorScale(e.region)})).style("filter","url(#drop-shadow-circles)").style("stroke","black").style('"stroke-width"',"1px").sort((function(t,e){return e.population-t.population})),this.position()},e.setTitles=function(){this.dom.dot.append("title").text((function(t){return t.name+":\n- Income: "+f(t.income)+" $/P.C.\n- Population: "+f(t.population)+"\n- Life expectancy: "+t.lifeExpectancy+" years"}))},e.zoom=function(t){var e=c.cx$(t);this.vars.xScale.distortion(2.5).focus(e[0]),this.vars.yScale.distortion(2.5).focus(e[1]),this.position(),this.dom.svg.select(".x.axis").call(this.dom.xAxis),this.dom.svg.select(".y.axis").call(this.dom.yAxis)},e.setPointer=function(){this.dom.pointer=this.dom.svg.append("text").text("+").attr("class","pointer")},e.bindMousemove=function(){var t=this;return this.dom.svg.on("mousemove",(function(e){t.vars.focused||t.zoom(e)}))},e.bindClick=function(){var t=this;this.dom.svg.on("click",(function(e){if(t.vars.focused=!t.vars.focused,t.vars.focused){var n=c.cx$(t);t.dom.pointer.attr("x",n[0]).attr("y",n[1]).style("opacity",1)}else t.dom.pointer.style("opacity",0),t.zoom(e)}))},t}(),w=function(){var t=(0,i.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:e=t.sent,new g({data:e,rootElId:"chart"}).render();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(t){var e=t.pageContext.demoInfo;return r.createElement(a.Z,{demoInfo:e,main:w},r.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-fish-eye-tsx-a7bd9f35483e3d640ba4.js.map