(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[540],{3244:function(t,e,a){"use strict";var n=a(8314),r=a(2492),i=a.n(r),s={colorsScale:function(t,e){var a=n.BYU().domain(e).range([0,1]),r=n.BYU().domain(n.w6H(0,1,1/t.length)).range(t);return function(t){return r(a(t))}},filterBlackOpacity:function(t,e,a,n){var r=e.append("defs").append("filter").attr("height","500%").attr("id","drop-shadow-"+t).attr("width","500%").attr("x","-200%").attr("y","-200%");r.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",a),r.append("feOffset").attr("dx",1).attr("dy",1),r.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear");var i=r.append("feMerge");return i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")},filterColor:function(t,e,a,n,r){null==r&&(r=!1);var i=e.append("defs").append("filter").attr("id","drop-shadow-"+t);return r&&i.attr("height","500%").attr("width","500%").attr("x","-200%").attr("y","-200%"),i.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),i.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",a),i.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),i.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear")},middleTitle:function(t,e,a,n){null==n&&(n=-15),t.append("text").attr("class","chart-title").attr("text-anchor","middle").attr("transform","translate("+String(e/2)+","+n+")").text(a).style("font-weight","bold")},svg:function(t,e,a,r){return n.Ys(t).text("").append("svg").attr("height",a+r.top+r.bottom).attr("width",e+r.left+r.right).append("g").attr("transform","translate("+r.left+","+r.top+")")},tooltip:function(t,e){null==e&&(e={});var a=i()({elementSelector:"",followElement:!1,followMouse:!1,leftOffst:60,tOpts:{container:"body",viewport:{selector:"#chart svg"}},topOffst:40},e);$(t).tooltip(a.tOpts),a.followMouse?$(t).hover((function(t){return $(".tooltip").css({left:String(t.pageX-a.leftOffst)+"px",top:String(t.pageY-a.topOffst)+"px"})})):a.followElement&&$(t).hover((function(){return $(".tooltip").css({left:String($(a.elementSelector).position().left-a.leftOffst)+"px",top:String($(a.elementSelector).position().top-a.topOffst)+"px"})}))}};e.Z=s},6033:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return g}});var n=a(7294),r=a(1335),i=a(2137),s=a(7757),o=a.n(s),d=a(8314),l=a(3244),c={bottom:0,left:20,right:20,top:60},u=700-c.top-c.bottom,h=function(t){var e=d.Z1g("%Y-%m-%d")(t);if(null!==e)return e;var a=isNaN(Number(t))?-t.replace(/[^0-9]/g,""):+t;return a<0||a>99?e=new Date(a,6,1):0===a?e=new Date(-1,6,1):(e=new Date(a,6,1)).setUTCFullYear(a),e},f=function(t){var e=t.getUTCFullYear();return e>=0?e.toString():" BC"+Math.abs(e)},p=function(){function t(t){var e=t.rootElId,a=document.getElementById(e);a.classList.add("timeline-chart");var n=a.getBoundingClientRect().width;this.width=n-c.left-c.right,this.bandY=0,this.bandNum=0,this.dataContent={},this.components=[],this.bands={};var r=l.Z.svg("#"+e,n,700,c);l.Z.middleTitle(r,n,"Philosophers through History",-20),l.Z.filterBlackOpacity("intervals",r,1,.2),r.append("clipPath").attr("id","chart-area").append("rect").attr("width",this.width).attr("height",u),r.on("mouseup",(function(){return d.td_(".interval rect").style("filter","url(#drop-shadow-intervals)")})),this.chart=r.append("g").attr("class","chart").attr("clip-path","url(#chart-area)")}var e=t.prototype;return e.data=function(t){var e=this,a=new Date,n=[];this.dataContent.items=t;var r=function(t,e){var a=t.start-e.start;return a<0?-1:a>0?1:(a=e.end-t.end)<0?-1:a>0?1:0},i=function(t,e){var a=t.start-e.start;return a<0?1:a>0?-1:(a=e.end-t.end)<0?1:a>0?-1:0};return this.dataContent.items.forEach((function(t){t.start=h(t.start),""===t.end?(t.end=new Date(t.start.getTime()+316224e7),t.instant=!0):(t.end=h(t.end),t.instant=!1),t.end>a&&(t.end=a)})),function(t,a,s){s=s||"backward";"ascending"===(a=a||"descending")?e.dataContent.items.sort(r):e.dataContent.items.sort(i),"forward"===s?t.forEach((function(t){for(var e=0,a=0,r=0,i=n.length;(0<=i?r<i:r>i)&&!(t.start>n[a]);a=0<=i?++r:--r)e++;t.track=e,n[e]=t.end})):t.forEach((function(t){for(var e=0,a=0,r=0,i=n.length;(0<=i?r<i:r>i)&&!(t.end<n[a]);a=0<=i?++r:--r)e++;t.track=e,n[e]=t.start}))}(this.dataContent.items,"descending","backward"),this.dataContent.nTracks=n.length,this.dataContent.minDate=d.VV$(this.dataContent.items,(function(t){return t.start})),this.dataContent.maxDate=d.Fp7(this.dataContent.items,(function(t){return t.end})),this},e.xAxis=function(t){var e=this.bands[t],a=d.LLu(e.xScale).tickSize(6,0).tickFormat((function(t){return f(t)})),n=this.chart.append("g").attr("class","axis").attr("transform","translate(0,"+(e.y+e.h)+")");return n.redraw=function(){return n.call(a)},e.parts.push(n),this.components.push(n),this},e.createTooltip=function(){return l.Z.tooltip(".part.instant, .part.interval",{followMouse:!0,leftOffst:80}),this},e.band=function(t,e){var a={};a.id="band"+this.bandNum,a.x=0,a.y=this.bandY,a.w=this.width,a.h=u*(e||1),a.trackOffset=0,a.trackHeight=Math.min((a.h-a.trackOffset)/this.dataContent.nTracks,20),a.itemHeight=.7*a.trackHeight,a.parts=[],a.instantWidth=100,a.xScale=d.Xf().domain([this.dataContent.minDate,this.dataContent.maxDate]).range([0,a.w]),a.yScale=function(t){return a.trackOffset+t*a.trackHeight},a.yearsScale=this.dataContent.maxDate.getUTCFullYear()-this.dataContent.minDate.getUTCFullYear(),a.g=this.chart.append("g").attr("id",a.id).attr("transform","translate(0,"+a.y+")"),a.g.append("rect").attr("class","band").attr("width",a.w).attr("height",a.h);var n=a.g.selectAll("g").data(this.dataContent.items).enter().append("svg").attr("y",(function(t){return a.yScale(t.track)})).attr("height",a.itemHeight).attr("data-title",(function(t){return t.instant?t.label+": "+f(t.start):t.label+": "+f(t.start)+" - "+f(t.end)})).attr("class",(function(t){return t.instant?"part instant":"part interval"})),r=d.Ys("#band"+this.bandNum).selectAll(".interval");r.append("rect").attr("height","80%").attr("width","80%").attr("x","1px").attr("y",".5px").style("filter","url(#drop-shadow-intervals)"),r.append("text").attr("class","intervalLabel").attr("x",3).attr("y",9.5);var i=d.Ys("#band"+this.bandNum).selectAll(".instant");return i.append("circle").attr("cx",a.itemHeight/2).attr("cy",a.itemHeight/2).attr("r",5),i.append("text").attr("class","instantLabel").attr("x",15).attr("y",10),a.addActions=function(t){return t.forEach((function(t){return n.on(t[0],t[1])}))},a.redraw=function(){return n.attr("x",(function(t){return a.xScale(t.start)})).attr("width",(function(t){return a.xScale(t.end)-a.xScale(t.start)})).select("text").text((function(t){var e=(a.xScale(t.end)-a.xScale(t.start))/9;return t.label.length>e?t.label.substr(0,e-1)+"..":t.label})),a.parts.forEach((function(t){return t.redraw()}))},this.bands[t]=a,this.components.push(a),this.bandY+=a.h+25,this.bandNum+=1,this},e.labels=function(t){var e=this.bands[t],a=e.y+e.h-10,n=[["start","bandMinMaxLabel",0,4,function(t){return f(t)},"Start of the selected interval",e.x+30,a],["end","bandMinMaxLabel",e.w-46,e.w-4,function(t,e){return f(e)},"End of the selected interval",e.x+e.w-152,a],["middle","bandMidLabel",(e.w-46)/2,e.w/2,function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},"Length of the selected interval",e.x+e.w/2-75,a]],r=this.chart.append("g").attr("id",t+"Labels").attr("transform","translate(0,"+(e.y+e.h+1)+")").selectAll("#"+t+"Labels").data(n).enter().append("g");r.append("rect").attr("class","bandLabel").attr("x",(function(t){return t[2]})).attr("width",46).attr("height",20).style("opacity",1);var i=r.append("text").attr("class",(function(t){return t[1]})).attr("id",(function(t){return t[0]})).attr("x",(function(t){return t[3]})).attr("y",15).attr("text-anchor",(function(t){return t[0]}));return i.redraw=function(){var t=e.xScale.domain()[0],a=e.xScale.domain()[1];return i.text((function(e){return e[4](t,a)}))},e.parts.push(i),this.components.push(i),this},e.brush=function(t,e){var a=this,n=this.bands[t],r=d.Yud(),i=d.Xf().domain([0,1e3]).range([this.dataContent.minDate.getTime(),this.dataContent.maxDate.getTime()]);return r.on("brush",(function(t){var r=n.xScale.domain();t.selection&&(r=[i(t.selection[0]),i(t.selection[1])]),d.td_(".interval rect").style("filter","none"),e.forEach((function(t){a.bands[t].xScale.domain(r),a.bands[t].redraw()}))})),n.g.append("svg").attr("class","x brush").call(r).selectAll("rect").attr("y",1).attr("height",n.h-1),this},e.redraw=function(){return this.components.forEach((function(t){return t.redraw()}))},t}(),m=function(){var t=(0,i.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.gyn("/demos/data/d3js/timeline/data.csv");case 2:e=t.sent,new p({rootElId:"chart"}).data(e).band("mainBand",.82).band("naviBand",.08).xAxis("mainBand").xAxis("naviBand").labels("mainBand").labels("naviBand").brush("naviBand",["mainBand"]).createTooltip().redraw();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(t){var e=t.pageContext.demoInfo;return n.createElement(r.Z,{demoInfo:e,links:["/vendors/jquery-ui/themes/base/jquery-ui.min.css"],main:m,scripts:["/vendors/jquery-ui/jquery-ui.min.js"]},n.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-timeline-tsx-2278e44bfbf8943f0e9a.js.map