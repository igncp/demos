(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[912],{3637:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(7294),a=n(7538),c=function(){var e=2e3,t=function(e,t){var n=d3.scale.quantile().domain([0,1]).range(d3.range(1,e.length+1));return function(r){var a=e.slice(0,n(r));return t(a)}};return d3.tsv("/demos/data/d3js/trend-line/data.tsv",(function(n,r){var a=50,c=50,o=50,l=50,u=document.getElementById("chart").getBoundingClientRect().width-c-o,i=500-l-a,d=d3.time.format("%Y-%m-%d").parse;r.forEach((function(e){e.occurred=d(e.occurred),e.value=+e.value}));var s=function(){var n=d3.select('input[value="zoom"]')[0][0].checked,d=d3.select("#chart").text("").append("svg").attr("height",i+l+a).attr("width",u+c+o).append("g").attr("transform","translate("+c+","+o+")"),s=d3.time.scale().range([0,u]),m=d3.scale.linear().range([i,0]),p=d3.svg.axis().scale(s).orient("bottom"),f=d3.svg.axis().scale(m).orient("left"),v=d3.svg.line().x((function(e){return s(e.occurred)})).y((function(e){return m(e.value)}));s.domain(d3.extent(r,(function(e){return e.occurred}))),m.domain([n?d3.min(r,(function(e){return e.value})):0,d3.max(r,(function(e){return e.value}))]),d.append("g").attr("class","x axis").attr("transform","translate(0,"+i+")").call(p),d.append("g").attr("class","y axis").call(f),d.append("path").datum(r).transition().duration(e).attrTween("d",(function(){return t(r,v)})).attr("class","line");var g=function(e){var t={},n=e.length,r=0,a=0,c=0,o=0,l=0;return e.forEach((function(e){r+=e.occurred.getTime(),a+=e.value,o+=e.occurred.getTime()*e.occurred.getTime(),l+=e.value*e.value,c+=e.occurred.getTime()*e.value})),t.slope=(n*c-r*a)/(n*o-r*r),t.intercept=(a-t.slope*r)/n,t.r2=Math.pow((n*c-r*a)/Math.sqrt((n*o-r*r)*(n*l-a*a)),2),t}(r),h=d3.svg.line().x((function(e){return s(e.occurred)})).y((function(e){var t=g.intercept+g.slope*e.occurred;return m(t)}));return d.append("path").datum(r).transition().delay(e).duration(e).attrTween("d",(function(){return t(r,h)})).attr("class","rline"),d.append("text").attr("transform","translate("+.7*u+","+.7*i+")").style("opacity",0).transition(1e3).delay(4e3).text("Slope: "+g.slope.toExponential(3)).style("opacity",1)};return s(),d3.selectAll('input[name="mode"]').on("change",s)}))},o=function(e){var t=e.pageContext.demoInfo;return r.createElement(a.Z,{demoInfo:t,main:c,scripts:["/vendors/d3/d3.min.js","/js/d3js-utils.js"]},r.createElement("form",null,r.createElement("label",null,r.createElement("input",{checked:!0,name:"mode",type:"radio",value:"zoom"})," Zoom"),r.createElement("label",null,r.createElement("input",{name:"mode",type:"radio",value:"normal"})," Normal")),r.createElement("div",{className:"trend-line-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-trend-line-js-9a875d355f24bc6506a9.js.map