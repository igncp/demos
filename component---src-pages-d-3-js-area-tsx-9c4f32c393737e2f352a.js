"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[189],{9646:function(t,e,r){var n;r.d(e,{Z:function(){return v}});var o=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(t){return"string"==typeof t&&a.test(t)},c=[],s=0;s<256;++s)c.push((s+256).toString(16).substr(1));var l,f,p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r},d=0,h=0;var v=function(t,e,r){var n=e&&r||0,o=e||new Array(16),a=(t=t||{}).node||l,u=void 0!==t.clockseq?t.clockseq:f;if(null==a||null==u){var c=t.random||(t.rng||i)();null==a&&(a=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==u&&(u=f=16383&(c[6]<<8|c[7]))}var s=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:h+1,m=s-d+(v-h)/1e4;if(m<0&&void 0===t.clockseq&&(u=u+1&16383),(m<0||s>d)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=s,h=v,f=u;var g=(1e4*(268435455&(s+=122192928e5))+v)%4294967296;o[n++]=g>>>24&255,o[n++]=g>>>16&255,o[n++]=g>>>8&255,o[n++]=255&g;var y=s/4294967296*1e4&268435455;o[n++]=y>>>8&255,o[n++]=255&y,o[n++]=y>>>24&15|16,o[n++]=y>>>16&255,o[n++]=u>>>8|128,o[n++]=255&u;for(var b=0;b<6;++b)o[n+b]=a[b];return e||p(o)}},1754:function(t,e,r){r.r(e),r.d(e,{default:function(){return Tt}});var n=r(7294),o=r(1745),i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},i(t,e)};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}Object.create;function u(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function s(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}Object.create;function l(t){return"function"==typeof t}function f(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var p=f((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function d(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var h=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t,e,r,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=u(i),f=a.next();!f.done;f=a.next()){f.value.remove(this)}}catch(b){t={error:b}}finally{try{f&&!f.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else i.remove(this);var d=this.initialTeardown;if(l(d))try{d()}catch(w){o=w instanceof p?w.errors:[w]}var h=this._teardowns;if(h){this._teardowns=null;try{for(var v=u(h),m=v.next();!m.done;m=v.next()){var y=m.value;try{g(y)}catch(x){o=null!=o?o:[],x instanceof p?o=s(s([],c(o)),c(x.errors)):o.push(x)}}}catch(I){r={error:I}}finally{try{m&&!m.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}}if(o)throw new p(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)g(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&d(e,t)},t.prototype.remove=function(e){var r=this._teardowns;r&&d(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),v=h.EMPTY;function m(t){return t instanceof h||t&&"closed"in t&&l(t.remove)&&l(t.add)&&l(t.unsubscribe)}function g(t){l(t)?t():t.unsubscribe()}var y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},b={setTimeout:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=b.delegate;return((null==r?void 0:r.setTimeout)||setTimeout).apply(void 0,s([],c(t)))})),clearTimeout:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=b.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)})),delegate:void 0};function w(){}var x=I("C",void 0,void 0);function I(t,e,r){return{kind:t,value:e,error:r}}var S=null;function E(t){if(y.useDeprecatedSynchronousErrorHandling){var e=!S;if(e&&(S={errorThrown:!1,error:null}),t(),e){var r=S,n=r.errorThrown,o=r.error;if(S=null,n)throw o}}else t()}var _=function(t){function e(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,m(e)&&e.add(r)):r.destination=k,r}return a(e,t),e.create=function(t,e,r){return new O(t,e,r)},e.prototype.next=function(t){this.isStopped?T(function(t){return I("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?T(I("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?T(x,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(h),A=Function.prototype.bind;function V(t,e){return A.call(t,e)}var C=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(r){P(r)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(r){P(r)}else P(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){P(e)}},t}(),O=function(t){function e(e,r,n){var o,i,a=t.call(this)||this;l(e)||!e?o={next:null!=e?e:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:a&&y.useDeprecatedNextContext?((i=Object.create(e)).unsubscribe=function(){return a.unsubscribe()},o={next:e.next&&V(e.next,i),error:e.error&&V(e.error,i),complete:e.complete&&V(e.complete,i)}):o=e;return a.destination=new C(o),a}return a(e,t),e}(_);function P(t){var e;y.useDeprecatedSynchronousErrorHandling?(e=t,y.useDeprecatedSynchronousErrorHandling&&S&&(S.errorThrown=!0,S.error=e)):function(t){b.setTimeout((function(){var e=y.onUnhandledError;if(!e)throw t;e(t)}))}(t)}function T(t,e){var r=y.onStoppedNotification;r&&b.setTimeout((function(){return r(t,e)}))}var k={closed:!0,next:w,error:function(t){throw t},complete:w},N="function"==typeof Symbol&&Symbol.observable||"@@observable";function Y(t){return t}function R(t){return 0===t.length?Y:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var U=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n,o=this,i=(n=t)&&n instanceof _||function(t){return t&&l(t.next)&&l(t.error)&&l(t.complete)}(n)&&m(n)?t:new O(t,e,r);return E((function(){var t=o,e=t.operator,r=t.source;i.add(e?e.call(i,r):r?o._subscribe(i):o._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=F(e))((function(e,n){var o=new O({next:function(e){try{t(e)}catch(r){n(r),o.unsubscribe()}},error:n,complete:e});r.subscribe(o)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[N]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return R(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=F(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function F(t){var e;return null!==(e=null!=t?t:y.Promise)&&void 0!==e?e:Promise}var Z,z=f((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),M=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return a(e,t),e.prototype.lift=function(t){var e=new D(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new z},e.prototype.next=function(t){var e=this;E((function(){var r,n;if(e._throwIfClosed(),!e.isStopped){var o=e.observers.slice();try{for(var i=u(o),a=i.next();!a.done;a=i.next()){a.value.next(t)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},e.prototype.error=function(t){var e=this;E((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var r=e.observers;r.length;)r.shift().error(t)}}))},e.prototype.complete=function(){var t=this;E((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,r=e.hasError,n=e.isStopped,o=e.observers;return r||n?v:(o.push(t),new h((function(){return d(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,n=e.thrownError,o=e.isStopped;r?t.error(n):o&&t.complete()},e.prototype.asObservable=function(){var t=new U;return t.source=this,t},e.create=function(t,e){return new D(t,e)},e}(U),D=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return a(e,t),e.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},e.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:v},e}(M),j=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){var t=this,e=t.hasError,r=t.thrownError,n=t._value;if(e)throw r;return this._throwIfClosed(),n},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(M),B=r(5861),L=r(7757),X=r.n(L),H=r(5633),G="chart",W="data-source-select",$="toggle-voronoi",q="update-voronoi",K=function(){return 0},J=function(){return 0},Q=function(){return"_"},tt=function(){return""};!function(t){t.INCOME="income",t.NOBEL_PRIZES="nobel-prizes"}(Z||(Z={}));var et,rt,nt=function(){function t(t){this.source=Z.INCOME,this.incomeItemData=t,this.incomeItemData.percentage=Number(this.incomeItemData.percentage)}t.fetchAndCreateCollection=function(){var e=(0,B.Z)(X().mark((function e(){var r,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.gyn)("/demos/data/d3js/area/data.csv");case 2:return r=e.sent,n=r.map((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],o=e[1];return Object.assign({},n,{percentage:n.percent,pointIndex:o})})),e.abrupt("return",n.map((function(e){return new t(e)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var e=t.prototype;return e.getYear=function(){return this.incomeItemData.year},e.changePercentage=function(t){var e=Math.max(this.incomeItemData.percentage+t,0),r=Math.min(100,e);this.incomeItemData.percentage=r},e.getNormalizedValue=function(){return this.incomeItemData.percentage/100},e.getId=function(){return this.incomeItemData.pointIndex},e.getSummary=function(){var t=this.incomeItemData;return"Year: "+t.year+", Percentage: "+t.percentage.toFixed(2)+"%"},t}(),ot=function(t){return t.getYear()},it=function(t){return t.getNormalizedValue()},at=function(t){return t.source+"-"+t.getId()},ut=function(t){return t.getSummary()},ct="Share of top decile [aka top 10%] in national income",st=ct.replace(" [aka top 10%]",""),lt=function(){var t=(0,B.Z)(X().mark((function t(){var e,r,n;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt.fetchAndCreateCollection();case 2:return e=t.sent,r={getAreaPoints:function(){return e},getChartTitle:function(){return ct},getChartTitleShort:function(){return st},getItemId:at,getItemTitle:ut,getItemXValue:ot,getItemYValue:it,getPointClickHandler:function(){return null},getRootElId:function(){return G},getVerticalOffset:function(){return.05},getXAxisFormat:function(){return(0,H.WUZ)(".0f")},getYAxisFormat:function(){return(0,H.WUZ)(".0%")}},n=function(){Array.from({length:50}).forEach((function(){var t=Math.floor(Math.random()*e.length),r=10*Math.random()*(Math.random()>.5?1:-1);e[t].changePercentage(r)}))},t.abrupt("return",{config:r,onUpdateRandomValue:n});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ft=r(2982),pt=function(t){return t.birthYear},dt=function(t){return t.prizeYear},ht=function(t){return t.source+"-"+t.id},vt=function(t){return t.name+"\nBorn: "+t.birthYear+"\nAward: "+t.prizeYear},mt="Nobel Prizes (subset)",gt=function(){var t=(0,B.Z)(X().mark((function t(){var e,r,n;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,H.AVB)("https://api.nobelprize.org/2.1/laureates?limit=100");case 2:return r=t.sent,t.next=5,(0,H.AVB)(r.links.next);case 5:return n=t.sent,(e=r.laureates).push.apply(e,(0,ft.Z)(n.laureates)),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),yt=function(t){t.link&&window.open(t.link,"_blank")},bt=function(){var t=(0,B.Z)(X().mark((function t(){var e,r,n,o,i;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gt();case 2:return e=t.sent,r=new Set,(n=e.laureates.filter((function(t){return t.birth&&t.nobelPrizes})).map((function(t){if(!t.nobelPrizes||!t.birth)return null;var e=parseInt(t.birth.date.split("-")[0],10);return r.has(e)?null:(r.add(e),{birthYear:e,id:Number(t.id),link:t.wikipedia.english||"",name:t.knownName.en||t.givenName.en+" "+t.familyName.en,prizeYear:Number(t.nobelPrizes[0].awardYear),source:Z.NOBEL_PRIZES})})).filter((function(t){return!!t}))).sort((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],o=e[1];return n.birthYear-o.birthYear})),o={getAreaPoints:function(){return n},getChartTitle:function(){return"Nobel Prizes (subset) year of birth (x) vs. year of award (y)"},getChartTitleShort:function(){return mt},getItemId:ht,getItemTitle:vt,getItemXValue:pt,getItemYValue:dt,getPointClickHandler:function(){return yt},getRootElId:function(){return G},getVerticalOffset:function(){return 15},getXAxisFormat:function(){return(0,H.WUZ)(".0f")},getYAxisFormat:function(){return(0,H.WUZ)(".0f")}},i=function(){Array.from({length:50}).forEach((function(){var t=Math.floor(Math.random()*n.length),e=10*Math.random()*(Math.random()>.5?1:-1);n[t].prizeYear=n[t].prizeYear+e}))},t.abrupt("return",{config:o,onUpdateRandomValue:i});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();!function(t){t.INCOME="income",t.NOBEL_PRIZES="nobel-prizes"}(rt||(rt={}));var wt=((et={})[rt.INCOME]="Income",et[rt.NOBEL_PRIZES]="Nobel Prizes (external API)",et),xt=function(t){var e=t.appState,r=t.onConfigLoad,n=t.updateState,o=null,i=null,a={config:{getAreaPoints:function(){return[]},getChartTitle:function(){return""},getChartTitleShort:function(){return""},getItemId:Q,getItemTitle:tt,getItemXValue:K,getItemYValue:J,getPointClickHandler:function(){return null},getRootElId:function(){return G},getVerticalOffset:function(){return.05},getXAxisFormat:function(){return(0,H.WUZ)(".0f")},getYAxisFormat:function(){return(0,H.WUZ)(".0%")}},onUpdateRandomValue:function(){}},u=function(t){var o;n({loaded:Object.assign({},e.loaded,(o={},o[t]=!0,o))}),r()};(0,B.Z)(X().mark((function t(){var e;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt();case 2:e=t.sent,i=e,u(rt.INCOME);case 5:case"end":return t.stop()}}),t)})))().catch(console.log),(0,B.Z)(X().mark((function t(){var e;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt();case 2:e=t.sent,o=e,u(rt.NOBEL_PRIZES);case 5:case"end":return t.stop()}}),t)})))().catch(console.log);var c=function(t){var r,n;switch(null!=t?t:e.source){case rt.NOBEL_PRIZES:return null!==(r=o)&&void 0!==r?r:a;case rt.INCOME:return null!==(n=i)&&void 0!==n?n:a;default:throw new Error("Unknown source")}},s=function(t){return c(t).config};return{config:{getAreaPoints:function(){return s().getAreaPoints()},getChartTitle:function(){return s().getChartTitle()},getChartTitleShort:function(){return s().getChartTitleShort()},getItemId:function(t){return s(t.source).getItemId(t)},getItemTitle:function(t){return s(t.source).getItemTitle(t)},getItemXValue:function(t){return s(t.source).getItemXValue(t)},getItemYValue:function(t){return s(t.source).getItemYValue(t)},getPointClickHandler:function(){return s().getPointClickHandler()},getRootElId:function(){return s().getRootElId()},getVerticalOffset:function(){return s().getVerticalOffset()},getXAxisFormat:function(){return s().getXAxisFormat()},getYAxisFormat:function(){return s().getYAxisFormat()}},onUpdateRandomValue:function(){return c().onUpdateRandomValue()},updateSource:function(t){n({source:t})}}},It=r(8747),St=r.n(It),Et=r(9646),_t="area-chart-module--axis--6cab9",At="area-chart-module--point--3acfa",Vt=r(2149),Ct=function(){function t(t){this.state={hasVoronoi:!1},this.voronoiGroup=t.append("g")}var e=t.prototype;return e.toggleVoronoi=function(){this.state.hasVoronoi=!this.state.hasVoronoi,this.setVoronoi()},e.render=function(t){var e=t.animationDuration,r=t.boundaries,n=t.className,o=t.clipPath,i=t.extractXScale,a=t.extractYScale,u=t.filter,c=t.getItemId,s=t.getTitle,l=t.mouseenter,f=t.mouseleave,p=t.points,d=this.voronoiGroup,h=d.selectAll("path").data(p,(function(t){return c(t)}));h.enter().append("path"),h.exit().remove();var v=(0,H.PKp)(H.i4X),m=Vt.Z.from(p,i,a).voronoi(r);d.attr("clip-path",o).attr("class","area-chart-module--voronoi--25398").selectAll("path").attr("fill",(function(t){var e=c(t),r=v(e),n=(0,H.$_Y)(r);return n.opacity=.2,n.formatRgb()})).on("mouseenter",l).on("mouseleave",f).attr("class",n).attr("data-voronoi-item",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n})).attr("title",s).style("filter",u).transition().duration(e).attr("d",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return m.renderCell(n)})),this.setVoronoi()},e.setVoronoi=function(){var t=this.state.hasVoronoi,e=this.voronoiGroup,r="area-chart-module--showVoronoi--5bec7",n=e.attr("class").replace(r,"").trim(),o=t?n+" "+r:n;e.attr("class",o),e.attr("data-has-voronoi",t)},t}();"undefined"!=typeof window&&r(5356);var Ot=function(){function t(t){var e=this;this.handleWindowResize=function(){e.render(!0)},this.config=t;var r=t.getRootElId(),n=(0,H.Ys)("#"+r).append("svg"),o=n.append("g").attr("class","area-chart-module--areaChart--8ccff"),i=o.append("g"),a=o.append("text").attr("class","area-chart-module--chartTitle--ca932").attr("text-anchor","middle").style("font-weight","bold"),u=o.append("g"),c=o.append("g"),s=o.append("path"),l=o.append("path"),f=new Ct(o),p=o.append("clipPath").attr("id","clip").append("rect"),d=o.append("clipPath").attr("id","clip-top").append("rect");this.svgOpacityFilter="opacity-"+(0,Et.Z)().slice(0,6),function(t){var e=t.deviation,r=t.id,n=t.slope,o=t.svg.append("defs").append("filter").attr("height","500%").attr("id","drop-shadow-"+r).attr("width","500%").attr("x","-200%").attr("y","-200%");o.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",e),o.append("feOffset").attr("dx",1).attr("dy",1),o.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear");var i=o.append("feMerge");i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")}({deviation:2,id:this.svgOpacityFilter,slope:.5,svg:o}),this.elements={areaSel:l,backgroundBands:i,chartTitleSel:a,clipRect:p,clipTopRect:d,lineSel:s,svg:n,svgG:o,voronoiGroup:f,xAxisSel:u,yAxisSel:c},this.render(!0),window.addEventListener("resize",this.handleWindowResize)}t.renderChart=function(e){return new t(e)};var e=t.prototype;return e.refresh=function(t){this.render(!!t)},e.tearDown=function(){window.removeEventListener("resize",this.handleWindowResize)},e.toggleVoronoi=function(){this.elements.voronoiGroup.toggleVoronoi()},e.render=function(t){var e=this.config.getRootElId(),r=document.getElementById(e).getBoundingClientRect().width,n=r<500,o=t||n?0:1e3,i=50,a=n?50:70,u=n?10:50,c=50,s=r-a-u,l=400-c-i,f=this.config,p=f.getAreaPoints(),d="tooltip-item-"+(0,Et.Z)().slice(0,6),h="point-"+(0,Et.Z)().slice(0,6)+"-",v=this.elements,m=v.areaSel,g=v.backgroundBands,y=v.chartTitleSel,b=v.clipRect,w=v.clipTopRect,x=v.lineSel,I=v.svg,S=v.svgG,E=v.voronoiGroup,_=v.xAxisSel,A=v.yAxisSel;I.attr("height",l+c+i).attr("width",s+a+u),S.attr("transform","translate("+a+","+c+")"),y.attr("transform","translate("+(r/2-a)+","+"-15)").text((function(){return n?f.getChartTitleShort():f.getChartTitle()}));var V=(0,H.Fp7)(p,f.getItemXValue),C=(0,H.VV$)(p,f.getItemXValue),O=(0,H.Fp7)(p,f.getItemYValue),P=(0,H.VV$)(p,f.getItemYValue),T=(0,H.BYU)().domain([C,V]).range([0,s]),k=f.getVerticalOffset(),N=(0,H.BYU)().domain([O+k,P-k]).range([0,l]),Y=function(t){return T(f.getItemXValue(t))},R=function(t){return N(f.getItemYValue(t))},U=n?(0,H.aE8)().domain([0,500]).range(Array.from({length:6}).map((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n})))(r):null,F=this.config.getXAxisFormat(),Z=this.config.getYAxisFormat(),z=(0,H.LLu)(T).tickFormat(F).ticks(U),M=(0,H.y4O)(N).tickFormat(Z).tickSize(10);_.attr("class","area-chart-module--x--5ced5 "+_t).attr("transform","translate(0,"+l+")").call(z).selectAll("text").attr("dy","1.25em"),A.attr("class","area-chart-module--y--c7cbb "+_t).attr("clip-path","url(#clip-top)").transition().duration(o).call(M).selectAll("text").attr("dx","-.25em");var D=(0,H.SOn)().x(Y).y0(l).y1(R),j=(0,H.jvg)().x(Y).y(R);x.datum(p).attr("clip-path","url(#clip)").attr("class","area-chart-module--line--571fe").transition().duration(o).attr("d",j),b.attr("height",l).attr("width",s),w.attr("height",l).attr("width",s).attr("transform","translate(-50,-5)"),m.datum(p).attr("class","area-chart-module--area--5af1c").attr("clip-path","url(#clip)").transition().duration(o).attr("d",D);var B=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];(0,H.Ys)("."+h+f.getItemId(n)).style("display","block")},L=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];(0,H.Ys)("."+h+f.getItemId(n)).style("display","none")},X=Array.from({length:10}).map((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n})),G=l/10,W=g.selectAll("rect").data(X);W.enter().append("rect"),W.exit().remove(),g.selectAll("rect").attr("clip-path","url(#clip)").attr("x",0).attr("width",s).attr("fill",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n%2?"#f7f7f7":"#ffffff"})).attr("class","backgroundBands").attr("height",G).attr("y",(function(t){return t*G}));var $=S.selectAll("circle").data(p);$.enter().append("circle").attr("class",At),$.exit().remove();var q=this.config.getPointClickHandler();S.selectAll("."+At).attr("r","5px").style("filter","url(#drop-shadow-"+this.svgOpacityFilter+")").attr("transform",(function(t){return"translate("+Y(t)+","+R(t)+")"})).attr("class",(function(t){return[At,d,h+f.getItemId(t)].join(" ")})).on("mouseenter",B).on("mouseleave",L).on("click",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];null==q||q(n)})).style("cursor",q?"pointer":"default").attr("title",f.getItemTitle),E.render({animationDuration:o,boundaries:[-a,-c,s+u,l+i],className:d,clipPath:"url(#clip)",extractXScale:Y,extractYScale:R,filter:"url(#drop-shadow-"+this.svgOpacityFilter+")",getItemId:f.getItemId,getTitle:f.getItemTitle,mouseenter:B,mouseleave:L,points:p}),St()("."+d).tooltip({track:!0})},t}(),Pt=function(){var t,e,r,n,o,i,a,u,c={loaded:{},source:rt.INCOME},s=new j(c),l=xt({appState:c,onConfigLoad:function(){f.refresh()},updateState:function(t){Object.assign(c,t),s.next(c)}}),f=Ot.renderChart(l.config);return t={onToggleVoronoiClick:function(){f.toggleVoronoi()},onUpdateRandomValue:function(){l.onUpdateRandomValue(),f.refresh()},onUpdateSelect:function(t){l.updateSource(t),f.refresh(!0)},selectOptions:Object.values(rt).map((function(t){return{inputValue:t,label:wt[t]}}))},e=t.onToggleVoronoiClick,r=t.onUpdateRandomValue,n=t.onUpdateSelect,o=t.selectOptions,i=document.getElementById(W),a=document.getElementById($),u=document.getElementById(q),o.forEach((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],o=e[1],a=document.createElement("option");a.setAttribute("value",n.inputValue),0===o&&a.setAttribute("selected","selected"),a.innerHTML=n.label,i.appendChild(a)})),i.addEventListener("change",(function(){n(i.value)})),a.addEventListener("click",(function(t){t.preventDefault(),e()})),u.addEventListener("click",(function(t){t.preventDefault(),r()})),{state$:s}},Tt=function(t){var e=t.pageContext,r=(0,n.useState)(!1),i=r[0],a=r[1],u=(0,n.useRef)();(0,n.useEffect)((function(){return function(){var t;null===(t=u.current)||void 0===t||t.unsubscribe()}}),[]);var c={visibility:i?"visible":"hidden"};return n.createElement(o.Z,{main:function(){var t,e=Pt().state$;return null===(t=u.current)||void 0===t||t.unsubscribe(),u.current=e.subscribe((function(t){a(!!t.loaded[t.source])})),Promise.resolve()},pageContext:e},!i&&n.createElement("div",{className:"area-page-module--loaderWrapper--9c6d1"},n.createElement("div",{className:"area-page-module--loader--3d671"})),n.createElement("form",{className:"area-page-module--form--1895c",style:c},n.createElement("select",{className:"form-select",id:W}),n.createElement("button",{className:"btn btn-info",id:$,type:"button"},"Toggle Voronoi"),n.createElement("button",{className:"btn btn-success",id:q,type:"button"},"Update Random Values")),n.createElement("div",{id:G,style:i?{}:{left:-1e3,opacity:0,position:"absolute",top:-1e3}}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-area-tsx-9c4f32c393737e2f352a.js.map