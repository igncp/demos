{"version":3,"sources":["webpack://demos/./src/demos/pie/pie.js","webpack://demos/./src/pages/d3js/pie.js"],"names":["width","$","innerWidth","color","d3","scale","category20","arc","stashArcs","d","data","ea0","_","cloneDeep","arcTween","ar","i","interpolate","t","textTransform","outerRadius","innerRadius","centroid","json","ROOT_PATH","_error","pie","layout","sort","value","val","svg","slices","select","append","attr","height","selectAll","enter","path","fill","_d","each","labels","filter","endAngle","startAngle","dy","style","font","text","label","on","index","Math","floor","random","transition","duration","attrTween","this","demoInfo","pageContext","main","scripts","className","id","type"],"mappings":"uKA0FA,EA1Fa,WACX,IAAMA,EAAQC,EAAE,UAAUC,aAGpBC,EAAQC,GAAGC,MAAMC,aACnBC,EAAM,GAEJC,EAAY,SAACC,GACjBA,EAAEC,KAAKC,IAAMC,EAAEC,UAAUJ,IAGrBK,EAAW,SAACC,GAChB,IAAMC,EAAIZ,GAAGa,YAAYF,EAAGL,KAAKC,IAAKI,GAItC,OAFAA,EAAGL,KAAKC,IAAMK,EAAE,GAET,SAACE,GAAD,OAAOX,EAAIS,EAAEE,MAGhBC,EAAgB,SAAUV,GAI9B,OAHAA,EAAEW,YAjBgB,IAkBlBX,EAAEY,YAAcD,GAEV,aAAcb,EAAIe,SAASb,GAAjC,KAGF,OAAOL,GAAGmB,KAAQC,kCAAoC,SAACC,EAAQf,GAC7D,IAAMgB,EAAMtB,GAAGuB,OACZD,MACAE,KAAK,MACLC,OAAM,SAACpB,GAAD,OAAOA,EAAEqB,OAElBvB,EAAMH,GAAG2B,IAAIxB,MAAMa,YA7BD,KA+BlB,IAUMY,EAVM5B,GACT6B,OAAO,UACPC,OAAO,WACPC,KAAK,CACJC,OApCS,IAqCTpC,UAEDkC,OAAO,KACPC,KAAK,YARI,aAQsBnC,EAAQ,EAR9B,SAWTqC,UAAU,UACV3B,KAAKgB,EAAIhB,IACT4B,QACAJ,OAAO,KACPC,KAAK,QAAS,SAEXI,EAAOP,EACVE,OAAO,QACPC,KAAK,CACJ1B,EAAGF,EACHiC,KAFI,SAECC,EAAIzB,GACP,OAAOb,EAAMa,MAGhB0B,KAAKlC,GAEFmC,EAASX,EACZY,QAAO,SAACnC,GAAD,OAAOA,EAAEoC,SAAWpC,EAAEqC,WAAa,MAC1CZ,OAAO,QACPC,KAAK,CAAEY,GAAI,QAAS,cAAe,WACnCZ,KAAK,YAAahB,GAClB6B,MAAM,CAAER,KAAM,QAASS,KAAM,oBAC7BC,MAAK,SAACzC,GAAD,OAAOA,EAAEC,KAAKoB,OAItB,OAFAE,EAAOE,OAAO,SAASgB,MAAK,SAACzC,GAAD,OAAOA,EAAEC,KAAKyC,SAEnC/C,GAAG6B,OAAO,gBAAgBmB,GAAG,SAAS,WAC3C,IAAMC,EAAQC,KAAKC,MAAsB,EAAhBD,KAAKE,UAM9B,OAJA9C,EAAK2C,GAAOvB,IAAMwB,KAAKC,MAAsB,GAAhBD,KAAKE,UAAiB,EAEnDjB,EAAK7B,KAAKgB,EAAIhB,IAAO+C,aAAaC,SAAS,KAAMC,UAAU,IAAK7C,GAEzD6B,EACJjC,KAAKgB,EAAIhB,IACT+C,aACAC,SAAS,KACTvB,KAAK,YAAahB,GAClBuB,KAAK,SAAS,SAAUjC,GACvB,OAAOL,GAAG6B,OAAO2B,MAAMV,KAAKzC,EAAEC,KAAKoB,eCnE7C,EAXY,SAAC,GAAD,IAAkB+B,EAAlB,EAAGC,YAAeD,SAAlB,OACV,gBAAC,IAAD,CAAMA,SAAUA,EAAUE,KAAMA,EAAMC,QAAS,CAAC,0BAC9C,4BACE,0BAAQC,UAAU,kBAAkBC,GAAG,cAAcC,KAAK,UAA1D,WAIF,uBAAKF,UAAU,YAAYC,GAAG","file":"component---src-pages-d-3-js-pie-js-0ea856a45f11ff758d9e.js","sourcesContent":["const main = () => {\n  const width = $(\"#chart\").innerWidth()\n  const height = 300\n  const outerRadius = 100\n  const color = d3.scale.category20()\n  let arc = {}\n\n  const stashArcs = (d) => {\n    d.data.ea0 = _.cloneDeep(d)\n  }\n\n  const arcTween = (ar) => {\n    const i = d3.interpolate(ar.data.ea0, ar)\n\n    ar.data.ea0 = i(0)\n\n    return (t) => arc(i(t))\n  }\n\n  const textTransform = function (d) {\n    d.outerRadius = outerRadius\n    d.innerRadius = outerRadius / 2\n\n    return `translate(${arc.centroid(d)})`\n  }\n\n  return d3.json(`${ROOT_PATH}data/d3js/pie/data.json`, (_error, data) => {\n    const pie = d3.layout\n      .pie()\n      .sort(null)\n      .value((d) => d.val)\n\n    arc = d3.svg.arc().outerRadius(outerRadius)\n\n    const svg = d3\n      .select(\"#chart\")\n      .append(\"svg:svg\")\n      .attr({\n        height,\n        width,\n      })\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 2},${height / 2})`)\n\n    const slices = svg\n      .selectAll(\".slice\")\n      .data(pie(data))\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"slice\")\n\n    const path = slices\n      .append(\"path\")\n      .attr({\n        d: arc,\n        fill(_d, i) {\n          return color(i)\n        },\n      })\n      .each(stashArcs)\n\n    const labels = slices\n      .filter((d) => d.endAngle - d.startAngle > 0.2)\n      .append(\"text\")\n      .attr({ dy: \".35em\", \"text-anchor\": \"middle\" })\n      .attr(\"transform\", textTransform)\n      .style({ fill: \"White\", font: \"bold 12px Arial\" })\n      .text((d) => d.data.val)\n\n    slices.append(\"title\").text((d) => d.data.label)\n\n    return d3.select(\"#change-data\").on(\"click\", () => {\n      const index = Math.floor(Math.random() * 5)\n\n      data[index].val = Math.floor(Math.random() * 44) + 2\n\n      path.data(pie(data)).transition().duration(1000).attrTween(\"d\", arcTween)\n\n      return labels\n        .data(pie(data))\n        .transition()\n        .duration(1000)\n        .attr(\"transform\", textTransform)\n        .each(\"start\", function (d) {\n          return d3.select(this).text(d.data.val)\n        })\n    })\n  })\n}\n\nexport default main\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/pie/pie\"\n\nconst Pie = ({ pageContext: { demoInfo } }) => (\n  <Demo demoInfo={demoInfo} main={main} scripts={[\"/vendors/d3/d3.min.js\"]}>\n    <form>\n      <button className=\"btn btn-success\" id=\"change-data\" type=\"button\">\n        Change\n      </button>\n    </form>\n    <div className=\"pie-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default Pie\n"],"sourceRoot":""}