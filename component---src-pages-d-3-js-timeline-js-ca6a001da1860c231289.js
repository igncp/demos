(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[449],{7440:function(t,e){"use strict";var a={colorsScale:function(t,e){var a=d3.scale.linear().domain(e).range([0,1]),r=d3.scale.linear().domain(d3.range(0,1,1/t.length)).range(t);return function(t){return r(a(t))}},filterBlackOpacity:function(t,e,a,r){var n=e.append("defs").append("filter").attr({height:"500%",id:"drop-shadow-"+t,width:"500%",x:"-200%",y:"-200%"});n.append("feGaussianBlur").attr({in:"SourceAlpha",stdDeviation:a}),n.append("feOffset").attr({dx:1,dy:1}),n.append("feComponentTransfer").append("feFuncA").attr({slope:r,type:"linear"});var i=n.append("feMerge");return i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")},filterColor:function(t,e,a,r,n){null==n&&(n=!1);var i=e.append("defs").append("filter").attr({id:"drop-shadow-"+t});return n&&i.attr({height:"500%",width:"500%",x:"-200%",y:"-200%"}),i.append("feOffset").attr({dx:.5,dy:.5,in:"SourceGraphic",result:"offOut"}),i.append("feGaussianBlur").attr({in:"offOut",result:"blurOut",stdDeviation:a}),i.append("feBlend").attr({in:"SourceGraphic",in2:"blurOut",mode:"normal"}),i.append("feComponentTransfer").append("feFuncA").attr({slope:r,type:"linear"})},middleTitle:function(t,e,a,r){null==r&&(r=-15),t.append("text").attr({class:"chart-title","text-anchor":"middle",transform:"translate("+String(e/2)+","+r+")"}).text(a).style({"font-weight":"bold"})},svg:function(t,e,a,r){return d3.select(t).text("").append("svg").attr({height:a+r.top+r.bottom,width:e+r.left+r.right}).append("g").attr({transform:"translate("+r.left+","+r.top+")"})},tooltip:function(t,e){null==e&&(e={});var a=_.merge({elementSelector:"",followElement:!1,followMouse:!1,leftOffst:60,tOpts:{container:"body",viewport:{selector:"#chart svg"}},topOffst:40},e);$(t).tooltip(a.tOpts),a.followMouse?$(t).hover((function(t){return $(".tooltip").css({left:String(t.pageX-a.leftOffst)+"px",top:String(t.pageY-a.topOffst)+"px"})})):a.followElement&&$(t).hover((function(){return $(".tooltip").css({left:String($(a.elementSelector).position().left-a.leftOffst)+"px",top:String($(a.elementSelector).position().top-a.topOffst)+"px"})}))}};e.Z=a},8760:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var r=a(7294),n=a(7538),i=a(7440),l=function(){d3.csv("/data/d3js/timeline/data.csv",(function(t){return function(){var t={bottom:0,left:20,right:20,top:60},e=$("#chart").innerWidth(),a=e-t.left-t.right,r=700-t.top-t.bottom,n=0,l=0,s={},o={},c=[],d={},u=i.Z.svg("#chart",e,700,t);i.Z.middleTitle(u,e,"Philosophers through History",-20),i.Z.filterBlackOpacity("intervals",u,1,.2),u.append("clipPath").attr("id","chart-area").append("rect").attr("width",a).attr("height",r),u.on("mouseup",(function(){return d3.selectAll(".interval rect").style({filter:"url(#drop-shadow-intervals)"})}));var f=u.append("g").attr("class","chart").attr("clip-path","url(#chart-area)"),p=function(t){var e=d3.time.format("%Y-%m-%d").parse(t);if(null!==e)return e;var a=null;return(a=isNaN(t)?-t.replace(/[^0-9]/g,""):+t)<0||a>99?e=new Date(a,6,1):0===a?e=new Date(-1,6,1):(e=new Date(a,6,1)).setUTCFullYear(("0000"+a).slice(-4)),e},h=function(t,e){e=e||" BC";var a=t.getUTCFullYear();return a>0?a.toString():"-"===e[0]?e+-a:-a+e};return s.data=function(t){var e=new Date,a=[];o.items=t;var r,n,i=function(t,e){var a=t.start-e.start;return a<0?-1:a>0?1:(a=e.end-t.end)<0?-1:a>0?1:0},l=function(t,e){var a=t.start-e.start;return a<0?1:a>0?-1:(a=e.end-t.end)<0?1:a>0?-1:0};return o.items.forEach((function(t){t.start=p(t.start),""===t.end?(t.end=new Date(t.start.getTime()+316224e7),t.instant=!0):(t.end=p(t.end),t.instant=!1),t.end>e&&(t.end=e)})),r=o.items,n=(n="backward")||"backward","ascending"===("descending"||"descending")?o.items.sort(i):o.items.sort(l),"forward"===n?r.forEach((function(t){for(var e=0,r=0,n=0,i=a.length;(0<=i?n<i:n>i)&&!(t.start>a[r]);r=0<=i?++n:--n)e++;t.track=e,a[e]=t.end})):r.forEach((function(t){for(var e=0,r=0,n=0,i=a.length;(0<=i?n<i:n>i)&&!(t.end<a[r]);r=0<=i?++n:--n)e++;t.track=e,a[e]=t.start})),o.nTracks=a.length,o.minDate=d3.min(o.items,(function(t){return t.start})),o.maxDate=d3.max(o.items,(function(t){return t.end})),s},s.tooltip={create:function(){return i.Z.tooltip(".part.instant, .part.interval",{followMouse:!0,leftOffst:80}),s}},s.band=function(t,e){var i={};i.id="band"+l,i.x=0,i.y=n,i.w=a,i.h=r*(e||1),i.trackOffset=0,i.trackHeight=Math.min((i.h-i.trackOffset)/o.nTracks,20),i.itemHeight=.7*i.trackHeight,i.parts=[],i.instantWidth=100,i.xScale=d3.time.scale().domain([o.minDate,o.maxDate]).range([0,i.w]),i.yScale=function(t){return i.trackOffset+t*i.trackHeight},i.yearsScale=o.maxDate.getUTCFullYear()-o.minDate.getUTCFullYear(),i.g=f.append("g").attr("id",i.id).attr("transform","translate(0,"+i.y+")"),i.g.append("rect").attr("class","band").attr("width",i.w).attr("height",i.h);var u=i.g.selectAll("g").data(o.items).enter().append("svg").attr("y",(function(t){return i.yScale(t.track)})).attr("height",i.itemHeight).attr("data-title",(function(t){return t.instant?t.label+": "+h(t.start):t.label+": "+h(t.start)+" - "+h(t.end)})).attr("class",(function(t){return t.instant?"part instant":"part interval"})),p=d3.select("#band"+l).selectAll(".interval");p.append("rect").attr({height:"80%",width:"80%",x:"1px",y:".5px"}).style({filter:"url(#drop-shadow-intervals)"}),p.append("text").attr("class","intervalLabel").attr("x",3).attr("y",9.5);var g=d3.select("#band"+l).selectAll(".instant");return g.append("circle").attr("cx",i.itemHeight/2).attr("cy",i.itemHeight/2).attr("r",5),g.append("text").attr("class","instantLabel").attr("x",15).attr("y",10),i.addActions=function(t){return t.forEach((function(t){return u.on(t[0],t[1])}))},i.redraw=function(){return u.attr("x",(function(t){return i.xScale(t.start)})).attr("width",(function(t){return i.xScale(t.end)-i.xScale(t.start)})).select("text").text((function(t){var e=(i.xScale(t.end)-i.xScale(t.start))/9;return t.label.length>e?t.label.substr(0,e-1)+"..":t.label})),i.parts.forEach((function(t){return t.redraw()}))},d[t]=i,c.push(i),n+=i.h+25,l+=1,s},s.labels=function(t){var e=d[t],a=e.y+e.h-10,r=[["start","bandMinMaxLabel",0,4,function(t){return h(t)},"Start of the selected interval",e.x+30,a],["end","bandMinMaxLabel",e.w-46,e.w-4,function(t,e){return h(e)},"End of the selected interval",e.x+e.w-152,a],["middle","bandMidLabel",(e.w-46)/2,e.w/2,function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},"Length of the selected interval",e.x+e.w/2-75,a]],n=f.append("g").attr("id",t+"Labels").attr("transform","translate(0,"+(e.y+e.h+1)+")").selectAll("#"+t+"Labels").data(r).enter().append("g");n.append("rect").attr("class","bandLabel").attr("x",(function(t){return t[2]})).attr("width",46).attr("height",20).style("opacity",1);var i=n.append("text").attr("class",(function(t){return t[1]})).attr("id",(function(t){return t[0]})).attr("x",(function(t){return t[3]})).attr("y",15).attr("text-anchor",(function(t){return t[0]}));return i.redraw=function(){var t=e.xScale.domain()[0],a=e.xScale.domain()[1];return i.text((function(e){return e[4](t,a)}))},e.parts.push(i),c.push(i),s},s.xAxis=function(t,e){var a=d[t],r=d3.svg.axis().scale(a.xScale).orient(e||"bottom").tickSize(6,0).tickFormat((function(t){return h(t)})),n=f.append("g").attr("class","axis").attr("transform","translate(0,"+(a.y+a.h)+")");return n.redraw=function(){return n.call(r)},a.parts.push(n),c.push(n),s},s.brush=function(t,e){var a=d[t],r=d3.svg.brush().x(a.xScale.range([0,a.w]));return r.on("brush",(function(){var t=r.empty()?a.xScale.domain():r.extent();d3.selectAll(".interval rect").style({filter:"none"}),e.forEach((function(e){d[e].xScale.domain(t),d[e].redraw()}))})),a.g.append("svg").attr("class","x brush").call(r).selectAll("rect").attr("y",1).attr("height",a.h-1),s},s.redraw=function(){return c.forEach((function(t){return t.redraw()}))},s}().data(t).band("mainBand",.82).band("naviBand",.08).xAxis("mainBand").xAxis("naviBand").labels("mainBand").labels("naviBand").brush("naviBand",["mainBand"]).tooltip.create().redraw()}))},s=function(t){var e=t.pageContext.demoInfo;return r.createElement(n.Z,{demoInfo:e,main:l,scripts:["/vendors/d3/d3.min.js","/js/d3js-utils.js"]},r.createElement("div",{className:"timeline-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-timeline-js-ca6a001da1860c231289.js.map