(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[540],{4848:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return x}});var a=r(7294),n=r(2247),i=r(2137),l=r(7757),o=r.n(l),s=r(2453),c=r(2492),d=r.n(c),u={colorsScale:function(t,e){var r=d3.scale.linear().domain(e).range([0,1]),a=d3.scale.linear().domain(d3.range(0,1,1/t.length)).range(t);return function(t){return a(r(t))}},filterBlackOpacity:function(t,e,r,a){var n=e.append("defs").append("filter").attr({height:"500%",id:"drop-shadow-"+t,width:"500%",x:"-200%",y:"-200%"});n.append("feGaussianBlur").attr({in:"SourceAlpha",stdDeviation:r}),n.append("feOffset").attr({dx:1,dy:1}),n.append("feComponentTransfer").append("feFuncA").attr({slope:a,type:"linear"});var i=n.append("feMerge");return i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")},filterColor:function(t,e,r,a,n){null==n&&(n=!1);var i=e.append("defs").append("filter").attr({id:"drop-shadow-"+t});return n&&i.attr({height:"500%",width:"500%",x:"-200%",y:"-200%"}),i.append("feOffset").attr({dx:.5,dy:.5,in:"SourceGraphic",result:"offOut"}),i.append("feGaussianBlur").attr({in:"offOut",result:"blurOut",stdDeviation:r}),i.append("feBlend").attr({in:"SourceGraphic",in2:"blurOut",mode:"normal"}),i.append("feComponentTransfer").append("feFuncA").attr({slope:a,type:"linear"})},middleTitle:function(t,e,r,a){null==a&&(a=-15),t.append("text").attr({class:"chart-title","text-anchor":"middle",transform:"translate("+String(e/2)+","+a+")"}).text(r).style("font-weight","bold")},svg:function(t,e,r,a){return d3.select(t).text("").append("svg").attr({height:r+a.top+a.bottom,width:e+a.left+a.right}).append("g").attr({transform:"translate("+a.left+","+a.top+")"})},tooltip:function(t,e){null==e&&(e={});var r=d()({elementSelector:"",followElement:!1,followMouse:!1,leftOffst:60,tOpts:{container:"body",viewport:{selector:"#chart svg"}},topOffst:40},e);$(t).tooltip(r.tOpts),r.followMouse?$(t).hover((function(t){return $(".tooltip").css({left:String(t.pageX-r.leftOffst)+"px",top:String(t.pageY-r.topOffst)+"px"})})):r.followElement&&$(t).hover((function(){return $(".tooltip").css({left:String($(r.elementSelector).position().left-r.leftOffst)+"px",top:String($(r.elementSelector).position().top-r.topOffst)+"px"})}))}},f={bottom:0,left:20,right:20,top:60},p=700-f.top-f.bottom,h=function(t){var e=d3.time.format("%Y-%m-%d").parse(t);if(null!==e)return e;var r=isNaN(t)?-t.replace(/[^0-9]/g,""):+t;return r<0||r>99?e=new Date(r,6,1):0===r?e=new Date(-1,6,1):(e=new Date(r,6,1)).setUTCFullYear(("0000"+r).slice(-4)),e},g=function(t,e){e=e||" BC";var r=t.getUTCFullYear();return r>0?r.toString():(e[0],e-r)},m=function(t){var e=t.dataset;(function(t){var e=t.rootElId,r=document.getElementById(e);r.classList.add("timeline-chart");var a=r.getBoundingClientRect().width,n=a-f.left-f.right,i=0,l=0,o={},c={},d=[],m={},v=u.svg("#"+e,a,700,f);u.middleTitle(v,a,"Philosophers through History",-20),u.filterBlackOpacity("intervals",v,1,.2),v.append("clipPath").attr("id","chart-area").append("rect").attr("width",n).attr("height",p),v.on("mouseup",(function(){return d3.selectAll(".interval rect").style("filter","url(#drop-shadow-intervals)")}));var x=v.append("g").attr("class","chart").attr("clip-path","url(#chart-area)");return o.data=function(t){var e=new Date,r=[];c.items=t;var a,n,i=function(t,e){var r=t.start-e.start;return r<0?-1:r>0?1:(r=e.end-t.end)<0?-1:r>0?1:0},l=function(t,e){var r=t.start-e.start;return r<0?1:r>0?-1:(r=e.end-t.end)<0?1:r>0?-1:0};return c.items.forEach((function(t){t.start=h(t.start),""===t.end?(t.end=new Date(t.start.getTime()+316224e7),t.instant=!0):(t.end=h(t.end),t.instant=!1),t.end>e&&(t.end=e)})),a=c.items,n=(n="backward")||"backward","ascending"===("descending"||"descending")?c.items.sort(i):c.items.sort(l),"forward"===n?a.forEach((function(t){for(var e=0,a=0,n=0,i=r.length;(0<=i?n<i:n>i)&&!(t.start>r[a]);a=0<=i?++n:--n)e++;t.track=e,r[e]=t.end})):a.forEach((function(t){for(var e=0,a=0,n=0,i=r.length;(0<=i?n<i:n>i)&&!(t.end<r[a]);a=0<=i?++n:--n)e++;t.track=e,r[e]=t.start})),c.nTracks=r.length,c.minDate=s.VV$(c.items,(function(t){return t.start})),c.maxDate=s.Fp7(c.items,(function(t){return t.end})),o},o.tooltip={create:function(){return u.tooltip(".part.instant, .part.interval",{followMouse:!0,leftOffst:80}),o}},o.band=function(t,e){var r={};r.id="band"+l,r.x=0,r.y=i,r.w=n,r.h=p*(e||1),r.trackOffset=0,r.trackHeight=Math.min((r.h-r.trackOffset)/c.nTracks,20),r.itemHeight=.7*r.trackHeight,r.parts=[],r.instantWidth=100,r.xScale=d3.time.scale().domain([c.minDate,c.maxDate]).range([0,r.w]),r.yScale=function(t){return r.trackOffset+t*r.trackHeight},r.yearsScale=c.maxDate.getUTCFullYear()-c.minDate.getUTCFullYear(),r.g=x.append("g").attr("id",r.id).attr("transform","translate(0,"+r.y+")"),r.g.append("rect").attr("class","band").attr("width",r.w).attr("height",r.h);var a=r.g.selectAll("g").data(c.items).enter().append("svg").attr("y",(function(t){return r.yScale(t.track)})).attr("height",r.itemHeight).attr("data-title",(function(t){return t.instant?t.label+": "+g(t.start):t.label+": "+g(t.start)+" - "+g(t.end)})).attr("class",(function(t){return t.instant?"part instant":"part interval"})),s=d3.select("#band"+l).selectAll(".interval");s.append("rect").attr("height","80%").attr("width","80%").attr("x","1px").attr("y",".5px").style("filter","url(#drop-shadow-intervals)"),s.append("text").attr("class","intervalLabel").attr("x",3).attr("y",9.5);var u=d3.select("#band"+l).selectAll(".instant");return u.append("circle").attr("cx",r.itemHeight/2).attr("cy",r.itemHeight/2).attr("r",5),u.append("text").attr("class","instantLabel").attr("x",15).attr("y",10),r.addActions=function(t){return t.forEach((function(t){return a.on(t[0],t[1])}))},r.redraw=function(){return a.attr("x",(function(t){return r.xScale(t.start)})).attr("width",(function(t){return r.xScale(t.end)-r.xScale(t.start)})).select("text").text((function(t){var e=(r.xScale(t.end)-r.xScale(t.start))/9;return t.label.length>e?t.label.substr(0,e-1)+"..":t.label})),r.parts.forEach((function(t){return t.redraw()}))},m[t]=r,d.push(r),i+=r.h+25,l+=1,o},o.labels=function(t){var e=m[t],r=e.y+e.h-10,a=[["start","bandMinMaxLabel",0,4,function(t){return g(t)},"Start of the selected interval",e.x+30,r],["end","bandMinMaxLabel",e.w-46,e.w-4,function(t,e){return g(e)},"End of the selected interval",e.x+e.w-152,r],["middle","bandMidLabel",(e.w-46)/2,e.w/2,function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},"Length of the selected interval",e.x+e.w/2-75,r]],n=x.append("g").attr("id",t+"Labels").attr("transform","translate(0,"+(e.y+e.h+1)+")").selectAll("#"+t+"Labels").data(a).enter().append("g");n.append("rect").attr("class","bandLabel").attr("x",(function(t){return t[2]})).attr("width",46).attr("height",20).style("opacity",1);var i=n.append("text").attr("class",(function(t){return t[1]})).attr("id",(function(t){return t[0]})).attr("x",(function(t){return t[3]})).attr("y",15).attr("text-anchor",(function(t){return t[0]}));return i.redraw=function(){var t=e.xScale.domain()[0],r=e.xScale.domain()[1];return i.text((function(e){return e[4](t,r)}))},e.parts.push(i),d.push(i),o},o.xAxis=function(t,e){var r=m[t],a=d3.svg.axis().scale(r.xScale).orient(e||"bottom").tickSize(6,0).tickFormat((function(t){return g(t)})),n=x.append("g").attr("class","axis").attr("transform","translate(0,"+(r.y+r.h)+")");return n.redraw=function(){return n.call(a)},r.parts.push(n),d.push(n),o},o.brush=function(t,e){var r=m[t],a=d3.svg.brush().x(r.xScale.range([0,r.w]));return a.on("brush",(function(){var t=a.empty()?r.xScale.domain():a.extent();d3.selectAll(".interval rect").style("filter","none"),e.forEach((function(e){m[e].xScale.domain(t),m[e].redraw()}))})),r.g.append("svg").attr("class","x brush").call(a).selectAll("rect").attr("y",1).attr("height",r.h-1),o},o.redraw=function(){return d.forEach((function(t){return t.redraw()}))},o})({rootElId:t.rootElId}).data(e).band("mainBand",.82).band("naviBand",.08).xAxis("mainBand").xAxis("naviBand").labels("mainBand").labels("naviBand").brush("naviBand",["mainBand"]).tooltip.create().redraw()},v=function(){var t=(0,i.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){d3.csv("/demos/data/d3js/timeline/data.csv",(function(e){return t(e)}))}));case 2:e=t.sent,m({dataset:e,rootElId:"chart"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(t){var e=t.pageContext.demoInfo;return a.createElement(n.Z,{demoInfo:e,main:v,scripts:["/vendors/d3/d3.min.js"]},a.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-timeline-tsx-66c72276a577619f77ee.js.map