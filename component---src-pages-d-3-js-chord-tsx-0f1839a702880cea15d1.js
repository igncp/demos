(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[923],{2137:function(t,r,e){"use strict";function n(t,r,e,n,a,i,o){try{var d=t[i](o),u=d.value}catch(s){return void e(s)}d.done?r(u):Promise.resolve(u).then(n,a)}function a(t){return function(){var r=this,e=arguments;return new Promise((function(a,i){var o=t.apply(r,e);function d(t){n(o,a,i,d,u,"next",t)}function u(t){n(o,a,i,d,u,"throw",t)}d(void 0)}))}}e.d(r,{Z:function(){return a}})},1412:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return w}});var n=e(7294),a=e(4275),i=e(2137),o=e(7757),d=e.n(o),u=e(7723),s="chord-module--chord--1Zjd0",c="chord-module--group--309FH",l="chord-module--headingTitle--A2lxW",f=function(){var t=(0,i.Z)(d().mark((function t(){var r,e,n,a,i,o,s,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.gyn)("/demos/data/d3js/chord/data.csv");case 2:return r=t.sent,e=[],n={},a=[],i=[],o=0,s=function(t){return t in n||(n[t]={id:o,name:t},o+=1),n[t]},c=r.map((function(t){return Object.assign({},t,{creditor:s(t.creditor),debtor:Object.assign({},s(t.debtor),{risk:t.risk})})})),Array.from({length:o}).forEach((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];a[n]=[],i[n]=[],Array.from({length:o}).forEach((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var o=r[1];a[n][o]=null,i[n][o]=null}))})),c.forEach((function(t){a[t.creditor.id][t.debtor.id]=t,i[t.debtor.id][t.creditor.id]=t,e[t.creditor.id]=t.creditor,e[t.debtor.id]=t.debtor})),t.abrupt("return",{credits:i,debits:a,fullList:e});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(t){var r=t.charts,e=t.deviation,n=t.name,a=t.slope,i=r.append("defs").append("filter").attr("id","drop-shadow-"+n);i.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),i.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",e),i.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),i.append("feComponentTransfer").append("feFuncA").attr("slope",a).attr("type","linear")},h=["#39B347","#C92E47","#DB704D","#FFA22C","#5E92AA","#F8EDD3"],v=20,g=50,m=500,x=function(t){var r=t.financialData,e=t.rootElId,n=document.getElementById(e);n.classList.add("chord-module--chordChart--lzAYO");var a=n.getBoundingClientRect().width/2-20,i=Math.min(a,m)/2-4,o=i-20,d=(0,u.WUZ)(",.3r"),f=(0,u.Nb1)().innerRadius(o).outerRadius(i),x=(0,u.Ys)("#"+e),y=r.credits,w=r.debits,b=r.fullList,A=x.selectAll("div").data([w,y]).enter().append("div").style("display","inline-block").style("width",a+"px").style("height",m+g+v+"px").append("svg:svg").attr("width",a).attr("height",m+g+v).append("svg:g").attr("transform","translate("+a/2+","+(250+g)+")"),k=A.filter((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];return 0===n})),C=A.filter((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];return 1===n})),B=function(t){var r=t.chart,e=t.label;return r.append("text").text(e).attr("transform","translate(0,-260)").attr("class","chord-module--chartTitle--33urD").attr("text-anchor","middle")};B({chart:k,label:"Debits"}),B({chart:C,label:"Credits"}),p({charts:A,deviation:2,name:"chords",slope:.4}),p({charts:A,deviation:3,name:"headings",slope:.5});var E=(0,u.BYU)().domain((0,u.Wem)([0,b.length-1])).range([0,1]),D=(0,u.BYU)().domain((0,u.w6H)(0,1,1/h.length)).range(h),O=function(t){return D(E(t))};A.each((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[0],a=r[1],i=(0,u.Ys)(this),p=n.map((function(t){return t.map((function(t){return t?+t.amount:0}))})),h=(0,u.fFo)().sortGroups(u.$1i).sortSubgroups(u.$1i).sortChords(u.$1i)(p),v=(0,u.N22)().radius(o);i.selectAll("path."+s).data(h).enter().append("svg:path").attr("class",s).style("fill",(function(t){return O(t.target.index)})).style("filter","url(#drop-shadow-chords)").style("stroke",(function(t){var r=O(t.target.index);return(0,u.B8C)(r).darker().formatHex()})).style("stroke-width",2).attr("d",v).append("svg:title").text((function(t){var r=b[t.source.index],e=b[t.target.index];return r.name+" owes "+e.name+" $"+d(t.source.value)+"B."}));var g=i.selectAll("g."+c).data(h.groups).enter().append("svg:g").attr("class",c);g.append("svg:path").style("fill",(function(t){return O(t.index)})).attr("id",(function(t){return"group"+t.index+"-"+a})).attr("d",f).style("filter",(function(){return"url(#drop-shadow-headings)"})).append("svg:title").text((function(t){return b[t.index].name+" "+(a?"owes":"is owed")+" $"+d(t.value)+"B."})),g.append("svg:text").attr("x",6).attr("dy",15).filter((function(t){return t.value>150})).append("svg:textPath").attr("xlink:href",(function(t){return"#group"+t.index+"-"+a})).text((function(t){return b[t.index].name})).attr("class",l)}))},y=function(){var t=(0,i.Z)(d().mark((function t(){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:r=t.sent,x({financialData:r,rootElId:"chart"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(t){var r=t.pageContext;return n.createElement(a.Z,{main:y,pageContext:r},n.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-chord-tsx-0f1839a702880cea15d1.js.map