(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[32],{2998:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return i}});var n=r(7294),a=r(7538),d=function(){var t=500,e=$("#chart").innerWidth()/2-20,r=20,n=50,a=Math.min(e,t)/2-4,d=a-20,i=d3.format(",.3r"),o=[],s=[],u=d3.svg.arc().innerRadius(d).outerRadius(a),c=d3.svg.chord().radius(d),l=d3.select("#chart").selectAll("div").data([o,s]).enter().append("div").style("display","inline-block").style("width",e+"px").style("height",t+n+r+"px").append("svg:svg").attr("width",e).attr("height",t+n+r).append("svg:g").attr("transform","translate("+e/2+","+String(250+n)+")"),p=l.filter((function(t,e){return 0===e})),f=l.filter((function(t,e){return 1===e})),h=function(t,e){return t.append("text").text(e).attr("transform","translate(0,-260)").attr("class","chart-title").attr("text-anchor","middle")};h(p,"Debits"),h(f,"Credits"),d3.csv("/data/d3js/chord/data.csv",(function(t){var e={},r=[],n=0,a=function(t){return e[t]||(e[t]={id:n++,name:t}),e[t]},d=function(){return+this.amount};t.forEach((function(t){t.creditor=a(t.creditor),t.debtor=a(t.debtor),t.debtor.risk=t.risk,t.valueOf=d}));for(var p=0,f=0;0<=n?f<n:f>n;p=0<=n?++f:--f){o[p]=[],s[p]=[];for(var h=0,g=0;0<=n?g<n:g>n;h=0<=n?++g:--g)o[p][h]=0,s[p][h]=0}t.forEach((function(t){o[t.creditor.id][t.debtor.id]=t,s[t.debtor.id][t.creditor.id]=t,r[t.creditor.id]=t.creditor,r[t.debtor.id]=t.debtor}));var v=d3.layout.chord().sortGroups(d3.descending).sortSubgroups(d3.descending).sortChords(d3.descending).padding(.04),m=function(t,e,r){var n=l.append("defs").append("filter").attr("id","drop-shadow-"+t);n.append("feOffset").attr({dx:.5,dy:.5,in:"SourceGraphic",result:"offOut"}),n.append("feGaussianBlur").attr({in:"offOut",result:"blurOut",stdDeviation:e}),n.append("feBlend").attr({in:"SourceGraphic",in2:"blurOut",mode:"normal"}),n.append("feComponentTransfer").append("feFuncA").attr({slope:r,type:"linear"})};m("chords",2,.4),m("headings",3,.5);var x=["#39B347","#C92E47","#DB704D","#FFA22C","#5E92AA","#F8EDD3"],b=d3.scale.linear().domain(d3.extent([0,n-1])).range([0,1]),y=d3.scale.linear().domain(d3.range(0,1,1/x.length)).range(x),k=function(t){return y(b(t))};return l.each((function(t,e){var n=d3.select(this);v.matrix(t),n.selectAll("path.chord").data(v.chords).enter().append("svg:path").attr("class","chord").style("fill",(function(t){return k(t.target.index)})).style("filter","url(#drop-shadow-chords)").style("stroke",(function(t){return d3.rgb(k(t.target.index)).darker()})).style("stroke-width",2).attr("d",c).append("svg:title").text((function(t){return t.source.value.debtor.name+" owes "+t.source.value.creditor.name+" $"+i(t.source.value)+"B."}));var a=n.selectAll("g.group").data(v.groups).enter().append("svg:g").attr("class","group");a.append("svg:path").style("fill",(function(t){return k(t.index)})).attr("id",(function(t){return"group"+t.index+"-"+e})).attr("d",u).style("filter",(function(){return"url(#drop-shadow-headings)"})).append("svg:title").text((function(t){return r[t.index].name+" "+(e?"owes":"is owed")+" $"+i(t.value)+"B."})),a.append("svg:text").attr("x",6).attr("dy",15).filter((function(t){return t.value>150})).append("svg:textPath").attr("xlink:href",(function(t){return"#group"+t.index+"-"+e})).text((function(t){return r[t.index].name})).attr("class","heading-title")}))}))},i=function(t){var e=t.pageContext.demoInfo;return n.createElement(a.Z,{demoInfo:e,main:d,scripts:["/vendors/d3/d3.min.js"]},n.createElement("div",{className:"chord-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-chord-js-0d050d1bbc4fb794c5bd.js.map