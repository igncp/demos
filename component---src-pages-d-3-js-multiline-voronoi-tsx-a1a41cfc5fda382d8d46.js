(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[305],{4275:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7294),a=n(5414),l=n(2552),o=function(e){var t=e.isCompleted,n=e.mainSource,a=e.name;return r.createElement("h2",{className:"row",id:l.dc},r.createElement("span",{className:"col-xs-12 col-sm-10 p-0"},r.createElement("span",{className:l.jS},a," Chart "),r.createElement("small",{id:l.l4,title:"Main Source"},r.createElement("a",{href:n},"···")),!t&&r.createElement("small",{id:l.oT,title:"This demo is still work in progress"},"WIP")),r.createElement("span",{className:"col-sm-2 p-0 d-xs-none "+l.eR},r.createElement("a",{className:"btn btn-info",href:"/demos/",role:"button"},r.createElement("span",{className:"glyphicon glyphicon-home"})," Home")))},i=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://github.com/igncp/demos/blob/main/"+t,rel:"noreferrer",target:"_blank"},"Code in Github"))},s=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://igncp.github.io/demos/coverage-ts/files/"+t+".html",rel:"noreferrer",target:"_blank"},"TypeScript coverage report"))},c=function(e){var t=e.demoInfo;if("undefined"==typeof window)return null;var n="pages/"+t.category+"/"+t.key+"."+t.files.page.type;return r.createElement("div",null,!!t.notes.length&&r.createElement("div",{className:"bs-callout bs-callout-info"+l.$c},r.createElement("p",null,r.createElement("strong",null,"Notes:")),r.createElement("ul",null,t.notes.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],l=t[1];return r.createElement("li",{dangerouslySetInnerHTML:{__html:a},key:l})})))),!!t.summary.length&&r.createElement("div",{className:"bs-callout bs-callout-summary "+l.$c},r.createElement("p",null,r.createElement("strong",null,"Implementation Summary:")),r.createElement("ul",null,t.summary.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],l=t[1];return r.createElement("p",{dangerouslySetInnerHTML:{__html:a},key:l})})))),r.createElement("div",{className:"bs-callout bs-callout-primary",id:l.V2},r.createElement("p",null,r.createElement("strong",null,"Sources:")),r.createElement("ul",null,t.sources.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1];return r.createElement("li",{key:o},r.createElement("span",{className:l.hB},"[",o+1,"]"),":"," ",r.createElement("a",{href:a},a))})))),!!t.docs.length&&r.createElement("div",{className:"bs-callout bs-callout-secondary",id:"docs"},r.createElement("p",null,r.createElement("strong",null,"Docs:")),r.createElement("ul",null,t.docs.map((function(e){return r.createElement("li",{key:e[1],style:{border:"1px solid #157ad4",borderRadius:5,display:"inline-block",margin:5,padding:5}},r.createElement("a",{href:e[1],rel:"noreferrer",target:"_blank"},e[0]))})))),!!t.dataFiles.length&&r.createElement("div",{className:"bs-callout bs-callout-warning",id:l.sD},r.createElement("p",null,r.createElement("strong",null,"Data files: "),t.dataFiles.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var l=n[0],o=n[1];return r.createElement("a",{href:"/demos/data/"+t.category+"/"+t.key+"/"+l,key:o},l)})))),r.createElement("div",{className:"bs-callout bs-callout-success",id:"code"},r.createElement("p",null,r.createElement("strong",null,"Code:")),r.createElement("ul",null,t.files.demoTS.map((function(e){var t=e.content,n=e.filePath;return r.createElement("li",{key:n},r.createElement("p",null,r.createElement("span",{className:l.s2},n)," ",r.createElement(r.Fragment,null,r.createElement(i,{filePath:n})," ",r.createElement(s,{filePath:n}))),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t}})))})),r.createElement("li",null,r.createElement("p",null,r.createElement("span",{className:l.s2},n)," ",r.createElement(i,{filePath:n})," ",r.createElement(s,{filePath:n})),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t.files.page.content}}))),t.files.demoCSS.map((function(e){var t=e.content,n=e.filePath;return r.createElement("li",{key:n},r.createElement("p",null,r.createElement("span",{className:l.s2},n)," ",r.createElement(i,{filePath:n})),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t}})))})))))},u=n(2504),m=function(e){return"/"===e[0]?"/demos/"+e.replace(/^\//,""):e},d=function(e){var t=e.main,n=e.children,l=e.scripts,i=void 0===l?[]:l,s=e.links,d=void 0===s?[]:s,f=e.pageContext,p=f.demoInfo,h=f.meta,g=p.isCompleted,v=p.name,y=p.sources;return(0,r.useEffect)((function(){"undefined"!=typeof window&&t().catch((function(e){console.error("error:",e)}))}),[]),r.createElement(u.Z,null,r.createElement(a.q,{link:d.map((function(e){return{href:m(e),rel:"stylesheet",type:"text/css"}})),meta:[{content:h.description,name:"description"}],script:i.map((function(e){return{src:m(e),type:"text/javascript"}})),title:p.name+" | Demos igncp"}),r.createElement(o,{isCompleted:g,mainSource:y[0],name:v}),n,r.createElement(c,{demoInfo:p}))}},2504:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),a=n(2552),l=function(){return r.createElement("footer",{className:a.Mv},r.createElement("p",null,(new Date).getFullYear()))},o=function(){return r.createElement("div",{className:a.H6},r.createElement("h1",{className:"row"},r.createElement("span",{className:"col-3 col-md-8 p-0"},r.createElement("a",{href:"/demos/"},"Demos")," ",r.createElement("small",{className:"hide-tablet"},"interactive data visualization examples")),r.createElement("span",{className:"col-9 col-md-4 p-0",id:a.ak},r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=follow",width:"119"}),r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=fork",width:"62"}),r.createElement("iframe",{frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=watch",width:"52"}))))},i=function(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement("div",{className:a.Mg},r.createElement("div",{className:"px-3 px-sm-5"},r.createElement(o,null),t)),r.createElement(l,null))}},1975:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(7294),a=n(4275),l=n(8634),o=n(2656),i=n.n(o),s=n(5221),c=n(2149),u="multiline-voronoi-module--axis--73b38",m="multiline-voronoi-module--lineHover--07a40",d="multiline-voronoi-module--formVoronoi--b33e2",f=300,p=function(){function e(e){var t=this;this.handleResize=function(){t.render()},this.config=e;var n=(0,s.Ys)("#"+this.config.rootElId).append("svg"),r=n.append("g"),a=r.append("g").attr("class",u+" axis--x"),l=r.append("g").attr("class",u+" axis--y");r.append("text").attr("x",20).attr("dy",".32em").style("font-weight","bold").text(this.config.chartTitle),function(e){var t=e.append("defs").append("filter").attr("id","drop-shadow");t.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",1),t.append("feOffset").attr("dx",1).attr("dy",1),t.append("feComponentTransfer").append("feFuncA").attr("slope","1").attr("type","linear");var n=t.append("feMerge");n.append("feMergeNode"),n.append("feMergeNode").attr("in","SourceGraphic")}(r);var o=r.append("g").attr("class","multiline-voronoi-module--lines--3e92b"),i=r.append("circle").attr("r",3.5),c=r.append("g").attr("class","multiline-voronoi-module--voronoi--c0339"),m=function(e){var t=e.append("g").attr("class","multiline-voronoi-module--tooltip--f507c").attr("transform","translate(-100,-100)");return t.append("rect").attr("transform","translate(-150,-50)").attr("fill","white").attr("height",50).attr("width",f).attr("rx",5).attr("ry",5).style("filter","url(#drop-shadow)").style("opacity","0.65").style("pointer-events","none").style("cursor","default"),t.append("text").attr("class","text1").attr("y",-30),t.append("text").attr("class","text2").attr("y",-10),t}(r);this.elements={circle:i,linesWrapper:o,svg:n,svgG:r,tooltip:m,voronoiGroup:c,xAxis:a,yAxis:l},this.state={clickToggle:!1,usedLines:this.config.lines},this.render(),window.addEventListener("resize",this.handleResize)}e.getMargin=function(e){var t={bottom:70,left:80,right:70,top:60};return e<530?Object.assign({},t,{left:35,right:5}):t};var t=e.prototype;return t.setVoronoi=function(e){this.elements.voronoiGroup.classed("multiline-voronoi-module--voronoiShow--cb86f",e)},t.render=function(){var t=this,n=this.config,r=n.lines,a=n.rootElId,l=n.times,o=this.elements,i=(0,s.PKp)(s.i4X),u=document.getElementById(a);u.classList.add("multiline-voronoi-module--multilineVoronoiChart--706ac");var d=u.getBoundingClientRect().width,f=e.getMargin(d),p=u.getBoundingClientRect().width-f.left-f.right,h=p<530,g=500-f.top-f.bottom,v=(0,s.Xf)().range([0,p]),y=(0,s.BYU)().range([g,0]),E=function(e){return v(t.config.getPointXValue(e))},b=function(e){return y(t.config.getPointYValue(e))},w={};o.svg.attr("width",p+f.left+f.right).attr("height",g+f.top+f.bottom),o.svgG.attr("transform","translate("+f.left+","+f.top+")"),v.domain((0,s.Wem)(l)),y.domain([0,(0,s.Fp7)(r,(function(e){return(0,s.Fp7)(t.config.getLinePoints(e),t.config.getPointYValue)}))]).nice(),o.xAxis.attr("transform","translate(0,"+g+")").call((0,s.LLu)(v).ticks(h?2:void 0)),o.yAxis.call((0,s.y4O)(y).ticks(10,"%"));var x=(0,s.jvg)().x(E).y(b),k=this.config,N=this.state.usedLines,P=o.linesWrapper.selectAll("path").data(N);P.enter().append("path").style("filter","url(#drop-shadow)"),P.exit().remove(),o.linesWrapper.selectAll("path").attr("d",(function(e){var t=k.getLineId(e);w[t]=this;var n=k.getLinePoints(e);return x(n)})).style("stroke",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return i(r.toString())}));var L=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var l=n[1];t.state.clickToggle=!t.state.clickToggle,t.state.usedLines=t.state.clickToggle?[r.find((function(e){return k.getLineId(e)===k.getLineIdFromPoint(l)}))]:r,o.tooltip.on("mouseover",null).on("click",null),t.render()},S=N.reduce((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],l=k.getLinePoints(a);return l.forEach((function(e){r.push(e)})),r}),[]),I=c.Z.from(S,E,b).voronoi([-f.left,-f.top,p+f.right,g+f.bottom]),T=this.elements.voronoiGroup.selectAll("path").data(S,(function(e){return k.getLineIdFromPoint(e)+"-"+k.getPointXValue(e)}));T.enter().append("path"),T.exit().remove(),this.elements.voronoiGroup.selectAll("path").attr("d",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return I.renderCell(r)})).on("mouseover",(function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[1],l=k.getLineIdFromPoint(a),i=w[l];(0,s.Ys)(i).classed(m,!0),i.parentNode.appendChild(i);var c=E(a),u=b(a),d=Math.min(p-150,Math.max(150,c)),f=u;o.tooltip.attr("transform","translate("+d+","+f+")").on("mouseover",(function(){e(null,a)})).on("click",(function(){L(null,a)})),o.circle.attr("transform","translate("+c+","+u+")"),o.tooltip.select(".text1").text(k.getTooltipPart1(a)),o.tooltip.select(".text2").text(k.getTooltipPart2(a))})).on("mouseout",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1],a=k.getLineIdFromPoint(r),l=w[a];return(0,s.Ys)(l).classed(m,!1),o.tooltip.attr("transform","translate(-100,-100)")})).on("click",L)},e}(),h="chart",g="show-voronoi",v=["January","February","March","April","May","June","July","August","September","October","November","December"],y="%Y-%m",E=function(){var e=(0,l.Z)(i().mark((function e(){var t,n,r,a,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.i$Z)(y),n=(0,s.Z1g)(y),e.next=4,(0,s.pvA)("/demos/data/d3js/multiline-voronoi/data.tsv");case 4:return r=e.sent,a=Object.keys(r[0]).map((function(e){return n(e)})).filter(Number),l=r.map((function(e){var n=e.name.replace(/(msa|necta div|met necta|met div)$/i,"").trim();return{metrics:a.map((function(r){var a=t(r),l=e[a],o=Number(l)/100;return{cityName:n,date:r,employmentRate:o}})),name:n}})),e.abrupt("return",{cities:l,months:a});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){return e.name},w=function(e){return e.metrics},x=function(e){return e.employmentRate},k=function(e){return e.cityName.trim()+": "},N=function(e){var t=v[e.date.getMonth()]+" of "+e.date.getFullYear();return" "+(100*e.employmentRate).toFixed(2)+"% - "+t},P=function(e){return e.cityName},L=function(e){return e.date},S=function(e){var t=e.cities,n=e.months;return{chartTitle:"US Unemployment Rate",getLineId:b,getLineIdFromPoint:P,getLinePoints:w,getPointXValue:L,getPointYValue:x,getTooltipPart1:k,getTooltipPart2:N,lines:t,rootElId:h,times:n}},I=function(){var e=(0,l.Z)(i().mark((function e(){var t,n,r,a,l,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,n=t.cities,r=t.months,a=S({cities:n,months:r}),l=new p(a),o=document.getElementById(d),document.getElementById(h).appendChild(o),(0,s.Ys)("#show-voronoi").property("disabled",!1).on("change",(function(e){l.setVoronoi(e.target.checked||!1)}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=I,A=function(e){var t=e.pageContext;return r.createElement(a.Z,{main:T,pageContext:t},r.createElement("form",{id:d},r.createElement("input",{id:g,type:"checkbox"})," ",r.createElement("label",{htmlFor:g},"Show Voronoi lines")),r.createElement("div",{id:h}))}},2656:function(e,t,n){e.exports=n(3076)},2552:function(e,t,n){"use strict";n.d(t,{eR:function(){return r},rT:function(){return a},UG:function(){return l},ZV:function(){return o},Bf:function(){return i},K7:function(){return s},jS:function(){return c},s2:function(){return u},Mv:function(){return m},eQ:function(){return d},Be:function(){return f},$c:function(){return p},Mg:function(){return h},hB:function(){return g},H6:function(){return v},YX:function(){return y},zG:function(){return E},Vj:function(){return b},pn:function(){return w},x:function(){return x},oT:function(){return k},dc:function(){return N},l4:function(){return P},sD:function(){return L},V2:function(){return S},ak:function(){return I}});var r="styles-module--backHome--b9e05",a="styles-module--bullet--337e0",l="styles-module--d3js--ff3aa",o="styles-module--raphael--40af0",i="styles-module--storybook--f1bcc",s="styles-module--testing--9f8b3",c="styles-module--demoName--4057d",u="styles-module--fileNameWrapper--e0bd4",m="styles-module--footer--a0f96",d="styles-module--homeDemoNumber--755fe",f="styles-module--homeDemoNameLink--4b57a",p="styles-module--notes--e1c07",h="styles-module--rootLayout--03362",g="styles-module--sourceNumber--335c1",v="styles-module--pageHeader--06484",y="styles-module--rowWrapper--9f3a4",E="styles-module--demosLegend--16d25",b="styles-module--demosLists--52492",w="styles-module--highlightStorybook--b465e",x="styles-module--highlightTesting--b7d3f",k="styles-module--demoWip--18449",N="styles-module--demoTitle--7c73a",P="styles-module--mainSource--f7ebb",L="styles-module--dataList--54f77",S="styles-module--sourcesList--27e91",I="styles-module--ghButtons--1d466"},8634:function(e,t,n){"use strict";function r(e,t,n,r,a,l,o){try{var i=e[l](o),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,l){var o=e.apply(t,n);function i(e){r(o,a,l,i,s,"next",e)}function s(e){r(o,a,l,i,s,"throw",e)}i(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-multiline-voronoi-tsx-a1a41cfc5fda382d8d46.js.map