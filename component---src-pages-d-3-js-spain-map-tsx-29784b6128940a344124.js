"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[700],{2242:function(e,t,r){function n(e){return e}function a(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return o(e,t)}))}:o(e,t)}function o(e,t){var r=t.id,a=t.bbox,o=null==t.properties?{}:t.properties,s=function(e,t){var r=function(e){if(null==e)return n;var t,r,a=e.scale[0],o=e.scale[1],s=e.translate[0],i=e.translate[1];return function(e,n){n||(t=r=0);var l=2,u=e.length,c=new Array(u);for(c[0]=(t+=e[0])*a+s,c[1]=(r+=e[1])*o+i;l<u;)c[l]=e[l],++l;return c}}(e.transform),a=e.arcs;function o(e,t){t.length&&t.pop();for(var n=a[e<0?~e:e],o=0,s=n.length;o<s;++o)t.push(r(n[o],o));e<0&&function(e,t){for(var r,n=e.length,a=n-t;a<--n;)r=e[a],e[a++]=e[n],e[n]=r}(t,s)}function s(e){return r(e)}function i(e){for(var t=[],r=0,n=e.length;r<n;++r)o(e[r],t);return t.length<2&&t.push(t[0]),t}function l(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(l)}function c(e){var t,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(c)};case"Point":t=s(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(s);break;case"LineString":t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=u(e.arcs);break;case"MultiPolygon":t=e.arcs.map(u);break;default:return null}return{type:r,coordinates:t}}return c(t)}(e,t);return null==r&&null==a?{type:"Feature",properties:o,geometry:s}:null==a?{type:"Feature",id:r,properties:o,geometry:s}:{type:"Feature",id:r,bbox:a,properties:o,geometry:s}}r.d(t,{Z:function(){return a}})},9646:function(e,t,r){var n;r.d(t,{Z:function(){return g}});var a=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var i=function(e){return"string"==typeof e&&s.test(e)},l=[],u=0;u<256;++u)l.push((u+256).toString(16).substr(1));var c,d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!i(r))throw TypeError("Stringified UUID is invalid");return r},p=0,h=0;var g=function(e,t,r){var n=t&&r||0,a=t||new Array(16),s=(e=e||{}).node||c,i=void 0!==e.clockseq?e.clockseq:d;if(null==s||null==i){var l=e.random||(e.rng||o)();null==s&&(s=c=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==i&&(i=d=16383&(l[6]<<8|l[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:h+1,v=u-p+(g-h)/1e4;if(v<0&&void 0===e.clockseq&&(i=i+1&16383),(v<0||u>p)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=u,h=g,d=i;var m=(1e4*(268435455&(u+=122192928e5))+g)%4294967296;a[n++]=m>>>24&255,a[n++]=m>>>16&255,a[n++]=m>>>8&255,a[n++]=255&m;var y=u/4294967296*1e4&268435455;a[n++]=y>>>8&255,a[n++]=255&y,a[n++]=y>>>24&15|16,a[n++]=y>>>16&255,a[n++]=i>>>8|128,a[n++]=255&i;for(var w=0;w<6;++w)a[n+w]=s[w];return t||f(a)}},7164:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(7294),a=r(1745),o=r(8634),s=r(2656),i=r.n(s),l=r(2421),u=r(8747),c=r.n(u),d=r(2242),f=r(9646);"undefined"!=typeof window&&r(5356);var p=["#323247","#7c7cc9","#72b66c","#429742"],h=20,g=50,v=function(e){var t=e.deviation,r=e.id,n=e.slope,a=e.svg.append("defs").append("filter").attr("id","drop-shadow-"+r);a.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",t),a.append("feOffset").attr("dx",1).attr("dy",1),a.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear");var o=a.append("feMerge");o.append("feMergeNode"),o.append("feMergeNode").attr("in","SourceGraphic")},m=function(){function e(e){var t=this;this.state={drags:[],marks:{}},this.handleResize=function(){t.render()},this.config=e;var r=e.areasData,n=e.rootElId;this.regionClass="region-"+(0,f.Z)().slice(0,6);var a=r.objects.data1,o=(0,d.Z)(r,a).features.map((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1];return Object.assign({},n,{areaIndex:a})})),s=(0,l.Ys)("#"+n),i=s.selectAll("div").data(e.projectionsCenters).enter().append("div").style("border","1px dashed #777").style("margin","5px"),u=i.append("svg"),p=u.append("g"),h=p.append("g"),g=this.areaFillColor.bind(this),m=this.toggleMark.bind(this),y=this.refreshAllColors.bind(this),w=function(e){var r=e.filterId,n=e.path,a=e.svgComp,s=a.selectAll(".area").data(o);s.exit().remove(),s.enter().append("path").style("stroke","#fff").style("cursor","pointer").style("filter","url(#drop-shadow-"+r+")").attr("title",(function(e){return t.config.getTitleText(e.properties)})).attr("class",t.regionClass+" area").call((function(){c()("."+t.regionClass).tooltip({track:!0})})).on("click",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1];m(n),(0,l.Ys)(this).style("fill",g),requestAnimationFrame((function(){y()}))})).on("mouseover",(function(){(0,l.Ys)(this).style("fill","#ffb61a").style("stroke-width","1px")})).on("mouseleave",(function(){(0,l.Ys)(this).style("fill",g).style("stroke-width",.4)})),a.selectAll(".area").attr("d",n).style("fill",g).style("stroke-width",.4)},b=this.config.projectionsCenters.map((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=2400;return(0,l.mw4)().center(n).scale(a)})).map((function(e){return(0,l.l49)().projection(e)})),C=b.map((function(e){return function(e){var t=e.featuresData,r=e.projectionPath;return t.reduce((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1],s=r.bounds(o);return a[0][0]=Math.min(a[0][0],s[0][0]),a[0][1]=Math.min(a[0][1],s[0][1]),a[1][0]=Math.max(a[1][0],s[1][0]),a[1][1]=Math.max(a[1][1],s[1][1]),a}),[[1/0,1/0],[-1/0,-1/0]])}({featuresData:o,projectionPath:e})}));h.data(C).attr("transform",(function(e){return"translate("+(e[1][0]-e[0][0])/2+","+(e[1][1]-e[0][1])/2+")"})),h.each((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1],a=(0,l.Ys)(this);v({deviation:2,id:n+1,slope:.3,svg:a}),w({filterId:n+1,path:b[n],svgComp:a})})),this.elements={divsSel:i,innerGroupsSel:h,rootSel:s,svgsDragsSel:p,svgsSel:u},this.render(),this.setupDrag(),window.addEventListener("resize",this.handleResize)}e.renderChart=function(t){return new e(t)};var t=e.prototype;return t.teardown=function(){window.removeEventListener("resize",this.handleResize)},t.clearMarked=function(){this.state.marks={},this.refreshAllColors()},t.areaFillColor=function(e){var t=this.config.areasData.objects.data1,r=(0,l.BYU)().domain([0,t.geometries.length]).range([0,1]),n=(0,l.BYU)().domain((0,l.w6H)(0,1,1/p.length)).range(p);return this.state.marks[e.areaIndex]?"#f00":n(r(e.areaIndex))},t.refreshAllColors=function(){var e=this;this.elements.innerGroupsSel.selectAll(".area").style("fill",(function(t){return e.areaFillColor(t)}))},t.render=function(){var e=this.config,t=e.rootElId,r=e.widths,n=this.elements,a=n.divsSel,o=n.rootSel,s=n.svgsSel,i=r.reduce((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1];return n+a}),0),l=document.getElementById(t).getBoundingClientRect().width,u=l<600,c=function(e){return u?l:e/i*l};o.style("width","100%").style("justify-content","space-evenly").style("display",u?"flex":"inline-flex").style("flex-direction",u?"column":""),a.data(r).style("display","inline-block").style("height",500+g+h+"px").style("width",(function(e){return c(e)+"px"})),s.data(r).attr("width",(function(e){return c(e)})).attr("height",500+g+h)},t.toggleMark=function(e){this.state.marks[e.areaIndex]=!this.state.marks[e.areaIndex]},t.updateDrags=function(){var e=this,t=this.elements.svgsDragsSel,r=function(t){return"translate("+e.state.drags[t].x+","+e.state.drags[t].y+")"};t.each((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[1];(0,l.Ys)(this).attr("transform",r(a))}))},t.setupDrag=function(){var e=this,t=this.elements.svgsSel,r=function(t){return function(r){e.state.drags[t].x+=r.dx,e.state.drags[t].y+=r.dy,e.updateDrags()}},n=function(t){e.state.drags[t]={x:0,y:0}};t.each((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=t[1];n(o);var s=r(o),i=(0,l.ohM)().on("drag",s);(0,l.Ys)(this).style("cursor","move").call(i).on("drag",s)}))},e}(),y="chart",w="update-button",b=function(e){return[(e.NAME_3||"").includes("n.a.")?"":e.NAME_3,e.NAME_2,e.NAME_1].filter((function(e){return!!e})).join(", ")},C=[.8,.3],k=[[12,31.5],[4,20]],x=function(e){return{areasData:e,getTitleText:b,projectionsCenters:k,rootElId:y,widths:C}},A=function(){var e=(0,o.Z)(i().mark((function e(){var t,r,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.AVB)("/demos/data/d3js/spain-map/data.json");case 2:r=e.sent,n=x(r),a=m.renderChart(n),null===(t=document.getElementById(w))||void 0===t||t.addEventListener("click",(function(){a.clearMarked()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=A,E=function(e){var t=e.pageContext;return n.createElement(a.Z,{main:M,pageContext:t},n.createElement("form",{style:{marginBottom:20}},n.createElement("button",{className:"btn btn-info",id:w,type:"button"},"Clear Clicked Regions")),n.createElement("div",{id:y}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-spain-map-tsx-29784b6128940a344124.js.map