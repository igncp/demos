(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[909],{2137:function(t,e,r){"use strict";function n(t,e,r,n,a,i,s){try{var o=t[i](s),c=o.value}catch(d){return void r(d)}o.done?e(c):Promise.resolve(c).then(n,a)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(a,i){var s=t.apply(e,r);function o(t){n(s,a,i,o,c,"next",t)}function c(t){n(s,a,i,o,c,"throw",t)}o(void 0)}))}}r.d(e,{Z:function(){return a}})},4932:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return w}});var n=r(7294),a=r(1335),i=r(2137),s=r(7757),o=r.n(s),c=r(3241);function d(t,e,r){var n=e,a=r,i=function(e){var r=t(e),i=r<a,s=(0,c.Wem)(t.range()),o=s[0],d=s[1],u=i?a-o:d-a,l=0===u?d-o:u;return(i?-1:1)*l*(n+1)/(n+l/Math.abs(r-a))+a};return i.distortion=function(t){return n=t,i},i.focus=function(t){return a=t,i},i.copy=function(){return d(t.copy(),n,a)},i.domain=function(){var e=t.domain.apply(t,arguments);return e===t?i:e},i.range=function(){var e=t.range.apply(t,arguments);return e===t?i:e},i.nice=t.nice,i.ticks=t.ticks,i.tickFormat=t.tickFormat,i}var u={scale:function(t){return d(t(),3,0)}},l=function(){var t=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.AVB("/demos/data/d3js/fish-eye/data.json"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(t){for(var e=t.toString();;){var r=e.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(e===r)break;e=r}return e},p=70,f=70,m=50,v=80,x=700-v-p,y=function(){function t(t){var e=t.rootElId,r=t.data;this.rootElId=e,this.data=r,this.setupRootEl(),this.setVars(),this.setDom()}var e=t.prototype;return e.render=function(){this.setChartTitle(),this.setBackground(),this.setPointer(),this.setFilter(),this.setAxis(),this.setLabels(),this.setDots(),this.setTitles(),this.bindMousemove(),this.bindClick()},e.setupRootEl=function(){var t=document.getElementById(this.rootElId);t.classList.add("fish-eye-chart"),this.width=t.getBoundingClientRect().width-f-m},e.setDom=function(){this.dom={svg:c.Ys("#"+this.rootElId).append("svg").attr("width",this.width+f+m).attr("height",x+v+p).append("g").attr("transform","translate("+f+","+v+")")}},e.setChartTitle=function(){this.dom.svg.append("text").attr("class","chart-title").attr("text-anchor","middle").attr("transform","translate("+this.width/2+",-40)").text("Income Per Capita vs Life Expectancy vs Population vs Region - 180 Countries").style("font-weight","bold")},e.setVars=function(){var t=c.PKp().domain(["Sub-Saharan Africa","South Asia","Middle East & North Africa","America","Europe & Central Asia","East Asia & Pacific"]).range(c.i4X),e=c.PUr().domain([0,5e8]).range([5,60]),r=u.scale(c.p2C).domain([300,1e5]).range([0,this.width]),n=u.scale(c.BYU).domain([20,90]).range([x,0]);this.vars={colorScale:t,focused:!1,radiusScale:e,xScale:r,yScale:n}},e.setAxis=function(){this.dom.xAxis=c.LLu(this.vars.xScale).tickFormat(c.WUZ(",d")).tickSize(-x),this.dom.yAxis=c.y4O(this.vars.yScale).tickSize(-this.width),this.dom.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+x+")").call(this.dom.xAxis),this.dom.svg.append("g").attr("class","y axis").call(this.dom.yAxis)},e.setBackground=function(){return this.dom.svg.append("rect").attr("class","background").attr("width",this.width).attr("height",x)},e.setLabels=function(){this.dom.svg.append("text").attr("class","x label").attr("text-anchor","end").attr("x",this.width-26).attr("y",x+26).text("income per capita, inflation-adjusted (dollars)"),this.dom.svg.append("text").attr("class","y label").attr("text-anchor","end").attr("x",-26).attr("y",-40).attr("dy",".75em").attr("transform","rotate(-90)").text("life expectancy (years)")},e.setFilter=function(){var t=this.dom.svg.append("defs").append("filter").attr("id","drop-shadow-circles");t.attr("height","500%").attr("width","500%").attr("x","-200%").attr("y","-200%"),t.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),t.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",1.5),t.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),t.append("feComponentTransfer").append("feFuncA").attr("slope",.6).attr("type","linear")},e.position=function(){var t=this;this.dom.dot.attr("cx",(function(e){return t.vars.xScale(e.income)})).attr("cy",(function(e){return t.vars.yScale(e.lifeExpectancy)})).attr("r",(function(e){return t.vars.radiusScale(e.population)}))},e.setDots=function(){var t=this;this.dom.dot=this.dom.svg.append("g").attr("class","dots").selectAll(".dot").data(this.data).enter().append("circle").attr("class","dot").style("fill",(function(e){return t.vars.colorScale(e.region)})).style("filter","url(#drop-shadow-circles)").style("stroke","black").style('"stroke-width"',"1px").sort((function(t,e){return e.population-t.population})),this.position()},e.setTitles=function(){this.dom.dot.append("title").text((function(t){return t.name+":\n- Income: "+h(t.income)+" $/P.C.\n- Population: "+h(t.population)+"\n- Life expectancy: "+t.lifeExpectancy+" years"}))},e.zoom=function(t){var e=c.cx$(t);this.vars.xScale.distortion(2.5).focus(e[0]),this.vars.yScale.distortion(2.5).focus(e[1]),this.position(),this.dom.svg.select(".x.axis").call(this.dom.xAxis),this.dom.svg.select(".y.axis").call(this.dom.yAxis)},e.setPointer=function(){this.dom.pointer=this.dom.svg.append("text").text("+").attr("class","pointer")},e.bindMousemove=function(){var t=this;return this.dom.svg.on("mousemove",(function(e){t.vars.focused||t.zoom(e)}))},e.bindClick=function(){var t=this;this.dom.svg.on("click",(function(e){if(t.vars.focused=!t.vars.focused,t.vars.focused){var r=c.cx$(t);t.dom.pointer.attr("x",r[0]).attr("y",r[1]).style("opacity",1)}else t.dom.pointer.style("opacity",0),t.zoom(e)}))},t}(),g=function(){var t=(0,i.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:e=t.sent,new y({data:e,rootElId:"chart"}).render();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(t){var e=t.pageContext;return n.createElement(a.Z,{main:g,pageContext:e},n.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-fish-eye-tsx-8df7882c0e8e737da681.js.map