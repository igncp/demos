(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[305],{2738:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return A}});var r=n(7294),a=n(4275),o=n(2137),i=n(7757),c=n.n(i),u=n(7723),s=n(2149),l="multiline-voronoi-module--axis--2WPgb",d="multiline-voronoi-module--cities--o95QD",p="multiline-voronoi-module--cityHover--1wUSq",m="multiline-voronoi-module--voronoi--17R-N",f="%Y-%m",v=["January","February","March","April","May","June","July","August","September","October","November","December"],h="US Unemployment Rate",g=function(t){return t.cityName.trim()+": "},y=function(t){var e=v[t.date.getMonth()]+" of "+t.date.getFullYear();return" "+(100*t.value).toFixed(2)+"% - "+e},x=function(){var t=(0,o.Z)(c().mark((function t(){var e,n,r,a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,u.i$Z)(f),n=(0,u.Z1g)(f),t.next=4,(0,u.pvA)("/demos/data/d3js/multiline-voronoi/data.tsv");case 4:return r=t.sent,a=Object.keys(r[0]).map((function(t){return n(t)})).filter(Number),o=r.map((function(t){var n=t.name.replace(/(msa|necta div|met necta|met div)$/i,"").trim();return{metrics:a.map((function(r){var a=e(r),o=t[a],i=Number(o)/100;return{cityName:n,date:r,value:i}})),name:n}})),t.abrupt("return",{cities:o,months:a});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=70,b=80,k=70,N=60,E=function(t){var e=t.cities,n=t.months,r=t.rootElId,a=(0,u.PKp)(u.i4X),o={clickToggle:!1,voronoiGroup:null},i=document.getElementById(r);i.classList.add("multiline-voronoi-module--multilineVoronoiChart--2aVN8");var c=i.getBoundingClientRect().width-b-k,f=500-N-w,v=(0,u.Xf)().range([0,c]),x=(0,u.BYU)().range([f,0]),E=function(t){return v(t.date)},C=function(t){return x(t.value)},A={},F=(0,u.Ys)("#"+r).append("svg").attr("width",c+b+k).attr("height",f+N+w).append("g").attr("transform","translate("+b+","+N+")");v.domain((0,u.Wem)(n)),x.domain([0,(0,u.Fp7)(e,(function(t){return(0,u.Fp7)(t.metrics,(function(t){return t.value}))}))]).nice(),F.append("g").attr("class",l+" axis--x").attr("transform","translate(0,"+f+")").call((0,u.LLu)(v)),F.append("g").attr("class",l+" axis--y").call((0,u.y4O)(x).ticks(10,"%")).append("text").attr("x",20).attr("dy",".32em").style("font-weight","bold").text(h);var S=F.append("g").attr("transform","translate(-100,-100)").attr("class","multiline-voronoi-module--focus--2F38m");!function(t){var e=t.append("defs").append("filter").attr("id","drop-shadow");e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",1),e.append("feOffset").attr("dx",1).attr("dy",1),e.append("feComponentTransfer").append("feFuncA").attr("slope","1").attr("type","linear");var n=e.append("feMerge");n.append("feMergeNode"),n.append("feMergeNode").attr("in","SourceGraphic")}(F);var Y=(0,u.jvg)().x(E).y(C),B=function(t){F.append("g").attr("class",d).selectAll("path").data(t).enter().append("path").attr("d",(function(t){return A[t.name]=this,Y(t.metrics)})).style("stroke",(function(t,e){return a(e.toString())})).style("filter",(function(){return"url(#drop-shadow)"})),G(t)},G=function(t){S.append("circle").attr("r",3.5),S.append("text").attr("class","text1").attr("y",-30),S.append("text").attr("class","text2").attr("y",-10);var n=t.reduce((function(t,e){return e.metrics.forEach((function(e){t.push(e)})),t}),[]),r=s.Z.from(n,E,C).voronoi([-b,-N,c+k,f+w]);o.voronoiGroup=F.append("g").attr("class",m),o.voronoiGroup.selectAll("path").data(n).enter().append("path").attr("d",(function(t,e){return r.renderCell(e)})).on("mouseover",(function(t,e){var n=A[e.cityName];(0,u.Ys)(n).classed(p,!0),n.parentNode.appendChild(n),S.attr("transform","translate("+E(e)+","+C(e)+")"),S.select(".text1").text(g(e)),S.select(".text2").text(y(e))})).on("mouseout",(function(t,e){var n=A[e.cityName];return(0,u.Ys)(n).classed(p,!1),S.attr("transform","translate(-100,-100)")})).on("click",(function(t,n){o.clickToggle=!o.clickToggle,(0,u.td_)("."+d).remove(),(0,u.td_)("."+m).remove();var r=o.clickToggle?[e.find((function(t){return t.name===n.cityName}))]:e;B(r)}))};return B(e),{setVoronoi:function(t){o.voronoiGroup.classed("multiline-voronoi-module--voronoiShow--PdA3D",t)}}},C=function(){var t=(0,o.Z)(c().mark((function t(){var e,n,r,a,o,i,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="chart",t.next=3,x();case 3:n=t.sent,r=n.cities,a=n.months,o=E({cities:r,months:a,rootElId:e}),i=o.setVoronoi,s=document.getElementById("form"),document.getElementById(e).appendChild(s),(0,u.Ys)("#show-voronoi").property("disabled",!1).on("change",(function(t){i(t.target.checked||!1)}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(t){var e=t.pageContext;return r.createElement(a.Z,{main:C,pageContext:e},r.createElement("form",{id:"form"},r.createElement("input",{id:"show-voronoi",type:"checkbox"})," ",r.createElement("label",{htmlFor:"show-voronoi"},"Show Voronoi lines")),r.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-multiline-voronoi-tsx-a13e58bab89c9ae286bb.js.map