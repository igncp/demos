{"version":3,"file":"component---src-pages-d-3-js-energy-sankey-tsx-3838b7756708daa6893f.js","mappings":"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","sources":["webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/sum.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/max.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/min.js","webpack://demos/./node_modules/d3-sankey/src/align.js","webpack://demos/./node_modules/d3-sankey/src/constant.js","webpack://demos/./node_modules/d3-sankey/src/sankey.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-path/src/path.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/array.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/constant.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/point.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/link/index.js","webpack://demos/./node_modules/d3-sankey/src/sankeyLinkHorizontal.js","webpack://demos/./src/demos/energy-sankey/energy-sankey.module.css","webpack://demos/./src/demos/energy-sankey/energy-sankey-chart.ts","webpack://demos/./src/demos/energy-sankey/energy-sankey-chart-data.ts","webpack://demos/./src/demos/energy-sankey/energy-sankey.ts","webpack://demos/./src/pages/d3js/energy-sankey.tsx"],"sourcesContent":["function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function sum(values, valueof) {\n  var sum = 0;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value = +value) {\n          sum += value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if (_value = +valueof(_value, ++index, values)) {\n          sum += _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return sum;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function max(values, valueof) {\n  var max;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (max < _value || max === undefined && _value >= _value)) {\n          max = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return max;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function min(values, valueof) {\n  var min;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (min > _value || min === undefined && _value >= _value)) {\n          min = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return min;\n}","import { min } from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\nexport function center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n}","export default function constant(x) {\n  return function () {\n    return x;\n  };\n}","import _slicedToArray from \"/home/runner/work/demos/demos/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { max, min, sum } from \"d3-array\";\nimport { justify } from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths(_ref) {\n  var nodes = _ref.nodes;\n\n  var _iterator = _createForOfIteratorHelper(nodes),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var node = _step.value;\n      var y0 = node.y0;\n      var y1 = y0;\n\n      var _iterator2 = _createForOfIteratorHelper(node.sourceLinks),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var link = _step2.value;\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(node.targetLinks),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _link = _step3.value;\n          _link.y1 = y1 + _link.width / 2;\n          y1 += _link.width;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nexport default function Sankey() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1; // extent\n\n  var dx = 24; // nodeWidth\n\n  var dy = 8,\n      py; // nodePadding\n\n  var id = defaultId;\n  var align = justify;\n  var sort;\n  var linkSort;\n  var nodes = defaultNodes;\n  var links = defaultLinks;\n  var iterations = 6;\n\n  function sankey() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments)\n    };\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function (graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function (_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function (_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function (_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function (_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks(_ref2) {\n    var nodes = _ref2.nodes,\n        links = _ref2.links;\n\n    var _iterator4 = _createForOfIteratorHelper(nodes.entries()),\n        _step4;\n\n    try {\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        var _step4$value = _slicedToArray(_step4.value, 2),\n            i = _step4$value[0],\n            node = _step4$value[1];\n\n        node.index = i;\n        node.sourceLinks = [];\n        node.targetLinks = [];\n      }\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n\n    var nodeById = new Map(nodes.map(function (d, i) {\n      return [id(d, i, nodes), d];\n    }));\n\n    var _iterator5 = _createForOfIteratorHelper(links.entries()),\n        _step5;\n\n    try {\n      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n        var _step5$value = _slicedToArray(_step5.value, 2),\n            _i = _step5$value[0],\n            link = _step5$value[1];\n\n        link.index = _i;\n        var source = link.source,\n            target = link.target;\n        if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n        if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n        source.sourceLinks.push(link);\n        target.targetLinks.push(link);\n      }\n    } catch (err) {\n      _iterator5.e(err);\n    } finally {\n      _iterator5.f();\n    }\n\n    if (linkSort != null) {\n      var _iterator6 = _createForOfIteratorHelper(nodes),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _step6$value = _step6.value,\n              sourceLinks = _step6$value.sourceLinks,\n              targetLinks = _step6$value.targetLinks;\n          sourceLinks.sort(linkSort);\n          targetLinks.sort(linkSort);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }\n\n  function computeNodeValues(_ref3) {\n    var nodes = _ref3.nodes;\n\n    var _iterator7 = _createForOfIteratorHelper(nodes),\n        _step7;\n\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var node = _step7.value;\n        node.value = node.fixedValue === undefined ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value)) : node.fixedValue;\n      }\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n  }\n\n  function computeNodeDepths(_ref4) {\n    var nodes = _ref4.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator8 = _createForOfIteratorHelper(current),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var node = _step8.value;\n          node.depth = x;\n\n          var _iterator9 = _createForOfIteratorHelper(node.sourceLinks),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var target = _step9.value.target;\n              next.add(target);\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeHeights(_ref5) {\n    var nodes = _ref5.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator10 = _createForOfIteratorHelper(current),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var node = _step10.value;\n          node.height = x;\n\n          var _iterator11 = _createForOfIteratorHelper(node.targetLinks),\n              _step11;\n\n          try {\n            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n              var source = _step11.value.source;\n              next.add(source);\n            }\n          } catch (err) {\n            _iterator11.e(err);\n          } finally {\n            _iterator11.f();\n          }\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeLayers(_ref6) {\n    var nodes = _ref6.nodes;\n    var x = max(nodes, function (d) {\n      return d.depth;\n    }) + 1;\n    var kx = (x1 - x0 - dx) / (x - 1);\n    var columns = new Array(x);\n\n    var _iterator12 = _createForOfIteratorHelper(nodes),\n        _step12;\n\n    try {\n      for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n        var node = _step12.value;\n        var i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n        node.layer = i;\n        node.x0 = x0 + i * kx;\n        node.x1 = node.x0 + dx;\n        if (columns[i]) columns[i].push(node);else columns[i] = [node];\n      }\n    } catch (err) {\n      _iterator12.e(err);\n    } finally {\n      _iterator12.f();\n    }\n\n    if (sort) {\n      var _iterator13 = _createForOfIteratorHelper(columns),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var column = _step13.value;\n          column.sort(sort);\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n    }\n\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    var ky = min(columns, function (c) {\n      return (y1 - y0 - (c.length - 1) * py) / sum(c, value);\n    });\n\n    var _iterator14 = _createForOfIteratorHelper(columns),\n        _step14;\n\n    try {\n      for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n        var _nodes = _step14.value;\n        var y = y0;\n\n        var _iterator15 = _createForOfIteratorHelper(_nodes),\n            _step15;\n\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var _node = _step15.value;\n            _node.y0 = y;\n            _node.y1 = y + _node.value * ky;\n            y = _node.y1 + py;\n\n            var _iterator16 = _createForOfIteratorHelper(_node.sourceLinks),\n                _step16;\n\n            try {\n              for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                var link = _step16.value;\n                link.width = link.value * ky;\n              }\n            } catch (err) {\n              _iterator16.e(err);\n            } finally {\n              _iterator16.f();\n            }\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n\n        y = (y1 - y + py) / (_nodes.length + 1);\n\n        for (var i = 0; i < _nodes.length; ++i) {\n          var node = _nodes[i];\n          node.y0 += y * (i + 1);\n          node.y1 += y * (i + 1);\n        }\n\n        reorderLinks(_nodes);\n      }\n    } catch (err) {\n      _iterator14.e(err);\n    } finally {\n      _iterator14.f();\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    var columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, function (c) {\n      return c.length;\n    }) - 1));\n    initializeNodeBreadths(columns);\n\n    for (var i = 0; i < iterations; ++i) {\n      var alpha = Math.pow(0.99, i);\n      var beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  } // Reposition each node based on its incoming (target) links.\n\n\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (var i = 1, n = columns.length; i < n; ++i) {\n      var column = columns[i];\n\n      var _iterator17 = _createForOfIteratorHelper(column),\n          _step17;\n\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var target = _step17.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator18 = _createForOfIteratorHelper(target.targetLinks),\n              _step18;\n\n          try {\n            for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n              var _step18$value = _step18.value,\n                  source = _step18$value.source,\n                  _value = _step18$value.value;\n              var v = _value * (target.layer - source.layer);\n              y += targetTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator18.e(err);\n          } finally {\n            _iterator18.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy = (y / w - target.y0) * alpha;\n\n          target.y0 += _dy;\n          target.y1 += _dy;\n          reorderNodeLinks(target);\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  } // Reposition each node based on its outgoing (source) links.\n\n\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (var n = columns.length, i = n - 2; i >= 0; --i) {\n      var column = columns[i];\n\n      var _iterator19 = _createForOfIteratorHelper(column),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var source = _step19.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator20 = _createForOfIteratorHelper(source.sourceLinks),\n              _step20;\n\n          try {\n            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n              var _step20$value = _step20.value,\n                  target = _step20$value.target,\n                  _value2 = _step20$value.value;\n              var v = _value2 * (target.layer - source.layer);\n              y += sourceTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator20.e(err);\n          } finally {\n            _iterator20.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy2 = (y / w - source.y0) * alpha;\n\n          source.y0 += _dy2;\n          source.y1 += _dy2;\n          reorderNodeLinks(source);\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    var i = nodes.length >> 1;\n    var subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  } // Push any overlapping nodes down.\n\n\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      var node = nodes[i];\n\n      var _dy3 = (y - node.y0) * alpha;\n\n      if (_dy3 > 1e-6) node.y0 += _dy3, node.y1 += _dy3;\n      y = node.y1 + py;\n    }\n  } // Push any overlapping nodes up.\n\n\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      var node = nodes[i];\n\n      var _dy4 = (node.y1 - y) * alpha;\n\n      if (_dy4 > 1e-6) node.y0 -= _dy4, node.y1 -= _dy4;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks(_ref7) {\n    var sourceLinks = _ref7.sourceLinks,\n        targetLinks = _ref7.targetLinks;\n\n    if (linkSort === undefined) {\n      var _iterator21 = _createForOfIteratorHelper(targetLinks),\n          _step21;\n\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var _sourceLinks = _step21.value.source.sourceLinks;\n\n          _sourceLinks.sort(ascendingTargetBreadth);\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n\n      var _iterator22 = _createForOfIteratorHelper(sourceLinks),\n          _step22;\n\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _targetLinks = _step22.value.target.targetLinks;\n\n          _targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      var _iterator23 = _createForOfIteratorHelper(nodes),\n          _step23;\n\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var _step23$value = _step23.value,\n              sourceLinks = _step23$value.sourceLinks,\n              targetLinks = _step23$value.targetLinks;\n          sourceLinks.sort(ascendingTargetBreadth);\n          targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n    }\n  } // Returns the target.y0 that would produce an ideal link from source to target.\n\n\n  function targetTop(source, target) {\n    var y = source.y0 - (source.sourceLinks.length - 1) * py / 2;\n\n    var _iterator24 = _createForOfIteratorHelper(source.sourceLinks),\n        _step24;\n\n    try {\n      for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n        var _step24$value = _step24.value,\n            node = _step24$value.target,\n            width = _step24$value.width;\n        if (node === target) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator24.e(err);\n    } finally {\n      _iterator24.f();\n    }\n\n    var _iterator25 = _createForOfIteratorHelper(target.targetLinks),\n        _step25;\n\n    try {\n      for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n        var _step25$value = _step25.value,\n            _node2 = _step25$value.source,\n            _width = _step25$value.width;\n        if (_node2 === source) break;\n        y -= _width;\n      }\n    } catch (err) {\n      _iterator25.e(err);\n    } finally {\n      _iterator25.f();\n    }\n\n    return y;\n  } // Returns the source.y0 that would produce an ideal link from source to target.\n\n\n  function sourceTop(source, target) {\n    var y = target.y0 - (target.targetLinks.length - 1) * py / 2;\n\n    var _iterator26 = _createForOfIteratorHelper(target.targetLinks),\n        _step26;\n\n    try {\n      for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n        var _step26$value = _step26.value,\n            node = _step26$value.source,\n            width = _step26$value.width;\n        if (node === source) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator26.e(err);\n    } finally {\n      _iterator26.f();\n    }\n\n    var _iterator27 = _createForOfIteratorHelper(source.sourceLinks),\n        _step27;\n\n    try {\n      for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n        var _step27$value = _step27.value,\n            _node3 = _step27$value.target,\n            _width2 = _step27$value.width;\n        if (_node3 === target) break;\n        y -= _width2;\n      }\n    } catch (err) {\n      _iterator27.e(err);\n    } finally {\n      _iterator27.f();\n    }\n\n    return y;\n  }\n\n  return sankey;\n}","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path();\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function moveTo(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function lineTo(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {\n    this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n      // Equivalently, is (x1,y1) coincident with (x2,y2)?\n      // Or, is the radius zero? Line to (x1,y1).\n      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n          this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n        } // Otherwise, draw an arc!\n        else {\n            var x20 = x2 - x0,\n                y20 = y2 - y0,\n                l21_2 = x21 * x21 + y21 * y21,\n                l20_2 = x20 * x20 + y20 * y20,\n                l21 = Math.sqrt(l21_2),\n                l01 = Math.sqrt(l01_2),\n                l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n                t01 = l / l01,\n                t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n            if (Math.abs(t01 - 1) > epsilon) {\n              this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n            }\n\n            this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n          }\n  },\n  arc: function arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n        this._ += \"L\" + x0 + \",\" + y0;\n      } // Is this arc empty? Were done.\n\n\n    if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    } // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n        this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n      }\n  },\n  rect: function rect(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n  },\n  toString: function toString() {\n    return this._;\n  }\n};\nexport default path;","export var slice = Array.prototype.slice;","export default function (x) {\n  return function constant() {\n    return x;\n  };\n}","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import { path } from \"d3-path\";\nimport { slice } from \"../array.js\";\nimport constant from \"../constant.js\";\nimport { x as pointX, y as pointY } from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer,\n        argv = slice.call(arguments),\n        s = source.apply(this, argv),\n        t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function (_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function (_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\nexport function linkVertical() {\n  return link(curveVertical);\n}\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}","import { linkHorizontal } from \"d3-shape\";\n\nfunction horizontalSource(d) {\n  return [d.source.x1, d.y0];\n}\n\nfunction horizontalTarget(d) {\n  return [d.target.x0, d.y1];\n}\n\nexport default function () {\n  return linkHorizontal().source(horizontalSource).target(horizontalTarget);\n}","// extracted by mini-css-extract-plugin\nexport var chartNode = \"energy-sankey-module--chartNode--D7gfH\";\nexport var chartLinkG = \"energy-sankey-module--chartLinkG--1ckZf\";\nexport var chartLink = \"energy-sankey-module--chartLink--2VpE9\";","import anime from \"animejs\"\nimport chroma from \"chroma-js\"\nimport { Selection, scaleOrdinal, schemePastel2, select } from \"d3\"\nimport {\n  SankeyLink,\n  SankeyNode,\n  sankey as sankeyD3,\n  sankeyLeft,\n  sankeyLinkHorizontal,\n} from \"d3-sankey\"\n\nimport * as styles from \"./energy-sankey.module.css\"\n\ntype State = {\n  isInTransition: boolean\n  linkSelected: boolean\n  selectedNode: string\n}\n\ntype AddedGradients = { [k: string]: true }\n\nconst getRandomInt = ({ max, min }: { max: number; min: number }): number => {\n  const minRound = Math.ceil(min)\n  const maxRound = Math.floor(max)\n\n  return Math.floor(Math.random() * (maxRound - minRound + 1)) + minRound\n}\n\nconst createGradients = ({\n  addedGradients,\n  fromColor,\n  svg,\n  toColor,\n}: {\n  addedGradients: AddedGradients\n  fromColor: string\n  svg: Selection<SVGElement, unknown, HTMLElement, unknown>\n  toColor: string\n}): string => {\n  const id = `link-gradient-${fromColor}-${toColor}`.replace(/#/g, \"\")\n\n  if (id in addedGradients) {\n    return id\n  }\n\n  const duration = getRandomInt({\n    max: 3,\n    min: 1,\n  })\n  const colorScale = chroma.scale([fromColor, toColor])\n\n  const text = `\n<linearGradient id=\"${id}\">\n  <stop offset=\"0%\" stop-color=\"${fromColor}\" />\n  <stop offset=\"50%\" stop-color=\"${colorScale(0.5)}\">\n    <animate attributeName=\"offset\"\n      values=\"${[5, 6, 7, 8, 9, 8, 7, 6, 5, 4, 3, 2, 3, 4]\n        .map((offsetValue) => `.${offsetValue}`)\n        .join(\";\")}\"\n      dur=\"${duration}s\"\n      repeatCount=\"indefinite\" />\n  </stop>\n  <stop offset=\"100%\" stop-color=\"${toColor}\" />\n</linearGradient>\n`.trim()\n\n  svg.append(\"defs\").html(text)\n\n  addedGradients[id] = true\n\n  return id\n}\n\nconst sankeyHeight = 1000\nconst legendHeight = 0\nconst svgHeight = sankeyHeight + legendHeight\n\nexport type ChartConfig<NodeData, LinkData> = {\n  chartLinks: LinkData[]\n  chartNodes: NodeData[]\n  getLinkTitle: (o: {\n    sankeyLink: LinkData\n    sankeyLinkSource: NodeData\n    sankeyLinkTarget: NodeData\n  }) => string\n  getNodeId: (node: NodeData) => string\n  getNodeText: (node: NodeData) => string\n  getNodeTitle: (o: { nodeValue: number; sankeyNode: NodeData }) => string\n  onNodeClick?: (node: NodeData) => boolean\n  rootElId: string\n}\n\nexport const renderChart = <NodeData, LinkData>(\n  chartConfig: ChartConfig<NodeData, LinkData>\n) => {\n  const { chartLinks, chartNodes, getNodeId, onNodeClick, rootElId } =\n    chartConfig\n\n  type ChartSankeyNode = SankeyNode<NodeData, LinkData>\n  type ChartSankeyLink = SankeyLink<NodeData, LinkData>\n\n  const state: State = {\n    isInTransition: false,\n    linkSelected: false,\n    selectedNode: \"\",\n  }\n\n  const container = document.getElementById(rootElId) as HTMLElement\n\n  const color = (() => {\n    const colorFn = scaleOrdinal(schemePastel2)\n\n    return (sankeyNode: NodeData) => colorFn(getNodeId(sankeyNode))\n  })()\n\n  const { width } = container.getBoundingClientRect()\n  const svg = select(`#${rootElId}`)\n    .append<SVGElement>(\"svg\")\n    .attr(\"height\", svgHeight)\n    .attr(\"width\", width)\n\n  const sankeyVal = sankeyD3<NodeData, LinkData>()\n    .nodeId(getNodeId)\n    .nodeAlign(sankeyLeft)\n    .nodeWidth(15)\n    .nodePadding(10)\n    .extent([\n      [1, 5],\n      [width - 1, sankeyHeight - 5],\n    ])\n\n  const { links, nodes } = sankeyVal({\n    links: chartLinks.map((sankeyLink) =>\n      Object.assign({}, sankeyLink)\n    ) as unknown as Array<SankeyLink<NodeData, LinkData>>,\n    nodes: chartNodes.map((sankeyNode) =>\n      Object.assign({}, sankeyNode)\n    ) as NodeData[],\n  })\n\n  const nodeG = svg.append(\"g\").attr(\"stroke\", \"#000\")\n\n  let lastAnime = () => {}\n\n  const nodeClickHandler = ({\n    linkPath,\n    sankeyNode,\n  }: {\n    linkPath: Selection<SVGPathElement, ChartSankeyLink, SVGGElement, unknown>\n    sankeyNode: ChartSankeyNode\n  }) => {\n    if (state.isInTransition) {\n      return\n    }\n\n    if (onNodeClick) {\n      const shouldPreventDefault = onNodeClick(sankeyNode)\n\n      if (shouldPreventDefault) {\n        return\n      }\n    }\n\n    if (state.selectedNode === getNodeId(sankeyNode)) {\n      linkPath.attr(\"display\", null).style(\"opacity\", null)\n      state.selectedNode = \"\"\n    } else {\n      state.isInTransition = true\n\n      if (state.selectedNode) {\n        linkPath\n          .style(\"opacity\", (sankeyLink) =>\n            [\n              getNodeId(sankeyLink.source as ChartSankeyNode),\n              getNodeId(sankeyLink.target as ChartSankeyNode),\n            ].includes(state.selectedNode)\n              ? null\n              : 0\n          )\n          .attr(\"display\", null)\n      }\n\n      requestAnimationFrame(() => {\n        linkPath\n          .transition()\n          .duration(500)\n          .style(\"opacity\", (sankeyLink) =>\n            [\n              getNodeId(sankeyLink.source as ChartSankeyNode),\n              getNodeId(sankeyLink.target as ChartSankeyNode),\n            ].includes(getNodeId(sankeyNode))\n              ? null\n              : 0\n          )\n          .on(\"end\", () => {\n            state.isInTransition = false\n            linkPath.attr(\"display\", (sankeyLink) =>\n              [\n                getNodeId(sankeyLink.source as ChartSankeyNode),\n                getNodeId(sankeyLink.target as ChartSankeyNode),\n              ].includes(getNodeId(sankeyNode))\n                ? null\n                : \"none\"\n            )\n          })\n\n        state.selectedNode = getNodeId(sankeyNode)\n      })\n    }\n  }\n\n  const node = nodeG\n    .selectAll(\"rect\")\n    .data<ChartSankeyNode>(nodes)\n    .join(\"rect\")\n    .attr(\"class\", styles.chartNode)\n    .attr(\"x\", (sankeyNode: ChartSankeyNode) => sankeyNode.x0!)\n    .attr(\"y\", (sankeyNode: ChartSankeyNode) => sankeyNode.y0!)\n    .attr(\n      \"height\",\n      (sankeyNode: ChartSankeyNode) => sankeyNode.y1! - sankeyNode.y0!\n    )\n    .attr(\n      \"width\",\n      (sankeyNode: ChartSankeyNode) => sankeyNode.x1! - sankeyNode.x0!\n    )\n    .attr(\"fill\", color)\n    .on(\"mouseenter\", function () {\n      lastAnime()\n\n      const animationFirst = anime({\n        direction: \"alternate\",\n        duration: 1000,\n        easing: \"easeInOutSine\",\n        loop: false,\n        strokeDashoffset: [anime.setDashoffset, 0],\n        targets: this,\n      })\n      const animationSecond = anime({\n        direction: \"alternate\",\n        duration: 2000,\n        easing: \"spring(1, 80, 10, 0)\",\n        loop: true,\n        opacity: [0.6, 1, 0.6],\n        targets: this,\n      })\n\n      lastAnime = () => {\n        animationFirst.seek(animationFirst.duration)\n        animationSecond.seek(0)\n        anime.remove(this)\n        lastAnime = () => {}\n      }\n    })\n    .on(\"mouseleave\", () => {\n      lastAnime()\n    })\n    .on(\"click\", (...[, sankeyNode]) =>\n      nodeClickHandler({\n        linkPath, // eslint-disable-line @typescript-eslint/no-use-before-define\n        sankeyNode,\n      })\n    )\n\n  node.attr(\"title\", (sankeyNode) =>\n    chartConfig.getNodeTitle({\n      nodeValue: sankeyNode.value!,\n      sankeyNode,\n    })\n  )\n\n  $(`.${styles.chartNode}`).tooltip({\n    track: true,\n  })\n\n  const link = svg\n    .append(\"g\")\n    .attr(\"fill\", \"none\")\n    .selectAll(\"g\")\n    .data<ChartSankeyLink>(links)\n    .join(\"g\")\n    .attr(\"class\", styles.chartLinkG)\n\n  const linkPathGenerator = sankeyLinkHorizontal()\n  const addedGradients: AddedGradients = {}\n\n  const linkPath = link\n    .append(\"path\")\n    .attr(\"d\", (sankeyLink: ChartSankeyLink) => {\n      const isHorizontalLine = sankeyLink.y0 === sankeyLink.y1\n\n      return linkPathGenerator(\n        // this is necessary for the default gradientUnits (objectBoundingBox) to work\n        // https://stackoverflow.com/a/34687362\n        isHorizontalLine\n          ? {\n              ...sankeyLink,\n              y1: sankeyLink.y1! + 0.1,\n            }\n          : sankeyLink\n      )\n    })\n    .attr(\"stroke\", (sankeyLink) => {\n      const fromColor = color(sankeyLink.source as NodeData)\n      const toColor = color(sankeyLink.target as NodeData)\n\n      const id = createGradients({\n        addedGradients,\n        fromColor,\n        svg,\n        toColor,\n      })\n\n      return `url(#${id})`\n    })\n    .attr(\"class\", styles.chartLink)\n    .attr(\"stroke-width\", (sankeyLink) => Math.max(1, sankeyLink.width!))\n    .on(\"click\", function () {\n      if (state.isInTransition) {\n        return\n      }\n\n      const currentLink = select(this)\n\n      if (state.linkSelected) {\n        linkPath.attr(\"display\", null).style(\"opacity\", null)\n      } else {\n        linkPath.attr(\"display\", \"none\")\n        currentLink.attr(\"display\", null)\n      }\n\n      state.selectedNode = \"\"\n      state.linkSelected = !state.linkSelected\n    })\n\n  link.attr(\"title\", (sankeyLink) =>\n    chartConfig.getLinkTitle({\n      sankeyLink,\n      sankeyLinkSource: sankeyLink.source as ChartSankeyNode,\n      sankeyLinkTarget: sankeyLink.target as ChartSankeyNode,\n    })\n  )\n\n  $(`.${styles.chartLink}`).tooltip({\n    track: true,\n  })\n\n  nodeG.each(function (this) {\n    const parentEl = this.parentNode as HTMLElement\n\n    parentEl.appendChild(this)\n  })\n\n  svg\n    .append(\"g\")\n    .attr(\"font-family\", \"sans-serif\")\n    .selectAll(\"text\")\n    .data(nodes)\n    .join(\"text\")\n    .attr(\"x\", (sankeyNode) =>\n      sankeyNode.x0! < width / 2 ? sankeyNode.x1! + 6 : sankeyNode.x0! - 6\n    )\n    .attr(\"y\", (sankeyNode) => (sankeyNode.y1! + sankeyNode.y0!) / 2)\n    .attr(\"dy\", \"0.35em\")\n    .style(\"font-size\", \"16px\")\n    .attr(\"text-anchor\", (sankeyNode) =>\n      sankeyNode.x0! < width / 2 ? \"start\" : \"end\"\n    )\n    .text(chartConfig.getNodeText)\n}\n","import { format as formatD3, json } from \"d3\"\n\nimport { ChartConfig } from \"./energy-sankey-chart\"\n\nexport const CONTAINER_ID = \"chart\"\n\ntype EnergyDataLink = {\n  source: string\n  target: string\n  value: number // eslint-disable-line id-denylist\n}\n\ntype EnergyDataNode = {\n  category: string\n  name: string\n}\n\ntype EnergyData = {\n  links: EnergyDataLink[]\n  nodes: EnergyDataNode[]\n  units: string\n}\n\nexport const fetchData = () =>\n  json(`${ROOT_PATH}data/d3js/energy-sankey/data.json`) as Promise<EnergyData>\n\ntype Config = ChartConfig<EnergyDataNode, EnergyDataLink>\n\nconst getNodeId: Config[\"getNodeId\"] = (energyNode) => energyNode.name\nconst getNodeText: Config[\"getNodeText\"] = (energyNode) => energyNode.name\n\nexport const createChartConfig = ({\n  energySankeyData,\n  onNodeClick,\n}: {\n  energySankeyData: EnergyData\n  onNodeClick: Config[\"onNodeClick\"]\n}): Config => {\n  const format = (numberValue: number) => {\n    const formatFn = formatD3(\",.0f\")\n\n    return `${formatFn(numberValue)} ${energySankeyData.units}`\n  }\n\n  const getNodeTitle: Config[\"getNodeTitle\"] = ({ nodeValue, sankeyNode }) =>\n    [\n      sankeyNode.category === sankeyNode.name ? \"\" : sankeyNode.category,\n      sankeyNode.name,\n      format(nodeValue),\n    ]\n      .filter(Boolean)\n      .join(\"\\n\")\n\n  const getLinkTitle: Config[\"getLinkTitle\"] = ({\n    sankeyLink,\n    sankeyLinkSource,\n    sankeyLinkTarget,\n  }) =>\n    `${sankeyLinkSource.name}  ${sankeyLinkTarget.name}\\n${format(\n      sankeyLink.value\n    )}`\n\n  return {\n    chartLinks: energySankeyData.links,\n    chartNodes: energySankeyData.nodes,\n    getLinkTitle,\n    getNodeId,\n    getNodeText,\n    getNodeTitle,\n    onNodeClick,\n    rootElId: CONTAINER_ID,\n  }\n}\n","import hotkeys from \"hotkeys-js\"\nimport qs from \"query-string\"\n\nimport { renderChart } from \"./energy-sankey-chart\"\nimport {\n  CONTAINER_ID,\n  createChartConfig,\n  fetchData,\n} from \"./energy-sankey-chart-data\"\n\nconst main = async () => {\n  hotkeys(\"control\", () => {})\n\n  const energySankeyData = await fetchData()\n\n  const chartConfig = createChartConfig({\n    energySankeyData,\n    onNodeClick: (node) => {\n      if (!hotkeys.isPressed(\"control\")) {\n        return false\n      }\n\n      window.open(\n        `https://www.google.com/search?${qs.stringify({\n          ie: \"UTF-8\",\n          q: `Energy ${node.name}`,\n        })}`\n      )\n\n      return true\n    },\n  })\n\n  renderChart(chartConfig)\n}\n\nexport { CONTAINER_ID }\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps, JQUERYUI } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main, { CONTAINER_ID } from \"@/demos/energy-sankey/energy-sankey\"\n\nconst EnergySankey = ({ pageContext }: DemoPageProps) => (\n  <Demo\n    links={[JQUERYUI.STYLE]}\n    main={main}\n    pageContext={pageContext}\n    scripts={[JQUERYUI.SCRIPT]}\n  >\n    <div id={CONTAINER_ID} />\n  </Demo>\n)\n\nexport default EnergySankey\n"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","sum","values","valueof","undefined","_step","_iterator","_step2","index","_iterator2","_value","max","left","node","depth","justify","sourceLinks","constant","x","ascendingSourceBreadth","a","b","ascendingBreadth","source","ascendingTargetBreadth","target","y0","d","defaultId","defaultNodes","graph","nodes","defaultLinks","links","find","nodeById","id","get","Error","computeLinkBreadths","_ref","y1","link","width","_step3","_iterator3","targetLinks","_link","Sankey","py","sort","linkSort","x0","x1","dx","dy","align","iterations","sankey","apply","arguments","computeNodeLinks","computeNodeValues","computeNodeDepths","computeNodeHeights","computeNodeBreadths","_ref2","_step4","_iterator4","entries","_step4$value","_step5","Map","map","_iterator5","_step5$value","_i","push","_step6","_iterator6","_step6$value","_ref3","_step7","_iterator7","fixedValue","Math","_ref4","current","Set","size","_step8","_iterator8","_step9","_iterator9","add","_ref5","_step10","_iterator10","height","_step11","_iterator11","initializeNodeBreadths","columns","_step14","ky","min","c","_iterator14","_step15","_nodes","y","_iterator15","_node","_step16","_iterator16","reorderLinks","_ref6","_step12","kx","_iterator12","floor","layer","_step13","_iterator13","computeNodeLayers","alpha","pow","beta","relaxRightToLeft","relaxLeftToRight","_step17","column","_iterator17","_step18","w","_iterator18","_step18$value","v","targetTop","_dy","reorderNodeLinks","resolveCollisions","_step19","_iterator19","_step20","_iterator20","_step20$value","sourceTop","_dy2","subject","resolveCollisionsBottomToTop","resolveCollisionsTopToBottom","_dy3","_dy4","_ref7","_step21","_iterator21","_step22","_iterator22","_step23","_iterator23","_step23$value","_step24","_iterator24","_step24$value","_step25","_iterator25","_step25$value","_node2","_width","_step26","_iterator26","_step26$value","_step27","_iterator27","_step27$value","_node3","_width2","update","nodeId","_","nodeAlign","nodeSort","nodeWidth","nodePadding","extent","pi","PI","tau","epsilon","tauEpsilon","Path","this","_x0","_y0","_x1","_y1","path","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","x2","y2","arcTo","r","x21","y21","x01","y01","l01_2","abs","x20","y20","l21_2","l20_2","l21","sqrt","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","cos","sin","cw","da","rect","h","p","linkSource","linkTarget","curve","context","buffer","argv","t","curveHorizontal","horizontalSource","horizontalTarget","chartNode","chartLink","createGradients","addedGradients","fromColor","svg","toColor","replace","duration","minRound","ceil","maxRound","random","getRandomInt","text","chroma","colorScale","offsetValue","join","trim","append","html","renderChart","chartConfig","colorFn","chartLinks","chartNodes","getNodeId","onNodeClick","rootElId","state","isInTransition","linkSelected","selectedNode","container","document","getElementById","color","scaleOrdinal","schemePastel2","sankeyNode","getBoundingClientRect","select","attr","sankeyHeight","sankeyD3","sankeyLeft","sankeyVal","sankeyLink","assign","nodeG","lastAnime","nodeClickHandler","linkPath","style","includes","requestAnimationFrame","transition","on","selectAll","data","styles","animationFirst","anime","direction","easing","loop","strokeDashoffset","targets","animationSecond","opacity","seek","getNodeTitle","nodeValue","$","tooltip","track","linkPathGenerator","sankeyLinkHorizontal","isHorizontalLine","currentLink","getLinkTitle","sankeyLinkSource","sankeyLinkTarget","each","parentNode","appendChild","getNodeText","CONTAINER_ID","energyNode","createChartConfig","energySankeyData","format","numberValue","formatD3","formatFn","units","category","filter","Boolean","hotkeys","json","ROOT_PATH","window","open","qs","ie","q","pageContext","JQUERYUI","main","scripts"],"sourceRoot":""}