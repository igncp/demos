
  <!DOCTYPE html>
  <html>
    <head>
      <title>StoryInfo.tsx</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">storybook/stories/common/StoryInfo/StoryInfo.tsx</td><td class="">100.00%</td><td class="">95%</td><td class="">186</td><td class="">186</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import React from &quot;react&quot;

import * as styles from &quot;./storyInfo.module.css&quot;

type Doc = {
  link: string
  name: string
}

type SourceLinkProps = {
  onSeeLessClick?: () =&gt; void
  onSeeMoreClick?: () =&gt; void
  sourceIndex: number
  sourceLink: string
  sourceText?: string
  sourcesLength: number
}

const SourceLink = ({
  onSeeLessClick,
  onSeeMoreClick,
  sourceIndex,
  sourceLink,
  sourceText,
  sourcesLength,
}: SourceLinkProps) =&gt; (
  &lt;&gt;
    &lt;a href={sourceLink} rel=&quot;noreferrer&quot; target=&quot;_blank&quot;&gt;
      {(sourceText ?? &quot;Source&quot;) +
        (sourcesLength === 1 ? &quot;&quot; : ` ${sourceIndex + 1}`)}
    &lt;/a&gt;
    {(onSeeMoreClick || onSeeLessClick) &amp;&amp; (
      &lt;a
        href=&quot;#&quot;
        onClick={(clickEvent) =&gt; {
          clickEvent.stopPropagation()
          clickEvent.preventDefault()

          if (onSeeMoreClick) {
            onSeeMoreClick()
          } else {
            onSeeLessClick!()
          }
        }}
      &gt;
        {&quot; &quot;}
        (See {onSeeMoreClick ? &quot;more &gt;&gt;&quot; : &quot;less &lt;&lt;&quot;})
      &lt;/a&gt;
    )}
    &lt;span&gt; | &lt;/span&gt;
  &lt;/&gt;
)

type Props = {
  docs?: Doc[]
  source: string[] | string
  sourceText?: string
  storyName: string[] | string
}

const StoryInfo = ({ docs, source, sourceText, storyName }: Props) =&gt; {
  const [isDocsBlockExpanded, setIsDocsBlockExpanded] = React.useState(false)
  const [areSourcesExpanded, setAreSourcesExpanded] = React.useState(false)

  React.useEffect(() =&gt; {
    const anchorElement = parent.document
      .querySelector(&quot;.sidebar-header&quot;)
      ?.querySelector(&quot;a&quot;)

    anchorElement?.setAttribute(&quot;target&quot;, &quot;_self&quot;)
  }, [])

  const storyPath = Array.isArray(storyName)
    ? storyName.join(&quot;/&quot;)
    : `${storyName}/${storyName}`

  return (
    &lt;&gt;
      &lt;p&gt;
        {Array.isArray(source) &amp;&amp; source.length &gt; 1 &amp;&amp; !areSourcesExpanded ? (
          &lt;SourceLink
            onSeeMoreClick={() =&gt; {
              setAreSourcesExpanded(true)
            }}
            sourceIndex={0}
            sourceLink={source[0]}
            sourceText={sourceText}
            sourcesLength={source.length}
          /&gt;
        ) : (
          (Array.isArray(source) ? source : [source]).map(
            (...[sourceItem, sourceIndex, sourcesArray]) =&gt; (
              &lt;SourceLink
                key={sourceIndex}
                onSeeLessClick={
                  sourcesArray.length &gt; 1 &amp;&amp;
                  sourceIndex === sourcesArray.length - 1
                    ? () =&gt; {
                        setAreSourcesExpanded(false)
                      }
                    : undefined
                }
                sourceIndex={sourceIndex}
                sourceLink={sourceItem}
                sourceText={sourceText}
                sourcesLength={sourcesArray.length}
              /&gt;
            )
          )
        )}
        &lt;a
          href={`https://github.com/igncp/demos/blob/main/storybook/stories/${storyPath}.stories.tsx`}
          rel=&quot;noreferrer&quot;
          target=&quot;_blank&quot;
        &gt;
          Code in Github
        &lt;/a&gt;
        &lt;span&gt; | &lt;/span&gt;
        &lt;a
          href={`https://igncp.github.io/demos/coverage-ts/files/storybook/stories/${storyPath}.stories.tsx.html`}
          rel=&quot;noreferrer&quot;
          target=&quot;_blank&quot;
        &gt;
          TypeScript Coverage
        &lt;/a&gt;
        {!!docs?.length &amp;&amp; (
          &lt;&gt;
            &lt;span&gt; | &lt;/span&gt;
            &lt;a
              href=&quot;#&quot;
              onClick={(clickEvent) =&gt; {
                clickEvent.preventDefault()
                setIsDocsBlockExpanded(!isDocsBlockExpanded)
              }}
            &gt;
              {isDocsBlockExpanded ? &quot;Hide related docs&quot; : &quot;Show related docs&quot;}
            &lt;/a&gt;
          &lt;/&gt;
        )}
      &lt;/p&gt;
      {isDocsBlockExpanded &amp;&amp; (
        &lt;ul className={styles.docsList}&gt;
          {docs!.map((doc) =&gt; (
            &lt;li className={styles.docItem} key={doc.name}&gt;
              &lt;a href={doc.link} rel=&quot;noreferrer&quot; target=&quot;_blank&quot;&gt;
                {doc.name}
              &lt;/a&gt;
            &lt;/li&gt;
          ))}
        &lt;/ul&gt;
      )}
    &lt;/&gt;
  )
}

export default StoryInfo
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Sat, 04 Dec 2021 14:17:30 GMT</p>
    </body>
  </html>
  