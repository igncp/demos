
  <!DOCTYPE html>
  <html>
    <head>
      <title>SVGFilters.stories.tsx</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">storybook/stories/SVGFilters/SVGFilters.stories.tsx</td><td class="">100.00%</td><td class="">95%</td><td class="">557</td><td class="">557</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { Selection, select } from &quot;d3&quot;
import React from &quot;react&quot;

import { StoryInfo, createSelectControl } from &quot;../common&quot;

import { SVG_ID } from &quot;./constants&quot;

/**
 * Spec: https://drafts.fxtf.org/filter-effects/#FilterPrimitivesOverview
 */

const SHAPE_CONTAINER_ID = &quot;example&quot;

// https://www.w3.org/TR/SVG2/shapes.html
const starPolygon = [
  [350],
  [75, 379],
  [161, 469],
  [161, 397],
  [215, 423],
  [301, 350],
  [250, 277],
  [301, 303],
  [215, 231],
  [161, 321],
  [161],
]

enum FiltersNames {
  BlendExclusion = &quot;blend-exclusion&quot;,
  Blur12x12 = &quot;blur12x12&quot;,
  Blur2x2 = &quot;blur2x2&quot;,
  BlurShadow = &quot;blur-shadow&quot;,
  CompositeAnimated = &quot;composite-animated-1&quot;,
  DiffuseLightning1 = &quot;diffuse-lightning-1&quot;,
  Glitch = &quot;glitch&quot;,
  Motion = &quot;motion&quot;,
  None = &quot;none&quot;,
  Sample1 = &quot;sample-1&quot;,
  TurbulenceBlue = &quot;turbulence-blue&quot;,
  Waves = &quot;waves&quot;,
}

enum ShapesNames {
  Circle = &quot;circle&quot;,
  Rect = &quot;rect&quot;,
  Star = &quot;star&quot;,
}

type Props = {
  filterName: FiltersNames
  shapeName: ShapesNames
}

type FiltersObj = { [key in FiltersNames]: React.FC&lt;{ id: FiltersNames }&gt; }

const commonFilterProps = {
  height: &quot;300%&quot;,
  width: &quot;300%&quot;,
  x: &quot;-100%&quot;,
  y: &quot;-100%&quot;,
} as const

const filtersObj: FiltersObj = {
  [FiltersNames.BlendExclusion]: ({ id }) =&gt; (
    &lt;filter {...commonFilterProps} id={id}&gt;
      &lt;feOffset dx=&quot;20&quot; dy=&quot;20&quot; in=&quot;SourceGraphic&quot; result=&quot;offOut&quot; /&gt;
      &lt;feBlend in=&quot;SourceGraphic&quot; in2=&quot;offOut&quot; mode=&quot;exclusion&quot; /&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.Blur12x12]: ({ id }) =&gt; (
    &lt;filter {...commonFilterProps} id={id}&gt;
      &lt;feGaussianBlur stdDeviation=&quot;12 12&quot; /&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.Blur2x2]: ({ id }) =&gt; (
    &lt;filter {...commonFilterProps} id={id}&gt;
      &lt;feGaussianBlur stdDeviation=&quot;2 2&quot; /&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.BlurShadow]: ({ id }) =&gt; (
    &lt;filter {...commonFilterProps} id={id}&gt;
      &lt;feGaussianBlur stdDeviation=&quot;7 5&quot; /&gt;
      &lt;feDropShadow
        dx=&quot;15&quot;
        dy=&quot;15&quot;
        floodColor=&quot;#777&quot;
        floodOpacity=&quot;0.25&quot;
        stdDeviation=&quot;5&quot;
      /&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.CompositeAnimated]: ({ id }) =&gt; (
    &lt;filter {...commonFilterProps} id={id}&gt;
      &lt;feTurbulence
        baseFrequency=&quot;0.2&quot;
        result=&quot;FRACTAL-TEXTURE_10&quot;
        type=&quot;fractalNoise&quot;
      /&gt;
      &lt;feComposite
        in=&quot;FRACTAL-TEXTURE_10&quot;
        in2=&quot;SourceAlpha&quot;
        operator=&quot;in&quot;
        result=&quot;myComposite&quot;
      /&gt;
      &lt;feComposite
        in=&quot;myComposite&quot;
        in2=&quot;SourceGraphic&quot;
        k1=&quot;1&quot;
        k2=&quot;2&quot;
        k3=&quot;0.8&quot;
        k4=&quot;-1&quot;
        operator=&quot;arithmetic&quot;
        result=&quot;noiseComposite&quot;
      &gt;
        &lt;animate
          attributeName=&quot;k1&quot;
          dur=&quot;4s&quot;
          repeatCount=&quot;indefinite&quot;
          values={[1, 4, 1].join(&quot;;&quot;)}
        /&gt;
        &lt;animate
          attributeName=&quot;k2&quot;
          dur=&quot;2s&quot;
          repeatCount=&quot;indefinite&quot;
          values={[1, 4, 1].join(&quot;;&quot;)}
        /&gt;
      &lt;/feComposite&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.DiffuseLightning1]: ({ id }) =&gt; (
    &lt;filter {...commonFilterProps} id={id}&gt;
      &lt;feDiffuseLighting
        in=&quot;SourceGraphic&quot;
        lightingColor=&quot;white&quot;
        result=&quot;light&quot;
      &gt;
        &lt;fePointLight z=&quot;40&quot;&gt;
          &lt;animate
            attributeName=&quot;x&quot;
            dur=&quot;4s&quot;
            repeatCount=&quot;indefinite&quot;
            values={[50, 150, 50].join(&quot;;&quot;)}
          /&gt;
          &lt;animate
            attributeName=&quot;y&quot;
            dur=&quot;3s&quot;
            repeatCount=&quot;indefinite&quot;
            values={[20, 70, 20].join(&quot;;&quot;)}
          /&gt;
        &lt;/fePointLight&gt;
      &lt;/feDiffuseLighting&gt;
      &lt;feComposite
        in=&quot;SourceGraphic&quot;
        in2=&quot;light&quot;
        k1=&quot;1&quot;
        k2=&quot;0&quot;
        k3=&quot;0&quot;
        k4=&quot;0&quot;
        operator=&quot;arithmetic&quot;
      /&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.Glitch]: ({ id }) =&gt; (
    &lt;filter
      colorInterpolationFilters=&quot;sRGB&quot;
      {...commonFilterProps}
      filterUnits=&quot;objectBoundingBox&quot;
      id={id}
      primitiveUnits=&quot;userSpaceOnUse&quot;
    &gt;
      &lt;feFlood floodColor=&quot;white&quot; result=&quot;black&quot; /&gt;
      &lt;feFlood floodColor=&quot;red&quot; result=&quot;flood1&quot; /&gt;
      &lt;feFlood floodColor=&quot;limegreen&quot; result=&quot;flood2&quot; /&gt;
      &lt;feOffset dx=&quot;3&quot; dy=&quot;0&quot; in=&quot;SourceGraphic&quot; result=&quot;off1a&quot; /&gt;
      &lt;feOffset dx=&quot;2&quot; dy=&quot;0&quot; in=&quot;SourceGraphic&quot; result=&quot;off1b&quot; /&gt;
      &lt;feOffset dx=&quot;-3&quot; dy=&quot;0&quot; in=&quot;SourceGraphic&quot; result=&quot;off2a&quot; /&gt;
      &lt;feOffset dx=&quot;-2&quot; dy=&quot;0&quot; in=&quot;SourceGraphic&quot; result=&quot;off2b&quot; /&gt;
      &lt;feComposite in=&quot;flood1&quot; in2=&quot;off1a&quot; operator=&quot;in&quot; result=&quot;comp1&quot; /&gt;
      &lt;feComposite in=&quot;flood2&quot; in2=&quot;off2a&quot; operator=&quot;in&quot; result=&quot;comp2&quot; /&gt;

      &lt;feMerge result=&quot;merge1&quot; width=&quot;100%&quot; x=&quot;0&quot;&gt;
        &lt;feMergeNode in=&quot;black&quot; /&gt;
        &lt;feMergeNode in=&quot;comp1&quot; /&gt;
        &lt;feMergeNode in=&quot;off1b&quot; /&gt;

        &lt;animate
          attributeName=&quot;y&quot;
          dur=&quot;4s&quot;
          id=&quot;y&quot;
          keyTimes=&quot;0; 0.362; 0.368; 0.421; 0.440; 0.477; 0.518; 0.564; 0.593; 0.613; 0.644; 0.693; 0.721; 0.736; 0.772; 0.818; 0.844; 0.894; 0.925; 0.939; 1&quot;
          repeatCount=&quot;indefinite&quot;
          values=&quot;104px; 104px; 30px; 105px; 30px; 2px; 2px; 50px; 40px; 105px; 105px; 20px; 6ÃŸpx; 40px; 104px; 40px; 70px; 10px; 30px; 104px; 102px&quot;
        /&gt;

        &lt;animate
          attributeName=&quot;height&quot;
          dur=&quot;4s&quot;
          id=&quot;h&quot;
          keyTimes=&quot;0; 0.362; 0.368; 0.421; 0.440; 0.477; 0.518; 0.564; 0.593; 0.613; 0.644; 0.693; 0.721; 0.736; 0.772; 0.818; 0.844; 0.894; 0.925; 0.939; 1&quot;
          repeatCount=&quot;indefinite&quot;
          values=&quot;10px; 0px; 10px; 30px; 50px; 0px; 10px; 0px; 0px; 0px; 10px; 50px; 40px; 0px; 0px; 0px; 40px; 30px; 10px; 0px; 50px&quot;
        /&gt;
      &lt;/feMerge&gt;

      &lt;feMerge height=&quot;65px&quot; result=&quot;merge2&quot; width=&quot;100%&quot; x=&quot;0&quot; y=&quot;60px&quot;&gt;
        &lt;feMergeNode in=&quot;black&quot; /&gt;
        &lt;feMergeNode in=&quot;comp2&quot; /&gt;
        &lt;feMergeNode in=&quot;off2b&quot; /&gt;

        &lt;animate
          attributeName=&quot;y&quot;
          dur=&quot;4s&quot;
          id=&quot;y&quot;
          keyTimes=&quot;0; 0.055; 0.100; 0.125; 0.159; 0.182; 0.202; 0.236; 0.268; 0.326; 0.357; 0.400; 0.408; 0.461; 0.493; 0.513; 0.548; 0.577; 0.613; 1&quot;
          repeatCount=&quot;indefinite&quot;
          values=&quot;103px; 104px; 69px; 53px; 42px; 104px; 78px; 89px; 96px; 100px; 67px; 50px; 96px; 66px; 88px; 42px; 13px; 100px; 100px; 104px;&quot;
        /&gt;

        &lt;animate
          attributeName=&quot;height&quot;
          dur=&quot;4s&quot;
          id=&quot;h&quot;
          keyTimes=&quot;0; 0.055; 0.100; 0.125; 0.159; 0.182; 0.202; 0.236; 0.268; 0.326; 0.357; 0.400; 0.408; 0.461; 0.493; 0.513;  1&quot;
          repeatCount=&quot;indefinite&quot;
          values=&quot;0px; 0px; 0px; 16px; 16px; 12px; 12px; 0px; 0px; 5px; 10px; 22px; 33px; 11px; 0px; 0px; 10px&quot;
        /&gt;
      &lt;/feMerge&gt;

      &lt;feMerge&gt;
        &lt;feMergeNode in=&quot;SourceGraphic&quot; /&gt;

        &lt;feMergeNode in=&quot;merge1&quot; /&gt;
        &lt;feMergeNode in=&quot;merge2&quot; /&gt;
      &lt;/feMerge&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.Motion]: ({ id }) =&gt; (
    &lt;filter id={id} {...commonFilterProps}&gt;
      &lt;feConvolveMatrix
        kernelMatrix=&quot;1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1&quot;
        order=&quot;20, 1&quot;
      /&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.None]: () =&gt; &lt;g /&gt;,
  [FiltersNames.Sample1]: ({ id }) =&gt; (
    &lt;filter {...commonFilterProps} filterUnits=&quot;userSpaceOnUse&quot; id={id}&gt;
      &lt;feGaussianBlur in=&quot;SourceAlpha&quot; result=&quot;blur&quot; stdDeviation=&quot;4&quot; /&gt;
      &lt;feOffset dx=&quot;4&quot; dy=&quot;4&quot; in=&quot;blur&quot; result=&quot;offsetBlur&quot; /&gt;
      &lt;feSpecularLighting
        in=&quot;blur&quot;
        lightingColor=&quot;#bbbbbb&quot;
        result=&quot;specOut&quot;
        specularConstant=&quot;.75&quot;
        specularExponent=&quot;20&quot;
        surfaceScale=&quot;5&quot;
      &gt;
        &lt;fePointLight x=&quot;-5000&quot; y=&quot;-10000&quot; z=&quot;20000&quot; /&gt;
      &lt;/feSpecularLighting&gt;
      &lt;feComposite
        in=&quot;specOut&quot;
        in2=&quot;SourceAlpha&quot;
        operator=&quot;in&quot;
        result=&quot;specOut&quot;
      /&gt;
      &lt;feComposite
        in=&quot;SourceGraphic&quot;
        in2=&quot;specOut&quot;
        k1=&quot;0&quot;
        k2=&quot;1&quot;
        k3=&quot;1&quot;
        k4=&quot;0&quot;
        operator=&quot;arithmetic&quot;
        result=&quot;litPaint&quot;
      /&gt;
      &lt;feMerge&gt;
        &lt;feMergeNode in=&quot;offsetBlur&quot; /&gt;
        &lt;feMergeNode in=&quot;litPaint&quot; /&gt;
      &lt;/feMerge&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.TurbulenceBlue]: ({ id }) =&gt; (
    &lt;filter {...commonFilterProps} id={id}&gt;
      &lt;feTurbulence
        baseFrequency=&quot;.05,.004&quot;
        height=&quot;200%&quot;
        numOctaves=&quot;4&quot;
        result=&quot;FRACTAL-TEXTURE_10&quot;
        seed=&quot;0&quot;
        type=&quot;fractalNoise&quot;
        width=&quot;200%&quot;
      /&gt;
      &lt;feComposite
        in=&quot;FRACTAL-TEXTURE_10&quot;
        in2=&quot;SourceAlpha&quot;
        operator=&quot;in&quot;
        result=&quot;myComposite&quot;
      /&gt;
      &lt;feColorMatrix
        in=&quot;myComposite&quot;
        type=&quot;matrix&quot;
        values=&quot;0   0   0   0   0
                0   0   0   0   0
                0   0   0   0   1
                0   0   0   0.5 0&quot;
      /&gt;
    &lt;/filter&gt;
  ),
  [FiltersNames.Waves]: ({ id }) =&gt; (
    &lt;filter
      {...commonFilterProps}
      colorInterpolationFilters=&quot;linearRGB&quot;
      id={id}
    &gt;
      &lt;feTurbulence
        baseFrequency=&quot;0.01 0.01&quot;
        numOctaves=&quot;1&quot;
        result=&quot;turbulence&quot;
        seed=&quot;1&quot;
        stitchTiles=&quot;noStitch&quot;
        type=&quot;turbulence&quot;
      &gt;
        &lt;animate
          attributeName=&quot;baseFrequency&quot;
          dur=&quot;4s&quot;
          repeatCount=&quot;indefinite&quot;
          values={[&quot;0.01 0.01&quot;, &quot;0.01 0.04&quot;, &quot;0.04 0.01&quot;, &quot;0.01 0.01&quot;].join(
            &quot;;&quot;
          )}
        /&gt;
      &lt;/feTurbulence&gt;
      &lt;feDisplacementMap
        in=&quot;SourceGraphic&quot;
        in2=&quot;turbulence&quot;
        result=&quot;displacementMap&quot;
        scale=&quot;20&quot;
        xChannelSelector=&quot;G&quot;
        yChannelSelector=&quot;A&quot;
      /&gt;
    &lt;/filter&gt;
  ),
}

const filters = Object.values(FiltersNames).map((filterName: FiltersNames) =&gt; ({
  comp: filtersObj[filterName],
  id: filterName,
}))

const setupSVG = () =&gt; {
  const { width } = document.body.getBoundingClientRect()

  select(`#${SVG_ID}`)
    .attr(&quot;width&quot;, width - 100)
    .attr(&quot;height&quot;, 300)
}

type GetShape = {
  [key in ShapesNames]: (
    svg: Selection&lt;SVGGElement, unknown, HTMLElement, unknown&gt;
  ) =&gt; Selection&lt;SVGElement, unknown, HTMLElement, unknown&gt;
}

const getShape: GetShape = {
  [ShapesNames.Circle]: (svg) =&gt; {
    const radius = 50
    const padding = 20

    return svg
      .append&lt;SVGElement&gt;(&quot;circle&quot;)
      .attr(&quot;fill&quot;, &quot;green&quot;)
      .attr(&quot;r&quot;, radius)
      .attr(&quot;cx&quot;, radius + padding)
      .attr(&quot;cy&quot;, radius + padding)
  },
  [ShapesNames.Rect]: (svg) =&gt;
    svg
      .append&lt;SVGElement&gt;(&quot;rect&quot;)
      .attr(&quot;width&quot;, 200)
      .attr(&quot;height&quot;, 80)
      .attr(&quot;x&quot;, 20)
      .attr(&quot;y&quot;, 20)
      .attr(&quot;fill&quot;, &quot;blue&quot;),
  [ShapesNames.Star]: (svg) =&gt;
    svg
      .append&lt;SVGElement&gt;(&quot;polygon&quot;)
      .attr(
        &quot;points&quot;,
        starPolygon
          .map((subItem) =&gt; subItem.map((subNumber) =&gt; subNumber / 2).join(&quot; &quot;))
          .join(&quot;, &quot;)
      )
      .attr(&quot;fill&quot;, &quot;yellow&quot;)
      .attr(&quot;stroke-width&quot;, &quot;2&quot;)
      .attr(&quot;stroke&quot;, &quot;orange&quot;),
}

const demo = ({ filterName, shapeName }: Props) =&gt; {
  setupSVG()

  const svg = select&lt;SVGGElement, unknown&gt;(`#${SHAPE_CONTAINER_ID}`).text(&quot;&quot;)

  const shape = getShape[shapeName](svg)

  shape.style(
    &quot;filter&quot;,
    filterName === FiltersNames.None ? &quot;&quot; : `url(#${filterName})`
  )
}

const SVGFilters = (props: Props) =&gt; {
  React.useEffect(() =&gt; {
    demo(props)
  }, [props])

  return (
    &lt;div&gt;
      &lt;StoryInfo
        source={[
          &quot;https://alligator.io/svg/svg-filters/&quot;,
          &quot;https://www.smashingmagazine.com/2015/05/why-the-svg-filter-is-awesome/&quot;,
          &quot;https://www.w3.org/TR/SVG11/filters.html&quot;,
          &quot;https://codepen.io/mullany/pens/public&quot;,
        ]}
        storyName=&quot;SVGFilters&quot;
      /&gt;
      &lt;p&gt;
        You can choose a wide options of SVG filters to apply in different
        shapes
      &lt;/p&gt;
      &lt;svg id={SVG_ID}&gt;
        &lt;g&gt;
          {filters.map(({ comp: Filter, id }) =&gt; (
            &lt;Filter id={id} key={id} /&gt;
          ))}
        &lt;/g&gt;
        &lt;g id={SHAPE_CONTAINER_ID} /&gt;
      &lt;/svg&gt;
    &lt;/div&gt;
  )
}

const [filtersArgs, filtersControls] = createSelectControl(
  Object.values(FiltersNames)
)
const [shapesArgs, shapesControls] = createSelectControl(
  Object.values(ShapesNames)
)

const Common = (props: Props) =&gt; &lt;SVGFilters {...props} /&gt;

const commonArgs: Props = {
  filterName: filtersArgs,
  shapeName: shapesArgs,
}

Common.args = commonArgs

export default {
  argTypes: {
    filterName: filtersControls,
    shapeName: shapesControls,
  },
  component: SVGFilters,
  title: &quot;SVG/Filters&quot;,
}

export { Common }
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Sat, 15 Jan 2022 16:59:08 GMT</p>
    </body>
  </html>
  