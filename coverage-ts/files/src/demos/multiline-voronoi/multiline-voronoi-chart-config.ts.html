
  <!DOCTYPE html>
  <html>
    <head>
      <title>multiline-voronoi-chart-config.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">src/demos/multiline-voronoi/multiline-voronoi-chart-config.ts</td><td class="">100.00%</td><td class="">95%</td><td class="">152</td><td class="">152</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { timeFormat, timeParse, tsv } from &quot;d3&quot;

import { ChartConfig } from &quot;./multiline-voronoi-chart&quot;
import { CONTAINER_ID } from &quot;./ui-constants&quot;

const SHOW_VORONOI_ID = &quot;show-voronoi&quot;

type InitialDataItem = {
  [monthKey: string]: string
  name: string
}

type CityMetric = {
  cityName: string
  date: Date
  employmentRate: number
}

type City = {
  metrics: CityMetric[]
  name: string
}

const monthNames = [
  &quot;January&quot;,
  &quot;February&quot;,
  &quot;March&quot;,
  &quot;April&quot;,
  &quot;May&quot;,
  &quot;June&quot;,
  &quot;July&quot;,
  &quot;August&quot;,
  &quot;September&quot;,
  &quot;October&quot;,
  &quot;November&quot;,
  &quot;December&quot;,
]

const formatStr = &quot;%Y-%m&quot;

const fetchData = async () =&gt; {
  const monthFormat = timeFormat(formatStr)
  const monthParse = timeParse(formatStr)

  const dataItems = (await tsv(
    `${ROOT_PATH}data/d3js/multiline-voronoi/data.tsv`
  )) as unknown as InitialDataItem[]

  const months: Date[] = Object.keys(dataItems[0])
    .map((v) =&gt; monthParse(v)!)
    .filter(Number)

  const cities: City[] = dataItems.map((initialCity: InitialDataItem) =&gt; {
    const name = initialCity.name
      .replace(/(msa|necta div|met necta|met div)$/i, &quot;&quot;)
      .trim()

    return {
      metrics: months.map((date: Date) =&gt; {
        const itemKey = monthFormat(date)
        const { [itemKey as keyof InitialDataItem]: itemValue } = initialCity
        const employmentRate: number = Number(itemValue) / 100

        return {
          cityName: name,
          date,
          employmentRate,
        }
      }),
      name,
    }
  })

  return { cities, months }
}

type Config = ChartConfig&lt;City, City[&quot;metrics&quot;][number]&gt;

const getLineId: Config[&quot;getLineId&quot;] = (city) =&gt; city.name

const getLinePoints: Config[&quot;getLinePoints&quot;] = (city) =&gt; city.metrics
const getPointYValue: Config[&quot;getPointYValue&quot;] = (cityMetric) =&gt;
  cityMetric.employmentRate

const getTooltipPart1: Config[&quot;getTooltipPart1&quot;] = (cityMetric: CityMetric) =&gt;
  `${cityMetric.cityName.trim()}: `

const getTooltipPart2: Config[&quot;getTooltipPart2&quot;] = (cityMetric: CityMetric) =&gt; {
  const date = `${
    monthNames[cityMetric.date.getMonth()]
  } of ${cityMetric.date.getFullYear()}`

  return ` ${(cityMetric.employmentRate * 100).toFixed(2)}% - ${date}`
}

const getLineIdFromPoint: Config[&quot;getLineIdFromPoint&quot;] = (cityMetric) =&gt;
  cityMetric.cityName

const getPointXValue: Config[&quot;getPointXValue&quot;] = (cityMetric) =&gt; cityMetric.date

const getChartConfig = ({
  cities,
  months,
}: {
  cities: City[]
  months: Date[]
}): Config =&gt; ({
  chartTitle: &quot;US Unemployment Rate&quot;,
  getLineId,
  getLineIdFromPoint,
  getLinePoints,
  getPointXValue,
  getPointYValue,
  getTooltipPart1,
  getTooltipPart2,
  lines: cities,
  rootElId: CONTAINER_ID,
  times: months,
})

export { SHOW_VORONOI_ID, fetchData, getChartConfig }
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 01 Jun 2022 21:16:57 GMT</p>
    </body>
  </html>
  