
  <!DOCTYPE html>
  <html>
    <head>
      <title>area-config.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">src/demos/area/area-config.ts</td><td class="">100.00%</td><td class="">95%</td><td class="">125</td><td class="">125</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { getIncomeConfig } from &quot;./sources/income-config&quot;
import { IncomeItem } from &quot;./sources/income-item-model&quot;
import {
  NobelPrizeItem,
  getNobelPrizesConfig,
} from &quot;./sources/nobel-prizes-config&quot;

enum DataSource {
  INCOME = &quot;income&quot;,
  NOBEL_PRIZES = &quot;nobel-prizes&quot;,
}

const dataSourceToName: Record&lt;DataSource, string&gt; = {
  [DataSource.INCOME]: &quot;Income&quot;,
  [DataSource.NOBEL_PRIZES]: &quot;Nobel Prizes (external API)&quot;,
}

type AppState = {
  loaded: boolean
  source: DataSource
}

type GenericItem = IncomeItem | NobelPrizeItem

const createChartConfig = async ({
  appState,
  updateState,
}: {
  appState: AppState
  updateState: (newState: Partial&lt;AppState&gt;) =&gt; void
}) =&gt; {
  const [incomeResult, nobelPrizesResult] = await Promise.all([
    getIncomeConfig(),
    getNobelPrizesConfig(),
  ])

  const getResult = (source?: DataSource) =&gt; {
    switch (source ?? appState.source) {
      case DataSource.NOBEL_PRIZES:
        return nobelPrizesResult
      case DataSource.INCOME:
        return incomeResult

      default:
        throw new Error(&quot;Unknown source&quot;)
    }
  }

  const getConfig = (source?: DataSource) =&gt; getResult(source).config

  return {
    config: {
      getAreaPoints: () =&gt; getConfig().getAreaPoints(),
      getChartTitle: () =&gt; getConfig().getChartTitle(),
      getChartTitleShort: () =&gt; getConfig().getChartTitleShort(),
      getItemId: (nodeItem: GenericItem) =&gt;
        // @ts-expect-error
        getConfig(nodeItem.source).getItemId(nodeItem),
      getItemTitle: (nodeItem: GenericItem) =&gt;
        // @ts-expect-error
        getConfig(nodeItem.source).getItemTitle(nodeItem),
      getItemXValue: (nodeItem: GenericItem) =&gt;
        // @ts-expect-error
        getConfig(nodeItem.source).getItemXValue(nodeItem),
      getItemYValue: (nodeItem: GenericItem) =&gt;
        // @ts-expect-error
        getConfig(nodeItem.source).getItemYValue(nodeItem),
      getPointClickHandler: () =&gt;
        getConfig().getPointClickHandler() as
          | ((point: GenericItem) =&gt; void)
          | null,
      getRootElId: () =&gt; getConfig().getRootElId(),
      getVerticalOffset: () =&gt; getConfig().getVerticalOffset(),
      getXAxisFormat: () =&gt; getConfig().getXAxisFormat(),
      getYAxisFormat: () =&gt; getConfig().getYAxisFormat(),
    },
    onUpdateRandomValue: () =&gt; getResult().onUpdateRandomValue(),
    updateSource: (source: DataSource) =&gt; {
      updateState({ source })
    },
  }
}

export {
  createChartConfig,
  AppState,
  DataSource,
  dataSourceToName,
  GenericItem,
}
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Sat, 05 Feb 2022 19:43:16 GMT</p>
    </body>
  </html>
  