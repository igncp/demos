
  <!DOCTYPE html>
  <html>
    <head>
      <title>income-item-model.test.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">src/demos/area/tests/income-item-model.test.ts</td><td class="">100.00%</td><td class="">95%</td><td class="">76</td><td class="">76</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { csv } from &quot;d3&quot;

import { IncomeItem } from &quot;../income-item-model&quot;

jest.mock(&quot;d3&quot;, () =&gt; ({ csv: jest.fn() }))

const mockCsv = csv as unknown as jest.Mock

const testData = [
  {
    percent: &quot;15&quot;,
    year: &quot;2000&quot;,
  },
  {
    percent: 20.123456,
    year: 2001,
  },
]

beforeEach(() =&gt; {
  mockCsv.mockClear()
  mockCsv.mockReturnValue(Promise.resolve(testData))
})

describe(&quot;changePercentage&quot;, () =&gt; {
  it(&quot;limits the percentage&quot;, async () =&gt; {
    const incomeItems = await IncomeItem.fetchAndCreateCollection()

    expect(incomeItems[0].getSummary()).not.toContain(&quot;Percentage: 100.00%&quot;)

    incomeItems[0].changePercentage(1000)
    expect(incomeItems[0].getSummary()).toContain(&quot;Percentage: 100.00%&quot;)

    incomeItems[0].changePercentage(-110)
    expect(incomeItems[0].getSummary()).toContain(&quot;Percentage: 0.00%&quot;)

    incomeItems[0].changePercentage(25.678)
    expect(incomeItems[0].getSummary()).toContain(&quot;Percentage: 25.68%&quot;)
  })
})

describe(&quot;getId&quot;, () =&gt; {
  it(&quot;generates different ids&quot;, async () =&gt; {
    const incomeItems = await IncomeItem.fetchAndCreateCollection()

    expect(incomeItems[0].getId()).not.toEqual(incomeItems[1].getId())
  })
})

describe(&quot;getSummary&quot;, () =&gt; {
  it(&quot;generates the expected summaries&quot;, async () =&gt; {
    const incomeItems = await IncomeItem.fetchAndCreateCollection()

    expect(incomeItems.map((incomeItem) =&gt; incomeItem.getSummary())).toEqual([
      &quot;Year: 2000, Percentage: 15.00%&quot;,
      &quot;Year: 2001, Percentage: 20.12%&quot;,
    ])
  })
})
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Fri, 14 Jan 2022 21:38:33 GMT</p>
    </body>
  </html>
  