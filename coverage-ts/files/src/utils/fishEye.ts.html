
  <!DOCTYPE html>
  <html>
    <head>
      <title>fishEye.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">src/utils/fishEye.ts</td><td class="">100.00%</td><td class="">95%</td><td class="">167</td><td class="">167</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { AxisScale, ScaleLinear, extent, scaleLinear } from &quot;d3&quot;

type ScaleFn = typeof scaleLinear
type Scale = ScaleLinear&lt;number, number&gt;

const d3Rebind = &lt;
  MethodArgs extends any[], // eslint-disable-line @typescript-eslint/no-explicit-any
  Method extends string,
  Source extends { [k in Method]: (...args: MethodArgs) =&gt; Source },
  Target
&gt;({
  method,
  source,
  target,
}: {
  method: Method
  source: Source
  target: Target
}) =&gt;
  function boundMethod(...args: MethodArgs) {
    const methodResult = source[method](...args)

    return methodResult === source ? target : methodResult
  }

const fishEyeScale = ({
  distortion: initialDistortion,
  focus: initialFocus,
  scale,
}: {
  distortion: number
  focus: number
  scale: Scale
}) =&gt; {
  let distortion = initialDistortion
  let focus = initialFocus

  function fisheye(scaleArgs: Parameters&lt;Scale&gt;[0]) {
    const x = scale(scaleArgs)
    const left = x &lt; focus
    const [min, max] = extent&lt;number&gt;(scale.range()) as [number, number]
    let m = left ? focus - min : max - focus

    if (m === 0) {
      m = max - min
    }

    return (
      ((left ? -1 : 1) * m * (distortion + 1)) /
        (distortion + m / Math.abs(x - focus)) +
      focus
    )
  }

  type FisheyeFn = {
    (newValue: number): typeof fisheye
    (): number
  }

  const createFisheyeFn = (cb: (newValue: number) =&gt; void): FisheyeFn =&gt;
    ((newValue?: number) =&gt; {
      if (typeof newValue === &quot;undefined&quot;) {
        return distortion
      }

      cb(newValue)

      return fisheye
    }) as FisheyeFn

  fisheye.distortion = createFisheyeFn((newDistortion) =&gt; {
    distortion = +newDistortion
  })

  fisheye.focus = createFisheyeFn((newFocus) =&gt; {
    focus = +newFocus
  })

  fisheye.copy = function fisheyeCopy() {
    return fishEyeScale({
      distortion,
      focus,
      scale: scale.copy(),
    })
  }

  fisheye.nice = scale.nice
  fisheye.ticks = scale.ticks
  fisheye.tickFormat = scale.tickFormat

  fisheye.domain = d3Rebind({
    method: &quot;domain&quot;,
    source: scale,
    target: fisheye,
  })

  fisheye.range = d3Rebind({
    method: &quot;range&quot;,
    source: scale,
    target: fisheye,
  })

  return fisheye
}

const fisheye = {
  scale(scaleType: ScaleFn) {
    return fishEyeScale({
      distortion: 3,
      focus: 0,
      scale: scaleType(),
    })
  },
}

export type FishEyeScale = AxisScale&lt;number&gt; &amp;
  ReturnType&lt;typeof fisheye.scale&gt; &amp;
  Scale

export default fisheye
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 12 Jan 2022 00:26:29 GMT</p>
    </body>
  </html>
  