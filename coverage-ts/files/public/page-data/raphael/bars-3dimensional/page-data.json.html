
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/raphael/bars-3dimensional/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-raphael-bars-3-dimensional-tsx&quot;,&quot;path&quot;:&quot;/raphael/bars-3dimensional/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;dataFiles&quot;:[&quot;data.json&quot;],&quot;docs&quot;:[],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Bars 3D&quot;,&quot;notes&quot;:[&quot;Added titles on hover&quot;,&quot;Dynamic dimensions&quot;],&quot;sources&quot;:[&quot;http://codepen.io/djam/pen/edjCz&quot;],&quot;summary&quot;:[],&quot;category&quot;:&quot;raphael&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.bars3DimensionalChart {\n  padding: 50px;\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import { RaphaelPaper, RaphaelPath, RaphaelSet } from \&quot;raphael\&quot;\n\nimport Raphael from \&quot;@/demos/_utils/browserRaphael\&quot;\n\nimport * as styles from \&quot;./bars-3dimensional.module.css\&quot;\n\nconst fetchData = async () =&gt; {\n  const response = await fetch(\n    `${ROOT_PATH}data/raphael/bars-3dimensional/data.json`\n  )\n  const jsonResponse = await response.json()\n\n  return jsonResponse.results\n}\n\ntype CountriesMetrics = {\n  [countryName: string]: number[]\n} &amp; {\n  keys: string[]\n  keysLength: number\n  seriesDisplayed: number\n  seriesLength: number\n}\n\ntype Config = {\n  colorScheme: string[]\n  deep: number\n  easing: string\n  heightOffset: number\n  ratio: number\n  speed: number\n  width: number\n}\n\ntype Dom = {\n  elements: {\n    [k: string]: {\n      inner?: RaphaelPath\n      outer?: RaphaelPath\n      paperSet?: RaphaelSet\n    }\n  }\n  paper: RaphaelPaper\n}\n\ntype CalcArgs = {\n  countryName: string\n  serieIndex: number\n}\n\ntype ChartOpts = {\n  countriesMetrics: CountriesMetrics\n  rootElId: string\n}\n\nclass Chart {\n  private readonly rootElId: string\n  private cg!: Config\n  private dom!: Dom\n  private countriesMetrics!: CountriesMetrics\n\n  public constructor({ countriesMetrics, rootElId }: ChartOpts) {\n    this.rootElId = rootElId\n\n    this.setCg()\n    this.setDom()\n    this.setData(countriesMetrics)\n  }\n\n  public render() {\n    this.drawAxis()\n    this.countriesMetrics.keys.forEach((countryName) =&gt; {\n      this.dom.elements[countryName].paperSet = this.dom.paper.set()\n    })\n\n    this.createCountries(this.countriesMetrics.seriesDisplayed)\n  }\n\n  public displayNextSeries() {\n    const { countriesMetrics } = this\n\n    countriesMetrics.seriesDisplayed =\n      countriesMetrics.seriesDisplayed + 1 === countriesMetrics.seriesLength\n        ? 0\n        : countriesMetrics.seriesDisplayed + 1\n\n    this.animateCountries(countriesMetrics.seriesDisplayed)\n  }\n\n  private setCg() {\n    const { width } = (document.getElementById(\n      this.rootElId\n    ) as HTMLElement).getBoundingClientRect()\n\n    this.cg = {\n      colorScheme: [\&quot;#c1252d\&quot;, \&quot;#5f3a5f\&quot;, \&quot;#51a8d0\&quot;],\n      deep: 5,\n      easing: \&quot;bounce\&quot;,\n      heightOffset: 100,\n      ratio: 0.6,\n      speed: 800,\n      width,\n    }\n  }\n\n  private setDom() {\n    this.dom = {\n      elements: {},\n      paper: Raphael(this.rootElId, this.cg.width, 245),\n    }\n    ;(document.getElementById(this.rootElId) as HTMLElement).classList.add(\n      styles.bars3DimensionalChart\n    )\n  }\n\n  private setData(countriesMetrics: CountriesMetrics) {\n    countriesMetrics.keys = Object.keys(countriesMetrics)\n    countriesMetrics.seriesDisplayed = 0\n    countriesMetrics.seriesLength =\n      countriesMetrics[countriesMetrics.keys[0]].length\n    countriesMetrics.keysLength = countriesMetrics.keys.length\n\n    this.countriesMetrics = countriesMetrics\n\n    countriesMetrics.keys.forEach((countryName: string) =&gt; {\n      this.dom.elements[countryName] = {}\n    })\n  }\n\n  private animateCountries(serieIndex: number) {\n    const { countriesMetrics } = this\n\n    countriesMetrics.keys.forEach((countryName) =&gt; {\n      this.dom.elements[countryName].inner!.animate(\n        {\n          path: this.calcInnerPath({ countryName, serieIndex }),\n        },\n        this.cg.speed,\n        this.cg.easing\n      )\n      this.dom.elements[countryName].outer!.animate(\n        {\n          path: this.calcOuterPath({ countryName, serieIndex }),\n        },\n        this.cg.speed,\n        this.cg.easing\n      )\n\n      return this.dom.elements[countryName].paperSet!.animate(\n        {\n          fill: this.cg.colorScheme[serieIndex],\n        },\n        this.cg.speed\n      )\n    })\n  }\n\n  private drawAxis() {\n    const {\n      dom: { paper },\n    } = this\n    const {\n      cg: { deep },\n    } = this\n\n    Array.from({ length: 4 }).forEach((...[, pathIndex]) =&gt; {\n      const horizontalLineHeight = 25 * pathIndex\n      const path = `M5,${horizontalLineHeight} ${this.cg.width},${\n        this.cg.heightOffset + horizontalLineHeight\n      }`\n\n      paper.path(path).attr(\&quot;stroke-dasharray\&quot;, \&quot;. \&quot;)\n    })\n\n    return paper\n      .path(\n        `M0,${deep + 100} ${deep},100 ${this.cg.width},${\n          100 + this.cg.heightOffset\n        } ${this.cg.width - deep},${100 + this.cg.heightOffset + deep}Z`\n      )\n      .attr(\&quot;fill\&quot;, \&quot;#999\&quot;)\n      .attr(\&quot;stroke\&quot;, \&quot;none\&quot;)\n  }\n\n  private calcH0({ countryName, serieIndex }: CalcArgs): number {\n    return 100 - this.countriesMetrics[countryName]![serieIndex]!\n  }\n\n  private calcH5({ countryName, serieIndex }: CalcArgs) {\n    return (\n      100 - this.countriesMetrics[countryName][serieIndex] + 5 * this.cg.ratio\n    )\n  }\n\n  private calcH10({ countryName, serieIndex }: CalcArgs) {\n    return (\n      100 - this.countriesMetrics[countryName][serieIndex] + 10 * this.cg.ratio\n    )\n  }\n\n  private calcInnerPath({ countryName, serieIndex }: CalcArgs) {\n    return `M0,${this.calcH5({ countryName, serieIndex })} 15,${this.calcH10({\n      countryName,\n      serieIndex,\n    })} 15,${100 + 10 * this.cg.ratio} 0,${100 + 5 * this.cg.ratio}Z`\n  }\n\n  private calcOuterPath({ countryName, serieIndex }: CalcArgs) {\n    return `M0,${this.calcH5({ countryName, serieIndex })} 5,${this.calcH0({\n      countryName,\n      serieIndex,\n    })} 20,${this.calcH5({ countryName, serieIndex })} 20,${\n      100 + 5 * this.cg.ratio\n    } 15,${100 + 10 * this.cg.ratio} 0,${100 + 5 * this.cg.ratio}Z`\n  }\n\n  private createCountries(serieIndex: number) {\n    const { countriesMetrics } = this\n    const {\n      dom: { paper },\n    } = this\n\n    return countriesMetrics.keys.forEach((...[countryName, countryIndex]) =&gt; {\n      this.dom.elements[countryName].inner = paper.path(\n        this.calcInnerPath({ countryName, serieIndex })\n      )\n      this.dom.elements[countryName].outer = paper\n        .path(this.calcOuterPath({ countryName, serieIndex }))\n        .attr(\&quot;opacity\&quot;, 0.5)\n      this.dom.elements[countryName].paperSet!.push(\n        this.dom.elements[countryName].inner!,\n        this.dom.elements[countryName].outer!\n      )\n      this.dom.elements[countryName].paperSet!.transform(\n        `T ${(this.cg.width / countriesMetrics.keysLength) * countryIndex},` +\n          `${\n            (this.cg.heightOffset / countriesMetrics.keysLength) * countryIndex\n          }`\n      )\n\n      return this.dom.elements[countryName]\n        .paperSet!.attr(\&quot;fill\&quot;, \&quot;#c1252d\&quot;)\n        .attr(\&quot;stroke\&quot;, \&quot;none\&quot;)\n        .attr(\n          \&quot;title\&quot;,\n          `${countryName}: ${countriesMetrics[countryName][serieIndex]}`\n        )\n    })\n  }\n}\n\nconst main = async () =&gt; {\n  const countriesMetrics = await fetchData()\n\n  const chart = new Chart({\n    countriesMetrics,\n    rootElId: \&quot;chart\&quot;,\n  })\n\n  chart.render()\n\n  const animateButton = document.querySelector(\&quot;.animate-bars\&quot;) as HTMLElement\n\n  animateButton.addEventListener(\&quot;click\&quot;, (clickEvent) =&gt; {\n    clickEvent.preventDefault()\n\n    chart.displayNextSeries()\n  })\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;bars-3dimensional&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/bars-3dimensional/bars-3dimensional\&quot;\n\nconst Bars3Dimensional = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo main={main} pageContext={pageContext}&gt;\n    &lt;div\n      style={{\n        marginBottom: 20,\n        textAlign: \&quot;center\&quot;,\n      }}\n    &gt;\n      &lt;a className=\&quot;btn btn-info animate-bars\&quot; href=\&quot;\&quot;&gt;\n        Change Series\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default Bars3Dimensional\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;bars-3dimensional&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 01 Sep 2021 22:07:32 GMT</p>
    </body>
  </html>
  