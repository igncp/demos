
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/map-distorsions/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-map-distorsions-tsx&quot;,&quot;path&quot;:&quot;/d3js/map-distorsions/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;dataFiles&quot;:[&quot;data.tsv&quot;],&quot;docs&quot;:[[&quot;d3-shape API reference&quot;,&quot;https://github.com/d3/d3-shape#api-reference&quot;],[&quot;d3-shape Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-shape/index.d.ts&quot;],[&quot;d3-axis API reference&quot;,&quot;https://github.com/d3/d3-axis#api-reference&quot;],[&quot;d3-axis Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-axis/index.d.ts&quot;],[&quot;d3-selection API reference&quot;,&quot;https://github.com/d3/d3-selection#api-reference&quot;],[&quot;d3-selection Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-selection/index.d.ts&quot;],[&quot;d3-scale API reference&quot;,&quot;https://github.com/d3/d3-scale#api-reference&quot;],[&quot;d3-scale Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-scale/index.d.ts&quot;]],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Map Distorsions&quot;,&quot;notes&quot;:[&quot;Dynamic (for performance) shadow&quot;,&quot;Custom color scale related to index&quot;,&quot;Tooltip and minor style changes&quot;],&quot;sources&quot;:[&quot;http://bl.ocks.org/mbostock/3709000&quot;],&quot;summary&quot;:[&quot;This chart has some special characteristics like multiple vertical axis, color scale with many values, and the interaction with the mouse.&quot;,&quot;When hovering a line, the rest are converted to gray, and this one gets appended to the parent element, so it renders on top.&quot;,&quot;There is a drop-shadow filter applied but only to the focused line, which improves a lot the performance.&quot;],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.mapDistorsionsChart {\n  svg {\n    font-family: sans-serif;\n    text-shadow: 1px 1px 1px #ddd;\n  }\n\n  .background path {\n    fill: none;\n    pointer-events: stroke;\n    stroke: none;\n    stroke-width: 20px;\n  }\n\n  .foreground path {\n    fill: none;\n    stroke-width: 1.5px;\n  }\n\n  .axis {\n    font-size: 12px;\n  }\n\n  .axis .title {\n    font-family: Times New Roman, sans-serif;\n    font-size: 11px;\n    font-weight: bold;\n    text-transform: uppercase;\n  }\n\n  .axis line,\n  .axis path {\n    fill: none;\n    shape-rendering: crispEdges;\n    stroke: #000;\n  }\n\n  .label {\n    -webkit-transition: fill 125ms linear;\n\n    &amp;.inactive {\n      fill: #ccc !important;\n    }\n  }\n\n  .active .label:not(.inactive) {\n    font-weight: bold;\n  }\n\n  .foreground path.inactive {\n    stroke: #ccc !important;\n    stroke-opacity: 0.5;\n    stroke-width: 1px;\n  }\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import {\n  Selection,\n  axisLeft,\n  extent,\n  line as lineD3,\n  range,\n  scaleLinear,\n  scalePoint,\n  scaleSqrt,\n  select,\n  tsv,\n} from \&quot;d3\&quot;\nimport qs from \&quot;query-string\&quot;\n\nimport * as styles from \&quot;./map-distorsions.module.css\&quot;\n\ntype ProjectionItem = {\n  \&quot;Acc. 40ยบ 150%\&quot;: string\n  \&quot;Angular\&quot;: string\n  \&quot;Areal\&quot;: string\n  \&quot;Scale\&quot;: string\n  \&quot;name\&quot;: string\n}\n\nconst fetchData = () =&gt;\n  (tsv(`${ROOT_PATH}data/d3js/map-distorsions/data.tsv`) as unknown) as Promise&lt;\n    ProjectionItem[]\n  &gt;\n\nconst maxNameLength = 20\nconst getShortName = (name: string) =&gt;\n  name.length &gt; maxNameLength ? `${name.slice(0, maxNameLength)}...` : name\n\nconst margin = {\n  bottom: 20,\n  left: 200,\n  right: 40,\n  top: 90,\n}\nconst height = 750 - margin.top - margin.bottom\nconst axisYOffset = -9\n\nconst colors = [\&quot;#7C7CC9\&quot;, \&quot;#429742\&quot;, \&quot;#63BD28\&quot;, \&quot;#D14141\&quot;]\n\nconst texts = {\n  title:\n    \&quot;Comparison of 41 map projections by four different types of distortion. Lower is better.\&quot;,\n}\n\ntype RenderChart = (o: {\n  mapsDistorsions: ProjectionItem[]\n  rootElId: string\n}) =&gt; void\n\nenum DimensionName {\n  Acc40 = \&quot;Acc. 40ยบ 150%\&quot;,\n  Angular = \&quot;Angular\&quot;,\n  Areal = \&quot;Areal\&quot;,\n  Scale = \&quot;Scale\&quot;,\n}\n\nenum DimensionType {\n  Number = \&quot;number\&quot;,\n  String = \&quot;string\&quot;,\n}\n\nconst tooltipText = function (projectionItem: ProjectionItem) {\n  const dimensionsNames = [\n    DimensionName.Acc40,\n    DimensionName.Scale,\n    DimensionName.Areal,\n    DimensionName.Angular,\n  ] as Array&lt;keyof ProjectionItem&gt;\n  const valuesWithDimension = dimensionsNames.map(\n    (dimensionName) =&gt;\n      `${Number(projectionItem[dimensionName]).toFixed(2)} (${dimensionName})`\n  )\n\n  return `${projectionItem.name}: ${valuesWithDimension.join(\&quot;, \&quot;)}`\n}\n\ntype Dimension = {\n  name: DimensionName | \&quot;name\&quot;\n  scale: any // eslint-disable-line @typescript-eslint/no-explicit-any\n  type: DimensionType\n}\n\nconst filterColor = ({\n  deviation,\n  id,\n  slope,\n  svg,\n}: {\n  deviation: number\n  id: string\n  slope: number\n  svg: Selection&lt;SVGGElement, unknown, HTMLElement, unknown&gt;\n}) =&gt; {\n  const defs = svg.append(\&quot;defs\&quot;)\n  const filter = defs.append(\&quot;filter\&quot;).attr(\&quot;id\&quot;, `drop-shadow-${id}`)\n\n  filter\n    .append(\&quot;feOffset\&quot;)\n    .attr(\&quot;dx\&quot;, 0.5)\n    .attr(\&quot;dy\&quot;, 0.5)\n    .attr(\&quot;in\&quot;, \&quot;SourceGraphic\&quot;)\n    .attr(\&quot;result\&quot;, \&quot;offOut\&quot;)\n\n  filter\n    .append(\&quot;feGaussianBlur\&quot;)\n    .attr(\&quot;in\&quot;, \&quot;offOut\&quot;)\n    .attr(\&quot;result\&quot;, \&quot;blurOut\&quot;)\n    .attr(\&quot;stdDeviation\&quot;, deviation)\n\n  filter\n    .append(\&quot;feBlend\&quot;)\n    .attr(\&quot;in\&quot;, \&quot;SourceGraphic\&quot;)\n    .attr(\&quot;in2\&quot;, \&quot;blurOut\&quot;)\n    .attr(\&quot;mode\&quot;, \&quot;normal\&quot;)\n\n  filter\n    .append(\&quot;feComponentTransfer\&quot;)\n    .append(\&quot;feFuncA\&quot;)\n    .attr(\&quot;slope\&quot;, slope)\n    .attr(\&quot;type\&quot;, \&quot;linear\&quot;)\n}\n\nconst colorsScale = &lt;P extends number&gt;(domain: [number, number]) =&gt; {\n  const c = scaleLinear().domain(domain).range([0, 1])\n  const colorScale = scaleLinear&lt;string&gt;()\n    .domain(range(0, 1, 1.0 / colors.length))\n    .range(colors)\n\n  return (color: P) =&gt; colorScale(c(color))\n}\n\nconst renderChart: RenderChart = ({ mapsDistorsions, rootElId }) =&gt; {\n  const rootEl = document.getElementById(rootElId) as HTMLElement\n\n  rootEl.classList.add(styles.mapDistorsionsChart)\n\n  const width =\n    rootEl.getBoundingClientRect().width - margin.left - margin.right\n\n  const dimensions: Dimension[] = [\n    {\n      name: \&quot;name\&quot;,\n      scale: scalePoint().range([0, height]),\n      type: DimensionType.String,\n    },\n    {\n      name: DimensionName.Acc40,\n      scale: scaleLinear().range([0, height]),\n      type: DimensionType.Number,\n    },\n    {\n      name: DimensionName.Scale,\n      scale: scaleLinear().range([height, 0]),\n      type: DimensionType.Number,\n    },\n    {\n      name: DimensionName.Areal,\n      scale: scaleSqrt().range([height, 0]),\n      type: DimensionType.Number,\n    },\n    {\n      name: DimensionName.Angular,\n      scale: scaleLinear().range([height, 0]),\n      type: DimensionType.Number,\n    },\n  ]\n\n  const svg = select(`#${rootElId}`)\n    .append(\&quot;svg\&quot;)\n    .attr(\&quot;height\&quot;, height + margin.top + margin.bottom)\n    .attr(\&quot;width\&quot;, width + margin.left + margin.right)\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;transform\&quot;, `translate(${margin.left},${margin.top})`)\n\n  svg\n    .append(\&quot;text\&quot;)\n    .attr(\&quot;class\&quot;, \&quot;chart-title\&quot;)\n    .attr(\&quot;text-anchor\&quot;, \&quot;middle\&quot;)\n    .attr(\&quot;transform\&quot;, `translate(${width / 2},-60)`)\n    .text(texts.title)\n    .style(\&quot;font-weight\&quot;, \&quot;bold\&quot;)\n\n  const x = scalePoint()\n    .domain(dimensions.map((dimension) =&gt; dimension.name))\n    .range([0, width])\n\n  const line = lineD3().defined((lineData) =&gt; !isNaN(lineData[1]))\n\n  const dimensionSelection = svg\n    .selectAll(\&quot;.dimension\&quot;)\n    .data(dimensions)\n    .enter()\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, \&quot;dimension\&quot;)\n    .attr(\&quot;transform\&quot;, (dimension) =&gt; `translate(${x(dimension.name)})`)\n\n  filterColor({ deviation: 2, id: \&quot;lines\&quot;, slope: 0.4, svg })\n\n  const sortedData: ProjectionItem[] = mapsDistorsions\n    .slice(0)\n    .sort((...[{ name: nameA }, { name: nameB }]) =&gt; {\n      if (nameA === nameB) {\n        return 0\n      }\n\n      return nameA &lt; nameB ? -1 : 1\n    })\n\n  const colorFn = colorsScale([0, sortedData.length - 1])\n\n  dimensions.forEach((dimItem: Dimension) =&gt;\n    dimItem.scale.domain(\n      dimItem.type === DimensionType.Number\n        ? extent(\n            sortedData,\n            (projection: ProjectionItem) =&gt;\n              +projection[dimItem.name as keyof ProjectionItem]\n          )\n        : sortedData\n            .map((projection: ProjectionItem) =&gt; {\n              const {\n                [dimItem.name as keyof ProjectionItem]: name,\n              } = projection\n\n              return getShortName(name)\n            })\n            .sort()\n    )\n  )\n\n  const draw = (projectionItem: ProjectionItem) =&gt; {\n    const allPoints: Array&lt;[number, number]&gt; = dimensions.map((dimItem) =&gt; {\n      const {\n        [dimItem.name as keyof ProjectionItem]: projectionValue,\n      } = projectionItem\n\n      return [\n        x(dimItem.name) as number,\n        dimItem.scale(\n          typeof projectionValue === \&quot;string\&quot;\n            ? getShortName(projectionValue)\n            : projectionValue\n        ),\n      ]\n    })\n\n    return line(allPoints)\n  }\n\n  svg\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, styles.background)\n    .selectAll(\&quot;path\&quot;)\n    .data&lt;ProjectionItem&gt;(sortedData)\n    .enter()\n    .append(\&quot;path\&quot;)\n    .attr(\&quot;d\&quot;, draw)\n    .style(\&quot;cursor\&quot;, \&quot;pointer\&quot;)\n    .attr(\&quot;title\&quot;, tooltipText)\n    .on(\&quot;click\&quot;, (...[, projectionItem]) =&gt; {\n      window.open(\n        `https://www.google.com/search?${qs.stringify({\n          q: `${projectionItem.name} map projection`,\n          tbm: \&quot;isch\&quot;, // Google Images\n        })}`\n      )\n    })\n\n  svg\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, styles.foreground)\n    .selectAll(\&quot;path\&quot;)\n    .data(sortedData)\n    .enter()\n    .append(\&quot;path\&quot;)\n    .attr(\&quot;d\&quot;, draw)\n    .attr(\&quot;data-title\&quot;, tooltipText)\n\n  dimensionSelection\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, styles.axis)\n    .each(function (dimensionItem: Dimension) {\n      const yAxis = axisLeft(dimensionItem.scale)\n\n      return select(this).call(yAxis)\n    })\n    .append(\&quot;text\&quot;)\n    .attr(\&quot;class\&quot;, styles.title)\n    .attr(\&quot;text-anchor\&quot;, \&quot;middle\&quot;)\n    .attr(\&quot;y\&quot;, axisYOffset)\n    .text((dimensionItem) =&gt; dimensionItem.name)\n\n  svg\n    .select(`.${styles.axis}`)\n    .selectAll&lt;SVGElement, ProjectionItem&gt;(`text:not(.${styles.title})`)\n    .attr(\&quot;class\&quot;, styles.label)\n    .data(sortedData, (projectionItem: ProjectionItem) =&gt; projectionItem.name)\n    .style(\&quot;fill\&quot;, (...[, projectionIndex]: [unknown, number]) =&gt;\n      colorFn(projectionIndex)\n    )\n\n  const moveToFront = function (this: SVGElement) {\n    const parentNode = this.parentNode as HTMLElement\n\n    parentNode.appendChild(this)\n  }\n\n  const projection = svg.selectAll&lt;SVGElement, ProjectionItem&gt;(\n    `.${styles.axis} text,.${styles.background} path,.${styles.foreground} path`\n  )\n\n  const mouseover = (...[, overProjection]: [unknown, ProjectionItem]) =&gt; {\n    svg.selectAll(`.${styles.foreground} path`).style(\&quot;filter\&quot;, \&quot;none\&quot;)\n    svg.classed(styles.active, true)\n    projection.classed(\n      styles.inactive,\n      (otherProjection: ProjectionItem) =&gt;\n        otherProjection.name !== overProjection.name\n    )\n\n    projection\n      .filter(\n        (otherProjection: ProjectionItem) =&gt;\n          otherProjection.name === overProjection.name\n      )\n      .each(moveToFront)\n  }\n\n  const mouseout = () =&gt; {\n    svg\n      .selectAll(`.${styles.foreground} path`)\n      .style(\&quot;filter\&quot;, \&quot;url(#drop-shadow-lines)\&quot;)\n    svg.classed(styles.active, false)\n    projection.classed(styles.inactive, false)\n  }\n\n  svg\n    .selectAll(`.${styles.foreground} path`)\n    .style(\&quot;filter\&quot;, \&quot;url(#drop-shadow-lines)\&quot;)\n    .style(\&quot;stroke\&quot;, (...[, projectionItemIndex]) =&gt;\n      colorFn(projectionItemIndex)\n    )\n\n  projection.on(\&quot;mouseover\&quot;, mouseover).on(\&quot;mouseout\&quot;, mouseout)\n\n  $(`.${styles.background} path, .${styles.foreground} path`).tooltip({\n    track: true,\n  })\n}\n\nconst main = async () =&gt; {\n  const mapsDistorsions = await fetchData()\n  const rootElId = \&quot;chart\&quot;\n\n  renderChart({ mapsDistorsions, rootElId })\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;map-distorsions&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/map-distorsions/map-distorsions\&quot;\n\nconst MapDistorsions = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo\n    links={[\&quot;/vendors/jquery-ui/themes/base/jquery-ui.min.css\&quot;]}\n    main={main}\n    pageContext={pageContext}\n    scripts={[\&quot;/vendors/jquery-ui/jquery-ui.min.js\&quot;]}\n  &gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default MapDistorsions\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;map-distorsions&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Cuadruple variable example using D3.js, with a colored chart and four axis that are connected by lines and with an improved and depurated style.&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Tue, 24 Aug 2021 23:20:02 GMT</p>
    </body>
  </html>
  