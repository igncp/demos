
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/fish-eye/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-fish-eye-tsx&quot;,&quot;path&quot;:&quot;/d3js/fish-eye/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;dataFiles&quot;:[&quot;data.json&quot;],&quot;docs&quot;:[],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Fish Eye&quot;,&quot;notes&quot;:[&quot;Uses the Fish Eye plugin&quot;,&quot;Changed style&quot;,&quot;Click to stop and show a pointer&quot;,&quot;Extended the title information&quot;],&quot;sources&quot;:[&quot;http://bost.ocks.org/mike/fisheye/&quot;],&quot;summary&quot;:[],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.fishEyeChart {\n  text {\n    font: 10px sans-serif;\n    text-shadow: 1px 1px 1px #ccc;\n  }\n\n  .axis path,\n  .axis line {\n    fill: none;\n    shape-rendering: crispEdges;\n    stroke: #eee;\n  }\n\n  .background {\n    fill: none;\n    pointer-events: all;\n  }\n\n  .chartTitle {\n    font-size: 14px;\n  }\n\n  .pointer {\n    fill: #7aae61;\n    font-size: 15px;\n    opacity: 0;\n  }\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import {\n  Axis,\n  ScaleOrdinal,\n  ScalePower,\n  Selection,\n  axisBottom,\n  axisLeft,\n  format,\n  json,\n  pointer as pointerD3,\n  scaleLinear,\n  scaleLog,\n  scaleOrdinal,\n  scaleSqrt,\n  schemePastel2,\n  select,\n} from \&quot;d3\&quot;\n\nimport d3Fisheye, { FishEyeScale } from \&quot;@/demos/_utils/fish-eye\&quot;\n\nimport * as styles from \&quot;./fish-eye.module.css\&quot;\n\ntype IncomeMetric = {\n  income: number\n  lifeExpectancy: number\n  name: string\n  population: number\n  region: string\n}\n\nconst fetchData = async (): Promise&lt;IncomeMetric[] | undefined&gt; =&gt;\n  json(`${ROOT_PATH}data/d3js/fish-eye/data.json`)\n\nconst humanizeNumber = (initialN: number): string =&gt; {\n  let numStr = initialN.toString()\n\n  while (true) {\n    const numStrFormatted = numStr.replace(/(\\d)(\\d{3})($|,|\\.)/g, \&quot;$1,$2$3\&quot;)\n\n    if (numStrFormatted === numStr) {\n      break\n    }\n\n    numStr = numStrFormatted\n  }\n\n  return numStr\n}\n\nconst margin = {\n  bottom: 70,\n  left: 70,\n  right: 50,\n  top: 80,\n}\nconst height = 700 - margin.top - margin.bottom\n\ntype FishEyeChartOpts = {\n  incomeMetrics: IncomeMetric[]\n  rootElId: string\n}\n\nclass FishEyeChart {\n  private readonly rootElId: string\n  private readonly incomeMetrics: IncomeMetric[]\n\n  private width!: number\n\n  private dom!: {\n    dot?: Selection&lt;SVGCircleElement, IncomeMetric, SVGGElement, unknown&gt;\n    pointer?: Selection&lt;SVGTextElement, unknown, HTMLElement, unknown&gt;\n    svg: Selection&lt;SVGGElement, unknown, HTMLElement, unknown&gt;\n    xAxis?: Axis&lt;IncomeMetric[\&quot;income\&quot;]&gt;\n    yAxis?: Axis&lt;IncomeMetric[\&quot;lifeExpectancy\&quot;]&gt;\n  }\n\n  private vars!: {\n    colorScale: ScaleOrdinal&lt;string, string&gt;\n    focused: boolean\n    radiusScale: ScalePower&lt;number, number&gt;\n    xScale: FishEyeScale\n    yScale: FishEyeScale\n  }\n\n  public constructor({ incomeMetrics, rootElId }: FishEyeChartOpts) {\n    this.rootElId = rootElId\n    this.incomeMetrics = incomeMetrics\n\n    this.setupRootEl()\n    this.setVars()\n    this.setDom()\n  }\n\n  public render() {\n    this.setChartTitle()\n    this.setBackground()\n    this.setPointer()\n    this.setFilter()\n    this.setAxis()\n    this.setLabels()\n    this.setDots()\n    this.setTitles()\n    this.bindMousemove()\n    this.bindClick()\n  }\n\n  private setupRootEl() {\n    const rootEl = document.getElementById(this.rootElId) as HTMLElement\n\n    rootEl.classList.add(styles.fishEyeChart)\n\n    this.width =\n      rootEl.getBoundingClientRect().width - margin.left - margin.right\n  }\n\n  private setDom() {\n    this.dom = {\n      svg: select(`#${this.rootElId}`)\n        .append(\&quot;svg\&quot;)\n        .attr(\&quot;width\&quot;, this.width + margin.left + margin.right)\n        .attr(\&quot;height\&quot;, height + margin.top + margin.bottom)\n        .append(\&quot;g\&quot;)\n        .attr(\&quot;transform\&quot;, `translate(${margin.left},${margin.top})`),\n    }\n  }\n\n  private setChartTitle() {\n    this.dom.svg\n      .append(\&quot;text\&quot;)\n      .attr(\&quot;class\&quot;, styles.chartTitle)\n      .attr(\&quot;text-anchor\&quot;, \&quot;middle\&quot;)\n      .attr(\&quot;transform\&quot;, `translate(${this.width / 2},-40)`)\n      .text(\n        \&quot;Income Per Capita vs \&quot; +\n          \&quot;Life Expectancy vs Population vs Region - 180 Countries\&quot;\n      )\n      .style(\&quot;font-weight\&quot;, \&quot;bold\&quot;)\n  }\n\n  private setVars() {\n    const colorScale = scaleOrdinal&lt;string&gt;()\n      .domain([\n        \&quot;Sub-Saharan Africa\&quot;,\n        \&quot;South Asia\&quot;,\n        \&quot;Middle East &amp; North Africa\&quot;,\n        \&quot;America\&quot;,\n        \&quot;Europe &amp; Central Asia\&quot;,\n        \&quot;East Asia &amp; Pacific\&quot;,\n      ])\n      .range(schemePastel2)\n\n    const radiusScale = scaleSqrt().domain([0, 5e8]).range([5, 60])\n    const xScale = d3Fisheye\n      .scale(scaleLog)\n      .domain([300, 1e5])\n      .range([0, this.width])\n    const yScale = d3Fisheye\n      .scale(scaleLinear)\n      .domain([20, 90])\n      .range([height, 0])\n\n    this.vars = {\n      colorScale,\n      focused: false,\n      radiusScale,\n      xScale,\n      yScale,\n    }\n  }\n\n  private setAxis() {\n    this.dom.xAxis = axisBottom&lt;IncomeMetric[\&quot;population\&quot;]&gt;(this.vars.xScale)\n      .tickFormat(format(\&quot;,d\&quot;))\n      .tickSize(-height)\n    this.dom.yAxis = axisLeft&lt;IncomeMetric[\&quot;income\&quot;]&gt;(\n      this.vars.yScale\n    ).tickSize(-this.width)\n    this.dom.svg\n      .append(\&quot;g\&quot;)\n      .attr(\&quot;class\&quot;, `x ${styles.axis}`)\n      .attr(\&quot;transform\&quot;, `translate(0,${height})`)\n      .call(this.dom.xAxis)\n    this.dom.svg\n      .append(\&quot;g\&quot;)\n      .attr(\&quot;class\&quot;, `y ${styles.axis}`)\n      .call(this.dom.yAxis)\n  }\n\n  private setBackground() {\n    return this.dom.svg\n      .append(\&quot;rect\&quot;)\n      .attr(\&quot;class\&quot;, styles.background)\n      .attr(\&quot;width\&quot;, this.width)\n      .attr(\&quot;height\&quot;, height)\n  }\n\n  private setLabels() {\n    this.dom.svg\n      .append(\&quot;text\&quot;)\n      .attr(\&quot;class\&quot;, \&quot;x label\&quot;)\n      .attr(\&quot;text-anchor\&quot;, \&quot;end\&quot;)\n      .attr(\&quot;x\&quot;, this.width - 26)\n      .attr(\&quot;y\&quot;, height + 26)\n      .text(\&quot;income per capita, inflation-adjusted (dollars)\&quot;)\n\n    this.dom.svg\n      .append(\&quot;text\&quot;)\n      .attr(\&quot;class\&quot;, \&quot;y label\&quot;)\n      .attr(\&quot;text-anchor\&quot;, \&quot;end\&quot;)\n      .attr(\&quot;x\&quot;, -26)\n      .attr(\&quot;y\&quot;, -40)\n      .attr(\&quot;dy\&quot;, \&quot;.75em\&quot;)\n      .attr(\&quot;transform\&quot;, \&quot;rotate(-90)\&quot;)\n      .text(\&quot;life expectancy (years)\&quot;)\n  }\n\n  private setFilter() {\n    const defs = this.dom.svg.append(\&quot;defs\&quot;)\n    const filter = defs.append(\&quot;filter\&quot;).attr(\&quot;id\&quot;, `drop-shadow-circles`)\n\n    filter\n      .attr(\&quot;height\&quot;, \&quot;500%\&quot;)\n      .attr(\&quot;width\&quot;, \&quot;500%\&quot;)\n      .attr(\&quot;x\&quot;, \&quot;-200%\&quot;)\n      .attr(\&quot;y\&quot;, \&quot;-200%\&quot;)\n\n    filter\n      .append(\&quot;feOffset\&quot;)\n      .attr(\&quot;dx\&quot;, 0.5)\n      .attr(\&quot;dy\&quot;, 0.5)\n      .attr(\&quot;in\&quot;, \&quot;SourceGraphic\&quot;)\n      .attr(\&quot;result\&quot;, \&quot;offOut\&quot;)\n\n    filter\n      .append(\&quot;feGaussianBlur\&quot;)\n      .attr(\&quot;in\&quot;, \&quot;offOut\&quot;)\n      .attr(\&quot;result\&quot;, \&quot;blurOut\&quot;)\n      .attr(\&quot;stdDeviation\&quot;, 1.5)\n\n    filter\n      .append(\&quot;feBlend\&quot;)\n      .attr(\&quot;in\&quot;, \&quot;SourceGraphic\&quot;)\n      .attr(\&quot;in2\&quot;, \&quot;blurOut\&quot;)\n      .attr(\&quot;mode\&quot;, \&quot;normal\&quot;)\n\n    filter\n      .append(\&quot;feComponentTransfer\&quot;)\n      .append(\&quot;feFuncA\&quot;)\n      .attr(\&quot;slope\&quot;, 0.6)\n      .attr(\&quot;type\&quot;, \&quot;linear\&quot;)\n  }\n\n  private position() {\n    this.dom\n      .dot!.attr(\&quot;cx\&quot;, (incomeMetric) =&gt; this.vars.xScale(incomeMetric.income))\n      .attr(\&quot;cy\&quot;, (incomeMetric) =&gt;\n        this.vars.yScale(incomeMetric.lifeExpectancy)\n      )\n      .attr(\&quot;r\&quot;, (incomeMetric) =&gt;\n        this.vars.radiusScale(incomeMetric.population)\n      )\n  }\n\n  private setDots() {\n    this.dom.dot = this.dom.svg\n      .append(\&quot;g\&quot;)\n      .attr(\&quot;class\&quot;, \&quot;dots\&quot;)\n      .selectAll(\&quot;.dot\&quot;)\n      .data&lt;IncomeMetric&gt;(this.incomeMetrics)\n      .enter()\n      .append(\&quot;circle\&quot;)\n      .attr(\&quot;class\&quot;, \&quot;dot\&quot;)\n      .style(\&quot;fill\&quot;, (incomeMetric) =&gt;\n        this.vars.colorScale(incomeMetric.region)\n      )\n      .style(\&quot;filter\&quot;, \&quot;url(#drop-shadow-circles)\&quot;)\n      .style(\&quot;stroke\&quot;, \&quot;black\&quot;)\n      .style(&#x27;\&quot;stroke-width\&quot;&#x27;, \&quot;1px\&quot;)\n      .sort(\n        (...[incomeMetricA, incomeMetricB]) =&gt;\n          incomeMetricB.population - incomeMetricA.population\n      )\n\n    this.position()\n  }\n\n  private setTitles() {\n    this.dom\n      .dot!.append(\&quot;title\&quot;)\n      .text(\n        (incomeMetric) =&gt;\n          `${incomeMetric.name}:\\n- Income: ${humanizeNumber(\n            incomeMetric.income\n          )} $/P.C.\\n` +\n          `- Population: ${humanizeNumber(incomeMetric.population)}\\n` +\n          `- Life expectancy: ${incomeMetric.lifeExpectancy} years`\n      )\n  }\n\n  private zoom(ev: Event) {\n    const mouse = pointerD3(ev)\n\n    this.vars.xScale.distortion(2.5).focus(mouse[0])\n    this.vars.yScale.distortion(2.5).focus(mouse[1])\n    this.position()\n\n    this.dom.svg.select&lt;SVGGElement&gt;(`.x.${styles.axis}`).call(this.dom.xAxis!)\n    this.dom.svg.select&lt;SVGGElement&gt;(`.y.${styles.axis}`).call(this.dom.yAxis!)\n  }\n\n  private setPointer() {\n    this.dom.pointer = this.dom.svg\n      .append(\&quot;text\&quot;)\n      .text(\&quot;+\&quot;)\n      .attr(\&quot;class\&quot;, styles.pointer)\n  }\n\n  private bindMousemove() {\n    return this.dom.svg.on(\&quot;mousemove\&quot;, (ev) =&gt; {\n      if (!this.vars.focused) {\n        this.zoom(ev)\n      }\n    })\n  }\n\n  private bindClick() {\n    this.dom.svg.on(\&quot;click\&quot;, (ev: Event) =&gt; {\n      this.vars.focused = !this.vars.focused\n\n      if (this.vars.focused) {\n        const pointer = pointerD3(this)\n\n        this.dom\n          .pointer!.attr(\&quot;x\&quot;, pointer[0])\n          .attr(\&quot;y\&quot;, pointer[1])\n          .style(\&quot;opacity\&quot;, 1)\n\n        return\n      }\n\n      this.dom.pointer!.style(\&quot;opacity\&quot;, 0)\n\n      this.zoom(ev)\n    })\n  }\n}\n\nconst main = async () =&gt; {\n  const incomeMetrics = await fetchData()\n\n  const chart = new FishEyeChart({\n    incomeMetrics: incomeMetrics as IncomeMetric[],\n    rootElId: \&quot;chart\&quot;,\n  })\n\n  chart.render()\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;fish-eye&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/fish-eye/fish-eye\&quot;\n\nconst FishEye = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo main={main} pageContext={pageContext}&gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default FishEye\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;fish-eye&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Fisheye Chart example using D3.js, with the Fisheye plugin. It has a more depurated style, and the ability to stop the scale changes when it&#x27;s clicked.&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Mon, 30 Aug 2021 23:07:33 GMT</p>
    </body>
  </html>
  