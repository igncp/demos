
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/area/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-area-tsx&quot;,&quot;path&quot;:&quot;/d3js/area/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;data&quot;:[&quot;data.csv&quot;],&quot;docs&quot;:[[&quot;d3-selection API reference&quot;,&quot;https://github.com/d3/d3-selection#api-reference&quot;],[&quot;d3-selection Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-selection/index.d.ts&quot;],[&quot;d3-shape API reference&quot;,&quot;https://github.com/d3/d3-shape#api-reference&quot;],[&quot;d3-shape Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-shape/index.d.ts&quot;],[&quot;d3-scale API reference&quot;,&quot;https://github.com/d3/d3-scale#api-reference&quot;],[&quot;d3-scale Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-scale/index.d.ts&quot;],[&quot;d3-axis API reference&quot;,&quot;https://github.com/d3/d3-axis#api-reference&quot;],[&quot;d3-axis Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-axis/index.d.ts&quot;],[&quot;d3-delaunay API reference&quot;,&quot;https://github.com/d3/d3-delaunay#api-reference&quot;],[&quot;d3-delaunay Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-delaunay/index.d.ts&quot;],[&quot;Delaunay Triangulation Wikipedia Article&quot;,&quot;https://en.wikipedia.org/wiki/Delaunay_triangulation&quot;]],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Area&quot;,&quot;notes&quot;:[&quot;Changed style&quot;,&quot;Added point and voronoi functionality&quot;],&quot;sources&quot;:[&quot;http://codepen.io/notno/pen/ilvsd&quot;],&quot;summary&quot;:[&quot;This chart is a mix of a common area + line chart plus Voronoi to properly display the points on mouse move. For the x and y axis, it uses two linear scales. It uses a SVG &#x27;path&#x27; for printing the area, and a different SVG &#x27;path&#x27; to print the line.&quot;,&quot;It uses an SVG &#x27;clipPath&#x27; element with a &#x27;rect&#x27; to limit the area and line paths. This doesn&#x27;t look necessary, because after removing it, the area has the same dimensions. However I kept it because it was in the original source and it showcases this approach.&quot;,&quot;The voronoi lines are applied to a SVG &#x27;path&#x27; element using &#x27;voronoi.renderCell&#x27;. Because no context is passed to this method, it returns the SVG path by default. Each fragment of the voronoi chart has a fill value with opacity 0 in order to detect the mouse events.&quot;,&quot;The only return value from the render function is a function to allow toggling the visibility of the voronoi lines. This is done by changing the CSS class without re-rendering.&quot;],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.areaChart {\n  path.line {\n    fill: none;\n    stroke: #25a6fc;\n    stroke-width: 3.5px;\n  }\n\n  path.area {\n    fill: #6e6ea7;\n    opacity: 0.5;\n  }\n\n  .axis {\n    fill: #333;\n    shape-rendering: crispEdges;\n  }\n\n  .chartTitle {\n    font-weight: bold;\n  }\n\n  .x.axis .minor {\n    fill: #000;\n  }\n\n  .axis path,\n  .axis line {\n    fill: none;\n    shape-rendering: crispEdges;\n    stroke: #ccc;\n  }\n\n  .y.axis line,\n  .y.axis path,\n  .x.axis line,\n  .x.axis path {\n    fill: none;\n    stroke: #ccc;\n  }\n\n  .voronoi {\n    fill: black;\n    opacity: 0;\n    stroke: black;\n    stroke-width: 0.1;\n  }\n\n  .voronoi.showVoronoi {\n    fill: rgba(0, 0, 0, 0);\n    opacity: 1;\n    stroke-width: 1;\n  }\n\n  .point {\n    display: none;\n    fill: #69d895;\n  }\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import { renderChart } from \&quot;./area-chart\&quot;\nimport { Point, createChartConfig, fetchData } from \&quot;./area-chart-data\&quot;\n\nconst main = async () =&gt; {\n  const data = await fetchData()\n  const chartConfig = createChartConfig(data)\n\n  const { toggleVoronoi } = renderChart&lt;Point&gt;(chartConfig)\n\n  ;(document.getElementById(\&quot;toggle-voronoi\&quot;) as HTMLElement).addEventListener(\n    \&quot;click\&quot;,\n    (e) =&gt; {\n      e.preventDefault()\n\n      toggleVoronoi()\n    }\n  )\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;area&quot;},{&quot;content&quot;:&quot;import { csv } from \&quot;d3\&quot;\n\nimport { ChartConfig } from \&quot;./area-chart\&quot;\n\ntype PointBase = {\n  percent: number\n  year: number\n}\n\nexport type Point = PointBase &amp; {\n  index: number\n}\n\nexport const fetchData = async (): Promise&lt;Point[]&gt; =&gt; {\n  const result = (await (csv(\n    `${ROOT_PATH}data/d3js/area/data.csv`\n  ) as unknown)) as PointBase[]\n\n  return result.map((p, index) =&gt; ({\n    ...p,\n    index,\n  }))\n}\n\ntype Config = ChartConfig&lt;Point&gt;\n\nconst getItemXValue: Config[\&quot;getItemXValue\&quot;] = (point) =&gt; point.year\nconst getItemYValue: Config[\&quot;getItemYValue\&quot;] = (point) =&gt; point.percent / 100\nconst getItemId: Config[\&quot;getItemId\&quot;] = (point) =&gt; point.index\nconst getItemTitle: Config[\&quot;getItemTitle\&quot;] = (point: Point) =&gt;\n  `Year: ${point.year}, Percent: ${point.percent}%`\nconst getChartTitle = () =&gt;\n  \&quot;Share of top decile [aka top 10%] in national income\&quot;\n\nexport const createChartConfig = (items: Point[]): ChartConfig&lt;Point&gt; =&gt; ({\n  getChartTitle,\n  getItemId,\n  getItemTitle,\n  getItemXValue,\n  getItemYValue,\n  items,\n  rootElId: \&quot;chart\&quot;,\n})\n&quot;,&quot;fileName&quot;:&quot;area-chart-data&quot;},{&quot;content&quot;:&quot;import {\n  Selection,\n  area as areaD3,\n  axisBottom,\n  axisLeft,\n  format,\n  line as lineD3,\n  max,\n  min,\n  scaleLinear,\n  scaleQuantize,\n  select,\n} from \&quot;d3\&quot;\nimport { Delaunay } from \&quot;d3-delaunay\&quot;\n\nimport * as styles from \&quot;./area.module.css\&quot;\n\nconst filterBlackOpacity = (\n  id: string,\n  svg: Selection&lt;SVGGElement, unknown, HTMLElement, unknown&gt;,\n  deviation: number,\n  slope: number\n) =&gt; {\n  const defs = svg.append(\&quot;defs\&quot;)\n  const filter = defs\n    .append(\&quot;filter\&quot;)\n    .attr(\&quot;height\&quot;, \&quot;500%\&quot;)\n    .attr(\&quot;id\&quot;, `drop-shadow-${id}`)\n    .attr(\&quot;width\&quot;, \&quot;500%\&quot;)\n    .attr(\&quot;x\&quot;, \&quot;-200%\&quot;)\n    .attr(\&quot;y\&quot;, \&quot;-200%\&quot;)\n\n  filter\n    .append(\&quot;feGaussianBlur\&quot;)\n    .attr(\&quot;in\&quot;, \&quot;SourceAlpha\&quot;)\n    .attr(\&quot;stdDeviation\&quot;, deviation)\n\n  filter.append(\&quot;feOffset\&quot;).attr(\&quot;dx\&quot;, 1).attr(\&quot;dy\&quot;, 1)\n  filter\n    .append(\&quot;feComponentTransfer\&quot;)\n    .append(\&quot;feFuncA\&quot;)\n    .attr(\&quot;slope\&quot;, slope)\n    .attr(\&quot;type\&quot;, \&quot;linear\&quot;)\n\n  const feMerge = filter.append(\&quot;feMerge\&quot;)\n\n  feMerge.append(\&quot;feMergeNode\&quot;)\n\n  feMerge.append(\&quot;feMergeNode\&quot;).attr(\&quot;in\&quot;, \&quot;SourceGraphic\&quot;)\n}\n\nexport type ChartConfig&lt;A&gt; = {\n  getChartTitle: () =&gt; string\n  getItemId: (a: A) =&gt; number\n  getItemTitle: (a: A) =&gt; string\n  getItemXValue: (a: A) =&gt; number\n  getItemYValue: (a: A) =&gt; number\n  items: A[]\n  rootElId: string\n}\n\ntype ChartReturn = {\n  toggleVoronoi: () =&gt; void\n}\n\nexport const renderChart = &lt;A&gt;(chartConfig: ChartConfig&lt;A&gt;): ChartReturn =&gt; {\n  const { items, rootElId } = chartConfig\n  const { width: elWidth } = (document.getElementById(\n    rootElId\n  ) as HTMLElement).getBoundingClientRect()\n  const isSmallDevice = elWidth &lt; 500\n\n  const margin = {\n    bottom: 50,\n    left: isSmallDevice ? 50 : 70,\n    right: isSmallDevice ? 10 : 50,\n    top: 50,\n  }\n\n  const height = 400 - margin.top - margin.bottom\n  const titleYOffset = -15\n  const axisTickSize = 10\n\n  const width = elWidth - margin.left - margin.right\n\n  const svg = select(`#${rootElId}`)\n    .append(\&quot;svg\&quot;)\n    .attr(\&quot;height\&quot;, height + margin.top + margin.bottom)\n    .attr(\&quot;width\&quot;, width + margin.left + margin.right)\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;transform\&quot;, `translate(${margin.left},${margin.top})`)\n    .attr(\&quot;class\&quot;, styles.areaChart)\n\n  svg\n    .append(\&quot;text\&quot;)\n    .attr(\&quot;class\&quot;, styles.chartTitle)\n    .attr(\&quot;text-anchor\&quot;, \&quot;middle\&quot;)\n    .attr(\&quot;transform\&quot;, `translate(${width / 2},${titleYOffset})`)\n    .text(chartConfig.getChartTitle())\n    .style(\&quot;font-weight\&quot;, \&quot;bold\&quot;)\n\n  filterBlackOpacity(\&quot;points\&quot;, svg, 2, 0.5)\n\n  const xMax = max(items, chartConfig.getItemXValue) as number\n  const xMin = min(items, chartConfig.getItemXValue) as number\n\n  const yMax = max(items, chartConfig.getItemYValue) as number\n  const yMin = min(items, chartConfig.getItemYValue) as number\n\n  const xScale = scaleLinear().domain([xMin, xMax]).range([0, width])\n  const yScale = scaleLinear()\n    .domain([yMax + 0.05, yMin - 0.05])\n    .range([0, height])\n\n  const extractXScale = (d: A) =&gt; xScale(chartConfig.getItemXValue(d))\n  const extractYScale = (d: A) =&gt; yScale(chartConfig.getItemYValue(d))\n\n  const getSmallDeviceTicksScale = () =&gt;\n    scaleQuantize()\n      .domain([0, 500])\n      .range(Array.from({ length: 6 }).map((_, i) =&gt; i))\n\n  const ticks = isSmallDevice ? getSmallDeviceTicksScale()(elWidth) : null\n\n  const xAxis = axisBottom(xScale).tickFormat(format(\&quot;.0f\&quot;)).ticks(ticks)\n  const yAxis = axisLeft(yScale)\n    .tickFormat(format(\&quot;.0%\&quot;))\n    .tickSize(axisTickSize)\n\n  svg\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, `${styles.x} ${styles.axis}`)\n    .attr(\&quot;transform\&quot;, `translate(0,${height})`)\n    .call(xAxis)\n    .selectAll(\&quot;text\&quot;)\n    .attr(\&quot;dy\&quot;, \&quot;1.25em\&quot;)\n\n  svg\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, `${styles.y} ${styles.axis}`)\n    .call(yAxis)\n    .selectAll(\&quot;text\&quot;)\n    .attr(\&quot;dx\&quot;, \&quot;-.25em\&quot;)\n\n  const area = areaD3&lt;A&gt;().x(extractXScale).y0(height).y1(extractYScale)\n  const line = lineD3&lt;A&gt;().x(extractXScale).y(extractYScale)\n\n  svg\n    .append(\&quot;path\&quot;)\n    .datum(items)\n    .attr(\&quot;class\&quot;, styles.line)\n    .attr(\&quot;d\&quot;, line)\n    .attr(\&quot;clip-path\&quot;, \&quot;url(#clip)\&quot;)\n\n  svg\n    .append(\&quot;clipPath\&quot;)\n    .attr(\&quot;id\&quot;, \&quot;clip\&quot;)\n    .append(\&quot;rect\&quot;)\n    .attr(\&quot;height\&quot;, height)\n    .attr(\&quot;width\&quot;, width)\n\n  svg\n    .append(\&quot;path\&quot;)\n    .datum(items)\n    .attr(\&quot;class\&quot;, styles.area)\n    .attr(\&quot;d\&quot;, area)\n    .attr(\&quot;clip-path\&quot;, \&quot;url(#clip)\&quot;)\n\n  const voronoi = Delaunay.from(items, extractXScale, extractYScale).voronoi([\n    -margin.left,\n    -margin.top,\n    width + margin.right,\n    height + margin.bottom,\n  ])\n\n  const mouseover = (_e: unknown, d: A) =&gt; {\n    select(`.point-${chartConfig.getItemId(d)}`).style(\&quot;display\&quot;, \&quot;block\&quot;)\n  }\n\n  const mouseleave = (_mouseEvent: unknown, d: A) =&gt; {\n    select(`.point-${chartConfig.getItemId(d)}`).style(\&quot;display\&quot;, \&quot;none\&quot;)\n  }\n\n  svg\n    .selectAll(\&quot;circle\&quot;)\n    .data(items)\n    .enter()\n    .append(\&quot;circle\&quot;)\n    .attr(\n      \&quot;transform\&quot;,\n      (item: A) =&gt; `translate(${extractXScale(item)},${extractYScale(item)})`\n    )\n    .attr(\&quot;r\&quot;, \&quot;5px\&quot;)\n    .attr(\n      \&quot;class\&quot;,\n      (item) =&gt; `${styles.point} point-${chartConfig.getItemId(item)}`\n    )\n    .style(\&quot;filter\&quot;, \&quot;url(#drop-shadow-points)\&quot;)\n\n  const voronoiGroup = svg.append(\&quot;g\&quot;).attr(\&quot;class\&quot;, styles.voronoi)\n\n  voronoiGroup\n    .selectAll(\&quot;path\&quot;)\n    .data(items)\n    .enter()\n    .append(\&quot;path\&quot;)\n    .attr(\&quot;d\&quot;, (item) =&gt; voronoi.renderCell(chartConfig.getItemId(item)))\n    .on(\&quot;mouseover\&quot;, mouseover)\n    .on(\&quot;mouseleave\&quot;, mouseleave)\n    .attr(\&quot;class\&quot;, \&quot;voronoi-group\&quot;)\n    .attr(\&quot;title\&quot;, chartConfig.getItemTitle)\n\n  $(\&quot;.voronoi-group\&quot;).tooltip({\n    track: true,\n  })\n\n  return {\n    toggleVoronoi: () =&gt; {\n      const currentClass = voronoiGroup.attr(\&quot;class\&quot;)\n      const { showVoronoi } = styles\n\n      const newClass = currentClass.includes(showVoronoi)\n        ? currentClass.replace(showVoronoi, \&quot;\&quot;).trim()\n        : `${currentClass} ${showVoronoi}`\n\n      voronoiGroup.attr(\&quot;class\&quot;, newClass)\n    },\n  }\n}\n&quot;,&quot;fileName&quot;:&quot;area-chart&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/area/area\&quot;\n\nconst Area = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo\n    links={[\&quot;/vendors/jquery-ui/themes/base/jquery-ui.min.css\&quot;]}\n    main={main}\n    pageContext={pageContext}\n    scripts={[\&quot;/vendors/jquery-ui/jquery-ui.min.js\&quot;]}\n  &gt;\n    &lt;form&gt;\n      &lt;button className=\&quot;btn btn-info\&quot; id=\&quot;toggle-voronoi\&quot; type=\&quot;button\&quot;&gt;\n        Toggle Voronoi\n      &lt;/button&gt;\n    &lt;/form&gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default Area\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;area&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Area Chart example, using D3.js, with a transparent Voronoi overlay that gives the functionality know fast the nearest point to the mouse.&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 18 Aug 2021 22:45:40 GMT</p>
    </body>
  </html>
  