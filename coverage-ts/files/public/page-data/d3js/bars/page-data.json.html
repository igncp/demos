
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/bars/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-bars-tsx&quot;,&quot;path&quot;:&quot;/d3js/bars/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;dataFiles&quot;:[&quot;data.json&quot;],&quot;docs&quot;:[],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Bars&quot;,&quot;notes&quot;:[&quot;Added axis&quot;,&quot;Changed direction and added color transition for wave effect&quot;,&quot;Added transition in axis and the add item possibility&quot;,&quot;The interval stops when you place the mouse over a bar&quot;],&quot;sources&quot;:[&quot;http://codepen.io/basemoz/pen/mBoiL&quot;],&quot;summary&quot;:[],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.barsChart {\n  $axisColor: #777;\n\n  rect {\n    stroke: white;\n  }\n\n  .axis {\n    path {\n      fill: none;\n      stroke: $axisColor;\n      stroke-width: 1px;\n    }\n\n    :global .tick line {\n      stroke: $axisColor;\n    }\n  }\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import {\n  Selection,\n  axisBottom,\n  axisLeft,\n  extent,\n  max,\n  range,\n  scaleLinear,\n  select,\n} from \&quot;d3\&quot;\n\nimport * as styles from \&quot;./bars.module.css\&quot;\n\ntype BarData = number\n\nconst height = 500\nconst margin = { left: 160, top: 100 }\nconst floor = height - margin.top * 2\n\nconst barWidth = 30\nconst barHeight = 7\n\nconst colours = [\&quot;#323247\&quot;, \&quot;#7C7CC9\&quot;, \&quot;#72B66C\&quot;, \&quot;#429742\&quot;]\nconst barYFn = (barItem: BarData) =&gt; floor - barHeight * barItem\nconst barHeightFn = (barItem: BarData) =&gt; barItem * barHeight\n\nconst fetchData = async (): Promise&lt;BarData[]&gt; =&gt; {\n  const rawData = await fetch(`${ROOT_PATH}data/d3js/bars/data.json`)\n\n  return rawData.json()\n}\n\ntype BarsChartOpts = {\n  bars: BarData[]\n  rootElId: string\n}\n\ntype Interval = ReturnType&lt;typeof setInterval&gt;\ntype Chart = Selection&lt;SVGGElement, unknown, HTMLElement, unknown&gt;\ntype ColorFn = (c: BarData) =&gt; string\n\nclass BarsChart {\n  private readonly bars: BarData[]\n  private readonly rootElId: string\n  private interval: Interval | null\n  private chart: Chart | null\n  private color: ColorFn | null\n\n  public constructor({ bars, rootElId }: BarsChartOpts) {\n    this.bars = bars\n    this.rootElId = rootElId\n\n    this.interval = null\n    this.chart = null\n    this.color = null\n  }\n\n  public render() {\n    const { bars, rootElId } = this\n    const { width } = (document.getElementById(\n      rootElId\n    ) as HTMLElement).getBoundingClientRect()\n\n    const colorScale = scaleLinear()\n      .domain(extent(bars) as [BarData, BarData])\n      .range([0, 1])\n    const heatmapColour: ColorFn = scaleLinear&lt;string&gt;()\n      .domain(range(0, 1, 1.0 / colours.length))\n      .range(colours)\n\n    const color = (barItem: BarData) =&gt; heatmapColour(colorScale(barItem))\n\n    this.color = color as ColorFn\n\n    const svg = select(`#${rootElId}`).append(\&quot;svg\&quot;)\n\n    svg\n      .attr(\&quot;height\&quot;, height)\n      .attr(\&quot;width\&quot;, width)\n      .attr(\&quot;class\&quot;, styles.barsChart)\n\n    const chart = svg.append(\&quot;g\&quot;)\n\n    this.chart = chart\n\n    chart.attr(\&quot;transform\&quot;, `translate(${margin.left},${margin.top})`)\n\n    this.interval = setInterval(this.getIntervalFn(), 1000)\n\n    const x = scaleLinear()\n      .domain([0.5, bars.length + 0.5])\n      .range([1, barWidth * bars.length])\n\n    const y = scaleLinear()\n      .domain([0, max(bars) as number])\n      .rangeRound([0, -1 * barHeight * (max(bars) as number)])\n\n    const xAxisG = chart.append(\&quot;g\&quot;)\n\n    xAxisG\n      .attr(\&quot;class\&quot;, `xAxis ${styles.axis}`)\n      .attr(\&quot;transform\&quot;, `translate(0,${floor})`)\n      .call(axisBottom(x))\n\n    xAxisG\n      .append(\&quot;text\&quot;)\n      .attr(\&quot;transform\&quot;, `translate(${(barWidth * bars.length) / 2} ,0)`)\n      .attr(\&quot;class\&quot;, \&quot;xAxisLabel\&quot;)\n      .attr(\&quot;y\&quot;, 40)\n      .attr(\&quot;font-size\&quot;, \&quot;1.3em\&quot;)\n      .attr(\&quot;fill\&quot;, \&quot;black\&quot;)\n      .style(\&quot;text-anchor\&quot;, \&quot;end\&quot;)\n      .text(\&quot;Number\&quot;)\n\n    const yAxisG = chart.append(\&quot;g\&quot;)\n\n    yAxisG\n      .attr(\&quot;class\&quot;, `yAxis ${styles.axis}`)\n      .attr(\&quot;transform\&quot;, `translate(0,${floor})`)\n      .call(axisLeft(y))\n\n    yAxisG\n      .append(\&quot;text\&quot;)\n      .attr(\&quot;transform\&quot;, `translate(-30,${(-1 * (height - 60)) / 2})`)\n      .attr(\&quot;y\&quot;, 40)\n      .attr(\&quot;font-size\&quot;, \&quot;1.3em\&quot;)\n      .attr(\&quot;fill\&quot;, \&quot;black\&quot;)\n      .style(\&quot;text-anchor\&quot;, \&quot;end\&quot;)\n      .text(\&quot;Value\&quot;)\n\n    this.drawRectangles()\n  }\n\n  public refresh() {\n    this.drawRectangles()\n    this.redraw()\n  }\n\n  private clearInterval() {\n    if (this.interval) {\n      clearInterval(this.interval)\n    }\n  }\n\n  private drawRectangles() {\n    const { bars, chart, color } = this\n\n    ;(chart as Chart)\n      .selectAll(\&quot;rect\&quot;)\n      .data(bars)\n      .enter()\n      .append(\&quot;rect\&quot;)\n      .attr(\&quot;x\&quot;, (...[, barIndex]) =&gt; barWidth * barIndex)\n      .attr(\&quot;y\&quot;, barYFn)\n      .attr(\&quot;width\&quot;, barWidth)\n      .attr(\&quot;height\&quot;, barHeightFn)\n      .attr(\&quot;fill\&quot;, (barItem) =&gt; color!(barItem))\n      .on(\&quot;mouseover\&quot;, () =&gt; {\n        this.clearInterval()\n      })\n      .on(\&quot;mouseleave\&quot;, () =&gt; {\n        this.clearInterval()\n        this.interval = setInterval(this.getIntervalFn(), 1000)\n      })\n      .append(\&quot;title\&quot;)\n      .text((barItem) =&gt; barItem)\n  }\n\n  private getIntervalFn() {\n    return () =&gt; {\n      const { bars } = this\n\n      bars.unshift(bars.pop() as BarData)\n\n      this.redraw()\n    }\n  }\n\n  private redraw() {\n    const { bars, chart, color } = this\n\n    if (!chart) {\n      return\n    }\n\n    const newX = scaleLinear()\n      .domain([0.5, bars.length + 0.5])\n      .range([1, barWidth * bars.length])\n\n    const newAxis = axisBottom(newX)\n\n    chart.select&lt;SVGGElement&gt;(\&quot;.xAxis\&quot;).transition().duration(500).call(newAxis)\n\n    chart\n      .select(\&quot;.xAxisLabel\&quot;)\n      .transition()\n      .duration(500)\n      .attr(\&quot;transform\&quot;, `translate(${(barWidth * bars.length) / 2} ,0)`)\n\n    chart\n      .selectAll(\&quot;rect\&quot;)\n      .data(bars)\n      .transition()\n      .duration(500)\n      .attr(\&quot;y\&quot;, barYFn)\n      .attr(\&quot;height\&quot;, barHeightFn)\n      .attr(\&quot;fill\&quot;, color as ColorFn)\n      .select(\&quot;title\&quot;)\n      .text((barItem) =&gt; barItem)\n  }\n}\n\nconst main = async () =&gt; {\n  const bars = await fetchData()\n\n  const barsChart = new BarsChart({\n    bars,\n    rootElId: \&quot;chart\&quot;,\n  })\n\n  barsChart.render()\n\n  const addItemEl = document.getElementById(\&quot;add-item\&quot;) as HTMLElement\n\n  addItemEl.addEventListener(\&quot;click\&quot;, () =&gt; {\n    if (bars.length &lt; 20) {\n      bars.push(Math.floor(Math.random() * (max(bars) as number)) + 1)\n      barsChart.refresh()\n    } else {\n      addItemEl.setAttribute(\&quot;disabled\&quot;, \&quot;disabled\&quot;)\n    }\n  })\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;bars&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/bars/bars\&quot;\n\nconst Bars = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo main={main} pageContext={pageContext}&gt;\n    &lt;form&gt;\n      &lt;button className=\&quot;btn btn-info\&quot; id=\&quot;add-item\&quot; type=\&quot;button\&quot;&gt;\n        Add item\n      &lt;/button&gt;\n    &lt;/form&gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default Bars\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;bars&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Bar Chart example with a traslation interval, a custom color scale and dynamic entry of new data. You can also see how to animate an axis change.&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 01 Sep 2021 22:07:32 GMT</p>
    </body>
  </html>
  