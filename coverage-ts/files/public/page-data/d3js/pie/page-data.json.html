
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/pie/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-pie-tsx&quot;,&quot;path&quot;:&quot;/d3js/pie/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;data&quot;:[&quot;data.json&quot;],&quot;docs&quot;:[],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Pie&quot;,&quot;notes&quot;:[&quot;Added the animation (transition) by changing a random slice data by a random integer between range&quot;],&quot;sources&quot;:[&quot;http://codepen.io/nishidh41/pen/Frzhq&quot;],&quot;summary&quot;:[],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import {\n  DefaultArcObject,\n  PieArcDatum,\n  Selection,\n  arc as arcD3,\n  easeBack,\n  interpolate,\n  pie as pieD3,\n  scaleOrdinal,\n  schemePastel2,\n  select,\n} from \&quot;d3\&quot;\nimport cloneDeep from \&quot;lodash/cloneDeep\&quot;\n\nconst fetchData = async () =&gt; {\n  const data = await fetch(`${ROOT_PATH}data/d3js/pie/data.json`)\n  const jsonData = await data.json()\n\n  return jsonData\n}\n\ntype Slice = {\n  ea0?: SliceArc\n  label: string\n  val: number\n}\ntype SliceArc = PieArcDatum&lt;Slice&gt;\n\nconst height = 300\nconst outerRadius = 100\n\nconst stashArcs = (d: SliceArc) =&gt; {\n  d.data.ea0 = cloneDeep(d)\n}\n\nconst arc = arcD3&lt;SliceArc&gt;().outerRadius(outerRadius).innerRadius(0)\n\ntype ArcDatum = Omit&lt;DefaultArcObject &amp; SliceArc, \&quot;innerRadius\&quot; | \&quot;outerRadius\&quot;&gt;\n\nconst textTransform = (d: ArcDatum): string =&gt; {\n  const centroidD = {\n    ...d,\n    innerRadius: outerRadius / 2,\n    outerRadius,\n  }\n\n  return `translate(${arc.centroid(centroidD)})`\n}\n\nconst pie = pieD3&lt;Slice&gt;()\n  .sort(null)\n  .value((slice: Slice) =&gt; slice.val)\n\nconst color = scaleOrdinal(schemePastel2)\nconst easeFn = easeBack\nconst transitionDuration = 3000\n\nconst arcTween = (finalSlice: SliceArc) =&gt; {\n  const {\n    data: { ea0: initialSlice },\n  } = finalSlice\n  const interpolateFn = interpolate(initialSlice, finalSlice)\n\n  finalSlice.data.ea0 = interpolateFn(0)\n\n  return (normalizedTime: number) =&gt; arc(interpolateFn(normalizedTime))!\n}\n\ntype PieChartOpts = {\n  data: Slice[]\n  rootElId: string\n}\n\ntype ChartPaths = Selection&lt;SVGPathElement, SliceArc, SVGGElement, unknown&gt;\ntype ChartLabels = Selection&lt;SVGTextElement, SliceArc, SVGGElement, unknown&gt;\n\nclass PieChart {\n  private readonly rootElId: string\n  private readonly data: Slice[]\n  private paths: ChartPaths | null\n  private labels: ChartLabels | null\n\n  public constructor({ data, rootElId }: PieChartOpts) {\n    this.data = data\n    this.rootElId = rootElId\n\n    this.paths = null\n    this.labels = null\n\n    this.render()\n  }\n\n  public update(val: number) {\n    const { data, labels, paths } = this\n    const index = Math.floor(Math.random() * data.length)\n\n    data[index].val = val\n    ;(paths as ChartPaths)\n      .data(pie(data))\n      .transition()\n      .duration(transitionDuration)\n      .ease(easeFn)\n      .attrTween(\&quot;d\&quot;, arcTween)\n    ;(labels as ChartLabels)\n      .data(pie(data))\n      .transition()\n      .duration(transitionDuration)\n      .ease(easeFn)\n      .attr(\&quot;transform\&quot;, textTransform)\n      .each(function (d: { data: Slice }) {\n        select(this).text(d.data.val)\n      })\n  }\n\n  private render() {\n    const { data, rootElId } = this\n    const { width } = (document.getElementById(\n      rootElId\n    ) as HTMLElement).getBoundingClientRect()\n\n    const svg = select(`#${rootElId}`)\n      .append(\&quot;svg:svg\&quot;)\n      .attr(\&quot;height\&quot;, height)\n      .attr(\&quot;width\&quot;, width)\n      .append(\&quot;g\&quot;)\n      .attr(\&quot;transform\&quot;, `translate(${width / 2},${height / 2})`)\n\n    const slices = svg\n      .selectAll(\&quot;.slice\&quot;)\n      .data(pie(data))\n      .enter()\n      .append(\&quot;g\&quot;)\n      .attr(\&quot;class\&quot;, \&quot;slice\&quot;)\n\n    this.paths = slices\n      .append(\&quot;path\&quot;)\n      .attr(\&quot;d\&quot;, arc)\n      .attr(\&quot;fill\&quot;, (_d, i) =&gt; color(i.toString()))\n      .each(stashArcs)\n\n    this.labels = slices\n      .filter((slice: SliceArc) =&gt; slice.endAngle - slice.startAngle &gt; 0.2)\n      .append(\&quot;text\&quot;)\n      .attr(\&quot;text-anchor\&quot;, \&quot;middle\&quot;)\n      .attr(\&quot;dy\&quot;, \&quot;.35em\&quot;)\n      .attr(\&quot;transform\&quot;, textTransform)\n      .style(\&quot;fill\&quot;, \&quot;black\&quot;)\n      .style(\&quot;font\&quot;, \&quot;bold 12px Arial\&quot;)\n      .text((d) =&gt; d.data.val)\n\n    slices.append(\&quot;title\&quot;).text((d) =&gt; d.data.label)\n  }\n}\n\nconst main = async () =&gt; {\n  const data = await fetchData()\n\n  const chart = new PieChart({\n    data,\n    rootElId: \&quot;chart\&quot;,\n  })\n\n  ;(document.getElementById(\&quot;change-data\&quot;) as HTMLElement).addEventListener(\n    \&quot;click\&quot;,\n    () =&gt; {\n      const randomVal = Math.floor(Math.random() * 44) + 2\n\n      chart.update(randomVal)\n    }\n  )\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;pie&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/pie/pie\&quot;\n\nconst Pie = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo main={main} pageContext={pageContext}&gt;\n    &lt;form&gt;\n      &lt;button className=\&quot;btn btn-success\&quot; id=\&quot;change-data\&quot; type=\&quot;button\&quot;&gt;\n        Change\n      &lt;/button&gt;\n    &lt;/form&gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default Pie\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;pie&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Pie chart example using D3.js, with an animated transition and a random change of values to show how to animate between states.&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 18 Aug 2021 22:56:18 GMT</p>
    </body>
  </html>
  