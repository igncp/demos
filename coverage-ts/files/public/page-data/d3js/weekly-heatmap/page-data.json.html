
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/weekly-heatmap/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-weekly-heatmap-tsx&quot;,&quot;path&quot;:&quot;/d3js/weekly-heatmap/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;dataFiles&quot;:[&quot;data.tsv&quot;],&quot;docs&quot;:[[&quot;d3-selection API reference&quot;,&quot;https://github.com/d3/d3-selection#api-reference&quot;],[&quot;d3-selection Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-selection/index.d.ts&quot;],[&quot;d3-scale API reference&quot;,&quot;https://github.com/d3/d3-scale#api-reference&quot;],[&quot;d3-scale Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-scale/index.d.ts&quot;],[&quot;d3-fetch API reference&quot;,&quot;https://github.com/d3/d3-fetch#api-reference&quot;],[&quot;d3-fetch Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-fetch/index.d.ts&quot;]],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Weekly Heatmap&quot;,&quot;notes&quot;:[],&quot;sources&quot;:[&quot;http://bl.ocks.org/tjdecke/5558084&quot;],&quot;summary&quot;:[&quot;This chart is a grid of days and hours using a quantile to group the data values by nine colors. The number of groups is directly tied to the colors array, so removing or adding colors to the array also affects the number of groups.&quot;],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.weeklyHeatmapChart {\n  rect.bordered {\n    stroke: #e6e6e6;\n    stroke-width: 2px;\n  }\n\n  text.mono {\n    fill: #aaa;\n    font-family: Consolas, courier, sans-serif;\n    font-size: 9pt;\n  }\n\n  text.axisBold {\n    fill: #333;\n    font-weight: bold;\n  }\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import { renderChart } from \&quot;./weekly-heatmap-chart\&quot;\nimport { TimeItem, createChartConfig, fetchData } from \&quot;./weekly-heatmap-data\&quot;\n\nconst main = async () =&gt; {\n  const weeklyData = await fetchData()\n  const chartConfig = createChartConfig(weeklyData)\n\n  renderChart&lt;TimeItem&gt;(chartConfig)\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;weekly-heatmap&quot;},{&quot;content&quot;:&quot;import { max as maxD3, scaleQuantile, select } from \&quot;d3\&quot;\n\nimport * as styles from \&quot;./weekly-heatmap.module.css\&quot;\n\nconst colors = [\n  \&quot;#ffffd9\&quot;,\n  \&quot;#edf8b1\&quot;,\n  \&quot;#c7e9b4\&quot;,\n  \&quot;#7fcdbb\&quot;,\n  \&quot;#41b6c4\&quot;,\n  \&quot;#1d91c0\&quot;,\n  \&quot;#225ea8\&quot;,\n  \&quot;#253494\&quot;,\n  \&quot;#081d58\&quot;,\n]\nconst { length: buckets } = colors\n\nconst margin = {\n  bottom: 100,\n  left: 50,\n  right: 50,\n  top: 50,\n}\n\nconst rectRadiusSize = 100\nconst extraHeight = 60\nconst axisOffset = -6\n\nconst legendStroke = \&quot;#ccc\&quot;\n\nexport type ChartConfig&lt;ChartData&gt; = {\n  getIsHorizontalLabelBold: (label: string, labelIndex: number) =&gt; boolean\n  getIsVerticalLabelBold: (label: string, labelIndex: number) =&gt; boolean\n  getItemHorizontalIndex: (cell: ChartData) =&gt; number\n  getItemTooltip: (cell: ChartData) =&gt; string\n  getItemValue: (cell: ChartData) =&gt; number\n  getItemVerticalIndex: (cell: ChartData) =&gt; number\n  getLegendText: (cellValue: number) =&gt; string\n  horizontalLabels: string[]\n  rootElId: string\n  verticalLabels: string[]\n  weeklyData: ChartData[]\n}\n\nexport const renderChart = &lt;ChartData&gt;(chartConfig: ChartConfig&lt;ChartData&gt;) =&gt; {\n  const { rootElId, weeklyData } = chartConfig\n  const rootEl = document.getElementById(rootElId) as HTMLElement\n\n  rootEl.classList.add(styles.weeklyHeatmapChart)\n\n  const { horizontalLabels, verticalLabels } = chartConfig\n\n  const width =\n    rootEl.getBoundingClientRect().width - margin.left - margin.right\n  const height =\n    Math.ceil((width * 10) / horizontalLabels.length) -\n    margin.top -\n    margin.bottom +\n    extraHeight\n  const cellSize = Math.floor(width / horizontalLabels.length)\n  const legendElementWidth = cellSize * 2\n\n  const max = maxD3(weeklyData, (cell) =&gt; chartConfig.getItemValue(cell))\n\n  const colorScale = scaleQuantile&lt;string&gt;()\n    .domain([0, buckets - 1, max])\n    .range(colors)\n\n  const svg = select(`#${rootElId}`)\n    .append(\&quot;svg\&quot;)\n    .attr(\&quot;height\&quot;, height + margin.top + margin.bottom)\n    .attr(\&quot;width\&quot;, width + margin.left + margin.right)\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;transform\&quot;, `translate(${margin.left},${margin.top})`)\n\n  svg\n    .selectAll(\&quot;.verticalLabel\&quot;)\n    .data(verticalLabels)\n    .enter()\n    .append(\&quot;text\&quot;)\n    .text((label) =&gt; label)\n    .attr(\n      \&quot;class\&quot;,\n      (...[label, labelIndex]) =&gt;\n        `verticalLabel ${styles.mono} axis${\n          chartConfig.getIsVerticalLabelBold(label, labelIndex)\n            ? ` ${styles.axisBold}`\n            : \&quot;\&quot;\n        }`\n    )\n    .attr(\&quot;transform\&quot;, `translate(${axisOffset},${cellSize / 1.5})`)\n    .attr(\&quot;x\&quot;, 0)\n    .attr(\&quot;y\&quot;, (...[, labelIndex]) =&gt; labelIndex * cellSize)\n    .style(\&quot;text-anchor\&quot;, \&quot;end\&quot;)\n\n  svg\n    .selectAll(\&quot;.horizontalLabel\&quot;)\n    .data(horizontalLabels)\n    .enter()\n    .append(\&quot;text\&quot;)\n    .text((label) =&gt; label)\n    .attr(\n      \&quot;class\&quot;,\n      (...[label, labelIndex]) =&gt;\n        `horizontalLabel ${styles.mono} axis${\n          chartConfig.getIsHorizontalLabelBold(label, labelIndex)\n            ? ` ${styles.axisBold}`\n            : \&quot;\&quot;\n        }`\n    )\n    .attr(\&quot;transform\&quot;, `translate(${cellSize / 2}, ${axisOffset})`)\n    .attr(\&quot;x\&quot;, (...[, labelIndex]) =&gt; labelIndex * cellSize)\n    .attr(\&quot;y\&quot;, 0)\n    .style(\&quot;text-anchor\&quot;, \&quot;middle\&quot;)\n\n  const heatMap = svg\n    .selectAll(\&quot;.cell\&quot;)\n    .data(weeklyData)\n    .enter()\n    .append(\&quot;rect\&quot;)\n    .attr(\&quot;class\&quot;, `cell ${styles.bordered}`)\n    .attr(\&quot;height\&quot;, cellSize)\n    .attr(\&quot;rx\&quot;, rectRadiusSize)\n    .attr(\&quot;ry\&quot;, rectRadiusSize)\n    .attr(\&quot;width\&quot;, cellSize)\n    .attr(\n      \&quot;x\&quot;,\n      (cellItem) =&gt; chartConfig.getItemHorizontalIndex(cellItem) * cellSize\n    )\n    .attr(\n      \&quot;y\&quot;,\n      (cellItem) =&gt; chartConfig.getItemVerticalIndex(cellItem) * cellSize\n    )\n    .attr(\&quot;title\&quot;, chartConfig.getItemTooltip)\n    .style(\&quot;fill\&quot;, colors[0])\n\n  heatMap\n    .transition()\n    .duration(6000)\n    .style(\&quot;fill\&quot;, (cellItem) =&gt; colorScale(chartConfig.getItemValue(cellItem)))\n\n  $(\&quot;.cell\&quot;).tooltip()\n\n  const legend = svg\n    .selectAll(\&quot;.legend\&quot;)\n    .data&lt;any&gt;([0].concat(colorScale.quantiles()), (legendValue) =&gt; legendValue)\n    .enter()\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, \&quot;legend\&quot;)\n\n  legend\n    .append(\&quot;rect\&quot;)\n    .attr(\&quot;x\&quot;, (...[, valueIndex]) =&gt; legendElementWidth * valueIndex)\n    .attr(\&quot;y\&quot;, height)\n    .attr(\&quot;width\&quot;, legendElementWidth)\n    .attr(\&quot;height\&quot;, cellSize / 2)\n    .style(\&quot;fill\&quot;, (...[, valueIndex]) =&gt; colors[valueIndex])\n    .style(\&quot;stroke\&quot;, legendStroke)\n\n  legend\n    .append(\&quot;text\&quot;)\n    .attr(\&quot;class\&quot;, styles.mono)\n    .text(chartConfig.getLegendText)\n    .style(\&quot;text-anchor\&quot;, \&quot;middle\&quot;)\n    .attr(\n      \&quot;x\&quot;,\n      (...[, valueIndex]) =&gt;\n        legendElementWidth * valueIndex + legendElementWidth / 2\n    )\n    .attr(\&quot;y\&quot;, height + cellSize)\n}\n&quot;,&quot;fileName&quot;:&quot;weekly-heatmap-chart&quot;},{&quot;content&quot;:&quot;import { tsv } from \&quot;d3\&quot;\n\nimport { ChartConfig } from \&quot;./weekly-heatmap-chart\&quot;\n\nexport type TimeItem = {\n  arbitraryMetric: number\n  day: number\n  hour: number\n}\n\ntype TimeItemOriginal = {\n  day: number\n  hour: number\n  value: number // eslint-disable-line id-denylist\n}\n\nconst days = [\&quot;Mo\&quot;, \&quot;Tu\&quot;, \&quot;We\&quot;, \&quot;Th\&quot;, \&quot;Fr\&quot;, \&quot;Sa\&quot;, \&quot;Su\&quot;]\n\nconst hours = Array.from({ length: 24 }).map(\n  (...[, hourIndex]: [unknown, number]) =&gt; {\n    const normalizedHour = hourIndex % 12\n\n    return `${normalizedHour + 1} ${\n      hourIndex &gt;= 11 &amp;&amp; hourIndex !== 23 ? \&quot;pm\&quot; : \&quot;am\&quot;\n    }`\n  }\n)\n\nconst workingHourMin = 7\nconst workingHourMax = 16\nconst workingDayMin = 0\nconst workingDayMax = 4\n\nexport const fetchData = async (): Promise&lt;TimeItem[]&gt; =&gt; {\n  const weeklyTSVData = ((await tsv(\n    `${ROOT_PATH}data/d3js/weekly-heatmap/data.tsv`\n  )) as unknown) as TimeItemOriginal[]\n\n  return weeklyTSVData.map((timeItem) =&gt; ({\n    arbitraryMetric: +timeItem.value,\n    day: +timeItem.day,\n    hour: +timeItem.hour,\n  }))\n}\n\ntype Config = ChartConfig&lt;TimeItem&gt;\n\nconst getItemValue: Config[\&quot;getItemValue\&quot;] = (timeItem) =&gt;\n  timeItem.arbitraryMetric\nconst getItemTooltip: Config[\&quot;getItemTooltip\&quot;] = (timeItem) =&gt;\n  `Arbitrary Metric: ${timeItem.arbitraryMetric}`\nconst getItemHorizontalIndex: Config[\&quot;getItemHorizontalIndex\&quot;] = (timeItem) =&gt;\n  timeItem.hour - 1\nconst getItemVerticalIndex: Config[\&quot;getItemVerticalIndex\&quot;] = (timeItem) =&gt;\n  timeItem.day - 1\nconst getIsHorizontalLabelBold: Config[\&quot;getIsHorizontalLabelBold\&quot;] = (\n  ...[, hourIndex]\n) =&gt; hourIndex &gt;= workingHourMin &amp;&amp; hourIndex &lt;= workingHourMax\n\nconst getIsVerticalLabelBold: Config[\&quot;getIsVerticalLabelBold\&quot;] = (\n  ...[, dayIndex]\n) =&gt; dayIndex &gt;= workingDayMin &amp;&amp; dayIndex &lt;= workingDayMax\n\nconst getLegendText: Config[\&quot;getLegendText\&quot;] = (arbitraryMetric) =&gt;\n  `≥ ${arbitraryMetric.toFixed(2)}`\n\nexport const createChartConfig = (weeklyData: TimeItem[]): Config =&gt; ({\n  getIsHorizontalLabelBold,\n  getIsVerticalLabelBold,\n  getItemHorizontalIndex,\n  getItemTooltip,\n  getItemValue,\n  getItemVerticalIndex,\n  getLegendText,\n  horizontalLabels: hours,\n  rootElId: \&quot;chart\&quot;,\n  verticalLabels: days,\n  weeklyData,\n})\n&quot;,&quot;fileName&quot;:&quot;weekly-heatmap-data&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/weekly-heatmap/weekly-heatmap\&quot;\n\nconst WeeklyHeatmap = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo\n    links={[\&quot;/vendors/jquery-ui/themes/base/jquery-ui.min.css\&quot;]}\n    main={main}\n    pageContext={pageContext}\n    scripts={[\&quot;/vendors/jquery-ui/jquery-ui.min.js\&quot;]}\n  &gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default WeeklyHeatmap\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;weekly-heatmap&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Heatmap chart example using D3.js, very similar to the one displayed in the GitHub site, with a few additions from the original.&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Tue, 24 Aug 2021 23:20:02 GMT</p>
    </body>
  </html>
  