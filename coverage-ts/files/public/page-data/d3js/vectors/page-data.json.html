
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/vectors/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-vectors-tsx&quot;,&quot;path&quot;:&quot;/d3js/vectors/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;dataFiles&quot;:[],&quot;docs&quot;:[[&quot;d3-force API reference&quot;,&quot;https://github.com/d3/d3-force#forceSimulation&quot;]],&quot;isCompleted&quot;:false,&quot;name&quot;:&quot;Vectors (needs fix)&quot;,&quot;notes&quot;:[&quot;Use the &lt;strong&gt;Ctrl&lt;/strong&gt; key to move nodes instead of creating vectors&quot;,&quot;Needs fix: Some functionality from 2016 chart detailed in the comments&quot;],&quot;sources&quot;:[&quot;http://codepen.io/zarazum/pen/fjoqF&quot;],&quot;summary&quot;:[],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.vectorsChart {\n  svg {\n    background-color: #fff;\n    cursor: default;\n    user-select: none;\n  }\n\n  svg:not(.active):not(.ctrl) {\n    cursor: crosshair;\n  }\n\n  path.link {\n    cursor: default;\n    fill: none;\n    stroke: #888;\n    stroke-width: 3px;\n  }\n\n  svg:not(.active):not(.ctrl) path.link {\n    cursor: pointer;\n  }\n\n  path.link.selected {\n    stroke-dasharray: 10, 2;\n  }\n\n  path.link.dragline {\n    pointer-events: none;\n  }\n\n  path.link.hidden {\n    stroke-width: 0;\n  }\n\n  circle.node {\n    cursor: pointer;\n    fill: none;\n    stroke-width: 0;\n  }\n\n  text {\n    font: 14px sans-serif;\n    pointer-events: none;\n  }\n\n  text.id {\n    font-weight: bold;\n    text-anchor: middle;\n  }\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import {\n  Selection,\n  SimulationNodeDatum,\n  drag,\n  forceCenter,\n  forceLink,\n  forceManyBody,\n  forceSimulation,\n  select,\n} from \&quot;d3\&quot;\n\nimport * as styles from \&quot;./vectors.module.css\&quot;\n\n// missing:\n// - connect nodes\n// - drag node\n// - keys handling\n// old one is in ./vectors-old/vectors-old.js, remove when completed\n\ntype Node = SimulationNodeDatum &amp; {\n  id: string\n  reflexive: boolean\n}\n\ntype Link = {\n  left: boolean\n  right: boolean\n  source: Node\n  target: Node\n}\n\ntype VectorsData = {\n  links: Link[]\n  nodes: Node[]\n}\n\nconst getInitialData = (): VectorsData =&gt; {\n  const nodes = [\n    {\n      id: \&quot;A\&quot;,\n      reflexive: false,\n    },\n    {\n      id: \&quot;B\&quot;,\n      reflexive: false,\n    },\n    {\n      id: \&quot;C\&quot;,\n      reflexive: false,\n    },\n  ]\n  const links = [\n    {\n      left: false,\n      right: true,\n      source: nodes[0],\n      target: nodes[1],\n    },\n    {\n      left: false,\n      right: true,\n      source: nodes[1],\n      target: nodes[2],\n    },\n  ]\n\n  return {\n    links,\n    nodes,\n  }\n}\n\nconst setupSVG = (\n  svg: Selection&lt;SVGSVGElement, unknown, HTMLElement, unknown&gt;\n) =&gt; {\n  svg\n    .append(\&quot;svg:defs\&quot;)\n    .append(\&quot;svg:marker\&quot;)\n    .attr(\&quot;id\&quot;, \&quot;end-arrow\&quot;)\n    .attr(\&quot;viewBox\&quot;, \&quot;0 -5 10 10\&quot;)\n    .attr(\&quot;refX\&quot;, 6)\n    .attr(\&quot;markerWidth\&quot;, 3)\n    .attr(\&quot;markerHeight\&quot;, 3)\n    .attr(\&quot;orient\&quot;, \&quot;auto\&quot;)\n    .append(\&quot;svg:path\&quot;)\n    .attr(\&quot;d\&quot;, \&quot;M0,-5L10,0L0,5\&quot;)\n    .attr(\&quot;fill\&quot;, \&quot;#000\&quot;)\n\n  svg\n    .append(\&quot;svg:defs\&quot;)\n    .append(\&quot;svg:marker\&quot;)\n    .attr(\&quot;id\&quot;, \&quot;start-arrow\&quot;)\n    .attr(\&quot;viewBox\&quot;, \&quot;0 -5 10 10\&quot;)\n    .attr(\&quot;refX\&quot;, 4)\n    .attr(\&quot;markerWidth\&quot;, 3)\n    .attr(\&quot;markerHeight\&quot;, 3)\n    .attr(\&quot;orient\&quot;, \&quot;auto\&quot;)\n    .append(\&quot;svg:path\&quot;)\n    .attr(\&quot;d\&quot;, \&quot;M10,-5L0,0L10,5\&quot;)\n    .attr(\&quot;fill\&quot;, \&quot;#000\&quot;)\n}\n\ntype CustomDragEvent = DragEvent &amp; { active: boolean }\n\nconst settings = {\n  circleRadius: 5,\n  defaultTextOpacity: 0.5,\n  strength: -5000,\n  textDY: 5,\n}\n\nconst height = 600\n\ntype RenderGraph = (o: { rootElId: string; vectorsData: VectorsData }) =&gt; void\n\nconst renderGraph: RenderGraph = ({ rootElId, vectorsData }) =&gt; {\n  const { links, nodes } = vectorsData\n\n  const rootEl = document.getElementById(rootElId) as HTMLElement\n\n  rootEl.classList.add(styles.vectorsChart)\n\n  const { width } = rootEl.getBoundingClientRect()\n  const svg = select(`#${rootElId}`)\n    .append(\&quot;svg\&quot;)\n    .attr(\&quot;width\&quot;, width)\n    .attr(\&quot;height\&quot;, height)\n\n  setupSVG(svg)\n\n  // @TODO\n  let lastNodeId = \&quot;C\&quot;.charCodeAt(0)\n\n  const updateLinks = () =&gt; {\n    const linksEls = svg\n      .selectAll&lt;SVGPathElement, VectorsData[\&quot;links\&quot;]&gt;(`.${styles.link}`)\n      .data(links)\n\n    linksEls\n      .enter()\n      .append&lt;SVGPathElement&gt;(\&quot;path\&quot;)\n      .merge(linksEls)\n      .attr(\&quot;d\&quot;, (link) =&gt; {\n        const deltaX = link.target.x! - link.source.x!\n        const deltaY = link.target.y! - link.source.y!\n        const dist = Math.sqrt(deltaX * deltaX + deltaY * deltaY)\n        const normX = deltaX / dist\n        const normY = deltaY / dist\n        const sourcePadding = link.left ? 17 : 12\n        const targetPadding = link.right ? 17 : 12\n        const sourceX = link.source.x! + sourcePadding * normX\n        const sourceY = link.source.y! + sourcePadding * normY\n        const targetX = link.target.x! - targetPadding * normX\n        const targetY = link.target.y! - targetPadding * normY\n\n        return `M${sourceX},${sourceY}L${targetX},${targetY}`\n      })\n      .attr(\&quot;class\&quot;, `${styles.link} ${styles.dragline}`)\n\n    linksEls.exit().remove()\n  }\n\n  const ticked = () =&gt; {\n    updateLinks()\n    updateNodes() // eslint-disable-line @typescript-eslint/no-use-before-define\n  }\n\n  const simulation = forceSimulation(nodes)\n    .force(\&quot;charge\&quot;, forceManyBody().strength(-50))\n    .force(\&quot;center\&quot;, forceCenter(width / 2, height / 2))\n    .force(\&quot;link\&quot;, forceLink().links(links).distance(100))\n    .on(\&quot;tick\&quot;, ticked)\n\n  const dragstarted = (...[dragEvent, node]: [CustomDragEvent, Node]) =&gt; {\n    if (!dragEvent.active) {\n      simulation.alphaTarget(0.3).restart()\n    }\n\n    node.fx = node.x\n    node.fy = node.y\n  }\n\n  const dragged = (...[dragEvent, node]: [CustomDragEvent, Node]) =&gt; {\n    node.fx = dragEvent.x\n    node.fy = dragEvent.y\n  }\n\n  const dragended = (...[dragEvent, node]: [CustomDragEvent, Node]) =&gt; {\n    if (!dragEvent.active) {\n      simulation.alphaTarget(0)\n    }\n\n    node.fx = null\n    node.fy = null\n  }\n\n  const updateNodes = () =&gt; {\n    const nodesEls = svg\n      .selectAll&lt;SVGCircleElement, VectorsData[\&quot;nodes\&quot;]&gt;(\&quot;circle\&quot;)\n      .data(nodes)\n    const textsEls = svg\n      .selectAll&lt;SVGTextElement, VectorsData[\&quot;nodes\&quot;]&gt;(\&quot;text\&quot;)\n      .data(nodes)\n\n    nodesEls\n      .enter()\n      .append(\&quot;circle\&quot;)\n      .merge(nodesEls)\n      .attr(\&quot;cx\&quot;, (node) =&gt; node.x!)\n      .attr(\&quot;cy\&quot;, (node) =&gt; node.y!)\n      .attr(\&quot;r\&quot;, () =&gt; settings.circleRadius)\n      .attr(\&quot;fill\&quot;, \&quot;#fff\&quot;)\n      .each(function () {\n        select&lt;SVGCircleElement, VectorsData[\&quot;nodes\&quot;][0]&gt;(this)\n          .on(\&quot;mouseover\&quot;, (...[, node]: [unknown, Node]) =&gt; {\n            select(`#node-text-${node.index}`).style(\&quot;opacity\&quot;, 1)\n          })\n          .on(\&quot;mouseleave\&quot;, (...[, node]: [unknown, Node]) =&gt; {\n            select(`#node-text-${node.index}`).style(\n              \&quot;opacity\&quot;,\n              settings.defaultTextOpacity\n            )\n          })\n      })\n      .call(\n        drag&lt;SVGCircleElement, VectorsData[\&quot;nodes\&quot;][0]&gt;()\n          .on(\&quot;start\&quot;, dragstarted)\n          .on(\&quot;drag\&quot;, dragged)\n          .on(\&quot;end\&quot;, dragended)\n      )\n\n    textsEls\n      .enter()\n      .append(\&quot;text\&quot;)\n      .merge(textsEls)\n      .text((node) =&gt; node.id)\n      .attr(\&quot;x\&quot;, (node) =&gt; node.x!)\n      .attr(\&quot;y\&quot;, (node) =&gt; node.y!)\n      .attr(\&quot;class\&quot;, styles.id)\n\n    nodesEls.exit().remove()\n    textsEls.exit().remove()\n  }\n\n  svg\n    .selectAll(`.${styles.link}`)\n    .data(links)\n    .enter()\n    .append(\&quot;svg:path\&quot;)\n    .attr(\&quot;class\&quot;, styles.link)\n    .attr(\&quot;marker-end\&quot;, \&quot;url(#end)\&quot;)\n    .attr(\&quot;id\&quot;, (...[, linkIndex]: [unknown, number]) =&gt; `link-${linkIndex}`)\n\n  const keydown = function () {\n    console.log(\&quot;keydown\&quot;) // eslint-disable-line no-console\n  }\n\n  const keyup = function () {\n    console.log(\&quot;keyup\&quot;) // eslint-disable-line no-console\n  }\n\n  const mousedownSVG = (mouseEvent: MouseEvent) =&gt; {\n    svg.classed(styles.active, true)\n\n    if (mouseEvent.ctrlKey) {\n      return\n    }\n\n    const eventTarget = mouseEvent.target as HTMLElement\n\n    const dim = eventTarget.getBoundingClientRect()\n    const x = mouseEvent.clientX - dim.left\n    const y = mouseEvent.clientY - dim.top\n\n    lastNodeId += 1\n\n    const node = {\n      id: String.fromCharCode(lastNodeId),\n      index: nodes.length, // eslint-disable-line id-denylist\n      reflexive: false,\n      vx: 0,\n      vy: 0,\n      x,\n      y,\n    }\n\n    nodes.push(node)\n\n    simulation.nodes(nodes)\n    simulation.alpha(0.5).restart()\n  }\n\n  const mousemoveSVG = () =&gt; {\n    console.log(\&quot;mousemoveSVG\&quot;) // eslint-disable-line no-console\n  }\n\n  const mouseupSVG = () =&gt; {}\n\n  svg\n    .on(\&quot;mousedown\&quot;, mousedownSVG)\n    .on(\&quot;mousemove\&quot;, mousemoveSVG)\n    .on(\&quot;mouseup\&quot;, mouseupSVG)\n\n  window.addEventListener(\&quot;keyup\&quot;, keyup)\n  window.addEventListener(\&quot;keydown\&quot;, keydown)\n}\n\nconst main = () =&gt; {\n  const vectorsData = getInitialData()\n\n  renderGraph({\n    rootElId: \&quot;chart\&quot;,\n    vectorsData,\n  })\n\n  return Promise.resolve()\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;vectors&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/vectors/vectors\&quot;\n\nconst Vectors = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo\n    main={main}\n    pageContext={pageContext}\n    scripts={[\&quot;/vendors/d3/d3.min.js\&quot;]}\n  &gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default Vectors\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;vectors&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Not actually a chart, but the representation of pointing vectors, with the possibility of creation and movement, made with D3.js&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Sat, 28 Aug 2021 17:34:56 GMT</p>
    </body>
  </html>
  