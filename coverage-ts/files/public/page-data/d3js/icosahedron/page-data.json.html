
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/icosahedron/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-icosahedron-tsx&quot;,&quot;path&quot;:&quot;/d3js/icosahedron/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;data&quot;:[],&quot;docs&quot;:[],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Icosahedron&quot;,&quot;notes&quot;:[&quot;No data bound to it, it could be to the speed, size, colors&quot;,&quot;Added color scale and the sinusoidal x velocity&quot;,&quot;Added the stop and move when clicked&quot;],&quot;sources&quot;:[&quot;https://gist.github.com/mbostock/7782500&quot;],&quot;summary&quot;:[],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.icosahedronChart {\n  path {\n    fill: #f88e22;\n    stroke: #fff;\n    stroke-width: 2px;\n  }\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import {\n  GeoProjection,\n  ScaleOrdinal,\n  Selection,\n  geoOrthographic,\n  polygonArea,\n  polygonHull,\n  scaleOrdinal,\n  schemePastel2,\n  select,\n  timer,\n} from \&quot;d3\&quot;\n\nimport * as styles from \&quot;./icosahedron.module.css\&quot;\n\ntype IcosahedronOpts = {\n  rootElId: string\n}\n\ntype Position = [number, number, number]\ntype Point2D = [number, number]\n\ntype Hull = Point2D[]\ntype Face = Hull\ntype Faces = Face[]\ntype FaceWithPolygon = Face &amp; {\n  polygon: Hull\n}\n\ntype SvgSelection = Selection&lt;\n  SVGSVGElement,\n  FaceWithPolygon,\n  HTMLElement,\n  unknown\n&gt;\n\nclass Icosahedron {\n  private readonly rootElId: string\n\n  private config!: {\n    color: ScaleOrdinal&lt;string, string&gt;\n    defaultVelocity: number[]\n    height: number\n    rotationFactor1: number\n    rotationFactor2: number\n    t0: number\n    width: number\n    zeroVelocity: number[]\n  }\n\n  private dom!: {\n    faces: Selection&lt;\n      SVGPathElement,\n      FaceWithPolygon,\n      SVGSVGElement,\n      unknown\n    &gt; | null\n    projection: GeoProjection\n    svg: SvgSelection\n  }\n\n  private vars!: {\n    velocity: number[] | null\n  }\n\n  public constructor(opts: IcosahedronOpts) {\n    this.rootElId = opts.rootElId\n    this.setConfig()\n    this.setDom()\n    this.setVars()\n\n    const faces = this.dom.svg\n      .selectAll(\&quot;path\&quot;)\n      .data(Icosahedron.getIcosahedronFaces() as FaceWithPolygon[])\n      .enter()\n      .append(\&quot;path\&quot;)\n      .each((d) =&gt; {\n        d.polygon = polygonHull(d.map(this.dom.projection) as Faces[0]) as Hull\n      })\n      .style(\&quot;fill\&quot;, (_d: unknown, index: number) =&gt; {\n        const color = this.config.color(`${index}`)\n\n        return color\n      })\n\n    this.dom.faces = faces\n    this.vars.velocity = this.config.defaultVelocity\n  }\n\n  private static getIcosahedronFaces(): Faces {\n    const faces: Faces = []\n    const y = (Math.atan2(1, 2) * 180) / Math.PI\n\n    for (let x = 0; x &lt; 360; x += 360 / 5) {\n      faces.push(\n        [\n          [x + 0, -90],\n          [x + 0, -y],\n          [x + 72, -y],\n        ],\n        [\n          [x + 36, y],\n          [x + 72, -y],\n          [x + 0, -y],\n        ],\n        [\n          [x + 36, y],\n          [x + 0, -y],\n          [x - 36, y],\n        ],\n        [\n          [x + 36, y],\n          [x - 36, y],\n          [x - 36, 90],\n        ]\n      )\n    }\n\n    return faces\n  }\n\n  public start() {\n    timer(() =&gt; this.timer())\n  }\n\n  private setConfig() {\n    const color = scaleOrdinal(schemePastel2)\n\n    this.config = {\n      color,\n      defaultVelocity: [1, 0.4, 0.07],\n      height: 500,\n      rotationFactor1: 1 / 1000,\n      rotationFactor2: 4,\n      t0: Date.now(),\n      width: (document.getElementById(\n        this.rootElId\n      ) as HTMLElement).getBoundingClientRect().width,\n      zeroVelocity: [0, 0, 0],\n    }\n  }\n\n  private setDom() {\n    const rootEl = document.getElementById(this.rootElId) as HTMLElement\n\n    rootEl.classList.add(styles.icosahedronChart)\n\n    const projection = geoOrthographic().scale(this.config.height / 2 - 10)\n    const svg = select(`#${this.rootElId}`)\n      .append(\&quot;svg\&quot;)\n      .attr(\&quot;width\&quot;, this.config.width)\n      .attr(\&quot;height\&quot;, this.config.height) as SvgSelection\n\n    this.dom = {\n      faces: null,\n      projection,\n      svg,\n    }\n  }\n\n  private setVars() {\n    this.vars = {\n      velocity: null,\n    }\n  }\n\n  private calcNewPosition(time: number, position: Position): Position {\n    const {\n      vars: { velocity },\n    } = this\n\n    return [\n      velocity![0] *\n        Math.abs(\n          Math.sin(time * this.config.rotationFactor1) *\n            this.config.rotationFactor2\n        ) +\n        position[0],\n      velocity![1] + position[1],\n      position![2] + velocity![2],\n    ]\n  }\n\n  private timer() {\n    const time = Date.now() - this.config.t0\n    const originalPos = this.dom.projection.rotate()\n\n    this.dom.projection.rotate(this.calcNewPosition(time, originalPos))\n    this.dom\n      .faces!.each((d) =&gt;\n        d.forEach((p: [number, number], i: number) =&gt; {\n          d.polygon[i] = this.dom.projection(p) as Point2D\n\n          return null\n        })\n      )\n      .style(\&quot;display\&quot;, (d) =&gt; {\n        const area = polygonArea(d.polygon)\n\n        if (area &gt; 0) {\n          return null\n        }\n\n        return \&quot;none\&quot;\n      })\n      .attr(\&quot;d\&quot;, (d) =&gt; `M${d.polygon.join(\&quot;L\&quot;)}Z`)\n      .on(\&quot;click\&quot;, () =&gt; {\n        if (\n          this.vars.velocity?.toString() === this.config.zeroVelocity.toString()\n        ) {\n          this.vars.velocity = this.config.defaultVelocity\n\n          return\n        }\n\n        this.vars.velocity = this.config.zeroVelocity\n      })\n\n    return null\n  }\n}\n\nconst main = () =&gt; {\n  const chart = new Icosahedron({\n    rootElId: \&quot;chart\&quot;,\n  })\n\n  chart.start()\n\n  return Promise.resolve()\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;icosahedron&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/icosahedron/icosahedron\&quot;\n\nconst Icosahedron = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo\n    main={main}\n    pageContext={pageContext}\n    scripts={[\&quot;/vendors/d3/d3.min.js\&quot;]}\n  &gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default Icosahedron\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;icosahedron&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Example using D3.js of a 3D geometric figure, which has each face with a different color using a color scale and a sinusoidal animated movement.&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Tue, 17 Aug 2021 22:45:51 GMT</p>
    </body>
  </html>
  