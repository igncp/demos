
  <!DOCTYPE html>
  <html>
    <head>
      <title>page-data.json</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">public/page-data/d3js/multiline-voronoi/page-data.json</td><td class="">100.00%</td><td class="">95%</td><td class="">0</td><td class="">0</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">{&quot;componentChunkName&quot;:&quot;component---src-pages-d-3-js-multiline-voronoi-tsx&quot;,&quot;path&quot;:&quot;/d3js/multiline-voronoi/&quot;,&quot;result&quot;:{&quot;pageContext&quot;:{&quot;demoInfo&quot;:{&quot;data&quot;:[&quot;data.tsv&quot;],&quot;docs&quot;:[[&quot;d3-axis API reference&quot;,&quot;https://github.com/d3/d3-axis#api-reference&quot;],[&quot;d3-axis Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-axis/index.d.ts&quot;],[&quot;d3-shape API reference&quot;,&quot;https://github.com/d3/d3-shape#api-reference&quot;],[&quot;d3-shape Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-shape/index.d.ts&quot;],[&quot;d3-scale API reference&quot;,&quot;https://github.com/d3/d3-scale#api-reference&quot;],[&quot;d3-scale Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-scale/index.d.ts&quot;],[&quot;d3-selection API reference&quot;,&quot;https://github.com/d3/d3-selection#api-reference&quot;],[&quot;d3-selection Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-selection/index.d.ts&quot;],[&quot;d3-delaunay API reference&quot;,&quot;https://github.com/d3/d3-delaunay#api-reference&quot;],[&quot;d3-delaunay Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-delaunay/index.d.ts&quot;],[&quot;Delaunay Triangulation Wikipedia Article&quot;,&quot;https://en.wikipedia.org/wiki/Delaunay_triangulation&quot;],[&quot;d3-scale-chromatic API reference&quot;,&quot;https://github.com/d3/d3-scale-chromatic#api-reference&quot;],[&quot;d3-scale-chromatic Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-scale-chromatic/index.d.ts&quot;],[&quot;d3-fetch API reference&quot;,&quot;https://github.com/d3/d3-fetch#api-reference&quot;],[&quot;d3-fetch Types&quot;,&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-fetch/index.d.ts&quot;]],&quot;isCompleted&quot;:true,&quot;name&quot;:&quot;Multi-Line Voronoi&quot;,&quot;notes&quot;:[&quot;Click one time to just show a line, click again to sho all&quot;,&quot;Added color and dropshadow for 3D effect&quot;,&quot;Added label data and clicked function&quot;],&quot;sources&quot;:[&quot;http://bl.ocks.org/mbostock/8033015&quot;],&quot;summary&quot;:[],&quot;category&quot;:&quot;d3js&quot;,&quot;files&quot;:{&quot;cssModule&quot;:&quot;.multilineVoronoiChart {\n  position: relative;\n\n  .axis path,\n  .axis line {\n    fill: none;\n    shape-rendering: crispEdges;\n    stroke: #000;\n  }\n\n  .cities {\n    fill: none;\n    stroke: #aaa;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    stroke-width: 1.5px;\n  }\n\n  .cityHover {\n    stroke: #000;\n  }\n\n  .focus text {\n    text-anchor: middle;\n    text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;\n  }\n\n  .voronoi path {\n    fill: none;\n    pointer-events: all;\n  }\n\n  .voronoiShow path {\n    stroke: red;\n    stroke-opacity: 0.2;\n  }\n}\n\n:global #form {\n  position: absolute;\n  right: 30px;\n  top: 20px;\n}\n&quot;,&quot;demo&quot;:[{&quot;content&quot;:&quot;import {\n  Selection,\n  axisBottom,\n  axisLeft,\n  extent,\n  line as lineD3,\n  max,\n  scaleLinear,\n  scaleOrdinal,\n  scaleTime,\n  schemePastel2,\n  select,\n  selectAll,\n  timeFormat,\n  timeParse,\n  tsv,\n} from \&quot;d3\&quot;\nimport { Delaunay } from \&quot;d3-delaunay\&quot;\n\nimport * as styles from \&quot;./multiline-voronoi.module.css\&quot;\n\ntype InitialDataItem = {\n  [monthKey: string]: string\n  name: string\n}\n\ntype City = {\n  metrics: CityMetric[]\n  name: string\n}\n\ntype CityMetric = {\n  cityName: string\n  date: Date\n  value: number\n}\n\nconst formatStr = \&quot;%Y-%m\&quot;\n\nconst monthNames = [\n  \&quot;January\&quot;,\n  \&quot;February\&quot;,\n  \&quot;March\&quot;,\n  \&quot;April\&quot;,\n  \&quot;May\&quot;,\n  \&quot;June\&quot;,\n  \&quot;July\&quot;,\n  \&quot;August\&quot;,\n  \&quot;September\&quot;,\n  \&quot;October\&quot;,\n  \&quot;November\&quot;,\n  \&quot;December\&quot;,\n]\n\nconst texts = {\n  chartTitle: \&quot;US Unemployment Rate\&quot;,\n  tooltipPart1: (cityMetric: CityMetric) =&gt; `${cityMetric.cityName.trim()}: `,\n  tooltipPart2: (cityMetric: CityMetric) =&gt; {\n    const date = `${\n      monthNames[cityMetric.date.getMonth()]\n    } of ${cityMetric.date.getFullYear()}`\n\n    return ` ${(cityMetric.value * 100).toFixed(2)}% - ${date}`\n  },\n}\n\nconst fetchData = async () =&gt; {\n  const monthFormat = timeFormat(formatStr)\n  const monthParse = timeParse(formatStr)\n\n  const dataItems = ((await tsv(\n    `${ROOT_PATH}data/d3js/multiline-voronoi/data.tsv`\n  )) as unknown) as InitialDataItem[]\n\n  const months: Date[] = Object.keys(dataItems[0])\n    .map((v) =&gt; monthParse(v)!)\n    .filter(Number)\n\n  const cities: City[] = dataItems.map((initialCity: InitialDataItem) =&gt; {\n    const name = initialCity.name\n      .replace(/(msa|necta div|met necta|met div)$/i, \&quot;\&quot;)\n      .trim()\n\n    return {\n      metrics: months.map((date: Date) =&gt; {\n        const itemKey = monthFormat(date) as string\n        const { [itemKey as keyof InitialDataItem]: itemValue } = initialCity\n        const value: number = Number(itemValue) / 100\n\n        return {\n          cityName: name,\n          date,\n          value,\n        }\n      }),\n      name,\n    }\n  })\n\n  return { cities, months }\n}\n\nconst margin = {\n  bottom: 70,\n  left: 80,\n  right: 70,\n  top: 60,\n}\n\ntype RenderChart = (o: {\n  cities: City[]\n  months: Date[]\n  rootElId: string\n}) =&gt; {\n  setVoronoi: (v: boolean) =&gt; void\n}\n\nconst addFilter = (\n  svg: Selection&lt;SVGGElement, unknown, HTMLElement, unknown&gt;\n) =&gt; {\n  const defs = svg.append(\&quot;defs\&quot;)\n  const filter = defs.append(\&quot;filter\&quot;).attr(\&quot;id\&quot;, \&quot;drop-shadow\&quot;)\n\n  filter\n    .append(\&quot;feGaussianBlur\&quot;)\n    .attr(\&quot;in\&quot;, \&quot;SourceAlpha\&quot;)\n    .attr(\&quot;stdDeviation\&quot;, 1)\n\n  filter.append(\&quot;feOffset\&quot;).attr(\&quot;dx\&quot;, 1).attr(\&quot;dy\&quot;, 1)\n  filter\n    .append(\&quot;feComponentTransfer\&quot;)\n    .append(\&quot;feFuncA\&quot;)\n    .attr(\&quot;slope\&quot;, \&quot;1\&quot;)\n    .attr(\&quot;type\&quot;, \&quot;linear\&quot;)\n\n  const feMerge = filter.append(\&quot;feMerge\&quot;)\n\n  feMerge.append(\&quot;feMergeNode\&quot;)\n  feMerge.append(\&quot;feMergeNode\&quot;).attr(\&quot;in\&quot;, \&quot;SourceGraphic\&quot;)\n}\n\nconst renderChart: RenderChart = ({ cities, months, rootElId }) =&gt; {\n  const color = scaleOrdinal(schemePastel2)\n\n  const state: {\n    clickToggle: boolean\n    voronoiGroup: Selection&lt;SVGGElement, unknown, HTMLElement, unknown&gt; | null\n  } = {\n    clickToggle: false,\n    voronoiGroup: null,\n  }\n\n  const rootEl = document.getElementById(rootElId) as HTMLElement\n\n  rootEl.classList.add(styles.multilineVoronoiChart)\n\n  const width =\n    rootEl.getBoundingClientRect().width - margin.left - margin.right\n\n  const height = 500 - margin.top - margin.bottom\n\n  const xScale = scaleTime().range([0, width])\n  const yScale = scaleLinear().range([height, 0])\n\n  const lineXTransformer = (cityMetric: CityMetric) =&gt; xScale(cityMetric.date)\n  const lineYTransformer = (cityMetric: CityMetric) =&gt; yScale(cityMetric.value)\n\n  const cityNameToLine: { [cityName: string]: SVGPathElement } = {}\n\n  const svg = select(`#${rootElId}`)\n    .append(\&quot;svg\&quot;)\n    .attr(\&quot;width\&quot;, width + margin.left + margin.right)\n    .attr(\&quot;height\&quot;, height + margin.top + margin.bottom)\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;transform\&quot;, `translate(${margin.left},${margin.top})`)\n\n  xScale.domain(extent&lt;Date&gt;(months) as [Date, Date])\n  yScale\n    .domain([\n      0,\n      max(cities, (city: City) =&gt;\n        max(city.metrics, (cityMetric: CityMetric) =&gt; cityMetric.value)\n      ) as number,\n    ])\n    .nice()\n\n  svg\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, `${styles.axis} axis--x`)\n    .attr(\&quot;transform\&quot;, `translate(0,${height})`)\n    .call(axisBottom(xScale))\n\n  svg\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;class\&quot;, `${styles.axis} axis--y`)\n    .call(axisLeft(yScale).ticks(10, \&quot;%\&quot;))\n    .append(\&quot;text\&quot;)\n    .attr(\&quot;x\&quot;, 20)\n    .attr(\&quot;dy\&quot;, \&quot;.32em\&quot;)\n    .style(\&quot;font-weight\&quot;, \&quot;bold\&quot;)\n    .text(texts.chartTitle)\n\n  const focus = svg\n    .append(\&quot;g\&quot;)\n    .attr(\&quot;transform\&quot;, \&quot;translate(-100,-100)\&quot;)\n    .attr(\&quot;class\&quot;, styles.focus)\n\n  addFilter(svg)\n\n  const line = lineD3&lt;CityMetric&gt;().x(lineXTransformer).y(lineYTransformer)\n\n  const generateLines = (usedCities: City[]) =&gt; {\n    svg\n      .append(\&quot;g\&quot;)\n      .attr(\&quot;class\&quot;, styles.cities)\n      .selectAll(\&quot;path\&quot;)\n      .data(usedCities)\n      .enter()\n      .append(\&quot;path\&quot;)\n      .attr(\&quot;d\&quot;, function (city: City) {\n        cityNameToLine[city.name] = this\n\n        return line(city.metrics)\n      })\n      .style(\&quot;stroke\&quot;, (_city, index) =&gt; color(index.toString()))\n      .style(\&quot;filter\&quot;, () =&gt; \&quot;url(#drop-shadow)\&quot;)\n\n    generateVoronoi(usedCities) // eslint-disable-line @typescript-eslint/no-use-before-define\n  }\n\n  const generateVoronoi = (usedCities: City[]) =&gt; {\n    const mouseover = (_e: unknown, cityMetric: CityMetric) =&gt; {\n      const { [cityMetric.cityName]: linePath } = cityNameToLine\n\n      select(linePath).classed(styles.cityHover, true)\n      ;(linePath.parentNode as SVGGElement).appendChild(linePath)\n\n      focus.attr(\n        \&quot;transform\&quot;,\n        `translate(${lineXTransformer(cityMetric)},${lineYTransformer(\n          cityMetric\n        )})`\n      )\n\n      focus.select(\&quot;.text1\&quot;).text(texts.tooltipPart1(cityMetric))\n      focus.select(\&quot;.text2\&quot;).text(texts.tooltipPart2(cityMetric))\n    }\n\n    const mouseout = (_e: unknown, d: CityMetric) =&gt; {\n      const { [d.cityName]: linePath } = cityNameToLine\n\n      select(linePath).classed(styles.cityHover, false)\n\n      return focus.attr(\&quot;transform\&quot;, \&quot;translate(-100,-100)\&quot;)\n    }\n\n    const clicked = (_e: unknown, d: CityMetric) =&gt; {\n      state.clickToggle = !state.clickToggle\n\n      selectAll(`.${styles.cities}`).remove()\n      selectAll(`.${styles.voronoi}`).remove()\n\n      const inputData: City[] = (() =&gt; {\n        if (state.clickToggle) {\n          const city = cities.find((c) =&gt; c.name === d.cityName) as City\n\n          return [city]\n        }\n\n        return cities\n      })()\n\n      generateLines(inputData)\n    }\n\n    focus.append(\&quot;circle\&quot;).attr(\&quot;r\&quot;, 3.5)\n    focus.append(\&quot;text\&quot;).attr(\&quot;class\&quot;, \&quot;text1\&quot;).attr(\&quot;y\&quot;, -30)\n    focus.append(\&quot;text\&quot;).attr(\&quot;class\&quot;, \&quot;text2\&quot;).attr(\&quot;y\&quot;, -10)\n\n    const flatCityMetrics = usedCities.reduce((acc, city) =&gt; {\n      city.metrics.forEach((cityMetric) =&gt; {\n        acc.push(cityMetric)\n      })\n\n      return acc\n    }, [] as CityMetric[])\n\n    const voronoi = Delaunay.from(\n      flatCityMetrics,\n      lineXTransformer,\n      lineYTransformer\n    ).voronoi([\n      -margin.left,\n      -margin.top,\n      width + margin.right,\n      height + margin.bottom,\n    ])\n\n    state.voronoiGroup = svg.append(\&quot;g\&quot;).attr(\&quot;class\&quot;, styles.voronoi)\n\n    state.voronoiGroup\n      .selectAll(\&quot;path\&quot;)\n      .data(flatCityMetrics)\n      .enter()\n      .append(\&quot;path\&quot;)\n      .attr(\&quot;d\&quot;, (_cityMetric: CityMetric, index) =&gt; voronoi.renderCell(index))\n      .on(\&quot;mouseover\&quot;, mouseover)\n      .on(\&quot;mouseout\&quot;, mouseout)\n      .on(\&quot;click\&quot;, clicked)\n  }\n\n  generateLines(cities)\n\n  return {\n    setVoronoi: (checked: boolean) =&gt; {\n      state.voronoiGroup!.classed(styles.voronoiShow, checked)\n    },\n  }\n}\n\nconst main = async () =&gt; {\n  const rootElId = \&quot;chart\&quot;\n\n  const { cities, months } = await fetchData()\n\n  const { setVoronoi } = renderChart({\n    cities,\n    months,\n    rootElId,\n  })\n\n  const form = document.getElementById(\&quot;form\&quot;) as HTMLElement\n  const chart = document.getElementById(rootElId) as HTMLElement\n\n  chart.appendChild(form)\n\n  select(\&quot;#show-voronoi\&quot;)\n    .property(\&quot;disabled\&quot;, false)\n    .on(\&quot;change\&quot;, (e: MouseEvent) =&gt; {\n      setVoronoi((e.target as HTMLInputElement).checked || false)\n    })\n}\n\nexport default main\n&quot;,&quot;fileName&quot;:&quot;multiline-voronoi&quot;}],&quot;page&quot;:{&quot;content&quot;:&quot;import React from \&quot;react\&quot;\n\nimport { DemoPageProps } from \&quot;@/common\&quot;\n\nimport Demo from \&quot;@/components/demo\&quot;\n\nimport main from \&quot;@/demos/multiline-voronoi/multiline-voronoi\&quot;\n\nconst MultilineVoronoi = ({ pageContext }: DemoPageProps) =&gt; (\n  &lt;Demo main={main} pageContext={pageContext}&gt;\n    &lt;form id=\&quot;form\&quot;&gt;\n      &lt;input id=\&quot;show-voronoi\&quot; type=\&quot;checkbox\&quot; /&gt;{\&quot; \&quot;}\n      &lt;label htmlFor=\&quot;show-voronoi\&quot;&gt;Show Voronoi lines&lt;/label&gt;\n    &lt;/form&gt;\n    &lt;div id=\&quot;chart\&quot; /&gt;\n  &lt;/Demo&gt;\n)\n\nexport default MultilineVoronoi\n&quot;,&quot;type&quot;:&quot;tsx&quot;}},&quot;key&quot;:&quot;multiline-voronoi&quot;},&quot;meta&quot;:{&quot;description&quot;:&quot;Multiline chart example using D3.js, with Voronoi functionality and the ability to show a single line after it is clicked. The label and style are also changed.&quot;}}},&quot;staticQueryHashes&quot;:[]}</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 18 Aug 2021 22:45:40 GMT</p>
    </body>
  </html>
  