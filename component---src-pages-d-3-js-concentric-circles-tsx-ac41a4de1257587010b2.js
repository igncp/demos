"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[3],{9646:function(e,t,r){var n;r.d(t,{Z:function(){return p}});var a=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"==typeof e&&i.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l,d,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r},f=0,g=0;var p=function(e,t,r){var n=t&&r||0,a=t||new Array(16),i=(e=e||{}).node||l,s=void 0!==e.clockseq?e.clockseq:d;if(null==i||null==s){var c=e.random||(e.rng||o)();null==i&&(i=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==s&&(s=d=16383&(c[6]<<8|c[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:g+1,m=u-f+(p-g)/1e4;if(m<0&&void 0===e.clockseq&&(s=s+1&16383),(m<0||u>f)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=u,g=p,d=s;var v=(1e4*(268435455&(u+=122192928e5))+p)%4294967296;a[n++]=v>>>24&255,a[n++]=v>>>16&255,a[n++]=v>>>8&255,a[n++]=255&v;var y=u/4294967296*1e4&268435455;a[n++]=y>>>8&255,a[n++]=255&y,a[n++]=y>>>24&15|16,a[n++]=y>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(var w=0;w<6;++w)a[n+w]=i[w];return t||h(a)}},960:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(7294),a=r(1745),o=r(8634),i=r(2656),s=r.n(i),c=r(8747),u=r.n(c),l=r(4494),d=r(9646),h=20,f=20,g=function(){function e(t){var r=this;this.state={dragX:0,dragY:0,selectedCircles:{},zoom:e.defaultZoom},this.handleResize=function(){r.render()},this.config=t;var n=(0,l.Ys)("#"+t.rootElId),a=n.append("svg"),o=a.append("g"),i=o.append("g"),s=i.append("text").attr("text-anchor","middle").attr("width","20px");this.circleClass="name-circle-"+(0,d.Z)().slice(0,6),this.elements={descriptionSel:s,dragSel:o,gSel:i,rootSel:n,svgSel:a},this.setupDrag(),this.render(),window.addEventListener("resize",this.handleResize)}e.renderChart=function(t){return new e(t)};var t=e.prototype;return t.teardown=function(){window.removeEventListener("resize",this.handleResize)},t.setZoom=function(t){var r,n,a,o,i,s,c,u,l=this.getDimensions(),d=l.height,h=l.width,f=(r={baseZoom:e.defaultZoom,newZoom:t,prevDragX:this.state.dragX,prevDragY:this.state.dragY,prevZoom:this.state.zoom,zoomPoint:{x:h/2,y:d/2}},n=r.baseZoom,a=r.newZoom,o=r.prevDragX,i=r.prevDragY,s=r.prevZoom,c=r.zoomPoint,u=(a-s)/n,{x:o+-c.x*u,y:i+-c.y*u});this.state.zoom=t,this.state.dragX=f.x,this.state.dragY=f.y,this.updateDrag()},t.updateDrag=function(){this.elements.dragSel.attr("transform","translate("+this.state.dragX+","+this.state.dragY+") scale("+this.state.zoom/e.defaultZoom+")")},t.setupDrag=function(){var e=this,t=this.elements.svgSel,r=(0,l.ohM)().on("drag",(function(t){e.state.dragX+=t.dx,e.state.dragY+=t.dy,e.updateDrag()}));t.style("cursor","move").call(r).on("wheel",null)},t.getDimensions=function(){var e=this.config,t=e.circlesData,r=e.getCircleValue,n=e.rootElId,a=document.getElementById(n).getBoundingClientRect().width-h-f;return{height:2.5*(0,l.Fp7)(t,r),width:a}},t.render=function(){var e=this,t=this.config,r=t.chartDescription,n=t.circlesData,a=t.getCircleId,o=t.getCircleTitle,i=t.getCircleValue,s=this.elements;this.updateDrag();var c=(0,l.Fp7)(n,i),u=(0,l.PKp)().domain([0,c]).range([0,.5]),d="orange",g=function(t){var r=a(t);if(e.state.selectedCircles[r])return d;var n=i(t),o=u(n);return(0,l.vcY)(o)},p=this.getDimensions(),m=p.height,v=p.width;s.svgSel.attr("width",v+h+f).attr("height",m+h+f);var y=n.slice(0).sort((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1];return i(a)-i(n)})),w=s.gSel.selectAll(".circle-group").data(y,a);w.enter().append("g").attr("class","circle-group").append("circle").attr("class",this.circleClass),w.exit().remove();var C=Math.min(m/2,v/2),x=(0,l.BYU)().domain([0,c]).range([0,C]),k=s.gSel.selectAll("."+this.circleClass),D=this.state.selectedCircles,Z=function(e){var t=a(e);return D[t]?"4px":"2px"};k.attr("cx",v/2).attr("cy",m/2).style("fill","rgba(0, 0, 0, 0)").style("stroke",g).style("stroke-width",Z).attr("r",(function(e){return x(i(e))})).on("mouseenter",(function(){(0,l.Ys)(this).style("stroke",d).style("stroke-width","4px")})).on("mouseleave",(function(){(0,l.Ys)(this).style("stroke",g).style("stroke-width",Z)})).on("click",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1],o=a(n);D[o]=!D[o],(0,l.Ys)(this).style("stroke",g).style("stroke-width",Z)})).append("title").text(o),s.descriptionSel.text(r).attr("transform","translate("+v/2+","+(m+25)+")")},e}();g.defaultZoom=10;var p="chart",m="year-slider",v=function(){var e=(0,o.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.gyn)("/demos/data/d3js/concentric-circles/data.csv");case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object.assign({},e,{count:+e.count})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e){return e.count},w=function(e){return e.name},C=function(e){return e.name+": "+e.count},x=function(e){var t,r=e.namesMetrics;return{chartDescription:"Circles radius are proportional to order in the ranking, click to select",circlesData:(t=new Set,r.sort((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1];return a.count-n.count})).filter((function(e){return!t.has(e.name)&&(t.add(e.name),!0)})).reverse()),getCircleId:w,getCircleTitle:C,getCircleValue:y,rootElId:p}};"undefined"!=typeof window&&r(7252);var k=function(){var e=(0,o.Z)(s().mark((function e(){var t,r,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,r=g.defaultZoom,n=x({namesMetrics:t}),a=g.renderChart(n),u()("#year-slider").slider({change:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1].value;a.setZoom(n)},max:100,min:r,value:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=k,Z=function(e){var t=e.pageContext;return n.createElement(a.Z,{main:D,pageContext:t},n.createElement("div",{style:{marginBottom:20}},n.createElement("p",null,"Zoom"),n.createElement("div",{id:m})),n.createElement("div",{id:p}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-concentric-circles-tsx-ac41a4de1257587010b2.js.map