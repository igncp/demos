(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[692],{4275:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(7294),a=n(5414),o=n(2552),l=function(e){var t=e.isCompleted,n=e.mainSource,a=e.name;return r.createElement("h2",{className:"row",id:o.dc},r.createElement("span",{className:"col-xs-12 col-sm-10 p-0"},r.createElement("span",{className:o.jS},a," Chart "),r.createElement("small",{id:o.l4,title:"Main Source"},r.createElement("a",{href:n},"···")),!t&&r.createElement("small",{id:o.oT,title:"This demo is still work in progress"},"WIP")),r.createElement("span",{className:"col-sm-2 p-0 d-xs-none "+o.eR},r.createElement("a",{className:"btn btn-info",href:"/demos/",role:"button"},r.createElement("span",{className:"glyphicon glyphicon-home"})," Home")))},i=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://github.com/igncp/demos/blob/main/"+t,rel:"noreferrer",target:"_blank"},"Code in Github"))},c=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://igncp.github.io/demos/coverage-ts/files/"+t+".html",rel:"noreferrer",target:"_blank"},"TypeScript coverage report"))},s=function(e){var t=e.demoInfo;if("undefined"==typeof window)return null;var n="pages/"+t.category+"/"+t.key+"."+t.files.page.type;return r.createElement("div",null,!!t.notes.length&&r.createElement("div",{className:"bs-callout bs-callout-info"+o.$c},r.createElement("p",null,r.createElement("strong",null,"Notes:")),r.createElement("ul",null,t.notes.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1];return r.createElement("li",{dangerouslySetInnerHTML:{__html:a},key:o})})))),!!t.summary.length&&r.createElement("div",{className:"bs-callout bs-callout-summary "+o.$c},r.createElement("p",null,r.createElement("strong",null,"Implementation Summary:")),r.createElement("ul",null,t.summary.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1];return r.createElement("p",{dangerouslySetInnerHTML:{__html:a},key:o})})))),r.createElement("div",{className:"bs-callout bs-callout-primary",id:o.V2},r.createElement("p",null,r.createElement("strong",null,"Sources:")),r.createElement("ul",null,t.sources.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],l=t[1];return r.createElement("li",{key:l},r.createElement("span",{className:o.hB},"[",l+1,"]"),":"," ",r.createElement("a",{href:a},a))})))),!!t.docs.length&&r.createElement("div",{className:"bs-callout bs-callout-secondary",id:"docs"},r.createElement("p",null,r.createElement("strong",null,"Docs:")),r.createElement("ul",null,t.docs.map((function(e){return r.createElement("li",{key:e[1],style:{border:"1px solid #157ad4",borderRadius:5,display:"inline-block",margin:5,padding:5}},r.createElement("a",{href:e[1],rel:"noreferrer",target:"_blank"},e[0]))})))),!!t.dataFiles.length&&r.createElement("div",{className:"bs-callout bs-callout-warning",id:o.sD},r.createElement("p",null,r.createElement("strong",null,"Data files: "),t.dataFiles.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=n[0],l=n[1];return r.createElement("a",{href:"/demos/data/"+t.category+"/"+t.key+"/"+o,key:l},o)})))),r.createElement("div",{className:"bs-callout bs-callout-success",id:"code"},r.createElement("p",null,r.createElement("strong",null,"Code:")),r.createElement("ul",null,t.files.demoTS.map((function(e){var t=e.content,n=e.filePath;return r.createElement("li",{key:n},r.createElement("p",null,r.createElement("span",{className:o.s2},n)," ",r.createElement(r.Fragment,null,r.createElement(i,{filePath:n})," ",r.createElement(c,{filePath:n}))),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t}})))})),r.createElement("li",null,r.createElement("p",null,r.createElement("span",{className:o.s2},n)," ",r.createElement(i,{filePath:n})," ",r.createElement(c,{filePath:n})),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t.files.page.content}}))),t.files.demoCSS.map((function(e){var t=e.content,n=e.filePath;return r.createElement("li",{key:n},r.createElement("p",null,r.createElement("span",{className:o.s2},n)," ",r.createElement(i,{filePath:n})),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t}})))})))))},u=n(2504),d=function(e){return"/"===e[0]?"/demos/"+e.replace(/^\//,""):e},m=function(e){var t=e.main,n=e.children,o=e.scripts,i=void 0===o?[]:o,c=e.links,m=void 0===c?[]:c,f=e.pageContext,h=f.demoInfo,p=f.meta,g=h.isCompleted,v=h.name,y=h.sources;return(0,r.useEffect)((function(){"undefined"!=typeof window&&t().catch((function(e){console.error("error:",e)}))}),[]),r.createElement(u.Z,null,r.createElement(a.q,{link:m.map((function(e){return{href:d(e),rel:"stylesheet",type:"text/css"}})),meta:[{content:p.description,name:"description"}],script:i.map((function(e){return{src:d(e),type:"text/javascript"}})),title:h.name+" | Demos igncp"}),r.createElement(l,{isCompleted:g,mainSource:y[0],name:v}),n,r.createElement(s,{demoInfo:h}))}},2504:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),a=n(2552),o=function(){return r.createElement("footer",{className:a.Mv},r.createElement("p",null,(new Date).getFullYear()))},l=function(){return r.createElement("div",{className:a.H6},r.createElement("h1",{className:"row"},r.createElement("span",{className:"col-3 col-md-8 p-0"},r.createElement("a",{href:"/demos/"},"Demos")," ",r.createElement("small",{className:"hide-tablet"},"interactive data visualization examples")),r.createElement("span",{className:"col-9 col-md-4 p-0",id:a.ak},r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=follow",width:"119"}),r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=fork",width:"62"}),r.createElement("iframe",{frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=watch",width:"52"}))))},i=function(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement("div",{className:a.Mg},r.createElement("div",{className:"px-3 px-sm-5"},r.createElement(l,null),t)),r.createElement(o,null))}},826:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(7294),a=n(4275),o=n(8634),l=n(2656),i=n.n(l),c=n(5221),s=n(1504),u="tree-link",d=function(){function e(e){this.initialOpts=e,this.linkPath=(0,c.h5h)().x((function(e){return e.y})).y((function(e){return e.x})),this.linkG=e.container.append("g").attr("fill","none").attr("stroke",e.linkDefaultColor).attr("stroke-opacity",.4).attr("stroke-width",1.5)}var t=e.prototype;return t.update=function(e){var t,n=this.initialOpts,r=n.getInitialPosition,a=n.getPosition,o=n.openCloseAnimationDuration,l=this.linkG,i=this.linkPath,c=e.getData,d=e.source,m=(t=l.selectAll("path")).data.apply(t,(0,s.Z)(c())),f=m.enter().append("path").attr("class",u).attr("d",(function(){var e=r(d);return i({source:e,target:e})}));m.merge(f).transition().duration(o).attr("d",(function(e){return i(e)})),m.exit().transition().duration(o).remove().attr("d",(function(){var e=a(d);return i({source:e,target:e})}))},t.getSelection=function(){return this.linkG.selectAll(".tree-link")},e}(),m=n(7956),f=function(){function e(e){this.className="small-button-"+Math.random().toFixed(6).split(".")[1],this.initialOpts=e}var t=e.prototype;return t.add=function(e){var t=e.container,n=e.onClick,r=this.initialOpts,a=r.dx,o=r.fontSize,l=r.text,i=t.append("g").style("transform","translate("+a+",-10px)").attr("class",this.className).style("display","none").attr("cursor","pointer");i.append("circle").attr("r",8).attr("cx",5).attr("cy",-7).attr("fill","#ddd").style("font-size",o).text(l);var c=i.append("text").style("font-size",o).text(l);i.on("mouseenter",(function(){c.attr("fill","orange")})).on("mouseleave",(function(){c.attr("fill",null)})).on("click",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],o=t[1];a.stopPropagation(),n(o)}))},t.hide=function(e){var t=e.container,n=e.filterFn;(0,c.Ys)(t).selectAll("."+this.className).style("display",(function(e){return!n||n(e)?"none":"block"}))},e}(),h="node-circle",p="node-label",g=function(){function e(e){this.hoveredItems=new Set,this.initialOpts=e,this.nodeG=this.initialOpts.container.append("g").attr("pointer-events","all"),this.circleLinkForEffect=this.initialOpts.container.insert("circle",":first-child").attr("r",4).attr("fill","none"),this.plusButton=new f({dx:"0px",fontSize:"20px",text:"+"}),this.minusButton=new f({dx:"-15px",fontSize:"25px",text:"-"})}return e.prototype.update=function(e){var t,n=e.source,r=this.circleLinkForEffect,a=this.hoveredItems,o=this.initialOpts,l=o.displayRemoveButton,i=o.getInitialPosition,u=o.getNodeId,d=o.getPointingLinkForNode,f=o.getPosition,g=o.getText,v=o.hasDescendants,y=o.linkDefaultColor,E=(t=this.nodeG.selectAll("g")).data.apply(t,(0,s.Z)(e.getData())),x=function(e){return v(e)?a.has(u(e))?"blue":"green":"red"},b=E.enter().append("g").attr("transform",(function(){var e=i(n);return"translate("+e.y+","+e.x+")"})).attr("fill-opacity",0).attr("stroke-opacity",0).on("click",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[1];e.onNodeClick(a)}));b.append("circle").attr("r",10).attr("class",h).attr("stroke-width",10);b.append("text").attr("class",p).attr("dy","5px").style("font-size","20px").text(g).clone(!0).lower().attr("stroke-linejoin","round").attr("stroke-width",3).attr("stroke","white");var N=this.minusButton,k=this.plusButton,w=[k,N],I=function(e){w.forEach((function(t){t.hide({container:e,filterFn:function(e){return t===N&&!l(e)}})}))};b.on("mouseenter",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[1];a.add(u(o)),(0,c.Ys)(this).select("circle").attr("fill",x),I(this);var l=d(o);if(l.size()){l.style("stroke","orange"),r.attr("fill","orange");var i=m.Z.path(l.node());(0,m.Z)({duration:500,easing:"easeInOutSine",endDelay:1e3,loop:!0,targets:r.node(),translateX:i("x"),translateY:i("y")})}})).on("mouseleave",(function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var l=n[1];a.delete(u(l)),(0,c.Ys)(this).select("circle").attr("fill",x),w.forEach((function(t){t.hide({container:e})}));var i=d(l);i.size()&&(r.attr("fill","none"),i.style("stroke",y),m.Z.remove(r.node()))})),E.merge(b).transition().duration(this.initialOpts.openCloseAnimationDuration).attr("transform",(function(e){var t=f(e);return"translate("+t.y+","+t.x+")"})).attr("fill-opacity",1).attr("stroke-opacity",1),[E,b].forEach((function(t){k.add({container:t,onClick:function(t){e.onNodeAdd(t)}}),N.add({container:t,onClick:function(t){e.onNodeRemove(t)}}),t.each((function(e){a.has(u(e))&&I(this)})),t.attr("cursor",(function(e){return v(e)?"pointer":"default"})),t.selectAll(".node-circle").attr("fill",x),t.selectAll(".node-label").attr("dx",(function(e){return v(e)?"-10px":"10px"})).attr("x",(function(e){return v(e)?-6:6})).attr("text-anchor",(function(e){return v(e)?"end":"start"}))}));var A=f(n);E.exit().transition().duration(this.initialOpts.openCloseAnimationDuration).remove().attr("transform","translate("+A.y+","+A.x+")").attr("fill-opacity",0).attr("stroke-opacity",0)},e}(),v="#555",y=function e(t){var n,r=t.getId,a=t.node,o=t.nodeId;return r(a)===o?a:(null!==(n=a.children)&&void 0!==n?n:[]).reduce((function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var l=n[0],i=n[1];return null!=l?l:e({getId:r,node:i,nodeId:o})}),null)},E=function e(t){var n,r=t.getId,a=t.node,o=t.nodeId;return null!==(n=a.children)&&void 0!==n&&n.length?a.children.some((function(e){return r(e)===o}))?a:a.children.reduce((function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var l=n[0],i=n[1];return null!=l?l:e({getId:r,node:i,nodeId:o})}),null):null},x=20,b=120,N=120,k=20,w=800-k-x,I=function e(t){var n;return Object.assign({},t,{_children:void 0,children:(null!==(n=t.children)&&void 0!==n?n:[]).map((function(t){return e(t)})),x:0,x0:0,y:0,y0:0})},A=function(e){var t=e.rootData,n=e.rootElId,r=document.getElementById(n);r.classList.add("collapsible-tree-module--collapsibleTreeChart--32549");var a=r.getBoundingClientRect().width-N-b,o=I(t),l=(0,c.bT9)(o);l.data.x0=w/2,l.data.y0=0;var i=(0,c.G_s)().nodeSize([40,250]),s=i(l);s.descendants().forEach((function(e){e.data._children=e.children,e.depth&&(e.children=void 0)}));var u=(0,c.Ys)("#"+n).append("svg").attr("width",a+N+b).attr("height",w+k+x).append("g");!function(e){var t=b,n=w/2,r={x:0,y:0},a=(0,c.ohM)().on("drag",(function(a){r.x+=a.dx,r.y+=a.dy,e.attr("transform","translate("+(t+r.x)+","+(n+r.y)+")")}));e.attr("transform","translate("+t+","+n+")"),(0,c.Ys)(e.node().parentNode).style("cursor","move").call(a)}(u);var m={container:u,getInitialPosition:function(e){return{x:e.data.x0,y:e.data.y0}},getPosition:function(e){return{x:e.x,y:e.y}},linkDefaultColor:v,openCloseAnimationDuration:750},f=new d(m),h=new g(Object.assign({},m,{displayRemoveButton:function(t){return e.canBeRemoved(t.data)},getNodeId:function(t){return e.getNodeId(t.data)},getPointingLinkForNode:function(t){return f.getSelection().filter((function(n){return e.getNodeId(n.target.data)===e.getNodeId(t.data)}))},getText:function(t){return e.getNodeLabel(t.data)},hasDescendants:function(e){var t;return!(null===(t=e.data.children)||void 0===t||!t.length)}}));!function t(n){var r=s.descendants().reverse(),a=s.links();i(l),h.update({getData:function(){return[r,function(t){return e.getNodeId(t.data)}]},onNodeAdd:function(n){var r,a,o,l=e.onNodeAdd(n.data),i=I(l),s=(0,c.bT9)(i);s.depth=n.depth+1,s.parent=n,n.children=null!==(r=null!==(a=n.children)&&void 0!==a?a:n.data._children)&&void 0!==r?r:[],n.data._children=n.children,n.children.push(s),n.data.children=null!==(o=n.data.children)&&void 0!==o?o:[],n.data.children.push(s.data),window.requestAnimationFrame((function(){t(n)}))},onNodeClick:function(e){e.children=e.children?void 0:e.data._children,t(e)},onNodeRemove:function(n){var r=e.onNodeRemove(n.data),a=y({getId:function(t){return e.getNodeId(t.data)},node:l,nodeId:e.getNodeId(r)}),o=a.children.findIndex((function(t){return e.getNodeId(t.data)===e.getNodeId(n.data)}));a.children.splice(o,1),t(a)},source:n}),f.update({getData:function(){return[a,function(t){return e.getNodeId(t.target.data)}]},source:n}),s.eachBefore((function(e){e.data.x0=e.x,e.data.y0=e.y}))}(s)},C="chart",S=function e(t){var n,r=t.context,a=t.rawNode,o=r.id;return r.id+=1,Object.assign({},a,{children:(null!==(n=a.children)&&void 0!==n?n:[]).map((function(t){return e({context:r,rawNode:t})})),id:o})},D=function e(t){var n;return(null!==(n=t.children)&&void 0!==n?n:[]).reduce((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],o=n[1];return Math.max(e(o),a)}),t.id)},P=function(){var e=(0,o.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.AVB)("/demos/data/d3js/collapsible-tree/data.json");case 2:return t=e.sent,e.abrupt("return",S({context:{id:0},rawNode:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){return e.name},_=function(e){return e.id},L=function(e){return 0!==e.id},T=function(e){return{canBeRemoved:L,getNodeId:_,getNodeLabel:B,onNodeAdd:function(t){var n,r=D(e),a=y({getId:function(e){return e.id},node:e,nodeId:t.id});if(!a)throw new Error("Node not found");var o=r+1;a.children=null!==(n=a.children)&&void 0!==n?n:[];var l={id:o,name:"New Node id: "+o};return a.children.push(l),l},onNodeRemove:function(t){var n=E({getId:function(e){return e.id},node:e,nodeId:t.id});if(!n)throw new Error("No parent node");var r=n.children.findIndex((function(e){return e.id===t.id}));return n.children.splice(r,1),n},rootData:e,rootElId:C}},F=function(){var e=(0,o.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,n=T(t),A(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=F,M=function(e){var t=e.pageContext;return r.createElement(a.Z,{main:O,pageContext:t},r.createElement("div",{id:C}))}},2656:function(e,t,n){e.exports=n(3076)},2552:function(e,t,n){"use strict";n.d(t,{eR:function(){return r},rT:function(){return a},UG:function(){return o},ZV:function(){return l},Bf:function(){return i},K7:function(){return c},jS:function(){return s},s2:function(){return u},Mv:function(){return d},eQ:function(){return m},Be:function(){return f},$c:function(){return h},Mg:function(){return p},hB:function(){return g},H6:function(){return v},YX:function(){return y},zG:function(){return E},Vj:function(){return x},pn:function(){return b},x:function(){return N},oT:function(){return k},dc:function(){return w},l4:function(){return I},sD:function(){return A},V2:function(){return C},ak:function(){return S}});var r="styles-module--backHome--b9e05",a="styles-module--bullet--337e0",o="styles-module--d3js--ff3aa",l="styles-module--raphael--40af0",i="styles-module--storybook--f1bcc",c="styles-module--testing--9f8b3",s="styles-module--demoName--4057d",u="styles-module--fileNameWrapper--e0bd4",d="styles-module--footer--a0f96",m="styles-module--homeDemoNumber--755fe",f="styles-module--homeDemoNameLink--4b57a",h="styles-module--notes--e1c07",p="styles-module--rootLayout--03362",g="styles-module--sourceNumber--335c1",v="styles-module--pageHeader--06484",y="styles-module--rowWrapper--9f3a4",E="styles-module--demosLegend--16d25",x="styles-module--demosLists--52492",b="styles-module--highlightStorybook--b465e",N="styles-module--highlightTesting--b7d3f",k="styles-module--demoWip--18449",w="styles-module--demoTitle--7c73a",I="styles-module--mainSource--f7ebb",A="styles-module--dataList--54f77",C="styles-module--sourcesList--27e91",S="styles-module--ghButtons--1d466"},8634:function(e,t,n){"use strict";function r(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var l=e.apply(t,n);function i(e){r(l,a,o,i,c,"next",e)}function c(e){r(l,a,o,i,c,"throw",e)}i(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-collapsible-tree-tsx-a30d7dd90e3556fea626.js.map