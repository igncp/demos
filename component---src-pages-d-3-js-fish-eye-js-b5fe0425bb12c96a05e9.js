(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[118],{2137:function(t,e,n){"use strict";function r(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,c,"next",t)}function c(t){r(o,a,i,s,c,"throw",t)}s(void 0)}))}}n.d(e,{Z:function(){return a}})},1616:function(t,e,n){"use strict";var r=n(8646),a=n(2492),i=n.n(a),o={colorsScale:function(){},filterBlackOpacity:function(t,e,n,r){var a=e.append("defs").append("filter").attr("height","500%").attr("id","drop-shadow-"+t).attr("width","500%").attr("x","-200%").attr("y","-200%");a.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",n),a.append("feOffset").attr("dx",1).attr("dy",1),a.append("feComponentTransfer").append("feFuncA").attr("slope",r).attr("type","linear");var i=a.append("feMerge");return i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")},filterColor:function(t,e,n,r,a){null==a&&(a=!1);var i=e.append("defs").append("filter").attr("id","drop-shadow-"+t);return a&&i.attr("height","500%").attr("width","500%").attr("x","-200%").attr("y","-200%"),i.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),i.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",n),i.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),i.append("feComponentTransfer").append("feFuncA").attr("slope",r).attr("type","linear")},middleTitle:function(t,e,n,r){null==r&&(r=-15),t.append("text").attr("class","chart-title").attr("text-anchor","middle").attr("transform","translate("+String(e/2)+","+r+")").text(n).style("font-weight","bold")},svg:function(t,e,n,a){return r.Ys(t).text("").append("svg").attr("height",n+a.top+a.bottom).attr("width",e+a.left+a.right).append("g").attr("transform","translate("+a.left+","+a.top+")")},tooltip:function(t,e){null==e&&(e={});var n=i()({elementSelector:"",followElement:!1,followMouse:!1,leftOffst:60,tOpts:{container:"body",viewport:{selector:"#chart svg"}},topOffst:40},e);$(t).tooltip(n.tOpts),n.followMouse?$(t).hover((function(t){return $(".tooltip").css({left:String(t.pageX-n.leftOffst)+"px",top:String(t.pageY-n.topOffst)+"px"})})):n.followElement&&$(t).hover((function(){return $(".tooltip").css({left:String($(n.elementSelector).position().left-n.leftOffst)+"px",top:String($(n.elementSelector).position().top-n.topOffst)+"px"})}))}};e.Z=o},7665:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return k}});var r=n(7294),a=n(7538),i=n(2137),o=n(7757),s=n.n(o),c=n(8646);function u(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function l(t,e,n){function r(r){var a=t(r),i=a<n,o=c.Wem(t.range()),s=o[0],u=o[1],l=i?n-s:u-n;return 0==l&&(l=u-s),(i?-1:1)*l*(e+1)/(e+l/Math.abs(a-n))+n}return r.distortion=function(t){return arguments.length?(e=+t,r):e},r.focus=function(t){return arguments.length?(n=+t,r):n},r.copy=function(){return l(t.copy(),e,n)},r.nice=t.nice,r.ticks=t.ticks,r.tickFormat=t.tickFormat,r.range=t.range,function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.forEach((function(n){t[n]=u(t,e,e[n])})),t}(r,t,"domain","range")}var d={circular:function(){var t=200,e=2,n=null,r=null,a=[0,0];function i(e){var i=e.x-a[0],o=e.y-a[1],s=Math.sqrt(i*i+o*o);if(!s||s>=t)return{x:e.x,y:e.y,z:s>=t?1:10};var c=n*(1-Math.exp(-s*r))/s*.75+.25;return{x:a[0]+i*c,y:a[1]+o*c,z:Math.min(c,10)}}function o(){return n=(n=Math.exp(e))/(n-1)*t,r=e/t,i}return i.radius=function(e){return arguments.length?(t=+e,o()):t},i.distortion=function(t){return arguments.length?(e=+t,o()):e},i.focus=function(t){return arguments.length?(a=t,i):a},o()},scale:function(t){return l(t(),3,0)}},f=n(1616),p=function(){var t=(0,i.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.AVB("/demos/data/d3js/fish-eye/data.json"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(t){for(var e=t.toString();;){var n=e.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(e===n)break;e=n}return e},m=70,v=70,x=50,g=80,y=700-g-m,w=function(){function t(t){var e=t.rootElId,n=t.data;this.rootElId=e,this.data=n,this.setWidth(),this.setVars(),this.setDom()}var e=t.prototype;return e.render=function(){this.setChartTitle(),this.setBackground(),this.setPointer(),this.setFilter(),this.setAxis(),this.setLabels(),this.setDots(),this.setTitles(),this.bindMousemove(),this.bindClick()},e.setWidth=function(){this.width=document.getElementById(this.rootElId).getBoundingClientRect().width-v-x},e.setDom=function(){this.dom={svg:c.Ys("#"+this.rootElId).append("svg").attr("width",this.width+v+x).attr("height",y+g+m).append("g").attr("transform","translate("+v+","+g+")")}},e.setChartTitle=function(){return f.Z.middleTitle(this.dom.svg,this.width,"Income Per Capita vs Life Expectancy vs Population vs Region - 180 Countries",-40)},e.setVars=function(){var t=c.PKp().domain(["Sub-Saharan Africa","South Asia","Middle East & North Africa","America","Europe & Central Asia","East Asia & Pacific"]).range(c.i4X),e=c.PUr().domain([0,5e8]).range([5,60]),n=d.scale(c.p2C).domain([300,1e5]).range([0,this.width]),r=d.scale(c.BYU).domain([20,90]).range([y,0]);this.vars={colorScale:t,focused:!1,radiusScale:e,xScale:n,yScale:r}},e.setAxis=function(){this.dom.xAxis=c.LLu(this.vars.xScale).tickFormat(c.WUZ(",d")).tickSize(-y),this.dom.yAxis=c.y4O(this.vars.yScale).tickSize(-this.width),this.dom.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+y+")").call(this.dom.xAxis),this.dom.svg.append("g").attr("class","y axis").call(this.dom.yAxis)},e.setBackground=function(){return this.dom.svg.append("rect").attr("class","background").attr("width",this.width).attr("height",y)},e.setLabels=function(){this.dom.svg.append("text").attr("class","x label").attr("text-anchor","end").attr("x",this.width-26).attr("y",y+26).text("income per capita, inflation-adjusted (dollars)"),this.dom.svg.append("text").attr("class","y label").attr("text-anchor","end").attr("x",-26).attr("y",-40).attr("dy",".75em").attr("transform","rotate(-90)").text("life expectancy (years)")},e.setFilter=function(){return f.Z.filterColor("circles",this.dom.svg,1.5,.6,!0)},e.position=function(){var t=this;this.dom.dot.attr("cx",(function(e){return t.vars.xScale(e.income)})).attr("cy",(function(e){return t.vars.yScale(e.lifeExpectancy)})).attr("r",(function(e){return t.vars.radiusScale(e.population)}))},e.setDots=function(){var t=this;this.dom.dot=this.dom.svg.append("g").attr("class","dots").selectAll(".dot").data(this.data).enter().append("circle").attr("class","dot").style("fill",(function(e){return t.vars.colorScale(e.region)})).style("filter","url(#drop-shadow-circles)").style("stroke","black").style('"stroke-width"',"1px").sort((function(t,e){return e.population-t.population})),this.position()},e.setTitles=function(){this.dom.dot.append("title").text((function(t){return t.name+":\n- Income: "+h(t.income)+" $/P.C.\n- Population: "+h(t.population)+"\n- Life expectancy: "+t.lifeExpectancy+" years"}))},e.zoom=function(t){var e=c.cx$(t);this.vars.xScale.distortion(2.5).focus(e[0]),this.vars.yScale.distortion(2.5).focus(e[1]),this.position(),this.dom.svg.select(".x.axis").call(this.dom.xAxis),this.dom.svg.select(".y.axis").call(this.dom.yAxis)},e.setPointer=function(){this.dom.pointer=this.dom.svg.append("text").text("+").attr("class","pointer")},e.bindMousemove=function(){var t=this;return this.dom.svg.on("mousemove",(function(e){t.vars.focused||t.zoom(e)}))},e.bindClick=function(){var t=this;this.dom.svg.on("click",(function(e){if(t.vars.focused=!t.vars.focused,t.vars.focused){var n=c.cx$(t);t.dom.pointer.attr("x",n[0]).attr("y",n[1]).style("opacity",1)}else t.dom.pointer.style("opacity",0),t.zoom(e)}))},t}(),S=function(){var t=(0,i.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:e=t.sent,new w({data:e,rootElId:"chart"}).render();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(t){var e=t.pageContext.demoInfo;return r.createElement(a.Z,{demoInfo:e,main:S},r.createElement("div",{className:"fish-eye-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-fish-eye-js-b5fe0425bb12c96a05e9.js.map