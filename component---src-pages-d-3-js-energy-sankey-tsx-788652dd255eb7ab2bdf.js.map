{"version":3,"sources":["webpack://demos/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/sum.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/max.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-array/src/min.js","webpack://demos/./node_modules/d3-sankey/src/align.js","webpack://demos/./node_modules/d3-sankey/src/constant.js","webpack://demos/./node_modules/d3-sankey/src/sankey.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-path/src/path.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/array.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/constant.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/point.js","webpack://demos/./node_modules/d3-sankey/node_modules/d3-shape/src/link/index.js","webpack://demos/./node_modules/d3-sankey/src/sankeyLinkHorizontal.js","webpack://demos/./src/demos/energy-sankey/energy-sankey.ts","webpack://demos/./src/pages/d3js/energy-sankey.tsx"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","e","_e","f","TypeError","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","sum","values","valueof","_step","_iterator","_step2","index","_iterator2","_value","max","left","node","depth","justify","sourceLinks","constant","x","ascendingSourceBreadth","a","b","ascendingBreadth","source","ascendingTargetBreadth","target","y0","d","defaultId","defaultNodes","graph","nodes","defaultLinks","links","find","nodeById","id","get","Error","computeLinkBreadths","_ref","y1","link","width","_step3","_iterator3","targetLinks","_link","Sankey","py","sort","linkSort","x0","x1","dx","dy","align","iterations","sankey","computeNodeLinks","computeNodeValues","computeNodeDepths","computeNodeHeights","computeNodeBreadths","_ref2","_step4","_iterator4","entries","_step4$value","_step5","Map","map","_iterator5","_step5$value","_i","push","_step6","_iterator6","_step6$value","_ref3","_step7","_iterator7","fixedValue","Math","_ref4","current","Set","size","_step8","_iterator8","_step9","_iterator9","add","_ref5","_step10","_iterator10","height","_step11","_iterator11","initializeNodeBreadths","columns","_step14","ky","min","c","_iterator14","_step15","_nodes","y","_iterator15","_node","_step16","_iterator16","reorderLinks","_ref6","_step12","kx","_iterator12","floor","layer","_step13","_iterator13","computeNodeLayers","alpha","pow","beta","relaxRightToLeft","relaxLeftToRight","_step17","column","_iterator17","_step18","w","_iterator18","_step18$value","v","targetTop","_dy","reorderNodeLinks","resolveCollisions","_step19","_iterator19","_step20","_iterator20","_step20$value","sourceTop","_dy2","subject","resolveCollisionsBottomToTop","resolveCollisionsTopToBottom","_dy3","_dy4","_ref7","_step21","_iterator21","_step22","_iterator22","_step23","_iterator23","_step23$value","_step24","_iterator24","_step24$value","_step25","_iterator25","_step25$value","_node2","_width","_step26","_iterator26","_step26$value","_step27","_iterator27","_step27$value","_node3","_width2","update","nodeId","_","nodeAlign","nodeSort","nodeWidth","nodePadding","extent","pi","PI","tau","epsilon","tauEpsilon","Path","_x0","_y0","_x1","_y1","path","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","x2","y2","arcTo","r","x21","y21","x01","y01","l01_2","abs","x20","y20","l21_2","l20_2","l21","sqrt","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","cos","sin","cw","da","rect","h","p","linkSource","linkTarget","curve","context","buffer","argv","t","curveHorizontal","horizontalSource","horizontalTarget","defaultOpacity","renderChart","formatFn","colorFn","rootElId","data","state","isInTransition","linkSelected","selectedNode","el","document","getElementById","format","formatD3","units","color","scaleOrdinal","schemePastel2","category","getBoundingClientRect","svg","select","append","attr","sankeyD3","sankeyLeft","sankeyVal","assign","selectAll","join","style","on","linkPath","includes","requestAnimationFrame","transition","duration","text","filter","Boolean","sankeyLinkHorizontal","currentLink","json","ROOT_PATH","pageContext","main"],"mappings":"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","file":"component---src-pages-d-3-js-energy-sankey-tsx-788652dd255eb7ab2bdf.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function sum(values, valueof) {\n  var sum = 0;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value = +value) {\n          sum += value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if (_value = +valueof(_value, ++index, values)) {\n          sum += _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return sum;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function max(values, valueof) {\n  var max;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (max < _value || max === undefined && _value >= _value)) {\n          max = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return max;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function min(values, valueof) {\n  var min;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (min > _value || min === undefined && _value >= _value)) {\n          min = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return min;\n}","import { min } from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\nexport function center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n}","export default function constant(x) {\n  return function () {\n    return x;\n  };\n}","import _slicedToArray from \"/home/runner/work/demos/demos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { max, min, sum } from \"d3-array\";\nimport { justify } from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths(_ref) {\n  var nodes = _ref.nodes;\n\n  var _iterator = _createForOfIteratorHelper(nodes),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var node = _step.value;\n      var y0 = node.y0;\n      var y1 = y0;\n\n      var _iterator2 = _createForOfIteratorHelper(node.sourceLinks),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var link = _step2.value;\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(node.targetLinks),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _link = _step3.value;\n          _link.y1 = y1 + _link.width / 2;\n          y1 += _link.width;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nexport default function Sankey() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1; // extent\n\n  var dx = 24; // nodeWidth\n\n  var dy = 8,\n      py; // nodePadding\n\n  var id = defaultId;\n  var align = justify;\n  var sort;\n  var linkSort;\n  var nodes = defaultNodes;\n  var links = defaultLinks;\n  var iterations = 6;\n\n  function sankey() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments)\n    };\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function (graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function (_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function (_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function (_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function (_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks(_ref2) {\n    var nodes = _ref2.nodes,\n        links = _ref2.links;\n\n    var _iterator4 = _createForOfIteratorHelper(nodes.entries()),\n        _step4;\n\n    try {\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        var _step4$value = _slicedToArray(_step4.value, 2),\n            i = _step4$value[0],\n            node = _step4$value[1];\n\n        node.index = i;\n        node.sourceLinks = [];\n        node.targetLinks = [];\n      }\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n\n    var nodeById = new Map(nodes.map(function (d, i) {\n      return [id(d, i, nodes), d];\n    }));\n\n    var _iterator5 = _createForOfIteratorHelper(links.entries()),\n        _step5;\n\n    try {\n      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n        var _step5$value = _slicedToArray(_step5.value, 2),\n            _i = _step5$value[0],\n            link = _step5$value[1];\n\n        link.index = _i;\n        var source = link.source,\n            target = link.target;\n        if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n        if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n        source.sourceLinks.push(link);\n        target.targetLinks.push(link);\n      }\n    } catch (err) {\n      _iterator5.e(err);\n    } finally {\n      _iterator5.f();\n    }\n\n    if (linkSort != null) {\n      var _iterator6 = _createForOfIteratorHelper(nodes),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _step6$value = _step6.value,\n              sourceLinks = _step6$value.sourceLinks,\n              targetLinks = _step6$value.targetLinks;\n          sourceLinks.sort(linkSort);\n          targetLinks.sort(linkSort);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }\n\n  function computeNodeValues(_ref3) {\n    var nodes = _ref3.nodes;\n\n    var _iterator7 = _createForOfIteratorHelper(nodes),\n        _step7;\n\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var node = _step7.value;\n        node.value = node.fixedValue === undefined ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value)) : node.fixedValue;\n      }\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n  }\n\n  function computeNodeDepths(_ref4) {\n    var nodes = _ref4.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator8 = _createForOfIteratorHelper(current),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var node = _step8.value;\n          node.depth = x;\n\n          var _iterator9 = _createForOfIteratorHelper(node.sourceLinks),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var target = _step9.value.target;\n              next.add(target);\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeHeights(_ref5) {\n    var nodes = _ref5.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator10 = _createForOfIteratorHelper(current),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var node = _step10.value;\n          node.height = x;\n\n          var _iterator11 = _createForOfIteratorHelper(node.targetLinks),\n              _step11;\n\n          try {\n            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n              var source = _step11.value.source;\n              next.add(source);\n            }\n          } catch (err) {\n            _iterator11.e(err);\n          } finally {\n            _iterator11.f();\n          }\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeLayers(_ref6) {\n    var nodes = _ref6.nodes;\n    var x = max(nodes, function (d) {\n      return d.depth;\n    }) + 1;\n    var kx = (x1 - x0 - dx) / (x - 1);\n    var columns = new Array(x);\n\n    var _iterator12 = _createForOfIteratorHelper(nodes),\n        _step12;\n\n    try {\n      for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n        var node = _step12.value;\n        var i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n        node.layer = i;\n        node.x0 = x0 + i * kx;\n        node.x1 = node.x0 + dx;\n        if (columns[i]) columns[i].push(node);else columns[i] = [node];\n      }\n    } catch (err) {\n      _iterator12.e(err);\n    } finally {\n      _iterator12.f();\n    }\n\n    if (sort) {\n      var _iterator13 = _createForOfIteratorHelper(columns),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var column = _step13.value;\n          column.sort(sort);\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n    }\n\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    var ky = min(columns, function (c) {\n      return (y1 - y0 - (c.length - 1) * py) / sum(c, value);\n    });\n\n    var _iterator14 = _createForOfIteratorHelper(columns),\n        _step14;\n\n    try {\n      for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n        var _nodes = _step14.value;\n        var y = y0;\n\n        var _iterator15 = _createForOfIteratorHelper(_nodes),\n            _step15;\n\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var _node = _step15.value;\n            _node.y0 = y;\n            _node.y1 = y + _node.value * ky;\n            y = _node.y1 + py;\n\n            var _iterator16 = _createForOfIteratorHelper(_node.sourceLinks),\n                _step16;\n\n            try {\n              for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                var link = _step16.value;\n                link.width = link.value * ky;\n              }\n            } catch (err) {\n              _iterator16.e(err);\n            } finally {\n              _iterator16.f();\n            }\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n\n        y = (y1 - y + py) / (_nodes.length + 1);\n\n        for (var i = 0; i < _nodes.length; ++i) {\n          var node = _nodes[i];\n          node.y0 += y * (i + 1);\n          node.y1 += y * (i + 1);\n        }\n\n        reorderLinks(_nodes);\n      }\n    } catch (err) {\n      _iterator14.e(err);\n    } finally {\n      _iterator14.f();\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    var columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, function (c) {\n      return c.length;\n    }) - 1));\n    initializeNodeBreadths(columns);\n\n    for (var i = 0; i < iterations; ++i) {\n      var alpha = Math.pow(0.99, i);\n      var beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  } // Reposition each node based on its incoming (target) links.\n\n\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (var i = 1, n = columns.length; i < n; ++i) {\n      var column = columns[i];\n\n      var _iterator17 = _createForOfIteratorHelper(column),\n          _step17;\n\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var target = _step17.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator18 = _createForOfIteratorHelper(target.targetLinks),\n              _step18;\n\n          try {\n            for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n              var _step18$value = _step18.value,\n                  source = _step18$value.source,\n                  _value = _step18$value.value;\n              var v = _value * (target.layer - source.layer);\n              y += targetTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator18.e(err);\n          } finally {\n            _iterator18.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy = (y / w - target.y0) * alpha;\n\n          target.y0 += _dy;\n          target.y1 += _dy;\n          reorderNodeLinks(target);\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  } // Reposition each node based on its outgoing (source) links.\n\n\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (var n = columns.length, i = n - 2; i >= 0; --i) {\n      var column = columns[i];\n\n      var _iterator19 = _createForOfIteratorHelper(column),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var source = _step19.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator20 = _createForOfIteratorHelper(source.sourceLinks),\n              _step20;\n\n          try {\n            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n              var _step20$value = _step20.value,\n                  target = _step20$value.target,\n                  _value2 = _step20$value.value;\n              var v = _value2 * (target.layer - source.layer);\n              y += sourceTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator20.e(err);\n          } finally {\n            _iterator20.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy2 = (y / w - source.y0) * alpha;\n\n          source.y0 += _dy2;\n          source.y1 += _dy2;\n          reorderNodeLinks(source);\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    var i = nodes.length >> 1;\n    var subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  } // Push any overlapping nodes down.\n\n\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      var node = nodes[i];\n\n      var _dy3 = (y - node.y0) * alpha;\n\n      if (_dy3 > 1e-6) node.y0 += _dy3, node.y1 += _dy3;\n      y = node.y1 + py;\n    }\n  } // Push any overlapping nodes up.\n\n\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      var node = nodes[i];\n\n      var _dy4 = (node.y1 - y) * alpha;\n\n      if (_dy4 > 1e-6) node.y0 -= _dy4, node.y1 -= _dy4;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks(_ref7) {\n    var sourceLinks = _ref7.sourceLinks,\n        targetLinks = _ref7.targetLinks;\n\n    if (linkSort === undefined) {\n      var _iterator21 = _createForOfIteratorHelper(targetLinks),\n          _step21;\n\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var _sourceLinks = _step21.value.source.sourceLinks;\n\n          _sourceLinks.sort(ascendingTargetBreadth);\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n\n      var _iterator22 = _createForOfIteratorHelper(sourceLinks),\n          _step22;\n\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _targetLinks = _step22.value.target.targetLinks;\n\n          _targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      var _iterator23 = _createForOfIteratorHelper(nodes),\n          _step23;\n\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var _step23$value = _step23.value,\n              sourceLinks = _step23$value.sourceLinks,\n              targetLinks = _step23$value.targetLinks;\n          sourceLinks.sort(ascendingTargetBreadth);\n          targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n    }\n  } // Returns the target.y0 that would produce an ideal link from source to target.\n\n\n  function targetTop(source, target) {\n    var y = source.y0 - (source.sourceLinks.length - 1) * py / 2;\n\n    var _iterator24 = _createForOfIteratorHelper(source.sourceLinks),\n        _step24;\n\n    try {\n      for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n        var _step24$value = _step24.value,\n            node = _step24$value.target,\n            width = _step24$value.width;\n        if (node === target) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator24.e(err);\n    } finally {\n      _iterator24.f();\n    }\n\n    var _iterator25 = _createForOfIteratorHelper(target.targetLinks),\n        _step25;\n\n    try {\n      for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n        var _step25$value = _step25.value,\n            _node2 = _step25$value.source,\n            _width = _step25$value.width;\n        if (_node2 === source) break;\n        y -= _width;\n      }\n    } catch (err) {\n      _iterator25.e(err);\n    } finally {\n      _iterator25.f();\n    }\n\n    return y;\n  } // Returns the source.y0 that would produce an ideal link from source to target.\n\n\n  function sourceTop(source, target) {\n    var y = target.y0 - (target.targetLinks.length - 1) * py / 2;\n\n    var _iterator26 = _createForOfIteratorHelper(target.targetLinks),\n        _step26;\n\n    try {\n      for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n        var _step26$value = _step26.value,\n            node = _step26$value.source,\n            width = _step26$value.width;\n        if (node === source) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator26.e(err);\n    } finally {\n      _iterator26.f();\n    }\n\n    var _iterator27 = _createForOfIteratorHelper(source.sourceLinks),\n        _step27;\n\n    try {\n      for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n        var _step27$value = _step27.value,\n            _node3 = _step27$value.target,\n            _width2 = _step27$value.width;\n        if (_node3 === target) break;\n        y -= _width2;\n      }\n    } catch (err) {\n      _iterator27.e(err);\n    } finally {\n      _iterator27.f();\n    }\n\n    return y;\n  }\n\n  return sankey;\n}","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path();\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function moveTo(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function lineTo(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {\n    this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n      // Equivalently, is (x1,y1) coincident with (x2,y2)?\n      // Or, is the radius zero? Line to (x1,y1).\n      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n          this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n        } // Otherwise, draw an arc!\n        else {\n            var x20 = x2 - x0,\n                y20 = y2 - y0,\n                l21_2 = x21 * x21 + y21 * y21,\n                l20_2 = x20 * x20 + y20 * y20,\n                l21 = Math.sqrt(l21_2),\n                l01 = Math.sqrt(l01_2),\n                l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n                t01 = l / l01,\n                t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n            if (Math.abs(t01 - 1) > epsilon) {\n              this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n            }\n\n            this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n          }\n  },\n  arc: function arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n        this._ += \"L\" + x0 + \",\" + y0;\n      } // Is this arc empty? We’re done.\n\n\n    if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    } // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n        this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n      }\n  },\n  rect: function rect(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n  },\n  toString: function toString() {\n    return this._;\n  }\n};\nexport default path;","export var slice = Array.prototype.slice;","export default function (x) {\n  return function constant() {\n    return x;\n  };\n}","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import { path } from \"d3-path\";\nimport { slice } from \"../array.js\";\nimport constant from \"../constant.js\";\nimport { x as pointX, y as pointY } from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer,\n        argv = slice.call(arguments),\n        s = source.apply(this, argv),\n        t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function (_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function (_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\nexport function linkVertical() {\n  return link(curveVertical);\n}\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}","import { linkHorizontal } from \"d3-shape\";\n\nfunction horizontalSource(d) {\n  return [d.source.x1, d.y0];\n}\n\nfunction horizontalTarget(d) {\n  return [d.target.x0, d.y1];\n}\n\nexport default function () {\n  return linkHorizontal().source(horizontalSource).target(horizontalTarget);\n}","import {\n  json,\n  select,\n  format as formatD3,\n  scaleOrdinal,\n  schemePastel2,\n} from \"d3\"\nimport { sankey as sankeyD3, sankeyLinkHorizontal, sankeyLeft } from \"d3-sankey\"\n\ntype EnergyDataLink = {\n  source: string\n  target: string\n  value: number\n}\n\ntype EnergyDataNode = {\n  category: string\n  name: string\n}\n\ntype EnergyData = {\n  links: EnergyDataLink[]\n  nodes: EnergyDataNode[]\n  units: string\n}\n\nconst fetchData = () =>\n  json(`${ROOT_PATH}data/d3js/energy-sankey/data.json`) as Promise<EnergyData>\n\nconst height = 1000\nconst defaultOpacity = 0.7\n\nconst renderChart = ({\n  rootElId,\n  data,\n}: {\n  rootElId: string\n  data: EnergyData\n}) => {\n  const state = {\n    isInTransition: false,\n    linkSelected: false,\n    selectedNode: \"\",\n  }\n\n  const el = document.getElementById(rootElId) as HTMLElement\n\n  const format = (() => {\n    const formatFn = formatD3(\",.0f\")\n\n    return (d: any) => `${formatFn(d)} ${data.units}`\n  })()\n  const color = (() => {\n    const colorFn = scaleOrdinal(schemePastel2)\n\n    return (d: any) => colorFn(d.category === undefined ? d.name : d.category)\n  })()\n\n  const { width } = el.getBoundingClientRect()\n  const svg = select(`#${rootElId}`)\n    .append<SVGElement>(\"svg\")\n    .attr(\"height\", height)\n    .attr(\"width\", width)\n\n  const sankeyVal = sankeyD3()\n    .nodeId((d: any) => d.name)\n    .nodeAlign(sankeyLeft)\n    .nodeWidth(15)\n    .nodePadding(10)\n    .extent([\n      [1, 5],\n      [width - 1, height - 5],\n    ])\n\n  const { nodes, links } = sankeyVal({\n    links: data.links.map((d: any) => Object.assign({}, d)),\n    nodes: data.nodes.map((d: any) => Object.assign({}, d)),\n  }) as any\n\n  const node = svg\n    .append(\"g\")\n    .attr(\"stroke\", \"#000\")\n    .selectAll(\"rect\")\n    .data(nodes)\n    .join(\"rect\")\n    .attr(\"x\", (d: any) => d.x0)\n    .attr(\"y\", (d: any) => d.y0)\n    .attr(\"height\", (d: any) => d.y1 - d.y0)\n    .attr(\"width\", (d: any) => d.x1 - d.x0)\n    .attr(\"fill\", color as any)\n    .style(\"opacity\", defaultOpacity)\n    .style(\"cursor\", \"pointer\")\n    .on(\"mouseenter\", function () {\n      if (state.isInTransition) return\n      select(this).style(\"opacity\", 1)\n    })\n    .on(\"mouseleave\", function () {\n      if (state.isInTransition) return\n      select(this).style(\"opacity\", defaultOpacity)\n    })\n    .on(\"click\", (_e, d: any) => {\n      if (state.isInTransition) return\n\n      if (state.selectedNode === d.name) {\n        linkPath.attr(\"display\", null).style(\"opacity\", defaultOpacity)\n        state.selectedNode = \"\"\n      } else {\n        state.isInTransition = true\n\n        if (state.selectedNode) {\n          linkPath\n            .style(\"opacity\", (l: any) =>\n              [l.source.name, l.target.name].includes(state.selectedNode)\n                ? defaultOpacity\n                : 0\n            )\n            .attr(\"display\", null)\n        }\n\n        requestAnimationFrame(() => {\n          linkPath\n            .transition()\n            .duration(500)\n            .style(\"opacity\", (l: any) =>\n              [l.source.name, l.target.name].includes(d.name)\n                ? defaultOpacity\n                : 0\n            )\n            .on(\"end\", () => {\n              state.isInTransition = false\n              linkPath.attr(\"display\", (l: any) =>\n                [l.source.name, l.target.name].includes(d.name) ? null : \"none\"\n              )\n            })\n\n          state.selectedNode = d.name\n        })\n      }\n    })\n\n  node\n    .append(\"title\")\n    .text((d: any) =>\n      [d.category === d.name ? \"\" : d.category, d.name, format(d.value)]\n        .filter(Boolean)\n        .join(\"\\n\")\n    )\n\n  const link = svg\n    .append(\"g\")\n    .attr(\"fill\", \"none\")\n    .attr(\"stroke-opacity\", 0.5)\n    .selectAll(\"g\")\n    .data(links as any)\n    .join(\"g\")\n    .style(\"mix-blend-mode\", \"multiply\")\n\n  const linkPath = link\n    .append(\"path\")\n    .attr(\"d\", sankeyLinkHorizontal() as any)\n    .style(\"opacity\", defaultOpacity)\n    .attr(\"stroke\", \"#aaa\")\n    .attr(\"stroke-width\", (d: any) => Math.max(1, d.width))\n    .on(\"mouseenter\", function () {\n      if (state.isInTransition) return\n      select(this).style(\"opacity\", 1)\n    })\n    .on(\"mouseleave\", function () {\n      if (state.isInTransition) return\n      select(this).style(\"opacity\", defaultOpacity)\n    })\n    .on(\"click\", function () {\n      if (state.isInTransition) return\n\n      const currentLink = select(this)\n\n      if (state.linkSelected) {\n        linkPath.attr(\"display\", null)\n      } else {\n        linkPath.attr(\"display\", \"none\")\n        currentLink.attr(\"display\", null)\n      }\n\n      state.selectedNode = \"\"\n      state.linkSelected = !state.linkSelected\n    })\n\n  link\n    .append(\"title\")\n    .text((d: any) => `${d.source.name} → ${d.target.name}\\n${format(d.value)}`)\n\n  svg\n    .append(\"g\")\n    .attr(\"font-family\", \"sans-serif\")\n    .attr(\"font-size\", 10)\n    .selectAll(\"text\")\n    .data(nodes)\n    .join(\"text\")\n    .attr(\"x\", (d: any) => (d.x0 < width / 2 ? d.x1 + 6 : d.x0 - 6))\n    .attr(\"y\", (d: any) => (d.y1 + d.y0) / 2)\n    .attr(\"dy\", \"0.35em\")\n    .attr(\"text-anchor\", (d: any) => (d.x0 < width / 2 ? \"start\" : \"end\"))\n    .text((d: any) => d.name)\n}\n\nconst main = async () => {\n  const data = await fetchData()\n\n  renderChart({\n    data,\n    rootElId: \"chart\",\n  })\n}\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/energy-sankey/energy-sankey\"\n\nconst Pie = ({ pageContext }: DemoPageProps) => (\n  <Demo main={main} pageContext={pageContext}>\n    <div id=\"chart\" />\n  </Demo>\n)\n\nexport default Pie\n"],"sourceRoot":""}