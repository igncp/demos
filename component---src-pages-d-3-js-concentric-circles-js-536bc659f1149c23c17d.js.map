{"version":3,"sources":["webpack://demos/./src/demos/concentric-circles/concentric-circles.js","webpack://demos/./src/pages/d3js/concentric-circles.js"],"names":["d3","csv","data","colours","c","scale","linear","domain","extent","d","count","range","heatmapColour","length","colorize","margin","width","$","innerWidth","height","max","dataMax","svg","select","append","attr","filter","slope","type","feMerge","circles","selectAll","name","enter","rScale","pow","exponent","style","on","this","d3utils","tooltip","followMouse","text","demoInfo","pageContext","main","scripts","className","id"],"mappings":"uKAyGA,EAzGa,WACXA,GAAGC,IAAI,0CAA0C,SAACC,GAChD,IAAMC,EAAU,CAAC,UAAW,UAAW,UAAW,WAC5CC,EAAIJ,GAAGK,MACVC,SACAC,OAAOP,GAAGQ,OAAON,GAAM,SAACO,GAAD,OAAQA,EAAEC,UACjCC,MAAM,CAAC,EAAG,IAEPC,EAAgBZ,GAAGK,MACtBC,SACAC,OAAOP,GAAGW,MAAM,EAAG,EAAG,EAAMR,EAAQU,SACpCF,MAAMR,GAEHW,EAAW,SAAUL,GACzB,OAAOG,EAAcR,EAAEK,EAAEC,SAGrBK,EAEE,GAFFA,EAGG,GAGHC,EAAQC,EAAE,UAAUC,aAAeH,EAAcA,EACjDI,EAAyC,IAAhCnB,GAAGoB,IAAIlB,GAAM,SAACO,GAAD,OAAQA,EAAEC,SAGhCW,EAAUrB,GAAGoB,IAAIlB,GAAM,SAACO,GAAD,OAAQA,EAAEC,SACjCY,EAAMtB,GACTuB,OAAO,UACPC,OAAO,OACPC,KAAK,QAAST,EAAQD,EAAcA,GACpCU,KAAK,SAAUN,EAASJ,EAAcA,GACtCS,OAAO,KAGJE,EADOJ,EAAIE,OAAO,QACJA,OAAO,UAAUC,KAAK,KAAM,eAEhDC,EACGF,OAAO,kBACPC,KAAK,KAAM,eACXA,KAAK,eAAgB,GACxBC,EAAOF,OAAO,YAAYC,KAAK,KAAM,GAAGA,KAAK,KAAM,GACnDC,EAAOF,OAAO,uBAAuBA,OAAO,WAAWC,KAAK,CAC1DE,MAAO,KACPC,KAAM,WAGR,IAAMC,EAAUH,EAAOF,OAAO,WAE9BK,EAAQL,OAAO,eACfK,EAAQL,OAAO,eAAeC,KAAK,KAAM,iBAEzC,IAMMK,EANcR,EACjBS,UAAU,KACV7B,KAAKA,GAAM,SAACO,GAAD,OAAOA,EAAEuB,QACpBC,QACAT,OAAO,KAEkBA,OAAO,cAC7BU,EAASlC,GAAGK,MACf8B,MACAC,SAAS,IACTzB,MAAM,CAAC,EAAG,MACVJ,OAAOP,GAAGQ,OAAON,GAAM,SAACO,GAAD,OAAQA,EAAEC,UAEpCoB,EACGL,KAAK,KAAMT,EAAQ,GACnBS,KAAK,KAAMN,EAAS,GACpBM,KAAK,KAAK,SAAChB,GAAD,OAAOyB,EAAOzB,EAAEC,UAC1Be,KAAK,QAAS,eACdA,KAAK,cAAc,SAAChB,GAAD,OAAUA,EAAEuB,KAAZ,KAAqBvB,EAAEC,SAC1C2B,MAAM,OAAQ,QACdA,MAAM,UAAU,SAAC5B,GAAD,OAAOK,EAASL,MAChC4B,MAAM,eAhDW,OAiDjBA,MAAM,UAAU,SAAC5B,GAChB,OAAIA,EAAEC,MAAQW,EAAU,EACf,oBAGF,MAERiB,GAAG,aAAa,WACftC,GAAGuB,OAAOgB,MAAMF,MAAM,SAAU,WAAWA,MAAM,eAAgB,WAElEC,GAAG,cAAc,WAChBtC,GAAGuB,OAAOgB,MACPF,MAAM,UAAU,SAAC5B,GAAD,OAAOK,EAASL,MAChC4B,MAAM,eA9DO,UAiEpBG,QAAQC,QAAQ,eAAgB,CAC9BC,aAAa,IAGfpB,EACGE,OAAO,QACPmB,KACC,0EAEDlB,KAAK,YALR,aAKkCT,EAAQ,EAL1C,KAK+CG,EAAS,IALxD,KAMGM,KAAK,QAAS,YCrFrB,EAV0B,SAAC,GAAD,IAAkBmB,EAAlB,EAAGC,YAAeD,SAAlB,OACxB,gBAAC,IAAD,CACEA,SAAUA,EACVE,KAAMA,EACNC,QAAS,CAAC,wBAAyB,sBAEnC,uBAAKC,UAAU,2BAA2BC,GAAG","file":"component---src-pages-d-3-js-concentric-circles-js-536bc659f1149c23c17d.js","sourcesContent":["const main = () => {\n  d3.csv(\"/data/d3js/concentric-circles/data.csv\", (data) => {\n    const colours = [\"#7C7CC9\", \"#52D552\", \"#337233\", \"#323247\"]\n    const c = d3.scale\n      .linear()\n      .domain(d3.extent(data, (d) => +d.count))\n      .range([0, 1])\n\n    const heatmapColour = d3.scale\n      .linear()\n      .domain(d3.range(0, 1, 1.0 / colours.length))\n      .range(colours)\n\n    const colorize = function (d) {\n      return heatmapColour(c(d.count))\n    }\n\n    const margin = {\n      bottom: 20,\n      left: 20,\n      right: 20,\n      top: 20,\n    }\n    const width = $(\"#chart\").innerWidth() - margin.left - margin.right\n    const height = d3.max(data, (d) => +d.count) * 2.5\n\n    const strokeWidth = \"2px\"\n    const dataMax = d3.max(data, (d) => +d.count)\n    const svg = d3\n      .select(\"#chart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.left + margin.right)\n      .append(\"g\")\n\n    const defs = svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr(\"id\", \"drop-shadow\")\n\n    filter\n      .append(\"feGaussianBlur\")\n      .attr(\"in\", \"SourceAlpha\")\n      .attr(\"stdDeviation\", 9)\n    filter.append(\"feOffset\").attr(\"dx\", 5).attr(\"dy\", 5)\n    filter.append(\"feComponentTransfer\").append(\"feFuncA\").attr({\n      slope: \".3\",\n      type: \"linear\",\n    })\n\n    const feMerge = filter.append(\"feMerge\")\n\n    feMerge.append(\"feMergeNode\")\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\")\n\n    const circleGroup = svg\n      .selectAll(\"g\")\n      .data(data, (d) => d.name)\n      .enter()\n      .append(\"g\")\n\n    const circles = circleGroup.append(\"svg:circle\")\n    const rScale = d3.scale\n      .pow()\n      .exponent(0.9)\n      .range([5, 300])\n      .domain(d3.extent(data, (d) => +d.count))\n\n    circles\n      .attr(\"cx\", width / 2)\n      .attr(\"cy\", height / 2)\n      .attr(\"r\", (d) => rScale(d.count))\n      .attr(\"class\", \"name-circle\")\n      .attr(\"data-title\", (d) => `${d.name}: ${d.count}`)\n      .style(\"fill\", \"#FFF\")\n      .style(\"stroke\", (d) => colorize(d))\n      .style(\"stroke-width\", strokeWidth)\n      .style(\"filter\", (d) => {\n        if (d.count > dataMax / 3) {\n          return \"url(#drop-shadow)\"\n        }\n\n        return \"\"\n      })\n      .on(\"mouseover\", function () {\n        d3.select(this).style(\"stroke\", \"#D88021\").style(\"stroke-width\", \"10px\")\n      })\n      .on(\"mouseleave\", function () {\n        d3.select(this)\n          .style(\"stroke\", (d) => colorize(d))\n          .style(\"stroke-width\", strokeWidth)\n      })\n\n    d3utils.tooltip(\".name-circle\", {\n      followMouse: true,\n    })\n\n    svg\n      .append(\"text\")\n      .text(\n        \"Circles radius are proportional to the count of times the name appears\"\n      )\n      .attr(\"transform\", `translate(${width / 2},${height - 10})`)\n      .attr(\"width\", \"20px\")\n  })\n}\n\nexport default main\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/concentric-circles/concentric-circles\"\n\nconst ConcentricCircles = ({ pageContext: { demoInfo } }) => (\n  <Demo\n    demoInfo={demoInfo}\n    main={main}\n    scripts={[\"/vendors/d3/d3.min.js\", \"/js/d3js-utils.js\"]}\n  >\n    <div className=\"concentric-circles-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default ConcentricCircles\n"],"sourceRoot":""}