(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[921],{2242:function(e,t,n){"use strict";function r(e){return e}function a(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return l(e,t)}))}:l(e,t)}function l(e,t){var n=t.id,a=t.bbox,l=null==t.properties?{}:t.properties,o=function(e,t){var n=function(e){if(null==e)return r;var t,n,a=e.scale[0],l=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,r){r||(t=n=0);var c=2,i=e.length,u=new Array(i);for(u[0]=(t+=e[0])*a+o,u[1]=(n+=e[1])*l+s;c<i;)u[c]=e[c],++c;return u}}(e.transform),a=e.arcs;function l(e,t){t.length&&t.pop();for(var r=a[e<0?~e:e],l=0,o=r.length;l<o;++l)t.push(n(r[l],l));e<0&&function(e,t){for(var n,r=e.length,a=r-t;a<--r;)n=e[a],e[a++]=e[r],e[r]=n}(t,o)}function o(e){return n(e)}function s(e){for(var t=[],n=0,r=e.length;n<r;++n)l(e[n],t);return t.length<2&&t.push(t[0]),t}function c(e){for(var t=s(e);t.length<4;)t.push(t[0]);return t}function i(e){return e.map(c)}function u(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(u)};case"Point":t=o(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(o);break;case"LineString":t=s(e.arcs);break;case"MultiLineString":t=e.arcs.map(s);break;case"Polygon":t=i(e.arcs);break;case"MultiPolygon":t=e.arcs.map(i);break;default:return null}return{type:n,coordinates:t}}return u(t)}(e,t);return null==n&&null==a?{type:"Feature",properties:l,geometry:o}:null==a?{type:"Feature",id:n,properties:l,geometry:o}:{type:"Feature",id:n,bbox:a,properties:l,geometry:o}}n.d(t,{Z:function(){return a}})},1745:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(7294),a=n(5414),l=n(2552),o=function(e){var t,n=e.isCompleted,a=e.mainSource,o=e.name;return r.createElement("h2",{className:"row",id:l.dc},r.createElement("span",{className:"col-xs-12 col-sm-10 p-0"},r.createElement("span",{className:l.jS},o," Chart "),r.createElement("small",{id:l.l4,title:"Main Source"},r.createElement("a",{href:a,rel:"noreferrer",target:"_blank"},"source")),!n&&r.createElement("small",{id:l.oT,title:"This demo is still work in progress"},"WIP")),r.createElement("span",Object.assign({className:"col-sm-2 p-0 d-xs-none "+l.eR},((t={})["data-back-home"]="",t)),r.createElement("a",{className:"btn btn-info",href:"/demos/",role:"button"},r.createElement("span",{className:"glyphicon glyphicon-home"})," Home")))},s=function(e){return"src/demos/"+e+"/tests/"+e+".e2e.ts"},c=function(){var e=(0,r.useState)(null),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e="undefined"==typeof window?null:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth);null!==e&&n(e)}),[]),t},i=function(e){var t=e.content,n=(0,r.useState)(!1),a=n[0],o=n[1],s=c();return null===s?null:!s||s<1280&&!a?r.createElement("div",{className:l.wI},r.createElement("button",{className:l.W2+" btn btn-light",onClick:function(){return o(!0)},type:"button"},"Show Code")):r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t}}))},u=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://github.com/igncp/demos/blob/main/"+t,rel:"noreferrer",target:"_blank"},"Code in Github"))},m=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://igncp.github.io/demos/coverage-ts/files/"+t+".html",rel:"noreferrer",target:"_blank"},"TypeScript coverage report"))},d=function(e){var t=e.demoInfo;if("undefined"==typeof window)return null;var n="pages/"+t.category+"/"+t.key+"."+t.files.page.type;return r.createElement("div",null,!!t.notes.length&&r.createElement("div",{className:"bs-callout bs-callout-info"+l.$c},r.createElement("p",null,r.createElement("strong",null,"Notes:")),r.createElement("ul",null,t.notes.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],l=t[1];return r.createElement("li",{dangerouslySetInnerHTML:{__html:a},key:l})})))),!!t.summary.length&&r.createElement("div",{className:"bs-callout bs-callout-summary "+l.$c},r.createElement("p",null,r.createElement("strong",null,"Implementation Summary:")),r.createElement("ul",null,t.summary.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],l=t[1];return r.createElement("p",{dangerouslySetInnerHTML:{__html:a},key:l})})))),r.createElement("div",{className:"bs-callout bs-callout-primary",id:l.V2},r.createElement("p",null,r.createElement("strong",null,"Sources:")),r.createElement("ul",null,t.sources.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1];return r.createElement("li",{key:o},r.createElement("span",{className:l.hB},"[",o+1,"]"),":"," ",r.createElement("a",{href:a},a))})))),!!t.docs.length&&r.createElement("div",{className:"bs-callout bs-callout-secondary",id:"docs"},r.createElement("p",null,r.createElement("strong",null,"Docs:")),r.createElement("div",{className:l.Jw},t.docs.map((function(e){return r.createElement("span",{className:l._q,key:e[1]},r.createElement("a",{href:e[1],rel:"noreferrer",target:"_blank"},e[0]))})))),!!t.dataFiles.length&&r.createElement("div",{className:"bs-callout bs-callout-warning",id:l.sD},r.createElement("p",null,r.createElement("strong",null,"Data files: "),t.dataFiles.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var l=n[0],o=n[1];return r.createElement("a",{href:"/demos/data/"+t.category+"/"+t.key+"/"+l,key:o},l)})))),r.createElement("div",{className:"bs-callout bs-callout-success",id:"code"},r.createElement("p",null,r.createElement("strong",null,"Code:")),r.createElement("ul",null,t.files.demoTS.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=n[0],c=o.content,d=o.filePath,f=n[1];return r.createElement("li",{key:d},r.createElement("p",null,r.createElement("span",{className:l.s2},d)," ",r.createElement(u,{filePath:d})," ",r.createElement(m,{filePath:d}),0===f&&r.createElement(r.Fragment,null,r.createElement("span",null," | "),r.createElement("a",{href:"https://github.com/igncp/demos/blob/main/"+s(t.key),rel:"noreferrer",target:"_blank"},"E2E tests"))),r.createElement(i,{content:c}),r.createElement("div",{className:l.XP}))})),r.createElement("li",null,r.createElement("p",null,r.createElement("span",{className:l.s2},n)," ",r.createElement(u,{filePath:n})," ",r.createElement(m,{filePath:n})),r.createElement(i,{content:t.files.page.content}),!!t.files.demoCSS.length&&r.createElement("div",{className:l.XP})),t.files.demoCSS.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=n[0],s=o.content,c=o.filePath,m=n[1];return r.createElement("li",{key:c},r.createElement("p",null,r.createElement("span",{className:l.s2},c)," ",r.createElement(u,{filePath:c})),r.createElement(i,{content:s}),m!==t.files.demoCSS.length-1&&r.createElement("div",{className:l.XP}))})))))},f=n(2504),h=function(e){return"/"===e[0]?"/demos/"+e.replace(/^\//,""):e},p=function(e){var t=e.main,n=e.children,l=e.scripts,s=void 0===l?[]:l,c=e.links,i=void 0===c?[]:c,u=e.pageContext,m=u.demoInfo,p=u.meta,g=m.isCompleted,v=m.name,y=m.sources;return(0,r.useEffect)((function(){"undefined"!=typeof window&&t().catch((function(e){console.error("error:",e)}))}),[]),r.createElement(f.Z,null,r.createElement(a.q,{link:i.map((function(e){return{href:h(e),rel:"stylesheet",type:"text/css"}})),meta:[{content:p.description,name:"description"}],script:s.map((function(e){return{src:h(e),type:"text/javascript"}})),title:m.name+" | Demos igncp"}),r.createElement(o,{isCompleted:g,mainSource:y[0],name:v}),n,r.createElement(d,{demoInfo:m}))}},2504:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7294),a=n(2552),l=function(){return r.createElement("div",{className:a.Mv},r.createElement("p",null,(new Date).getFullYear()))},o=function(){return r.createElement("div",{className:a.H6},r.createElement("h1",{className:"row"},r.createElement("span",{className:"col-3 col-md-8 p-0"},r.createElement("a",{href:"/demos/"},"Demos")," ",r.createElement("small",{className:"hide-tablet"},"interactive data visualization examples")),r.createElement("span",{className:"col-9 col-md-4 p-0",id:a.ak},r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=follow",width:"119"}),r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=fork",width:"62"}),r.createElement("iframe",{frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=watch",width:"52"}))))},s=function(e){var t=e.children;return r.createElement("div",{className:a.Mg+" px-3 px-sm-5"},r.createElement("div",{className:a.cs},r.createElement(o,null)),r.createElement("div",{className:a.Fh},t),r.createElement("div",{className:a.Y2},r.createElement(l,null)))}},9864:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(7294),a=n(1745),l=n(8634),o=n(2656),s=n.n(o),c=n(8558),i=n(2242),u="chart",m="world-map-country",d="update-colors",f=1500,h=[c.BT8,c.T0$,c.sY$,c.Vaf,c._BJ];if(5!==h.length)throw new Error("Expected 5 color functions");var p=function(){function e(e){var t=this;this.state={colorFnIndex:0,draggedX:0,draggedY:0,lastZoomId:null},this.setZoom=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n[1],l=t.dimensions,o=l.height,s=l.width,c=t.getCountriesSel();if(!a||t.state.lastZoomId===a.id)return t.state.lastZoomId=null,void c.transition().duration(f).attr("transform","translate("+s/2+","+o/2+")scale(1)translate("+-s/2+","+-o/2+")");t.state.lastZoomId=a.id;var i=t.projectionPath.centroid(a),u=i[0],m=i[1];c.transition().duration(f).attr("transform","translate("+s/2+","+o/2+")scale(8)translate("+-u+","+-m+")")},this.handleWindowResize=function(){t.render()},this.config=e;var n=this.config.rootElId,r=(0,c.Ys)("#"+n).append("svg"),a=r.append("g"),l=a.append("rect").attr("class","background").style("fill","#daedff"),o=a.append("g");!function(e){var t=e.deviation,n=e.slope,r=e.svg.append("defs").append("filter").attr("id","drop-shadow");r.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",t),r.append("feOffset").attr("dx",1).attr("dy",1),r.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear");var a=r.append("feMerge");a.append("feMergeNode"),a.append("feMergeNode").attr("in","SourceGraphic")}({deviation:2,slope:.5,svg:r}),this.elements={backgroundSel:l,contentSel:o,svgDragSel:a,svgSel:r},this.render(),this.setupDrag(),window.addEventListener("resize",this.handleWindowResize)}var t=e.prototype;return t.teardown=function(){window.removeEventListener("resize",this.handleWindowResize)},t.updateColors=function(){this.state.colorFnIndex+=1,this.state.colorFnIndex>=h.length&&(this.state.colorFnIndex=0),this.render()},t.setDimensions=function(){var e=this.config.rootElId,t=document.getElementById(e).getBoundingClientRect().width;this.dimensions={height:500,width:t}},t.render=function(){var e=this,t=this.config.world,n=this.elements,r=n.backgroundSel,a=n.svgSel;this.setDimensions();var l=this.dimensions,o=l.height,s=l.width,u=(0,c.mw4)().center([0,45.4]).scale(Math.max(150*s/750,140)).translate([s/2,o/2]);this.projectionPath=(0,c.l49)().projection(u);var d=(0,i.Z)(t,t.objects.countries).features;this.bounds=function(e){var t=e.featuresData,n=e.projectionPath;return t.reduce((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],l=t[1],o=n.bounds(l);return a[0][0]=Math.min(a[0][0],o[0][0]),a[0][1]=Math.min(a[0][1],o[0][1]),a[1][0]=Math.max(a[1][0],o[1][0]),a[1][1]=Math.max(a[1][1],o[1][1]),a}),[[1/0,1/0],[-1/0,-1/0]])}({featuresData:d,projectionPath:this.projectionPath});var f=(0,c.BYU)().domain([0,d.length-1]).range([0,1]);a.attr("width",s).attr("height",o);var p=1e5;r.on("click",this.setZoom).attr("height",p).attr("width",p).attr("transform","translate("+Math.min(0,(p-s)/-2)+", "+Math.min(0,(p-o)/-2)+")");var g=this.getCountriesSel().data(d);g.exit().remove(),g.enter().append("path").attr("class",m).style("stroke","#fff").style("stroke-width","1px").attr("filter","url(#drop-shadow)");var v=this.getCountriesSel().attr("d",this.projectionPath).style("fill",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[1];return h[e.state.colorFnIndex](f(a))})).on("mouseenter",(function(){(0,c.Ys)(this).attr("filter","url(#drop-shadow)").style("stroke-width","2px")})).on("mouseleave",(function(){v.attr("filter","url(#drop-shadow)").style("stroke-width","1px")})).on("click",this.setZoom);this.updateDrag()},t.getCountriesSel=function(){return this.elements.contentSel.selectAll("."+m)},t.updateDrag=function(){var e=this.bounds,t=this.dimensions,n=t.height,r=t.width,a=this.elements.svgDragSel;!function(e){var t=e.bounds,n=e.dragPoint,r=e.height,a=e.width;-1*n.draggedX<t[0][0]?n.draggedX=-1*t[0][0]:-1*n.draggedX>t[1][0]-a&&(n.draggedX=-1*(t[1][0]-a)),-1*n.draggedY<t[0][1]?n.draggedY=-1*t[0][1]:-1*n.draggedY>t[1][1]-r&&(n.draggedY=-1*(t[1][1]-r))}({bounds:e,dragPoint:this.state,height:n,width:r}),a.attr("transform","translate("+this.state.draggedX+","+this.state.draggedY+")")},t.setupDrag=function(){var e=this,t=this.elements.svgSel,n=function(t){e.state.draggedX+=t.dx,e.state.draggedY+=t.dy,e.updateDrag()},r=(0,c.ohM)().on("drag",n);t.style("cursor","move").call(r).on("drag",n)},e}(),g=function(){var e=(0,l.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.AVB)("/demos/data/d3js/world-map/world.json");case 2:n=e.sent,r=new p({rootElId:u,world:n}),null===(t=document.getElementById(d))||void 0===t||t.addEventListener("click",(function(){r.updateColors()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=g,y=function(e){var t=e.pageContext;return r.createElement(a.Z,{main:v,pageContext:t},r.createElement("form",{style:{marginBottom:20}},r.createElement("button",{className:"btn btn-info",id:d,type:"button"},"Update colors")),r.createElement("div",{id:u}))}},2656:function(e,t,n){e.exports=n(3076)},2552:function(e,t,n){"use strict";n.d(t,{eR:function(){return r},rT:function(){return a},UG:function(){return l},ZV:function(){return o},Bf:function(){return s},K7:function(){return c},wI:function(){return i},W2:function(){return u},Fh:function(){return m},jS:function(){return d},XP:function(){return f},s2:function(){return h},Mv:function(){return p},Y2:function(){return g},eQ:function(){return v},Be:function(){return y},cs:function(){return E},$c:function(){return b},Mg:function(){return w},hB:function(){return k},H6:function(){return N},YX:function(){return S},Jw:function(){return x},_q:function(){return C},zG:function(){return P},Vj:function(){return I},pn:function(){return M},x:function(){return D},oT:function(){return F},dc:function(){return B},l4:function(){return j},sD:function(){return W},V2:function(){return Z},ak:function(){return Y}});var r="styles-module--backHome--b9e05",a="styles-module--bullet--337e0",l="styles-module--d3js--ff3aa",o="styles-module--raphael--40af0",s="styles-module--storybook--f1bcc",c="styles-module--testing--9f8b3",i="styles-module--codeFragment--8d705",u="styles-module--codeFragmentButton--98bc0",m="styles-module--contentWrapper--2c2b6",d="styles-module--demoName--4057d",f="styles-module--divisor--4c75d",h="styles-module--fileNameWrapper--e0bd4",p="styles-module--footer--a0f96",g="styles-module--footerWrapper--5365d",v="styles-module--homeDemoNumber--755fe",y="styles-module--homeDemoNameLink--4b57a",E="styles-module--navWrapper--08cc9",b="styles-module--notes--e1c07",w="styles-module--rootLayout--03362",k="styles-module--sourceNumber--335c1",N="styles-module--pageHeader--06484",S="styles-module--rowWrapper--9f3a4",x="styles-module--tagCollection--c96c8",C="styles-module--tag--8c674",P="styles-module--demosLegend--16d25",I="styles-module--demosLists--52492",M="styles-module--highlightStorybook--b465e",D="styles-module--highlightTesting--b7d3f",F="styles-module--demoWip--18449",B="styles-module--demoTitle--7c73a",j="styles-module--mainSource--f7ebb",W="styles-module--dataList--54f77",Z="styles-module--sourcesList--27e91",Y="styles-module--ghButtons--1d466"},8634:function(e,t,n){"use strict";function r(e,t,n,r,a,l,o){try{var s=e[l](o),c=s.value}catch(i){return void n(i)}s.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,l){var o=e.apply(t,n);function s(e){r(o,a,l,s,c,"next",e)}function c(e){r(o,a,l,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-world-map-tsx-4786fcd2e73d426f570e.js.map