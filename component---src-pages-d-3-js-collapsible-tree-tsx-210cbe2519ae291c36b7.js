(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[692],{3956:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return G}});var r=e(7294),o=e(4275),a=e(8634),i=e(2656),d=e.n(i),l=e(2084),c=e(1504),u="tree-link",s=function(){function t(t){this.initialOpts=t,this.linkPath=(0,l.h5h)().x((function(t){return t.y})).y((function(t){return t.x})),this.linkG=t.container.append("g").attr("fill","none").attr("stroke",t.linkDefaultColor).attr("stroke-opacity",.4).attr("stroke-width",1.5)}var n=t.prototype;return n.update=function(t){var n,e=this.initialOpts,r=e.getInitialPosition,o=e.getPosition,a=e.openCloseAnimationDuration,i=this.linkG,d=this.linkPath,l=t.getData,s=t.source,f=(n=i.selectAll("path")).data.apply(n,(0,c.Z)(l())),h=f.enter().append("path").attr("class",u).attr("d",(function(){var t=r(s);return d({source:t,target:t})}));f.merge(h).transition().duration(a).attr("d",(function(t){return d(t)})),f.exit().transition().duration(a).remove().attr("d",(function(){var t=o(s);return d({source:t,target:t})}))},n.getSelection=function(){return this.linkG.selectAll(".tree-link")},t}(),f=e(7956),h="node-circle",p="node-label",v="plus-trigger",g="minus-trigger",y=[v,g],x=function(){function t(t){this.hoveredItems=new Set,this.initialOpts=t,this.nodeG=this.initialOpts.container.append("g").attr("pointer-events","all"),this.circleLinkForEffect=this.initialOpts.container.insert("circle",":first-child").attr("r",4).attr("fill","none")}return t.prototype.update=function(t){var n,e=t.source,r=this.circleLinkForEffect,o=this.hoveredItems,a=this.initialOpts,i=a.displayRemoveButton,d=a.getInitialPosition,u=a.getNodeId,s=a.getPointingLinkForNode,x=a.getPosition,m=a.getText,k=a.hasDescendants,I=a.linkDefaultColor,w=(n=this.nodeG.selectAll("g")).data.apply(n,(0,c.Z)(t.getData())),N=function(t){return k(t)?o.has(u(t))?"blue":"green":"red"},A=w.enter().append("g").attr("transform",(function(){var t=d(e);return"translate("+t.y+","+t.x+")"})).attr("fill-opacity",0).attr("stroke-opacity",0).on("click",(function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=e[1];t.onNodeClick(o)})).on("mouseenter",(function(){for(var t=this,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];var d=e[1];o.add(u(d)),(0,l.Ys)(this).select("circle").attr("fill",N),y.forEach((function(n){(0,l.Ys)(t).select("."+n).style("display",(function(t){return n!==g||i(t)?"block":"none"}))}));var c=s(d);if(c.size()){c.style("stroke","orange"),r.attr("fill","orange");var h=f.Z.path(c.node());(0,f.Z)({duration:500,easing:"easeInOutSine",endDelay:1e3,loop:!0,targets:r.node(),translateX:h("x"),translateY:h("y")})}})).on("mouseleave",(function(){for(var t=this,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];var i=e[1];o.delete(u(i)),(0,l.Ys)(this).select("circle").attr("fill",N),y.forEach((function(n){(0,l.Ys)(t).select("."+n).style("display","none")}));var d=s(i);d.size()&&(r.attr("fill","none"),d.style("stroke",I),f.Z.remove(r.node()))}));A.append("circle").attr("r",10).attr("class",h).attr("stroke-width",10);A.append("text").attr("class",p).attr("dy","5px").style("font-size","20px").text(m).clone(!0).lower().attr("stroke-linejoin","round").attr("stroke-width",3).attr("stroke","white"),A.append("rect").attr("y","-25px").attr("x","-15px").style("fill","white").attr("height","15px").attr("width","30px"),A.append("text").attr("class",v).attr("dy","-10px").attr("dx","0px").style("font-size","20px").style("display","none").text("+").attr("cursor","pointer").on("mouseenter",(function(){(0,l.Ys)(this).attr("fill","orange")})).on("mouseleave",(function(){(0,l.Ys)(this).attr("fill",null)})).on("click",(function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=e[0],a=e[1];o.stopPropagation(),t.onNodeAdd(a)})),A.append("text").attr("class",g).attr("dy","-10px").attr("dx","-15px").style("font-size","25px").style("display","none").text("-").attr("cursor","pointer").on("mouseenter",(function(){(0,l.Ys)(this).attr("fill","orange")})).on("mouseleave",(function(){(0,l.Ys)(this).attr("fill",null)})).on("click",(function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=e[0],a=e[1];o.stopPropagation(),t.onNodeRemove(a)})),w.merge(A).transition().duration(this.initialOpts.openCloseAnimationDuration).attr("transform",(function(t){var n=x(t);return"translate("+n.y+","+n.x+")"})).attr("fill-opacity",1).attr("stroke-opacity",1),[w,A].forEach((function(t){t.attr("cursor",(function(t){return k(t)?"pointer":"default"})),t.selectAll(".node-circle").attr("fill",N),t.selectAll(".node-label").attr("dx",(function(t){return k(t)?"-10px":"10px"})).attr("x",(function(t){return k(t)?-6:6})).attr("text-anchor",(function(t){return k(t)?"end":"start"}))}));var b=x(e);w.exit().transition().duration(this.initialOpts.openCloseAnimationDuration).remove().attr("transform","translate("+b.y+","+b.x+")").attr("fill-opacity",0).attr("stroke-opacity",0)},t}(),m="#555",k=function t(n){var e,r=n.getId,o=n.node,a=n.nodeId;return r(o)===a?o:(null!==(e=o.children)&&void 0!==e?e:[]).reduce((function(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];var i=e[0],d=e[1];return null!=i?i:t({getId:r,node:d,nodeId:a})}),null)},I=function t(n){var e,r=n.getId,o=n.node,a=n.nodeId;return null!==(e=o.children)&&void 0!==e&&e.length?o.children.some((function(t){return r(t)===a}))?o:o.children.reduce((function(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];var i=e[0],d=e[1];return null!=i?i:t({getId:r,node:d,nodeId:a})}),null):null},w=20,N=120,A=120,b=20,D=800-b-w,C=function t(n){var e;return Object.assign({},n,{_children:void 0,children:(null!==(e=n.children)&&void 0!==e?e:[]).map((function(n){return t(n)})),x:0,x0:0,y:0,y0:0})},P=function(t){var n=t.rootData,e=t.rootElId,r=document.getElementById(e);r.classList.add("collapsible-tree-module--collapsibleTreeChart--39sg1");var o=r.getBoundingClientRect().width-A-N,a=C(n),i=(0,l.bT9)(a);i.data.x0=D/2,i.data.y0=0;var d=(0,l.G_s)().nodeSize([40,250]),c=d(i);c.descendants().forEach((function(t){t.data._children=t.children,t.depth&&(t.children=void 0)}));var u=(0,l.Ys)("#"+e).append("svg").attr("width",o+A+N).attr("height",D+b+w).append("g");!function(t){var n=N,e=D/2,r={x:0,y:0},o=(0,l.ohM)().on("drag",(function(o){r.x+=o.dx,r.y+=o.dy,t.attr("transform","translate("+(n+r.x)+","+(e+r.y)+")")}));t.attr("transform","translate("+n+","+e+")"),(0,l.Ys)(t.node().parentNode).style("cursor","move").call(o)}(u);var f={container:u,getInitialPosition:function(t){return{x:t.data.x0,y:t.data.y0}},getPosition:function(t){return{x:t.x,y:t.y}},linkDefaultColor:m,openCloseAnimationDuration:750},h=new s(f),p=new x(Object.assign({},f,{displayRemoveButton:function(n){return t.canBeRemoved(n.data)},getNodeId:function(n){return t.getNodeId(n.data)},getPointingLinkForNode:function(n){return h.getSelection().filter((function(e){return t.getNodeId(e.target.data)===t.getNodeId(n.data)}))},getText:function(n){return t.getNodeLabel(n.data)},hasDescendants:function(t){var n;return!(null===(n=t.data.children)||void 0===n||!n.length)}}));!function n(e){var r=c.descendants().reverse(),o=c.links();d(i),p.update({getData:function(){return[r,function(n){return t.getNodeId(n.data)}]},onNodeAdd:function(e){var r,o,a,i=t.onNodeAdd(e.data),d=C(i),c=(0,l.bT9)(d);c.depth=e.depth+1,c.parent=e,e.children=null!==(r=null!==(o=e.children)&&void 0!==o?o:e.data._children)&&void 0!==r?r:[],e.data._children=e.children,e.children.push(c),e.data.children=null!==(a=e.data.children)&&void 0!==a?a:[],e.data.children.push(c.data),n(e)},onNodeClick:function(t){t.children=t.children?void 0:t.data._children,n(t)},onNodeRemove:function(e){var r=t.onNodeRemove(e.data),o=k({getId:function(n){return t.getNodeId(n.data)},node:i,nodeId:t.getNodeId(r)}),a=o.children.findIndex((function(n){return t.getNodeId(n.data)===t.getNodeId(e.data)}));o.children.splice(a,1),n(o)},source:e}),h.update({getData:function(){return[o,function(n){return t.getNodeId(n.target.data)}]},source:e}),c.eachBefore((function(t){t.data.x0=t.x,t.data.y0=t.y}))}(c)},E="chart",O=function t(n){var e,r=n.context,o=n.rawNode,a=r.id;return r.id+=1,Object.assign({},o,{children:(null!==(e=o.children)&&void 0!==e?e:[]).map((function(n){return t({context:r,rawNode:n})})),id:a})},Y=function t(n){var e;return(null!==(e=n.children)&&void 0!==e?e:[]).reduce((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=e[0],a=e[1];return Math.max(t(a),o)}),n.id)},R=function(){var t=(0,a.Z)(d().mark((function t(){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.AVB)("/demos/data/d3js/collapsible-tree/data.json");case 2:return n=t.sent,t.abrupt("return",O({context:{id:0},rawNode:n}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(t){return t.name},B=function(t){return t.id},L=function(t){return 0!==t.id},j=function(t){return{canBeRemoved:L,getNodeId:B,getNodeLabel:Z,onNodeAdd:function(n){var e,r=Y(t),o=k({getId:function(t){return t.id},node:t,nodeId:n.id});if(!o)throw new Error("Node not found");var a=r+1;o.children=null!==(e=o.children)&&void 0!==e?e:[];var i={id:a,name:"New Node id: "+a};return o.children.push(i),i},onNodeRemove:function(n){var e=I({getId:function(t){return t.id},node:t,nodeId:n.id});if(!e)throw new Error("No parent node");var r=e.children.findIndex((function(t){return t.id===n.id}));return e.children.splice(r,1),e},rootData:t,rootElId:E}},z=function(){var t=(0,a.Z)(d().mark((function t(){var n,e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:n=t.sent,e=j(n),P(e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(t){var n=t.pageContext;return r.createElement(o.Z,{main:z,pageContext:n},r.createElement("div",{id:E}))}},2656:function(t,n,e){t.exports=e(3076)},8634:function(t,n,e){"use strict";function r(t,n,e,r,o,a,i){try{var d=t[a](i),l=d.value}catch(c){return void e(c)}d.done?n(l):Promise.resolve(l).then(r,o)}function o(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var i=t.apply(n,e);function d(t){r(i,o,a,d,l,"next",t)}function l(t){r(i,o,a,d,l,"throw",t)}d(void 0)}))}}e.d(n,{Z:function(){return o}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-collapsible-tree-tsx-210cbe2519ae291c36b7.js.map