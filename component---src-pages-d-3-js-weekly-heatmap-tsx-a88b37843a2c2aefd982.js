"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[730],{8078:function(t,e,r){r.r(e),r.d(e,{default:function(){return F}});var a=r(7294),n=r(4275),l=r(8634),i=r(2656),o=r.n(i),s="chart",c=r(5221),d=r(8747),u=r.n(d),h="weekly-heatmap-module--mono--4476c",f="weekly-heatmap-module--axisBold--507d8";"undefined"!=typeof window&&r(5356);var g=["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],m=g.length,v=100,p=50,y=50,x=50,w=function(){function t(t){var e=this;this.state={drag:{x:0,y:0},width:0},this.handleResize=function(){e.render()},this.config=t;var r=t.rootElId,a=(0,c.Ys)("#"+r).append("svg"),n=a.append("g"),l=n.append("g"),i={cell:"cell",legend:"legend"};this.classes=i,this.elements={get cellsSel(){return l.selectAll("."+i.cell)},gSel:l,get legendSel(){return l.selectAll("."+i.legend)},svgDragSel:n,svgSel:a},this.render(),window.addEventListener("resize",this.handleResize)}t.renderChart=function(e){return new t(e)};var e=t.prototype;return e.teardown=function(){window.removeEventListener("resize",this.handleResize)},e.refresh=function(){this.render()},e.render=function(){var t=this.config,e=this.elements,r=t.horizontalLabels,a=t.rootElId,n=t.verticalLabels,l=t.weeklyData,i=document.getElementById(a);i.classList.add("weekly-heatmap-module--weeklyHeatmapChart--f1173");var o=i.getBoundingClientRect().width-p-y,s=Math.max(o,850);this.state.width=o;var d=Math.max(Math.ceil(10*s/r.length)-x-v+60,250),w=Math.floor(s/r.length),b=2*w,I=(0,c.Fp7)(l,(function(e){return t.getItemValue(e)})),S=(0,c.FTZ)().domain([0,m-1,I]).range(g);e.svgSel.attr("height",d+x+v).attr("width",s+p+y),e.gSel.attr("transform","translate("+p+","+x+")"),e.gSel.selectAll(".verticalLabel").data(n).enter().append("text").attr("class",(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var n=r[0],l=r[1];return"verticalLabel "+h+" axis"+(t.getIsVerticalLabelBold(n,l)?" "+f:"")})),e.gSel.selectAll(".verticalLabel").text((function(t){return t})).attr("transform","translate(-6,"+w/1.5+")").attr("x",0).attr("y",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1];return a*w})).style("text-anchor","end"),e.gSel.selectAll(".horizontalLabel").data(r).enter().append("text").text((function(t){return t})).style("text-anchor","middle").attr("class",(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var n=r[0],l=r[1];return"horizontalLabel "+h+" axis"+(t.getIsHorizontalLabelBold(n,l)?" "+f:"")})),e.gSel.selectAll(".horizontalLabel").attr("transform","translate("+w/2+", "+"-6)").attr("x",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1];return a*w})).attr("y",0),e.cellsSel.data(l).enter().append("rect").attr("class",this.classes.cell+" weekly-heatmap-module--bordered--2b26a").style("fill",g[0]),e.cellsSel.transition().duration(2e3).style("fill",(function(e){return S(t.getItemValue(e))})),e.cellsSel.attr("height",w).attr("rx",100).attr("ry",100).attr("width",w).attr("x",(function(e){return t.getItemHorizontalIndex(e)*w})).attr("y",(function(e){return t.getItemVerticalIndex(e)*w})).attr("title",t.getItemTooltip),u()("."+this.classes.cell).tooltip();var A=[0].concat(S.quantiles()),L=e.legendSel.data(A).enter().append("g").attr("class",this.classes.legend);L.append("rect").style("fill",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1];return g[a]})).style("stroke","#ccc"),L.append("text").attr("class",h).style("text-anchor","middle"),e.legendSel.each((function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var n=r[0],l=r[1];(0,c.Ys)(this).selectAll("rect").attr("x",b*l).attr("y",d).attr("width",b).attr("height",w/2),(0,c.Ys)(this).selectAll("."+h).attr("x",b*l+b/2).text(t.getLegendText(n)).attr("y",d+w)})),this.setupDrag()},e.setupDrag=function(){var t=this,e=this.elements,r=function(){t.elements.svgDragSel.attr("transform","translate("+t.state.drag.x+","+t.state.drag.y+")")},a=this.state.width<850,n=function(e){a&&(t.state.drag.x+=e.dx,t.state.drag.y+=e.dy,r())},l=(0,c.ohM)().on("drag",n);e.svgSel.style("cursor",a?"move":"default"),a||(this.state.drag={x:0,y:0}),e.svgSel.call(l).on("drag",n),r()},t}(),b="update-random",I=["Mo","Tu","We","Th","Fr","Sa","Su"],S=Array.from({length:24}).map((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1],n=a%12;return n+1+(a>=11&&23!==a?"pm":"am")})),A=function(){var t=(0,l.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.pvA)("/demos/data/d3js/weekly-heatmap/data.tsv");case 2:return e=t.sent,t.abrupt("return",e.map((function(t){return{arbitraryMetric:+t.value,day:+t.day,hour:+t.hour}})));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(t){return t.arbitraryMetric},k=function(t){return"Arbitrary Metric: "+t.arbitraryMetric.toFixed(2)},z=function(t){return t.hour-1},E=function(t){return t.day-1},M=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1];return a>=7&&a<=16},B=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[1];return a>=0&&a<=4},C=function(t){return"â‰¥ "+t.toFixed(2)},T=function(t){return{getIsHorizontalLabelBold:M,getIsVerticalLabelBold:B,getItemHorizontalIndex:z,getItemTooltip:k,getItemValue:L,getItemVerticalIndex:E,getLegendText:C,horizontalLabels:S,rootElId:s,verticalLabels:I,weeklyData:t}},V=function(){var t=(0,l.Z)(o().mark((function t(){var e,r,a,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:r=t.sent,a=T(r),n=w.renderChart(a),null===(e=document.getElementById(b))||void 0===e||e.addEventListener("click",(function(){r.forEach((function(t){Math.random()>.85&&(t.arbitraryMetric+=100*Math.random()+30)})),n.refresh()}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=V,F=function(t){var e=t.pageContext;return a.createElement(n.Z,{main:D,pageContext:e},a.createElement("form",{style:{marginBottom:20}},a.createElement("button",{className:"btn btn-info",id:b,type:"button"},"Update Random")),a.createElement("div",{id:s}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-weekly-heatmap-tsx-a88b37843a2c2aefd982.js.map