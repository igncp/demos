(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[909],{3244:function(t,e,r){"use strict";var n=r(8314),a=r(2492),i=r.n(a),o={colorsScale:function(t,e){var r=n.BYU().domain(e).range([0,1]),a=n.BYU().domain(n.w6H(0,1,1/t.length)).range(t);return function(t){return a(r(t))}},filterBlackOpacity:function(t,e,r,n){var a=e.append("defs").append("filter").attr("height","500%").attr("id","drop-shadow-"+t).attr("width","500%").attr("x","-200%").attr("y","-200%");a.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",r),a.append("feOffset").attr("dx",1).attr("dy",1),a.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear");var i=a.append("feMerge");return i.append("feMergeNode"),i.append("feMergeNode").attr("in","SourceGraphic")},filterColor:function(t,e,r,n,a){null==a&&(a=!1);var i=e.append("defs").append("filter").attr("id","drop-shadow-"+t);return a&&i.attr("height","500%").attr("width","500%").attr("x","-200%").attr("y","-200%"),i.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),i.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",r),i.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),i.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear")},middleTitle:function(t,e,r,n){null==n&&(n=-15),t.append("text").attr("class","chart-title").attr("text-anchor","middle").attr("transform","translate("+String(e/2)+","+n+")").text(r).style("font-weight","bold")},svg:function(t,e,r,a){return n.Ys(t).text("").append("svg").attr("height",r+a.top+a.bottom).attr("width",e+a.left+a.right).append("g").attr("transform","translate("+a.left+","+a.top+")")},tooltip:function(t,e){null==e&&(e={});var r=i()({elementSelector:"",followElement:!1,followMouse:!1,leftOffst:60,tOpts:{container:"body",viewport:{selector:"#chart svg"}},topOffst:40},e);$(t).tooltip(r.tOpts),r.followMouse?$(t).hover((function(t){return $(".tooltip").css({left:String(t.pageX-r.leftOffst)+"px",top:String(t.pageY-r.topOffst)+"px"})})):r.followElement&&$(t).hover((function(){return $(".tooltip").css({left:String($(r.elementSelector).position().left-r.leftOffst)+"px",top:String($(r.elementSelector).position().top-r.topOffst)+"px"})}))}};e.Z=o},4932:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return k}});var n=r(7294),a=r(2247),i=r(2137),o=r(7757),s=r.n(o),c=r(8314);function l(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}function u(t,e,r){function n(n){var a=t(n),i=a<r,o=c.Wem(t.range()),s=o[0],l=o[1],u=i?r-s:l-r;return 0==u&&(u=l-s),(i?-1:1)*u*(e+1)/(e+u/Math.abs(a-r))+r}return n.distortion=function(t){return arguments.length?(e=+t,n):e},n.focus=function(t){return arguments.length?(r=+t,n):r},n.copy=function(){return u(t.copy(),e,r)},n.nice=t.nice,n.ticks=t.ticks,n.tickFormat=t.tickFormat,n.range=t.range,function(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n.forEach((function(r){t[r]=l(t,e,e[r])})),t}(n,t,"domain","range")}var d={circular:function(){var t=200,e=2,r=null,n=null,a=[0,0];function i(e){var i=e.x-a[0],o=e.y-a[1],s=Math.sqrt(i*i+o*o);if(!s||s>=t)return{x:e.x,y:e.y,z:s>=t?1:10};var c=r*(1-Math.exp(-s*n))/s*.75+.25;return{x:a[0]+i*c,y:a[1]+o*c,z:Math.min(c,10)}}function o(){return r=(r=Math.exp(e))/(r-1)*t,n=e/t,i}return i.radius=function(e){return arguments.length?(t=+e,o()):t},i.distortion=function(t){return arguments.length?(e=+t,o()):e},i.focus=function(t){return arguments.length?(a=t,i):a},o()},scale:function(t){return u(t(),3,0)}},f=r(3244),p=function(){var t=(0,i.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.AVB("/demos/data/d3js/fish-eye/data.json"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(t){for(var e=t.toString();;){var r=e.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(e===r)break;e=r}return e},m=70,v=70,g=50,x=80,y=700-x-m,w=function(){function t(t){var e=t.rootElId,r=t.data;this.rootElId=e,this.data=r,this.setupRootEl(),this.setVars(),this.setDom()}var e=t.prototype;return e.render=function(){this.setChartTitle(),this.setBackground(),this.setPointer(),this.setFilter(),this.setAxis(),this.setLabels(),this.setDots(),this.setTitles(),this.bindMousemove(),this.bindClick()},e.setupRootEl=function(){var t=document.getElementById(this.rootElId);t.classList.add("fish-eye-chart"),this.width=t.getBoundingClientRect().width-v-g},e.setDom=function(){this.dom={svg:c.Ys("#"+this.rootElId).append("svg").attr("width",this.width+v+g).attr("height",y+x+m).append("g").attr("transform","translate("+v+","+x+")")}},e.setChartTitle=function(){return f.Z.middleTitle(this.dom.svg,this.width,"Income Per Capita vs Life Expectancy vs Population vs Region - 180 Countries",-40)},e.setVars=function(){var t=c.PKp().domain(["Sub-Saharan Africa","South Asia","Middle East & North Africa","America","Europe & Central Asia","East Asia & Pacific"]).range(c.i4X),e=c.PUr().domain([0,5e8]).range([5,60]),r=d.scale(c.p2C).domain([300,1e5]).range([0,this.width]),n=d.scale(c.BYU).domain([20,90]).range([y,0]);this.vars={colorScale:t,focused:!1,radiusScale:e,xScale:r,yScale:n}},e.setAxis=function(){this.dom.xAxis=c.LLu(this.vars.xScale).tickFormat(c.WUZ(",d")).tickSize(-y),this.dom.yAxis=c.y4O(this.vars.yScale).tickSize(-this.width),this.dom.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+y+")").call(this.dom.xAxis),this.dom.svg.append("g").attr("class","y axis").call(this.dom.yAxis)},e.setBackground=function(){return this.dom.svg.append("rect").attr("class","background").attr("width",this.width).attr("height",y)},e.setLabels=function(){this.dom.svg.append("text").attr("class","x label").attr("text-anchor","end").attr("x",this.width-26).attr("y",y+26).text("income per capita, inflation-adjusted (dollars)"),this.dom.svg.append("text").attr("class","y label").attr("text-anchor","end").attr("x",-26).attr("y",-40).attr("dy",".75em").attr("transform","rotate(-90)").text("life expectancy (years)")},e.setFilter=function(){return f.Z.filterColor("circles",this.dom.svg,1.5,.6,!0)},e.position=function(){var t=this;this.dom.dot.attr("cx",(function(e){return t.vars.xScale(e.income)})).attr("cy",(function(e){return t.vars.yScale(e.lifeExpectancy)})).attr("r",(function(e){return t.vars.radiusScale(e.population)}))},e.setDots=function(){var t=this;this.dom.dot=this.dom.svg.append("g").attr("class","dots").selectAll(".dot").data(this.data).enter().append("circle").attr("class","dot").style("fill",(function(e){return t.vars.colorScale(e.region)})).style("filter","url(#drop-shadow-circles)").style("stroke","black").style('"stroke-width"',"1px").sort((function(t,e){return e.population-t.population})),this.position()},e.setTitles=function(){this.dom.dot.append("title").text((function(t){return t.name+":\n- Income: "+h(t.income)+" $/P.C.\n- Population: "+h(t.population)+"\n- Life expectancy: "+t.lifeExpectancy+" years"}))},e.zoom=function(t){var e=c.cx$(t);this.vars.xScale.distortion(2.5).focus(e[0]),this.vars.yScale.distortion(2.5).focus(e[1]),this.position(),this.dom.svg.select(".x.axis").call(this.dom.xAxis),this.dom.svg.select(".y.axis").call(this.dom.yAxis)},e.setPointer=function(){this.dom.pointer=this.dom.svg.append("text").text("+").attr("class","pointer")},e.bindMousemove=function(){var t=this;return this.dom.svg.on("mousemove",(function(e){t.vars.focused||t.zoom(e)}))},e.bindClick=function(){var t=this;this.dom.svg.on("click",(function(e){if(t.vars.focused=!t.vars.focused,t.vars.focused){var r=c.cx$(t);t.dom.pointer.attr("x",r[0]).attr("y",r[1]).style("opacity",1)}else t.dom.pointer.style("opacity",0),t.zoom(e)}))},t}(),S=function(){var t=(0,i.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:e=t.sent,new w({data:e,rootElId:"chart"}).render();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(t){var e=t.pageContext.demoInfo;return n.createElement(a.Z,{demoInfo:e,main:S},n.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-fish-eye-tsx-aa3084913be7ce604dc7.js.map