(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[923],{2137:function(t,r,e){"use strict";function n(t,r,e,n,a,o,i){try{var u=t[o](i),s=u.value}catch(d){return void e(d)}u.done?r(s):Promise.resolve(s).then(n,a)}function a(t){return function(){var r=this,e=arguments;return new Promise((function(a,o){var i=t.apply(r,e);function u(t){n(i,a,o,u,s,"next",t)}function s(t){n(i,a,o,u,s,"throw",t)}u(void 0)}))}}e.d(r,{Z:function(){return a}})},9646:function(t,r,e){"use strict";var n;e.d(r,{Z:function(){return v}});var a=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(t){return"string"==typeof t&&i.test(t)},s=[],d=0;d<256;++d)s.push((d+256).toString(16).substr(1));var c,l,f=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(s[t[r+0]]+s[t[r+1]]+s[t[r+2]]+s[t[r+3]]+"-"+s[t[r+4]]+s[t[r+5]]+"-"+s[t[r+6]]+s[t[r+7]]+"-"+s[t[r+8]]+s[t[r+9]]+"-"+s[t[r+10]]+s[t[r+11]]+s[t[r+12]]+s[t[r+13]]+s[t[r+14]]+s[t[r+15]]).toLowerCase();if(!u(e))throw TypeError("Stringified UUID is invalid");return e},p=0,h=0;var v=function(t,r,e){var n=r&&e||0,a=r||new Array(16),i=(t=t||{}).node||c,u=void 0!==t.clockseq?t.clockseq:l;if(null==i||null==u){var s=t.random||(t.rng||o)();null==i&&(i=c=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==u&&(u=l=16383&(s[6]<<8|s[7]))}var d=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:h+1,g=d-p+(v-h)/1e4;if(g<0&&void 0===t.clockseq&&(u=u+1&16383),(g<0||d>p)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=d,h=v,l=u;var m=(1e4*(268435455&(d+=122192928e5))+v)%4294967296;a[n++]=m>>>24&255,a[n++]=m>>>16&255,a[n++]=m>>>8&255,a[n++]=255&m;var y=d/4294967296*1e4&268435455;a[n++]=y>>>8&255,a[n++]=255&y,a[n++]=y>>>24&15|16,a[n++]=y>>>16&255,a[n++]=u>>>8|128,a[n++]=255&u;for(var b=0;b<6;++b)a[n+b]=i[b];return r||f(a)}},4015:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return A}});var n=e(7294),a=e(4275),o=e(2137),i=e(7757),u=e.n(i),s=e(7723),d="chart",c=function(t){var r=t.getDebits(),e=t.getCredits(),n=t.getCountriesList(),a=(0,s.WUZ)(",.3r"),o=n.map((function(t){return{id:t.id,label:t.name}})),i=function(t){return t.map((function(t){return t?+t.amount:0}))};return{chords:[r.map(i),e.map(i)],chordsTitles:["Debits","Credits"],getGroupTitle:function(t){var r=t.chartIndex,e=t.chordGroup;return n[e.index].name+" "+(r?"owes":"is owed")+" $"+a(e.value)+"B."},getRibbonTitle:function(t){var r=t.sourceIndex,e=t.sourceValue,o=t.targetIndex,i=n[r],u=n[o];return i.name+" owes "+u.name+" $"+a(e)+"B."},groupItems:o,rootElId:d}},l=function(){function t(t){var r=t.countriesList,e=t.credits,n=t.debits;this.credits=e,this.debits=n,this.countriesList=r}t.fetchAndCreate=function(){var r=(0,o.Z)(u().mark((function r(){var e,n,a,o,i,d,c,l;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,s.gyn)("/demos/data/d3js/chord/data.csv");case 2:return e=r.sent,n=[],a={},o=[],i=[],d=0,c=function(t){return t in a||(a[t]={id:d,name:t},d+=1),a[t]},l=e.map((function(t){return Object.assign({},t,{creditor:c(t.creditor),debtor:Object.assign({},c(t.debtor),{risk:t.risk})})})),Array.from({length:d}).forEach((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];o[n]=[],i[n]=[],Array.from({length:d}).forEach((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var a=r[1];o[n][a]=null,i[n][a]=null}))})),l.forEach((function(t){o[t.creditor.id][t.debtor.id]=t,i[t.debtor.id][t.creditor.id]=t,n[t.creditor.id]=t.creditor,n[t.debtor.id]=t.debtor})),r.abrupt("return",new t({countriesList:n,credits:i,debits:o}));case 13:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();var r=t.prototype;return r.getCredits=function(){return this.credits},r.getDebits=function(){return this.debits},r.getCountriesList=function(){return this.countriesList},t}(),f=e(9646),p="chord-module--chord--1Zjd0",h="chord-module--group--309FH",v="chord-module--headingTitle--A2lxW",g=function(t){var r=t.charts,e=t.deviation,n=t.name,a=t.slope,o=r.append("defs").append("filter").attr("id",n);o.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),o.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",e),o.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),o.append("feComponentTransfer").append("feFuncA").attr("slope",a).attr("type","linear")},m=["#39B347","#C92E47","#DB704D","#FFA22C","#5E92AA","#F8EDD3"],y=20,b=50,x=500,w=function(t){var r=t.chords,e=t.chordsTitles,n=t.groupItems,a=t.rootElId,o=document.getElementById(a),i=r[0],u=r[1],d=e[0],c=e[1],l="drop-shadow-ribbons-"+(0,f.Z)().slice(0,6),w="drop-shadow-groups-"+(0,f.Z)().slice(0,6),C="ribbon-item-"+(0,f.Z)().slice(0,6),A="chord-group-"+(0,f.Z)().slice(0,6);o.classList.add("chord-module--chordChart--lzAYO");var k=o.getBoundingClientRect().width/2-20,E=Math.min(k,x)/2-4,I=E-20,B=(0,s.Nb1)().innerRadius(I).outerRadius(E),D=(0,s.Ys)("#"+a).selectAll("div").data([i,u]).enter().append("div").style("display","inline-block").style("width",k+"px").style("height",x+b+y+"px").append("svg:svg").attr("width",k).attr("height",x+b+y).append("svg:g").attr("transform","translate("+k/2+","+(250+b)+")"),Z=D.filter((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];return 0===n})),j=D.filter((function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r[1];return 1===n})),R=function(t){var r=t.chart,e=t.label;return r.append("text").text(e).attr("transform","translate(0,-260)").attr("class","chord-module--chartTitle--33urD").attr("text-anchor","middle")};R({chart:Z,label:d}),R({chart:j,label:c}),g({charts:D,deviation:2,name:l,slope:.4}),g({charts:D,deviation:3,name:w,slope:.5});var T=(0,s.BYU)().domain((0,s.Wem)([0,n.length-1])).range([0,1]),G=(0,s.BYU)().domain((0,s.w6H)(0,1,1/m.length)).range(m),L=function(t){return G(T(t))};D.each((function(){for(var r=arguments.length,e=new Array(r),a=0;a<r;a++)e[a]=arguments[a];var o=e[0],i=e[1],u=(0,s.Ys)(this),d=(0,s.fFo)().sortGroups(s.$1i).sortSubgroups(s.$1i).sortChords(s.$1i)(o),c=(0,s.N22)().radius(I);u.selectAll("path."+p).data(d).enter().append("path").attr("d",c).attr("class",p+" "+C).style("fill",(function(t){return L(t.target.index)})).style("filter","url(#"+l+")").style("stroke",(function(t){var r=L(t.target.index);return(0,s.B8C)(r).darker().formatHex()})).style("stroke-width",2).attr("title",(function(r){return t.getRibbonTitle({sourceIndex:r.source.index,sourceValue:r.source.value,targetIndex:r.target.index,targetValue:r.source.value})}));var f=u.selectAll("g."+h).data(d.groups).enter().append("svg:g").attr("class",h);f.append("svg:path").attr("d",B).style("fill",(function(t){return L(t.index)})).attr("id",(function(t){return"group"+t.index+"-"+i})).attr("class",A).style("filter",(function(){return"url(#"+w+")"})).attr("title",(function(r){return t.getGroupTitle({chartIndex:i,chordGroup:r})})),f.append("svg:text").attr("x",6).attr("dy",15).filter((function(t){return t.value>150})).append("svg:textPath").attr("xlink:href",(function(t){return"#group"+t.index+"-"+i})).text((function(t){return n[t.index].label})).attr("class",v),$("."+C).tooltip({track:!0}),$("."+A).tooltip({track:!0})}))},C=function(){var t=(0,o.Z)(u().mark((function t(){var r,e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.fetchAndCreate();case 2:r=t.sent,e=c(r),w(e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(t){var r=t.pageContext;return n.createElement(a.Z,{links:["/vendors/jquery-ui/themes/base/jquery-ui.min.css"],main:C,pageContext:r,scripts:["/vendors/jquery-ui/jquery-ui.min.js"]},n.createElement("div",{id:d}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-chord-tsx-ffa1f14083324c59e810.js.map