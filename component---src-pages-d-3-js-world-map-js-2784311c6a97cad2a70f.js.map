{"version":3,"sources":["webpack://demos/./node_modules/topojson-client/src/identity.js","webpack://demos/./node_modules/topojson-client/src/feature.js","webpack://demos/./node_modules/topojson-client/src/transform.js","webpack://demos/./node_modules/topojson-client/src/reverse.js","webpack://demos/./src/demos/world-map/world-map.js","webpack://demos/./src/pages/d3js/world-map.js"],"names":["x","topology","o","objects","type","features","geometries","map","id","bbox","properties","geometry","transformPoint","transform","identity","x0","y0","kx","scale","ky","dx","translate","dy","input","i","j","n","length","output","Array","arcs","arc","points","pop","a","k","push","array","t","reverse","point","p","line","ring","polygon","coordinates","object","path","countries","width","$","innerWidth","height","color","d3","category20","classFn","d","colorFn","mouseoverFn","select","this","style","mouseoutFn","setZoom","transition","duration","attr","centroid","y","svg","append","on","json","ROOT_PATH","_error","world","projection","geo","mercator","center","data","topojson","selectAll","enter","demoInfo","pageContext","main","scripts","className"],"mappings":"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","file":"component---src-pages-d-3-js-world-map-js-2784311c6a97cad2a70f.js","sourcesContent":["export default function (x) {\n  return x;\n}","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\nexport default function (topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\" ? {\n    type: \"FeatureCollection\",\n    features: o.geometries.map(function (o) {\n      return feature(topology, o);\n    })\n  } : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {\n    type: \"Feature\",\n    properties: properties,\n    geometry: geometry\n  } : bbox == null ? {\n    type: \"Feature\",\n    id: id,\n    properties: properties,\n    geometry: geometry\n  } : {\n    type: \"Feature\",\n    id: id,\n    bbox: bbox,\n    properties: properties,\n    geometry: geometry\n  };\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n\n    for (var i = 0, n = arcs.length; i < n; ++i) {\n      arc(arcs[i], points);\n    }\n\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n\n    while (points.length < 4) {\n      points.push(points[0]);\n    } // This may happen if an arc has only two points.\n\n\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type,\n        coordinates;\n\n    switch (type) {\n      case \"GeometryCollection\":\n        return {\n          type: type,\n          geometries: o.geometries.map(geometry)\n        };\n\n      case \"Point\":\n        coordinates = point(o.coordinates);\n        break;\n\n      case \"MultiPoint\":\n        coordinates = o.coordinates.map(point);\n        break;\n\n      case \"LineString\":\n        coordinates = line(o.arcs);\n        break;\n\n      case \"MultiLineString\":\n        coordinates = o.arcs.map(line);\n        break;\n\n      case \"Polygon\":\n        coordinates = polygon(o.arcs);\n        break;\n\n      case \"MultiPolygon\":\n        coordinates = o.arcs.map(polygon);\n        break;\n\n      default:\n        return null;\n    }\n\n    return {\n      type: type,\n      coordinates: coordinates\n    };\n  }\n\n  return geometry(o);\n}","import identity from \"./identity.js\";\nexport default function (transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function (input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2,\n        n = input.length,\n        output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n\n    while (j < n) {\n      output[j] = input[j], ++j;\n    }\n\n    return output;\n  };\n}","export default function (array, n) {\n  var t,\n      j = array.length,\n      i = j - n;\n\n  while (i < --j) {\n    t = array[i], array[i++] = array[j], array[j] = t;\n  }\n}","import * as topojson from \"topojson-client\"\n\nconst main = () => {\n  let path = \"\"\n  let countries = \"\"\n\n  const width = $(\"#chart\").innerWidth()\n  const height = 500\n  const color = d3.scale.category20()\n\n  const classFn = function (d) {\n    return `country ${d.id}`\n  }\n\n  const colorFn = function (d) {\n    return color(d.id)\n  }\n\n  const mouseoverFn = function () {\n    return d3.select(this).style(\"stroke\", \"black\").style(\"stroke-width\", \"1px\")\n  }\n\n  const mouseoutFn = function () {\n    return d3\n      .select(this)\n      .style(\"stroke\", \"white\")\n      .style('\"stroke-width\"', \".2px\")\n  }\n\n  const setZoom = function (d) {\n    if (!d) {\n      return countries\n        .transition()\n        .duration(3500)\n        .attr(\n          \"transform\",\n          `translate(${width / 2},${height / 2})scale(${1})translate(${\n            -width / 2\n          },${-height / 2})`\n        )\n    }\n\n    const centroid = path.centroid(d)\n    const x = centroid[0]\n    const y = centroid[1]\n\n    return countries\n      .transition()\n      .duration(3500)\n      .attr(\n        \"transform\",\n        `translate(${width / 2},${height / 2})scale(${8})translate(${-x},${-y})`\n      )\n  }\n\n  let svg = d3\n    .select(\"#chart\")\n    .append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n\n  svg\n    .append(\"rect\")\n    .attr(\"class\", \"background\")\n    .attr(\"height\", height)\n    .attr(\"width\", width)\n    .on(\"click\", setZoom)\n    .style(\"fill\", \"#DAEDFF\")\n  svg = svg.append(\"g\")\n\n  return d3.json(\n    `${ROOT_PATH}data/d3js/world-map/world.json`,\n    (_error, world) => {\n      const projection = d3.geo\n        .mercator()\n        .center([0, 45.4])\n        .scale(150)\n        .translate([width / 2, height / 2])\n\n      path = d3.geo.path().projection(projection)\n\n      const data = topojson.feature(world, world.objects.countries).features\n\n      countries = svg\n        .selectAll(\".country\")\n        .data(data)\n        .enter()\n        .append(\"path\")\n        .attr(\"class\", classFn)\n        .attr(\"d\", path)\n        .style(\"fill\", colorFn)\n        .style(\"stroke\", \"#FFF\")\n        .style(\"stroke-width\", 0.2)\n\n      countries.on(\"mouseover\", mouseoverFn)\n      countries.on(\"mouseout\", mouseoutFn)\n      countries.on(\"click\", setZoom)\n    }\n  )\n}\n\nexport default main\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/world-map/world-map\"\n\nconst WorldMap = ({ pageContext: { demoInfo } }) => (\n  <Demo demoInfo={demoInfo} main={main} scripts={[\"/vendors/d3/d3.min.js\"]}>\n    <div className=\"world-map-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default WorldMap\n"],"sourceRoot":""}