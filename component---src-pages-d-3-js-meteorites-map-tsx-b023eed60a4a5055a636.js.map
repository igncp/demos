{"version":3,"sources":["webpack://demos/./node_modules/uuid/dist/esm-browser/rng.js","webpack://demos/./node_modules/uuid/dist/esm-browser/regex.js","webpack://demos/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://demos/./node_modules/uuid/dist/esm-browser/validate.js","webpack://demos/./node_modules/uuid/dist/esm-browser/v1.js","webpack://demos/./src/demos/meteorites-map/circles-map-chart.module.css","webpack://demos/./src/demos/meteorites-map/circles-map-chart.ts","webpack://demos/./src/demos/meteorites-map/meteorites-data-model.ts","webpack://demos/./src/demos/meteorites-map/meteorites-map-chart-data.ts","webpack://demos/./src/demos/meteorites-map/meteorites-map.ts","webpack://demos/./src/pages/d3js/meteorites-map.tsx"],"names":["getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","byteToHex","i","push","toString","substr","_nodeId","_clockseq","arr","offset","arguments","length","undefined","toLowerCase","TypeError","_lastMSecs","_lastNSecs","options","buf","b","Array","node","clockseq","seedBytes","random","msecs","Date","now","nsecs","dt","tl","tmh","n","circle","margin","height","zoomed","zoomEvent","select","this","transition","duration","attr","transform","renderChart","chartConfig","circlesData","getCircleId","mapLayout","rootElId","rootEl","document","getElementById","width","getBoundingClientRect","projectionFn","geoMercator","translate","geometryPath","geoPath","projection","circleClassUnique","styles","uuidv1","slice","circleClass","mapLayoutItemClass","state","isDuringAnimation","selectedCircle","modal","append","style","circlesGeo","map","circleData","geometry","geolocation","type","removeSelection","circlesEls","anime","targets","translateX","translateY","complete","text","circleClickHandler","clickedCircle","clickedCircleId","modalHTML","getModalHTML","html","targetCircle","targetProj","coordinates","nearCircles","filter","otherCircle","otherCircleCoordinates","proj","vector","vectorLength","Math","sqrt","pow","vectorNormalized","nearCirclesSet","Set","nearCircle","vectorsMap","reduce","acc","getNearCirclesWithVectors","getShouldSet0","geometryIndex","animatedCircle","has","getTranslateFn","coordIdx","top","modalHiddenTop","window","scrollY","svg","on","call","zoom","extent","svgMap","chartTitle","dialogId","group","dialog","body","chartHelpHTML","$","autoOpen","resizable","addInfo","selectAll","data","features","enter","mapLayoutItem","properties","name","circleGeo","getCircleTitle","clickEvent","stopPropagation","tooltip","track","tooltipClass","CountriesLayout","countries","createAndFetch","json","ROOT_PATH","getCountries","MeteoritesData","meteorites","getMeteoriteId","meteorite","id","getMeteoriteSummaryHTML","year","timeFormat","mass","Intl","NumberFormat","format","qs","q","recclass","nametype","trim","getMeteoriteName","getMeteorites","createChartConfig","countriesLayout","meteoritesData","meteoriteData","Promise","all","pageContext","links","main","scripts"],"mappings":"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","file":"component---src-pages-d-3-js-meteorites-map-tsx-b023eed60a4a5055a636.js","sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","// extracted by mini-css-extract-plugin\nexport var mapLayoutItemTooltip = \"circles-map-chart-module--mapLayoutItemTooltip--2bFce\";\nexport var infoTrigger = \"circles-map-chart-module--infoTrigger--uo5R3\";\nexport var circle = \"circles-map-chart-module--circle--1Thr1\";\nexport var active = \"circles-map-chart-module--active--2o6S0\";\nexport var moved = \"circles-map-chart-module--moved--3crHY\";\nexport var modal = \"circles-map-chart-module--modal--hs5K4\";","import anime from \"animejs\"\nimport { geoMercator, geoPath, select, zoom } from \"d3\"\nimport { v1 as uuidv1 } from \"uuid\"\n\nimport * as styles from \"./circles-map-chart.module.css\"\n\ntype Point = [number, number]\nexport type Geolocation = { coordinates: Point; type: \"Point\" }\n\nexport type MapLayout = {\n  features: Array<{\n    geometry: { coordinates: Point[]; type: \"Polygon\" } // eslint-disable-line id-denylist\n    id: string\n    properties: { name: string }\n    type: \"Feature\"\n  }>\n  type: \"FeatureCollection\"\n}\n\ntype ChartDataConstraint = {\n  geolocation: Geolocation\n}\n\ntype ChartState = {\n  isDuringAnimation: boolean\n  selectedCircle: string | null\n}\n\nconst margin = {\n  bottom: 0,\n  left: 0,\n  right: 0,\n  top: 0,\n}\n\nconst svgCutBottom = 250 // to remove the south pole which doesn't have any in the data\nconst height = 1000 - margin.top - margin.bottom\nconst modalHiddenTop = 250\nconst clickedCircleDistortion = 20\n\n// eslint-disable-next-line max-params,@typescript-eslint/no-explicit-any\nconst zoomed = function (this: SVGSVGElement, zoomEvent: any) {\n  select(this).transition().duration(500).attr(\"transform\", zoomEvent.transform)\n}\n\nexport type ChartConfig<CircleData> = {\n  chartHelpHTML: string\n  chartTitle: string\n  circlesData: CircleData[]\n  getCircleId: (circleData: CircleData) => string\n  getCircleTitle: (circlesData: CircleData) => string\n  getModalHTML: (circleData: CircleData) => string\n  mapLayout: MapLayout\n  rootElId: string\n}\n\nexport const renderChart = <CircleData extends ChartDataConstraint>(\n  chartConfig: ChartConfig<CircleData>\n) => {\n  const { circlesData, getCircleId, mapLayout, rootElId } = chartConfig\n  const rootEl = document.getElementById(rootElId) as HTMLElement\n  const width =\n    rootEl.getBoundingClientRect().width - margin.left - margin.right\n  const projectionFn = geoMercator().translate([width / 2, height / 2])\n  const geometryPath: any = geoPath().projection(projectionFn) // eslint-disable-line @typescript-eslint/no-explicit-any\n\n  const circleClassUnique = `${styles.circle}-${uuidv1().slice(0, 6)}`\n  const circleClass = `${circleClassUnique} ${styles.circle}`\n  const mapLayoutItemClass = `mapLayoutItem-${uuidv1().slice(0, 6)}`\n\n  type CircleGeo = CircleData & {\n    geometry: CircleData[\"geolocation\"] // eslint-disable-line id-denylist\n    type: \"Feature\"\n  }\n\n  const state: ChartState = {\n    isDuringAnimation: false,\n    selectedCircle: null,\n  }\n\n  const modal = select(`#${rootElId}`)\n    .append(\"div\")\n    .attr(\"class\", styles.modal)\n    .style(\"top\", `${-modalHiddenTop}px`)\n\n  const circlesGeo: CircleGeo[] = circlesData.map((circleData) => ({\n    ...circleData,\n    geometry: circleData.geolocation, // eslint-disable-line id-denylist\n    type: \"Feature\",\n  }))\n\n  const removeSelection = () => {\n    if (state.isDuringAnimation) {\n      return\n    }\n\n    state.selectedCircle = null\n\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    circlesEls.attr(\"class\", circleClass)\n\n    anime({\n      targets: `.${circleClassUnique}`,\n      translateX: 0,\n      translateY: 0,\n    })\n\n    state.isDuringAnimation = true\n\n    anime({\n      complete: () => {\n        state.isDuringAnimation = false\n        modal.text(\"\")\n      },\n      targets: `.${styles.modal}`,\n      translateY: 0,\n    })\n  }\n\n  const getNearCirclesWithVectors = ({\n    targetCircle,\n  }: {\n    targetCircle: CircleGeo\n  }) => {\n    const targetProj = projectionFn(targetCircle.geometry.coordinates) as [\n      number,\n      number\n    ]\n\n    const nearCircles = circlesGeo\n      .slice(0)\n      .filter((otherCircle) => !!(otherCircle.geometry as unknown))\n      .map((otherCircle) => {\n        const {\n          geometry: { coordinates: otherCircleCoordinates },\n        } = otherCircle\n        const proj = projectionFn(otherCircleCoordinates) as [number, number]\n        const vector = [proj[0] - targetProj[0], proj[1] - targetProj[1]]\n        const vectorLength = Math.sqrt(\n          Math.pow(vector[0], 2) + Math.pow(vector[1], 2)\n        )\n\n        return {\n          ...otherCircle,\n          vector,\n          vectorLength,\n        }\n      })\n      .filter(\n        (otherCircle) =>\n          otherCircle.vectorLength < 20 && otherCircle.vectorLength !== 0\n      )\n      .map((otherCircle) => ({\n        ...otherCircle,\n        vectorNormalized: [\n          otherCircle.vector[0] / otherCircle.vectorLength,\n          otherCircle.vector[1] / otherCircle.vectorLength,\n        ] as [number, number],\n      }))\n\n    const nearCirclesSet = new Set(\n      nearCircles.map((nearCircle) => getCircleId(nearCircle))\n    )\n\n    const vectorsMap = nearCircles.reduce((...[acc, nearCircle]) => {\n      acc[getCircleId(nearCircle)] = nearCircle.vectorNormalized\n\n      return acc\n    }, {} as Record<string, [number, number]>)\n\n    return {\n      nearCircles,\n      nearCirclesSet,\n      vectorsMap,\n    }\n  }\n\n  const circleClickHandler = ({\n    clickedCircle,\n  }: {\n    clickedCircle: CircleGeo\n  }) => {\n    if (state.isDuringAnimation) {\n      return\n    }\n\n    const clickedCircleId = getCircleId(clickedCircle)\n\n    if (state.selectedCircle === clickedCircleId) {\n      removeSelection()\n\n      return\n    }\n\n    state.selectedCircle = clickedCircleId\n\n    const modalHTML = chartConfig.getModalHTML(clickedCircle)\n\n    modal.html(modalHTML)\n\n    const { nearCirclesSet, vectorsMap } = getNearCirclesWithVectors({\n      targetCircle: clickedCircle,\n    })\n\n    const getShouldSet0 = (geometryIndex: number) => {\n      const { [geometryIndex]: animatedCircle } = circlesGeo\n\n      return (\n        getCircleId(animatedCircle) === getCircleId(clickedCircle) ||\n        !nearCirclesSet.has(getCircleId(animatedCircle))\n      )\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    circlesEls.attr(\"class\", (circle) => {\n      if (nearCirclesSet.has(getCircleId(circle))) {\n        return `${styles.moved} ${circleClass}`\n      }\n\n      return getCircleId(circle) === getCircleId(clickedCircle)\n        ? `${styles.active} ${circleClass}`\n        : circleClass\n    })\n\n    const getTranslateFn = (coordIdx: number) => (\n      ...[, geometryIndex]: [unknown, number]\n    ) => {\n      if (getShouldSet0(geometryIndex)) {\n        return 0\n      }\n\n      const { [geometryIndex]: animatedCircle } = circlesGeo\n      const { [getCircleId(animatedCircle)]: vectorNormalized } = vectorsMap\n\n      return vectorNormalized[coordIdx] * clickedCircleDistortion\n    }\n\n    anime({\n      targets: `.${circleClassUnique}`,\n      translateX: getTranslateFn(0),\n      translateY: getTranslateFn(1),\n    })\n\n    const { top } = rootEl.getBoundingClientRect()\n\n    anime({\n      targets: `.${styles.modal}`,\n      translateY: modalHiddenTop + 50 + top + window.scrollY,\n    })\n  }\n\n  const circlesClickHandlerFn = (\n    ...[clickEvent, clickedCircle]: [MouseEvent, CircleGeo]\n  ) => {\n    clickEvent.stopPropagation()\n    circleClickHandler({\n      clickedCircle,\n    })\n  }\n\n  const svg = select(`#${rootElId}`)\n    .append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height - svgCutBottom)\n    .style(\"cursor\", \"pointer\")\n    .on(\"click\", removeSelection)\n    .style(\"transform-origin\", \"top left\")\n    .call(\n      zoom<SVGSVGElement, unknown>()\n        .extent([\n          [0, 0],\n          [width, height],\n        ])\n        .on(\"end\", zoomed)\n    )\n\n  const svgMap = svg.append(\"g\")\n\n  svg\n    .append(\"text\")\n    .text(chartConfig.chartTitle)\n    .attr(\"text-anchor\", \"middle\")\n    .style(\"font-size\", \"20px\")\n    .attr(\"transform\", `translate(${width / 2},40)`)\n    .style(\"font-weight\", \"bold\")\n\n  const addInfo = () => {\n    const dialogId = `dialog-${uuidv1().slice(0, 6)}`\n\n    const group = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width - 50},50)`)\n      .attr(\"class\", styles.infoTrigger)\n\n    svg.append(\"g\").html(`\n<filter id=\"pulse\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n  <feTurbulence result=\"cloud\" baseFrequency=\".01\" seed=\"1\"  type=\"fractalNoise\" numOctaves=\"2\">\n  <animate attributeName=\"baseFrequency\" calcMode=\"paced\" begin=\"0s\" dur=\"12s\" values=\".01;.13;.01;\" repeatCount=\"indefinite\"/>\n  </feTurbulence>\n  <feComposite operator=\"in\" in=\"cloud\" in2=\"SourceGraphic\"/>\n</filter>\n    `)\n\n    const dialog = select(document.body)\n      .append(\"div\")\n      .attr(\"id\", dialogId)\n      .html(chartConfig.chartHelpHTML)\n\n    $(`#${dialogId}`).dialog({\n      autoOpen: false,\n      modal: true,\n      resizable: false,\n    })\n\n    group.append(\"circle\").attr(\"r\", \"20\").attr(\"filter\", \"url(#pulse)\")\n\n    group.append(\"text\").text(\"?\")\n\n    group.on(\"click\", () => {\n      $(`#${dialogId}`).dialog(\"open\")\n    })\n\n    return {\n      remove: () => {\n        dialog.remove()\n      },\n    }\n  }\n\n  addInfo()\n\n  svgMap\n    .append(\"g\")\n    .attr(\"class\", mapLayoutItemClass)\n    .selectAll(\"path\")\n    .data(mapLayout.features)\n    .enter()\n    .append(\"path\")\n    .attr(\"d\", geometryPath)\n    .attr(\"fill\", \"#ccc\")\n    .style(\"stroke\", \"white\")\n    .style(\"stroke-width\", 1.5)\n    .style(\"opacity\", 0.8)\n    .style(\"stroke\", \"white\")\n    .style(\"stroke-width\", 0.3)\n    .on(\"click\", removeSelection)\n    .attr(\"title\", (mapLayoutItem) => mapLayoutItem.properties.name)\n\n  const circlesWrapper = svgMap.append(\"g\").on(\"click\", removeSelection)\n\n  const circlesEls = circlesWrapper\n    .selectAll(\"path\")\n    .data(circlesGeo)\n    .enter()\n    .append(\"path\")\n    .attr(\"d\", geometryPath)\n    .attr(\"class\", circleClass)\n    .style(\"stroke\", \"white\")\n    .style(\"cursor\", \"pointer\")\n    .style(\"stroke-width\", 1.5)\n    .style(\"opacity\", 0.8)\n    .attr(\"title\", (circleGeo) => chartConfig.getCircleTitle(circleGeo))\n    .on(\"click\", circlesClickHandlerFn)\n\n  $(`.${circleClassUnique}`).tooltip({\n    track: true,\n  })\n\n  $(`.${mapLayoutItemClass}`).tooltip({\n    tooltipClass: styles.mapLayoutItemTooltip,\n    track: true,\n  })\n}\n","import { json, timeFormat } from \"d3\"\nimport qs from \"query-string\"\n\nimport { Geolocation, MapLayout } from \"./circles-map-chart\"\n\nclass CountriesLayout {\n  private readonly countries: MapLayout\n\n  private constructor(countries: MapLayout) {\n    this.countries = countries\n  }\n\n  public static async createAndFetch() {\n    const countries = await json(\n      `${ROOT_PATH}data/d3js/meteorites-map/world_countries.json`\n    )\n\n    return new CountriesLayout(countries as MapLayout)\n  }\n\n  public getCountries() {\n    return this.countries\n  }\n}\n\ntype Meteorite = {\n  fall: string\n  geolocation: Geolocation\n  id: string\n  mass: string\n  name: string\n  nametype: string\n  recclass: string\n  reclat: string\n  reclong: string\n  year: string\n}\n\nclass MeteoritesData {\n  private readonly meteorites: Meteorite[]\n\n  private constructor(meteorites: Meteorite[]) {\n    this.meteorites = meteorites\n  }\n\n  public static async createAndFetch() {\n    const meteorites = (await json(\n      `${ROOT_PATH}data/d3js/meteorites-map/meteorites.json`\n    )) as unknown\n\n    return new MeteoritesData(meteorites as Meteorite[])\n  }\n\n  public static getMeteoriteId(meteorite: Meteorite) {\n    return meteorite.id\n  }\n\n  public static getMeteoriteSummaryHTML(meteorite: Meteorite) {\n    const year = timeFormat(\"%Y\")(new Date(meteorite.year))\n    const mass = new Intl.NumberFormat().format(+meteorite.mass)\n\n    return `\n<h1>${meteorite.name}</h1>\n<p>Year: ${year}, Class: <a href=\"https://www.google.com/search?${qs.stringify({\n      q: `${meteorite.recclass} Meteorite Class`,\n    })}\" target=\"_blank\">${meteorite.recclass}</a></p>\n<p>${mass ? `Mass: ${mass}g, ` : \"\"}Name: ${meteorite.nametype}</p>\n<p><a href=\"https://www.google.com/search?${qs.stringify({\n      q: `${meteorite.name} Meteorite ${year}`,\n    })}\" target=\"_blank\">Click here to search</a></p>\n`.trim()\n  }\n\n  public static getMeteoriteName(meteorite: Meteorite) {\n    return meteorite.name\n  }\n\n  public getMeteorites() {\n    return this.meteorites.slice()\n  }\n}\n\nexport { MeteoritesData, CountriesLayout }\n","import { ChartConfig } from \"./circles-map-chart\"\nimport { CountriesLayout, MeteoritesData } from \"./meteorites-data-model\"\n\nconst chartHelpHTML = `\n<p>The green circles refer to meteorites which were moved in the map to allow seeing the selected meteorite, which is in red.</p>\n<p>You can find the <a href=\"http://www.meteoritemarket.com/type.htm\">meteorites classification here</a></p>\n`.trim()\n\ntype MeteoriteItem = ReturnType<MeteoritesData[\"getMeteorites\"]>[0]\ntype Config = ChartConfig<MeteoriteItem>\n\nexport const createChartConfig = ({\n  countriesLayout,\n  meteoritesData,\n}: {\n  countriesLayout: CountriesLayout\n  meteoritesData: MeteoritesData\n}): Config => {\n  const meteorites = meteoritesData.getMeteorites()\n\n  const getCircleId: Config[\"getCircleId\"] = (meteoriteData) =>\n    MeteoritesData.getMeteoriteId(meteoriteData)\n\n  const getModalHTML: Config[\"getModalHTML\"] = (meteoriteData) =>\n    MeteoritesData.getMeteoriteSummaryHTML(meteoriteData)\n\n  const getCircleTitle: Config[\"getCircleTitle\"] = (meteoriteData) =>\n    meteoriteData.name\n\n  return {\n    chartHelpHTML,\n    chartTitle: \"Meteorite landings in Earth\",\n    circlesData: meteorites,\n    getCircleId,\n    getCircleTitle,\n    getModalHTML,\n    mapLayout: countriesLayout.getCountries(),\n    rootElId: \"chart\",\n  }\n}\n","import { renderChart } from \"./circles-map-chart\"\nimport { CountriesLayout, MeteoritesData } from \"./meteorites-data-model\"\nimport { createChartConfig } from \"./meteorites-map-chart-data\"\n\nconst main = async () => {\n  const [meteoritesData, countriesLayout] = await Promise.all([\n    MeteoritesData.createAndFetch(),\n    CountriesLayout.createAndFetch(),\n  ])\n  const chartConfig = createChartConfig({ countriesLayout, meteoritesData })\n\n  renderChart(chartConfig)\n}\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/meteorites-map/meteorites-map\"\n\nconst Area = ({ pageContext }: DemoPageProps) => (\n  <Demo\n    links={[\"/vendors/jquery-ui/themes/base/jquery-ui.min.css\"]}\n    main={main}\n    pageContext={pageContext}\n    scripts={[\"/vendors/jquery-ui/jquery-ui.min.js\"]}\n  >\n    <div id=\"chart\" />\n  </Demo>\n)\n\nexport default Area\n"],"sourceRoot":""}