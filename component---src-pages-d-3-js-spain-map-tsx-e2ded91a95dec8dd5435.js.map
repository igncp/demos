{"version":3,"file":"component---src-pages-d-3-js-spain-map-tsx-e2ded91a95dec8dd5435.js","mappings":"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","sources":["webpack://demos/./node_modules/topojson-client/src/identity.js","webpack://demos/./node_modules/topojson-client/src/feature.js","webpack://demos/./node_modules/topojson-client/src/transform.js","webpack://demos/./node_modules/topojson-client/src/reverse.js","webpack://demos/./node_modules/uuid/dist/esm-browser/rng.js","webpack://demos/./node_modules/uuid/dist/esm-browser/regex.js","webpack://demos/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://demos/./node_modules/uuid/dist/esm-browser/validate.js","webpack://demos/./node_modules/uuid/dist/esm-browser/v1.js","webpack://demos/./src/demos/spain-map/n-map-chart.ts","webpack://demos/./src/demos/spain-map/ui-constants.ts","webpack://demos/./src/demos/spain-map/spain-map-chart-data.ts","webpack://demos/./src/demos/spain-map/spain-map.ts","webpack://demos/./src/pages/d3js/spain-map.tsx"],"sourcesContent":["export default function (x) {\n  return x;\n}","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\nexport default function (topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\" ? {\n    type: \"FeatureCollection\",\n    features: o.geometries.map(function (o) {\n      return feature(topology, o);\n    })\n  } : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {\n    type: \"Feature\",\n    properties: properties,\n    geometry: geometry\n  } : bbox == null ? {\n    type: \"Feature\",\n    id: id,\n    properties: properties,\n    geometry: geometry\n  } : {\n    type: \"Feature\",\n    id: id,\n    bbox: bbox,\n    properties: properties,\n    geometry: geometry\n  };\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n\n    for (var i = 0, n = arcs.length; i < n; ++i) {\n      arc(arcs[i], points);\n    }\n\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n\n    while (points.length < 4) {\n      points.push(points[0]);\n    } // This may happen if an arc has only two points.\n\n\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type,\n        coordinates;\n\n    switch (type) {\n      case \"GeometryCollection\":\n        return {\n          type: type,\n          geometries: o.geometries.map(geometry)\n        };\n\n      case \"Point\":\n        coordinates = point(o.coordinates);\n        break;\n\n      case \"MultiPoint\":\n        coordinates = o.coordinates.map(point);\n        break;\n\n      case \"LineString\":\n        coordinates = line(o.arcs);\n        break;\n\n      case \"MultiLineString\":\n        coordinates = o.arcs.map(line);\n        break;\n\n      case \"Polygon\":\n        coordinates = polygon(o.arcs);\n        break;\n\n      case \"MultiPolygon\":\n        coordinates = o.arcs.map(polygon);\n        break;\n\n      default:\n        return null;\n    }\n\n    return {\n      type: type,\n      coordinates: coordinates\n    };\n  }\n\n  return geometry(o);\n}","import identity from \"./identity.js\";\nexport default function (transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function (input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2,\n        n = input.length,\n        output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n\n    while (j < n) {\n      output[j] = input[j], ++j;\n    }\n\n    return output;\n  };\n}","export default function (array, n) {\n  var t,\n      j = array.length,\n      i = j - n;\n\n  while (i < --j) {\n    t = array[i], array[i++] = array[j], array[j] = t;\n  }\n}","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import {\n  BaseType,\n  D3DragEvent,\n  GeoPath,\n  GeoPermissibleObjects,\n  GeoProjection,\n  Selection,\n  drag as dragD3,\n  geoMercator,\n  geoPath,\n  range,\n  scaleLinear,\n  select,\n} from \"d3\"\nimport { GeoJsonProperties } from \"geojson\"\nimport $ from \"jquery\"\nimport \"jquery-ui/themes/base/all.css\"\nimport { feature } from \"topojson-client\"\nimport { Objects, Topology } from \"topojson-specification\"\nimport { v1 as uuidv1 } from \"uuid\"\n\nif (typeof window !== \"undefined\") {\n  require(\"jquery-ui/ui/widgets/tooltip\")\n}\n\nconst colorsScheme = [\"#323247\", \"#7c7cc9\", \"#72b66c\", \"#429742\"]\nconst height = 500\nconst margin = {\n  bottom: 20,\n  top: 50,\n}\nconst strokeWidth = 0.4\n\ntype Bounds = [[number, number], [number, number]]\n\nconst calculateBounds = ({\n  featuresData,\n  projectionPath,\n}: {\n  featuresData: any[] // eslint-disable-line @typescript-eslint/no-explicit-any\n  projectionPath: GeoPath\n}) =>\n  featuresData.reduce<Bounds>(\n    (...[acc, featureData]) => {\n      const dataBounds = projectionPath.bounds(featureData)\n\n      acc[0][0] = Math.min(acc[0][0], dataBounds[0][0])\n      acc[0][1] = Math.min(acc[0][1], dataBounds[0][1])\n      acc[1][0] = Math.max(acc[1][0], dataBounds[1][0])\n      acc[1][1] = Math.max(acc[1][1], dataBounds[1][1])\n\n      return acc\n    },\n    [\n      [Infinity, Infinity],\n      [-Infinity, -Infinity],\n    ]\n  )\n\ntype AreasData = Topology<Objects<GeoJsonProperties>>\n\ntype ChartConfig<Properties> = Readonly<{\n  areasData: AreasData\n  getTitleText: (properties: Properties) => string\n  projectionsCenters: Array<[number, number]>\n  rootElId: string\n  widths: number[]\n}>\n\ntype DataShape<Properties> = GeoPermissibleObjects & {\n  areaIndex: number\n  properties: Properties\n}\n\ntype ChartElements = Readonly<{\n  divsSel: Selection<HTMLDivElement, unknown, HTMLElement, unknown>\n  innerGroupsSel: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  rootSel: Selection<HTMLDivElement, unknown, HTMLElement, unknown>\n  svgsDragsSel: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  svgsSel: Selection<SVGSVGElement, unknown, HTMLElement, unknown>\n}>\n\nconst addDropShadowFilter = <Parent extends BaseType | null>({\n  deviation,\n  id,\n  slope,\n  svg,\n}: {\n  deviation: number\n  id: number\n  slope: number\n  svg: Selection<SVGGElement, unknown, Parent, unknown>\n}) => {\n  const defs = svg.append(\"defs\")\n  const filter = defs.append(\"filter\").attr(\"id\", `drop-shadow-${id}`)\n\n  filter\n    .append(\"feGaussianBlur\")\n    .attr(\"in\", \"SourceAlpha\")\n    .attr(\"stdDeviation\", deviation)\n\n  filter.append(\"feOffset\").attr(\"dx\", 1).attr(\"dy\", 1)\n  filter\n    .append(\"feComponentTransfer\")\n    .append(\"feFuncA\")\n    .attr(\"slope\", slope)\n    .attr(\"type\", \"linear\")\n\n  const feMerge = filter.append(\"feMerge\")\n\n  feMerge.append(\"feMergeNode\")\n\n  feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\")\n}\n\nclass NMapChart<Properties> {\n  private readonly config: ChartConfig<Properties>\n  private readonly elements: ChartElements\n  private readonly regionClass: string\n  private readonly state: {\n    drags: Array<{ x: number; y: number }>\n    // Shared marks between all subcharts, could also have different marks per\n    // subchart although UX seems better like this\n    marks: Record<string, boolean>\n  } = {\n    drags: [],\n    marks: {},\n  }\n\n  private constructor(chartConfig: ChartConfig<Properties>) {\n    this.config = chartConfig\n\n    const { areasData, rootElId } = chartConfig\n\n    this.regionClass = `region-${uuidv1().slice(0, 6)}`\n\n    const {\n      objects: { data1: dataRoot },\n    } = areasData\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const { features: dataGeo } = feature(areasData, dataRoot) as any\n\n    const dataGeoParsed = dataGeo.map(\n      (...[areaData, areaIndex]: [DataShape<Properties>, number]) => ({\n        ...areaData,\n        areaIndex,\n      })\n    )\n\n    const rootSel = select<HTMLDivElement, unknown>(`#${rootElId}`)\n\n    const divsSel = rootSel\n      .selectAll(\"div\")\n      .data<unknown>(chartConfig.projectionsCenters)\n      .enter()\n      .append(\"div\")\n      .style(\"border\", \"1px dashed #777\")\n      .style(\"margin\", \"5px\")\n    const svgsSel = divsSel.append(\"svg\")\n    const svgsDragsSel = svgsSel.append(\"g\")\n    const innerGroupsSel = svgsDragsSel.append(\"g\")\n\n    const colorFn = this.areaFillColor.bind(this)\n    const toggleMark = this.toggleMark.bind(this)\n    const refreshAllColors = this.refreshAllColors.bind(this)\n\n    const generateAreas = <Parent extends BaseType | null>({\n      filterId,\n      path,\n      svgComp,\n    }: {\n      filterId: number\n      path: GeoPath<SVGPathElement>\n      svgComp: Selection<SVGGElement, unknown, Parent, unknown>\n    }) => {\n      const svgUpdateSel = svgComp\n        .selectAll(\".area\")\n        .data<DataShape<Properties>>(dataGeoParsed)\n\n      svgUpdateSel.exit().remove()\n      svgUpdateSel\n        .enter()\n        .append(\"path\")\n        .style(\"stroke\", \"#fff\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"filter\", `url(#drop-shadow-${filterId})`)\n        .attr(\"title\", (areaData) =>\n          this.config.getTitleText(areaData.properties)\n        )\n        .attr(\"class\", `${this.regionClass} area`)\n        .call(() => {\n          $(`.${this.regionClass}`).tooltip({\n            track: true,\n          })\n        })\n        .on(\"click\", function handleClick(...[, area]) {\n          toggleMark(area)\n          select<SVGPathElement, DataShape<Properties>>(this).style(\n            \"fill\",\n            colorFn\n          )\n\n          requestAnimationFrame(() => {\n            // Reflect in both charts\n            refreshAllColors()\n          })\n        })\n        .on(\"mouseover\", function onMouseOver() {\n          select(this).style(\"fill\", \"#ffb61a\").style(\"stroke-width\", \"1px\")\n        })\n        .on(\"mouseleave\", function onMouseLeave() {\n          select<SVGPathElement, DataShape<Properties>>(this)\n            .style(\"fill\", colorFn)\n            .style(\"stroke-width\", strokeWidth)\n        })\n\n      svgComp\n        .selectAll<SVGPathElement, DataShape<Properties>>(\".area\")\n        .attr(\"d\", path)\n        .style(\"fill\", colorFn)\n        .style(\"stroke-width\", strokeWidth)\n    }\n\n    const generateProjection = (...[center]: [[number, number], number]) => {\n      // Keep the same scale for all dimensions to improve render performance\n      const scale = 2400\n\n      return geoMercator().center(center).scale(scale)\n    }\n\n    const generatePath = (projection: GeoProjection) =>\n      geoPath().projection(projection)\n\n    const areasPaths = this.config.projectionsCenters\n      .map(generateProjection)\n      .map(generatePath)\n\n    const boundsList = areasPaths.map((projectionPath) =>\n      calculateBounds({\n        featuresData: dataGeoParsed,\n        projectionPath,\n      })\n    )\n\n    innerGroupsSel\n      .data(boundsList)\n      .attr(\n        \"transform\",\n        (bounds) =>\n          `translate(${(bounds[1][0] - bounds[0][0]) / 2},${\n            (bounds[1][1] - bounds[0][1]) / 2\n          })`\n      )\n\n    innerGroupsSel.each(function setupFilter(...[, groupIndex]) {\n      const svgItem = select(this)\n\n      addDropShadowFilter({\n        deviation: 2,\n        id: groupIndex + 1,\n        slope: 0.3,\n        svg: svgItem,\n      })\n\n      generateAreas({\n        filterId: groupIndex + 1,\n        path: areasPaths[groupIndex],\n        svgComp: svgItem,\n      })\n    })\n\n    this.elements = {\n      divsSel,\n      innerGroupsSel,\n      rootSel,\n      svgsDragsSel,\n      svgsSel,\n    }\n\n    this.render()\n    this.setupDrag()\n\n    window.addEventListener(\"resize\", this.handleResize)\n  }\n\n  public static renderChart<Properties>(chartConfig: ChartConfig<Properties>) {\n    return new NMapChart(chartConfig)\n  }\n\n  public teardown() {\n    window.removeEventListener(\"resize\", this.handleResize)\n  }\n\n  public clearMarked() {\n    this.state.marks = {}\n    this.refreshAllColors()\n  }\n\n  private areaFillColor(area: DataShape<Properties>): string {\n    const {\n      config: { areasData },\n    } = this\n    const {\n      objects: { data1: dataRoot },\n    } = areasData\n    const colorScale = scaleLinear()\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      .domain([0, (dataRoot as any).geometries.length])\n      .range([0, 1])\n\n    const colorScaleConversion = scaleLinear<string>()\n      .domain(range(0, 1, 1.0 / colorsScheme.length))\n      .range(colorsScheme)\n\n    if (this.state.marks[area.areaIndex]) {\n      return \"#f00\"\n    }\n\n    return colorScaleConversion(colorScale(area.areaIndex))\n  }\n\n  private refreshAllColors() {\n    const {\n      elements: { innerGroupsSel },\n    } = this\n\n    innerGroupsSel\n      .selectAll<SVGPathElement, DataShape<Properties>>(\".area\")\n      .style(\"fill\", (area) => this.areaFillColor(area))\n  }\n\n  private render() {\n    const {\n      config: { rootElId, widths },\n      elements: { divsSel, rootSel, svgsSel },\n    } = this\n\n    const widthsTotal = widths.reduce((...[acc, curr]) => acc + curr, 0)\n\n    const { width: chartWidth } = (\n      document.getElementById(rootElId) as HTMLElement\n    ).getBoundingClientRect()\n\n    const isSmallDevice = chartWidth < 600\n\n    const getSubChartWidth = (width: number) => {\n      if (isSmallDevice) {\n        return chartWidth\n      }\n\n      return (width / widthsTotal) * chartWidth\n    }\n\n    rootSel\n      .style(\"width\", `100%`)\n      .style(\"justify-content\", \"space-evenly\")\n      .style(\"display\", isSmallDevice ? \"flex\" : \"inline-flex\")\n      .style(\"flex-direction\", isSmallDevice ? \"column\" : \"\")\n\n    divsSel\n      .data(widths)\n      .style(\"display\", \"inline-block\")\n      .style(\"height\", `${height + margin.top + margin.bottom}px`)\n      .style(\"width\", (width) => `${getSubChartWidth(width)}px`)\n\n    svgsSel\n      .data(widths)\n      .attr(\"width\", (width) => getSubChartWidth(width))\n      .attr(\"height\", height + margin.top + margin.bottom)\n  }\n\n  private toggleMark(area: DataShape<Properties>) {\n    this.state.marks[area.areaIndex] = !this.state.marks[area.areaIndex]\n  }\n\n  private updateDrags() {\n    const {\n      elements: { svgsDragsSel },\n    } = this\n\n    const getTranslate = (chartIndex: number) =>\n      `translate(${this.state.drags[chartIndex].x},${this.state.drags[chartIndex].y})`\n\n    svgsDragsSel.each(function updateDrag(...[, chartIndex]) {\n      select(this).attr(\"transform\", getTranslate(chartIndex))\n    })\n  }\n\n  private setupDrag() {\n    const {\n      elements: { svgsSel },\n    } = this\n\n    const getDragHandler =\n      (chartIndex: number) =>\n      (dragEvent: D3DragEvent<SVGSVGElement, unknown, unknown>) => {\n        this.state.drags[chartIndex].x += dragEvent.dx\n        this.state.drags[chartIndex].y += dragEvent.dy\n\n        this.updateDrags()\n      }\n\n    const addDrag = (chartIndex: number) => {\n      this.state.drags[chartIndex] = {\n        x: 0,\n        y: 0,\n      }\n    }\n\n    svgsSel.each(function handleSVG(...[, chartIndex]) {\n      addDrag(chartIndex)\n\n      const handler = getDragHandler(chartIndex)\n      const dragBehavior = dragD3<SVGSVGElement, unknown>().on(\"drag\", handler)\n\n      select(this)\n        .style(\"cursor\", \"move\")\n        .call(dragBehavior)\n        .on(\"drag\", handler)\n    })\n  }\n\n  private readonly handleResize = () => {\n    this.render()\n  }\n}\n\nexport { AreasData, ChartConfig, NMapChart }\n","const CONTAINER_ID = \"chart\"\n\nexport { CONTAINER_ID }\n","import { json } from \"d3\"\n\nimport { AreasData, ChartConfig } from \"./n-map-chart\"\nimport { CONTAINER_ID } from \"./ui-constants\"\n\nconst UPDATE_BUTTON_ID = \"update-button\"\n\ntype Properties = {\n  ENGTYPE_3: string // e.g. Comarca\n  HASC_3: string\n  ID_0: number\n  ID_1: number\n  ID_2: number\n  ID_3: number\n  ISO: string // e.g. ESP\n  NAME_0: string // e.g. Spain\n  NAME_1: string // e.g. Castilla y Leon\n  NAME_2: string // e.g. Leon\n  NAME_3: string // Sometimes not defined, with 'n.a.'\n  NL_NAME_3: string\n  REMARKS_3: string\n  Shape_Area: number\n  Shape_Leng: number\n  TYPE_3: string // e.g. Comarca\n  VALIDFR_3: string\n  VALIDTO_3: string\n}\n\ntype Config = ChartConfig<Properties>\n\nconst getTitleText: Config[\"getTitleText\"] = (areaProperties) =>\n  [\n    (areaProperties.NAME_3 || \"\").includes(\"n.a.\") ? \"\" : areaProperties.NAME_3,\n    areaProperties.NAME_2,\n    areaProperties.NAME_1,\n  ]\n    .filter((v) => !!v)\n    .join(\", \")\n\nconst widths: Config[\"widths\"] = (() => {\n  const widthPeninsula = 0.8\n  const widthCanarias = 0.3\n\n  return [widthPeninsula, widthCanarias]\n})()\n\nconst projectionsCenters: Config[\"projectionsCenters\"] = [\n  [12, 31.5],\n  [4, 20],\n]\n\nconst createChartConfig = (areasData: AreasData): Config => ({\n  areasData,\n  getTitleText,\n  projectionsCenters,\n  rootElId: CONTAINER_ID,\n  widths,\n})\n\nconst fetchAreasData = () =>\n  json(\n    `${ROOT_PATH}data/d3js/spain-map/data.json`\n  ) as unknown as Promise<AreasData>\n\nexport { Properties, UPDATE_BUTTON_ID, createChartConfig, fetchAreasData }\n","import { NMapChart } from \"./n-map-chart\"\nimport {\n  Properties,\n  UPDATE_BUTTON_ID,\n  createChartConfig,\n  fetchAreasData,\n} from \"./spain-map-chart-data\"\nimport { CONTAINER_ID } from \"./ui-constants\"\n\nconst main = async () => {\n  const areasData = await fetchAreasData()\n  const chartConfig = createChartConfig(areasData)\n\n  const mapChart = NMapChart.renderChart<Properties>(chartConfig)\n\n  document.getElementById(UPDATE_BUTTON_ID)?.addEventListener(\"click\", () => {\n    mapChart.clearMarked()\n  })\n}\n\nexport { CONTAINER_ID, UPDATE_BUTTON_ID }\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main, {\n  CONTAINER_ID,\n  UPDATE_BUTTON_ID,\n} from \"@/demos/spain-map/spain-map\"\n\nconst SpainMap = ({ pageContext }: DemoPageProps) => (\n  <Demo main={main} pageContext={pageContext}>\n    <form style={{ marginBottom: 20 }}>\n      <button className=\"btn btn-info\" id={UPDATE_BUTTON_ID} type=\"button\">\n        Clear Clicked Regions\n      </button>\n    </form>\n    <div id={CONTAINER_ID} />\n  </Demo>\n)\n\nexport default SpainMap\n"],"names":["x","topology","o","objects","type","features","geometries","map","id","bbox","properties","geometry","transformPoint","transform","identity","x0","y0","kx","scale","ky","dx","translate","dy","input","i","j","n","length","output","Array","arcs","arc","points","pop","a","k","push","array","t","reverse","point","p","line","ring","polygon","coordinates","object","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","byteToHex","toString","substr","_nodeId","_clockseq","arr","offset","arguments","undefined","toLowerCase","TypeError","_lastMSecs","_lastNSecs","options","buf","b","node","clockseq","seedBytes","random","msecs","Date","now","nsecs","dt","tl","tmh","window","require","colorsScheme","margin","addDropShadowFilter","deviation","slope","filter","svg","append","attr","feMerge","NMapChart","chartConfig","state","drags","marks","handleResize","render","this","config","areasData","rootElId","regionClass","uuidv1","slice","dataRoot","data1","dataGeoParsed","feature","areaData","areaIndex","rootSel","select","divsSel","selectAll","data","projectionsCenters","enter","style","svgsSel","svgsDragsSel","innerGroupsSel","colorFn","areaFillColor","toggleMark","refreshAllColors","generateAreas","filterId","path","svgComp","svgUpdateSel","exit","remove","getTitleText","call","$","tooltip","track","on","area","requestAnimationFrame","areasPaths","center","geoMercator","projection","geoPath","boundsList","projectionPath","featuresData","reduce","acc","featureData","dataBounds","bounds","Math","min","max","Infinity","calculateBounds","each","groupIndex","svgItem","elements","setupDrag","addEventListener","renderChart","teardown","removeEventListener","clearMarked","colorScale","scaleLinear","domain","range","colorScaleConversion","widths","widthsTotal","curr","chartWidth","document","getElementById","getBoundingClientRect","width","isSmallDevice","getSubChartWidth","updateDrags","getTranslate","chartIndex","y","getDragHandler","dragEvent","addDrag","handler","dragBehavior","dragD3","CONTAINER_ID","UPDATE_BUTTON_ID","areaProperties","NAME_3","includes","NAME_2","NAME_1","v","join","createChartConfig","main","json","ROOT_PATH","mapChart","pageContext","marginBottom","className"],"sourceRoot":""}