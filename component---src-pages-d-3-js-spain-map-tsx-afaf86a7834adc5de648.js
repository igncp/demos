(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[162],{2242:function(e,t,r){"use strict";function n(e){return e}function a(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return o(e,t)}))}:o(e,t)}function o(e,t){var r=t.id,a=t.bbox,o=null==t.properties?{}:t.properties,i=function(e,t){var r=function(e){if(null==e)return n;var t,r,a=e.scale[0],o=e.scale[1],i=e.translate[0],s=e.translate[1];return function(e,n){n||(t=r=0);var u=2,l=e.length,c=new Array(l);for(c[0]=(t+=e[0])*a+i,c[1]=(r+=e[1])*o+s;u<l;)c[u]=e[u],++u;return c}}(e.transform),a=e.arcs;function o(e,t){t.length&&t.pop();for(var n=a[e<0?~e:e],o=0,i=n.length;o<i;++o)t.push(r(n[o],o));e<0&&function(e,t){for(var r,n=e.length,a=n-t;a<--n;)r=e[a],e[a++]=e[n],e[n]=r}(t,i)}function i(e){return r(e)}function s(e){for(var t=[],r=0,n=e.length;r<n;++r)o(e[r],t);return t.length<2&&t.push(t[0]),t}function u(e){for(var t=s(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(u)}function c(e){var t,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(c)};case"Point":t=i(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(i);break;case"LineString":t=s(e.arcs);break;case"MultiLineString":t=e.arcs.map(s);break;case"Polygon":t=l(e.arcs);break;case"MultiPolygon":t=e.arcs.map(l);break;default:return null}return{type:r,coordinates:t}}return c(t)}(e,t);return null==r&&null==a?{type:"Feature",properties:o,geometry:i}:null==a?{type:"Feature",id:r,properties:o,geometry:i}:{type:"Feature",id:r,bbox:a,properties:o,geometry:i}}r.d(t,{Z:function(){return a}})},9646:function(e,t,r){"use strict";var n;r.d(t,{Z:function(){return v}});var a=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"==typeof e&&i.test(e)},u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));var c,f,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r},p=0,h=0;var v=function(e,t,r){var n=t&&r||0,a=t||new Array(16),i=(e=e||{}).node||c,s=void 0!==e.clockseq?e.clockseq:f;if(null==i||null==s){var u=e.random||(e.rng||o)();null==i&&(i=c=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=f=16383&(u[6]<<8|u[7]))}var l=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:h+1,g=l-p+(v-h)/1e4;if(g<0&&void 0===e.clockseq&&(s=s+1&16383),(g<0||l>p)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=l,h=v,f=s;var m=(1e4*(268435455&(l+=122192928e5))+v)%4294967296;a[n++]=m>>>24&255,a[n++]=m>>>16&255,a[n++]=m>>>8&255,a[n++]=255&m;var y=l/4294967296*1e4&268435455;a[n++]=y>>>8&255,a[n++]=255&y,a[n++]=y>>>24&15|16,a[n++]=y>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(var w=0;w<6;++w)a[n+w]=i[w];return t||d(a)}},6126:function(e,t,r){"use strict";var n;r.d(t,{H:function(){return a},d:function(){return n}}),function(e){e.STORYBOOK="storybook",e.TESTING="testing"}(n||(n={}));var a={SCRIPT:"/vendors/jquery-ui/jquery-ui.min.js",STYLE:"/vendors/jquery-ui/themes/base/jquery-ui.min.css"}},1141:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(7294),a=r(6126),o=r(4275),i=r(8634),s=r(2656),u=r.n(s),l=r(2094),c=r(2242),f=r(9646),d=["#323247","#7c7cc9","#72b66c","#429742"],p=20,h=50,v=function(e){var t=e.deviation,r=e.id,n=e.slope,a=e.svg.append("defs").append("filter").attr("id","drop-shadow-"+r);a.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",t),a.append("feOffset").attr("dx",1).attr("dy",1),a.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear");var o=a.append("feMerge");o.append("feMergeNode"),o.append("feMergeNode").attr("in","SourceGraphic")},g=function(){function e(e){var t=this;this.state={drags:[],marks:{}},this.handleResize=function(){t.render()},this.config=e;var r=e.areasData,n=e.rootElId;this.regionClass="region-"+(0,f.Z)().slice(0,6);var a=r.objects.data1,o=(0,c.Z)(r,a).features.map((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1];return Object.assign({},n,{areaIndex:a})})),i=(0,l.Ys)("#"+n),s=i.selectAll("div").data(e.projectionsCenters).enter().append("div").style("border","1px dashed #777").style("margin","5px"),u=s.append("svg"),d=u.append("g"),p=d.append("g"),h=this.areaFillColor.bind(this),g=this.toggleMark.bind(this),m=this.refreshAllColors.bind(this),y=function(e){var r=e.filterId,n=e.path,a=e.svgComp,i=a.selectAll(".area").data(o);i.exit().remove(),i.enter().append("path").style("stroke","#fff").style("cursor","pointer").style("filter","url(#drop-shadow-"+r+")").attr("title",(function(e){return t.config.getTitleText(e.properties)})).attr("class",t.regionClass+" area").call((function(){$("."+t.regionClass).tooltip({track:!0})})).on("click",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1];g(n),(0,l.Ys)(this).style("fill",h),requestAnimationFrame((function(){m()}))})).on("mouseover",(function(){(0,l.Ys)(this).style("fill","#ffb61a").style("stroke-width","1px")})).on("mouseleave",(function(){(0,l.Ys)(this).style("fill",h).style("stroke-width",.4)})),a.selectAll(".area").attr("d",n).style("fill",h).style("stroke-width",.4)},w=this.config.projectionsCenters.map((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=2400;return(0,l.mw4)().center(n).scale(a)})).map((function(e){return(0,l.l49)().projection(e)})),b=w.map((function(e){return function(e){var t=e.featuresData,r=e.projectionPath;return t.reduce((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1],i=r.bounds(o);return a[0][0]=Math.min(a[0][0],i[0][0]),a[0][1]=Math.min(a[0][1],i[0][1]),a[1][0]=Math.max(a[1][0],i[1][0]),a[1][1]=Math.max(a[1][1],i[1][1]),a}),[[1/0,1/0],[-1/0,-1/0]])}({featuresData:o,projectionPath:e})}));p.data(b).attr("transform",(function(e){return"translate("+(e[1][0]-e[0][0])/2+","+(e[1][1]-e[0][1])/2+")"})),p.each((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1],a=(0,l.Ys)(this);v({deviation:2,id:n+1,slope:.3,svg:a}),y({filterId:n+1,path:w[n],svgComp:a})})),this.elements={divsSel:s,innerGroupsSel:p,rootSel:i,svgsDragsSel:d,svgsSel:u},this.render(),this.setupDrag(),window.addEventListener("resize",this.handleResize)}e.renderChart=function(t){return new e(t)};var t=e.prototype;return t.teardown=function(){window.removeEventListener("resize",this.handleResize)},t.clearMarked=function(){this.state.marks={},this.refreshAllColors()},t.areaFillColor=function(e){var t=this.config.areasData.objects.data1,r=(0,l.BYU)().domain([0,t.geometries.length]).range([0,1]),n=(0,l.BYU)().domain((0,l.w6H)(0,1,1/d.length)).range(d);return this.state.marks[e.areaIndex]?"#f00":n(r(e.areaIndex))},t.refreshAllColors=function(){var e=this;this.elements.innerGroupsSel.selectAll(".area").style("fill",(function(t){return e.areaFillColor(t)}))},t.render=function(){var e=this.config,t=e.rootElId,r=e.widths,n=this.elements,a=n.divsSel,o=n.rootSel,i=n.svgsSel,s=r.reduce((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1];return n+a}),0),u=document.getElementById(t).getBoundingClientRect().width,l=u<600,c=function(e){return l?u:e/s*u};o.style("width","100%").style("justify-content","space-evenly").style("display",l?"flex":"inline-flex").style("flex-direction",l?"column":""),a.data(r).style("display","inline-block").style("height",500+h+p+"px").style("width",(function(e){return c(e)+"px"})),i.data(r).attr("width",(function(e){return c(e)})).attr("height",500+h+p)},t.toggleMark=function(e){this.state.marks[e.areaIndex]=!this.state.marks[e.areaIndex]},t.updateDrags=function(){var e=this,t=this.elements.svgsDragsSel,r=function(t){return"translate("+e.state.drags[t].x+","+e.state.drags[t].y+")"};t.each((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[1];(0,l.Ys)(this).attr("transform",r(a))}))},t.setupDrag=function(){var e=this,t=this.elements.svgsSel,r=function(t){return function(r){e.state.drags[t].x+=r.dx,e.state.drags[t].y+=r.dy,e.updateDrags()}},n=function(t){e.state.drags[t]={x:0,y:0}};t.each((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=t[1];n(o);var i=r(o),s=(0,l.ohM)().on("drag",i);(0,l.Ys)(this).style("cursor","move").call(s).on("drag",i)}))},e}(),m="chart",y="update-button",w=function(e){return[(e.NAME_3||"").includes("n.a.")?"":e.NAME_3,e.NAME_2,e.NAME_1].filter((function(e){return!!e})).join(", ")},b=[.8,.3],C=[[12,31.5],[4,20]],k=function(e){return{areasData:e,getTitleText:w,projectionsCenters:C,rootElId:m,widths:b}},x=function(){var e=(0,i.Z)(u().mark((function e(){var t,r,n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.AVB)("/demos/data/d3js/spain-map/data.json");case 2:r=e.sent,n=k(r),a=g.renderChart(n),null===(t=document.getElementById(y))||void 0===t||t.addEventListener("click",(function(){a.clearMarked()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=x,S=function(e){var t=e.pageContext;return n.createElement(o.Z,{links:[a.H.STYLE],main:A,pageContext:t,scripts:[a.H.SCRIPT]},n.createElement("form",{style:{marginBottom:20}},n.createElement("button",{className:"btn btn-info",id:y,type:"button"},"Clear Clicked Regions")),n.createElement("div",{id:m}))}},2656:function(e,t,r){e.exports=r(3076)},8634:function(e,t,r){"use strict";function n(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(l){return void r(l)}s.done?t(u):Promise.resolve(u).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,u,"next",e)}function u(e){n(i,a,o,s,u,"throw",e)}s(void 0)}))}}r.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-spain-map-tsx-afaf86a7834adc5de648.js.map