"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[505],{9646:function(t,e,n){var r;n.d(e,{Z:function(){return v}});var a=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(t){return"string"==typeof t&&o.test(t)},d=[],u=0;u<256;++u)d.push((u+256).toString(16).substr(1));var l,c,f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n},h=0,p=0;var v=function(t,e,n){var r=e&&n||0,a=e||new Array(16),o=(t=t||{}).node||l,s=void 0!==t.clockseq?t.clockseq:c;if(null==o||null==s){var d=t.random||(t.rng||i)();null==o&&(o=l=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==s&&(s=c=16383&(d[6]<<8|d[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,g=u-h+(v-p)/1e4;if(g<0&&void 0===t.clockseq&&(s=s+1&16383),(g<0||u>h)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=u,p=v,c=s;var m=(1e4*(268435455&(u+=122192928e5))+v)%4294967296;a[r++]=m>>>24&255,a[r++]=m>>>16&255,a[r++]=m>>>8&255,a[r++]=255&m;var y=u/4294967296*1e4&268435455;a[r++]=y>>>8&255,a[r++]=255&y,a[r++]=y>>>24&15|16,a[r++]=y>>>16&255,a[r++]=s>>>8|128,a[r++]=255&s;for(var x=0;x<6;++x)a[r+x]=o[x];return e||f(a)}},472:function(t,e,n){n.r(e),n.d(e,{default:function(){return z}});var r,a=n(7294),i=n(1745),o=n(8634),s=n(2656),d=n.n(s),u=n(8126),l=n(8747),c=n.n(l),f=n(9646),h="chart",p="type-form";"undefined"!=typeof window&&n(5356),function(t){t.Count="count",t.Size="size"}(r||(r={}));var v="#de7c03",g=u.nmz,m=function(t){var e,n,r,a,i;return{depth:null!==(e=null==t?void 0:t.depth)&&void 0!==e?e:0,x0:null!==(n=null==t?void 0:t.x0)&&void 0!==n?n:0,x1:null!==(r=null==t?void 0:t.x1)&&void 0!==r?r:0,y0:null!==(a=null==t?void 0:t.y0)&&void 0!==a?a:0,y1:null!==(i=null==t?void 0:t.y1)&&void 0!==i?i:0}},y=function(t){var e=t.fn,n=t.getNodeId,r=t.initialData,a=t.isText;return function(t){var i=r.find((function(e){return e&&n(e.data)===n(t.data)})),o=m(t),s=m(i),d=o.x0===o.x1||a&&0===t.depth?o:Object.assign({},s,{y0:o.y0,y1:o.y1}),l=(0,u.sXR)(d,o);return function(t){var n=l(t);return e(n)}}},x=function(){function t(t){var e=this;this.handleResize=function(){e.render()},this.config=t;var n=t.getNodeId,r=t.partitionType,a=t.rootElId,i=(0,u.Ys)("#"+a).append("svg").text(""),o=i.append("g"),s=o.append("g");this.state={descendants:[],drag:{x:0,y:0},isClearingSelection:!1,partitionType:r,rootNode:null},this.selectors={path:"path-"+(0,f.Z)().slice(0,6),text:"text-"+(0,f.Z)().slice(0,6)};var d=new Set;!function e(n){d.add(t.getNodeId(n)),n.children&&n.children.forEach(e)}(t.rootData);var l=(0,u.PKp)(u.i4X).domain(Array.from(d));this.color=function(t){return t.children?l(n(t.data)):t.parent?l(n(t.parent.data)):l(0)},this.state.descendants=this.getDataHierarchy(),this.elements={svg:i,svgDrag:o,svgG:s},this.setupDrag(),window.addEventListener("resize",this.handleResize)}var e=t.prototype;return e.updatePartition=function(t){this.state.partitionType=t,this.state.descendants=this.getDataHierarchy(),this.renderDescendants()},e.render=function(){var t=this.getDimensions().width,e=this.elements,n=e.svg,r=e.svgG;n.attr("width",t).attr("height",700),r.attr("transform","translate("+t/2+",364)"),this.renderDescendants()},e.getDimensions=function(){var t=this.config.rootElId,e=document.getElementById(t).getBoundingClientRect().width,n=Math.max(e,700);return{chartWidth:n,radius:Math.min(n,700)/2,width:e}},e.getDataHierarchy=function(){var t=this.config,e=t.getNodeSize,n=t.rootData,r=this.state,a=r.partitionType,i=r.rootNode,o=this.getDimensions().radius,s=function t(e){return Object.assign({},e,"children"in e&&{children:e.children.map(t)})},d=s(i||n);return(0,u.uKc)().size([2*Math.PI,o])("size"===a?(0,u.bT9)(d).sum((function(t){var n;return null!==(n=e(t))&&void 0!==n?n:0})):(0,u.bT9)(d).sum((function(){return 1}))).descendants()},e.setupDrag=function(){var t=this,e=this.elements,n=e.svg,r=e.svgDrag,a=function(e){t.state.drag.x+=e.dx,t.state.drag.y+=e.dy,r.attr("transform","translate("+t.state.drag.x+","+t.state.drag.y+")")},i=(0,u.ohM)().on("drag",a);n.style("cursor","move").call(i).on("drag",a).on("wheel",null)},e.renderDescendants=function(){var t=this,e=this.color,n=this.config,r=n.getNodeId,a=n.getNodeLabel,i=n.getNodeTitle,o=this.elements.svgG,s=this.selectors,d=this.state.descendants,l=(0,u.Nb1)().startAngle((function(t){return t.x0})).endAngle((function(t){return t.x1})).innerRadius((function(t){return t.y0})).outerRadius((function(t){return t.y1})).padAngle(.01),f=function(t){if(!t.depth)return"";var e,n=l.centroid(Object.assign({},t,{x0:t.x0+.05*(t.x0>Math.PI?-1:1)}));return["rotate("+((e=90+180*(t.x0+(t.x1-t.x0)/2)/Math.PI)>90&&e<270?e-180:e)+","+n[0]+","+n[1]+")","translate("+n[0]+","+n[1]+")"].join(" ")},h=o.selectAll("path"),p=h.data(),m=h.data(d,(function(t){return"path-"+r(t.data)})),x=this.state.isClearingSelection?0:2e3;this.state.isClearingSelection=!1;var w=function(e){return 0!==e.depth||t.state.rootNode},D=function(t){t.style("cursor",(function(t){return w(t)?"pointer":"move"}))},N=function(t){t.attr("data-index",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1];return r})).style("fill",e).call(D)},b=m.enter().append("path").attr("class",s.path).style("stroke","#000").style("stroke-width","2px").style("stroke-dasharray","1,3").attr("d",l).call(N);m.exit().remove(),m.call(N).transition().duration(x).ease(g).attrTween("d",y({fn:l,getNodeId:r,initialData:p,isText:!1}));var E=o.selectAll("text"),k=E.data(),C=E.data(d,(function(t){return"text-"+r(t.data)}));C.exit().remove();var I=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],a=Math.abs(r.x0-r.x1)*r.y1;if(a<25)return 0;var i=Math.abs((r.x0+r.x1)/2-Math.PI)<.2;return i&&0!==r.depth?0:1},T=function(t){t.text((function(t){var e=a(t.data);return e.length>9?e.slice(0,9)+"...":e})).attr("data-index",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1];return r})).call(D)},z=C.enter().append("text").attr("class",s.text).style("fill","#333").style("cursor","default").style("font","bold 12px Arial").attr("text-anchor","middle").attr("transform",f).style("opacity",I).call(T);C.call(T).transition("movement").duration(x).ease(g).attrTween("transform",y({fn:f,getNodeId:r,initialData:k,isText:!0})),C.transition("opacity").duration(x).ease(g).style("opacity",I),[b,z].forEach((function(n){n.on("mouseover",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1],a=(0,u.Ys)(this).attr("data-index");w(r)&&((0,u.Ys)('path[data-index="'+a+'"]').style("fill",v),(0,u.Ys)('text[data-index="'+a+'"]').style("fill","white"))})),n.on("mouseout",(function(){var t=(0,u.Ys)(this).attr("data-index");(0,u.Ys)('path[data-index="'+t+'"]').style("fill",e),(0,u.Ys)('text[data-index="'+t+'"]').style("fill","#000")})),n.on("click",(function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[1];t.state.rootNode&&r(t.state.rootNode)===r(i.data)?(t.state.rootNode=null,t.state.isClearingSelection=!0):t.state.rootNode=i.data,t.state.descendants=t.getDataHierarchy(),t.renderDescendants()})),n.attr("title",(function(t){return i({nodeData:t.data,valueNum:t.value})}))})),c()("."+s.path).tooltip({track:!0}),c()("."+s.text).tooltip({track:!0})},t}(),w=function(){var t=(0,o.Z)(d().mark((function t(){var e,n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.AVB)("/demos/data/d3js/partition/flare.json");case 2:return e=t.sent,n=0,r=function t(e){var r=n+=1,a="children"in e?e.children.map(t):null;return Object.assign({},e,a&&{children:a},{id:r})},t.abrupt("return",r(e));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(t){return t.size},N=function(t){return t.name},b=function(t){var e=t.nodeData,n=t.valueNum;return'Name: "'+e.name+'"\nSize: '+("number"==typeof e.size?e.size.toLocaleString("en-GB"):"-")+"\nValue: "+("number"==typeof n?n.toLocaleString("en-GB"):"-")},E=function(t){return t.id},k=function(t){var e=t.partitionType,n=t.rootData;return{getNodeId:E,getNodeLabel:N,getNodeSize:D,getNodeTitle:b,partitionType:e,rootData:n,rootElId:h}},C=function(){var t=(0,o.Z)(d().mark((function t(){var e,n,r,a,i,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:e=t.sent,n=document.getElementById(p),a=(r=function(){return Array.from(n.elements).find((function(t){return t.checked})).value})(),i=k({partitionType:a,rootData:e}),(o=new x(i)).render(),n.addEventListener("change",(function(){var t=r();o.updatePartition(t)}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=C,T="partition-page-module--label--4f05c",z=function(t){var e=t.pageContext;return a.createElement(i.Z,{main:I,pageContext:e},a.createElement("form",{id:p,style:{marginBottom:20}},a.createElement("label",{className:T},a.createElement("input",{className:"form-check-inpu",name:"mode",type:"radio",value:"size"})," ","Size"),a.createElement("label",{className:T},a.createElement("input",{defaultChecked:!0,name:"mode",type:"radio",value:"count"})," Count")),a.createElement("div",{id:h}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-partition-tsx-613f2661270e5ae3014e.js.map