(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[574],{3344:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7294),a=r(7538),l=function(){var e=$("#chart").innerWidth(),t=d3.select("#chart").append("svg").attr("width",e).attr("height",500),r=[{id:"A",reflexive:!1},{id:"B",reflexive:!1},{id:"C",reflexive:!1}],n="C".charCodeAt(0),a=[{left:!1,right:!0,source:r[0],target:r[1]},{left:!1,right:!0,source:r[1],target:r[2]}];t.append("svg:defs").append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",6).attr("markerWidth",3).attr("markerHeight",3).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","#000"),t.append("svg:defs").append("svg:marker").attr("id","start-arrow").attr("viewBox","0 -5 10 10").attr("refX",4).attr("markerWidth",3).attr("markerHeight",3).attr("orient","auto").append("svg:path").attr("d","M10,-5L0,0L10,5").attr("fill","#000");var l=t.append("svg:path").attr("class","link dragline hidden").attr("d","M0,0L0,0"),i=t.append("svg:g").selectAll("path"),s=t.append("svg:g").selectAll("g"),d=d3.layout.force().nodes(r).links(a).size([e,500]).linkDistance(150).charge(-500).on("tick",(function(){return i.attr("d",(function(e){var t=e.target.x-e.source.x,r=e.target.y-e.source.y,n=Math.sqrt(t*t+r*r),a=t/n,l=r/n,i=e.left?17:12,s=e.right?17:12;return"M"+(e.source.x+i*a)+","+(e.source.y+i*l)+"L"+(e.target.x-s*a)+","+(e.target.y-s*l)})),s.attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}))})),o=null,u=null,c=null,f=null,v=null,g=function(){f=null,v=null,c=null},h=function e(){(i=i.data(a)).classed("selected",(function(e){return e===u})).style("marker-start",(function(e){return e.left?"url(#start-arrow)":""})).style("marker-end",(function(e){return e.right?"url(#end-arrow)":""})),i.enter().append("svg:path").attr("class","link").classed("selected",(function(e){return e===u})).style("marker-start",(function(e){return e.left?"url(#start-arrow)":""})).style("marker-end",(function(e){return e.right?"url(#end-arrow)":""})).on("mousedown",(function(t){d3.event.ctrlKey||(u=(c=t)===u?null:c,o=null,e())})),i.exit().remove(),(s=s.data(r,(function(e){return e.id}))).selectAll("circle").style("fill",(function(e){return e===o?d3.rgb((e.id,"#FFF")).darker().toString():(e.id,"#FFF")})).classed("reflexive",(function(e){return e.reflexive}));var t=s.enter().append("svg:g");return t.append("svg:circle").attr("class","node").attr("r",12).style("fill",(function(e){return e===o?d3.rgb((e.id,"#FFF")).brighter().toString():(e.id,"#FFF")})).style("stroke",(function(e){return d3.rgb((e.id,"#FFF")).darker().toString()})).classed("reflexive",(function(e){return e.reflexive})).on("mouseover",(function(e){f&&e!==f&&d3.select(this).attr("transform","scale(1.1)")})).on("mouseout",(function(e){f&&e!==f&&d3.select(this).attr("transform","")})).on("mousedown",(function(t){d3.event.ctrlKey||(o=(f=t)===o?null:f,u=null,l.style("marker-end","url(#end-arrow)").classed("hidden",!1).attr("d","M"+f.x+","+f.y+"L"+f.x+","+f.y),e())})).on("mouseup",(function(t){var r=null,n=null,i=null;if(f)if(l.classed("hidden",!0).style("marker-end",""),(v=t)!==f){d3.select(this).attr("transform",""),f.id<v.id?(n=f,i=v,r="right"):(n=v,i=f,r="left");var s=a.filter((function(e){return e.source===n&&e.target===i}))[0];s?s[r]=!0:((s={left:!1,right:!1,source:n,target:i})[r]=!0,a.push(s)),u=s,o=null,e()}else g()})),t.append("svg:text").attr("x",0).attr("y",4).attr("class","id").text((function(e){return e.id})),s.exit().remove(),d.start()},p=-1;t.on("mousedown",(function(){if(t.classed("active",!0),!(d3.event.ctrlKey||f||c)){var e=d3.mouse(this),a={id:String.fromCharCode(++n),reflexive:!1};a.x=e[0],a.y=e[1],r.push(a),h()}})).on("mousemove",(function(){f&&(l.attr("d","M"+f.x+","+f.y+"L"+d3.mouse(this)[0]+","+d3.mouse(this)[1]),h())})).on("mouseup",(function(){return f&&l.classed("hidden",!0).style("marker-end",""),t.classed("active",!1),g()})),d3.select(window).on("keydown",(function(){var e;if((d3.event.preventDefault(),-1===p)&&(p=d3.event.keyCode,17===d3.event.keyCode&&(s.call(d.drag),t.classed("ctrl",!0)),o||u))switch(d3.event.keyCode){case 46:return o?(r.splice(r.indexOf(o),1),e=o,a.filter((function(t){return t.source===e||t.target===e})).map((function(e){return a.splice(a.indexOf(e),1)}))):u&&a.splice(a.indexOf(u),1),u=null,o=null,void h();case 66:return u&&(u.left=!0,u.right=!0),void h();case 76:return u&&(u.left=!0,u.right=!1),void h();case 82:return o?o.reflexive=!o.reflexive:u&&(u.left=!1,u.right=!0),void h()}})).on("keyup",(function(){p=-1,17===d3.event.keyCode&&(s.on("mousedown.drag",null).on("touchstart.drag",null),t.classed("ctrl",!1))})),h()},i=function(e){var t=e.pageContext.demoInfo;return n.createElement(a.Z,{demoInfo:t,main:l,scripts:["/vendors/d3/d3.min.js"]},n.createElement("div",{className:"vectors-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-vectors-js-6c7056f96fe1807bf6da.js.map