(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[730],{2137:function(t,e,r){"use strict";function n(t,e,r,n,a,o,l){try{var i=t[o](l),u=i.value}catch(c){return void r(c)}i.done?e(u):Promise.resolve(u).then(n,a)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var l=t.apply(e,r);function i(t){n(l,a,o,i,u,"next",t)}function u(t){n(l,a,o,i,u,"throw",t)}i(void 0)}))}}r.d(e,{Z:function(){return a}})},7986:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return T}});var n=r(7294),a=r(4275),o=r(2137),l=r(7757),i=r.n(l),u=r(7723),c="weekly-heatmap-module--mono--1FY_w",s="weekly-heatmap-module--axisBold--ymVm3",d=["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],f=d.length,h=100,v=50,p=50,y=50,m=function(t){var e=t.rootElId,r=t.weeklyData,n=document.getElementById(e);n.classList.add("weekly-heatmap-module--weeklyHeatmapChart--3k92Q");var a=t.horizontalLabels,o=t.verticalLabels,l=n.getBoundingClientRect().width-v-p,i=Math.ceil(10*l/a.length)-y-h+60,m=Math.floor(l/a.length),g=2*m,x=(0,u.Fp7)(r,(function(e){return t.getItemValue(e)})),w=(0,u.FTZ)().domain([0,f-1,x]).range(d),b=(0,u.Ys)("#"+e).append("svg").attr("height",i+y+h).attr("width",l+v+p).append("g").attr("transform","translate("+v+","+y+")");b.selectAll(".verticalLabel").data(o).enter().append("text").text((function(t){return t})).attr("class",(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],o=r[1];return"verticalLabel "+c+" axis"+(t.getIsVerticalLabelBold(a,o)?" "+s:"")})).attr("transform","translate(-6,"+m/1.5+")").attr("x",0).attr("y",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n*m})).style("text-anchor","end"),b.selectAll(".horizontalLabel").data(a).enter().append("text").text((function(t){return t})).attr("class",(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],o=r[1];return"horizontalLabel "+c+" axis"+(t.getIsHorizontalLabelBold(a,o)?" "+s:"")})).attr("transform","translate("+m/2+", "+"-6)").attr("x",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n*m})).attr("y",0).style("text-anchor","middle"),b.selectAll(".cell").data(r).enter().append("rect").attr("class","cell weekly-heatmap-module--bordered--2Vfqv").attr("height",m).attr("rx",100).attr("ry",100).attr("width",m).attr("x",(function(e){return t.getItemHorizontalIndex(e)*m})).attr("y",(function(e){return t.getItemVerticalIndex(e)*m})).attr("title",t.getItemTooltip).style("fill",d[0]).transition().duration(6e3).style("fill",(function(e){return w(t.getItemValue(e))})),$(".cell").tooltip();var I=b.selectAll(".legend").data([0].concat(w.quantiles()),(function(t){return t})).enter().append("g").attr("class","legend");I.append("rect").attr("x",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return g*n})).attr("y",i).attr("width",g).attr("height",m/2).style("fill",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return d[n]})).style("stroke","#ccc"),I.append("text").attr("class",c).text(t.getLegendText).style("text-anchor","middle").attr("x",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return g*n+g/2})).attr("y",i+m)},g=["Mo","Tu","We","Th","Fr","Sa","Su"],x=Array.from({length:24}).map((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1],a=n%12;return a+1+" "+(n>=11&&23!==n?"pm":"am")})),w=function(){var t=(0,o.Z)(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.pvA)("/demos/data/d3js/weekly-heatmap/data.tsv");case 2:return e=t.sent,t.abrupt("return",e.map((function(t){return{arbitraryMetric:+t.value,day:+t.day,hour:+t.hour}})));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(t){return t.arbitraryMetric},I=function(t){return"Arbitrary Metric: "+t.arbitraryMetric},k=function(t){return t.hour-1},A=function(t){return t.day-1},L=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n>=7&&n<=16},V=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return n>=0&&n<=4},z=function(t){return"â‰¥ "+t.toFixed(2)},B=function(t){return{getIsHorizontalLabelBold:L,getIsVerticalLabelBold:V,getItemHorizontalIndex:k,getItemTooltip:I,getItemValue:b,getItemVerticalIndex:A,getLegendText:z,horizontalLabels:x,rootElId:"chart",verticalLabels:g,weeklyData:t}},M=function(){var t=(0,o.Z)(i().mark((function t(){var e,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:e=t.sent,r=B(e),m(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(t){var e=t.pageContext;return n.createElement(a.Z,{links:["/vendors/jquery-ui/themes/base/jquery-ui.min.css"],main:M,pageContext:e,scripts:["/vendors/jquery-ui/jquery-ui.min.js"]},n.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-weekly-heatmap-tsx-bd62d2b96a215b3ebd3b.js.map