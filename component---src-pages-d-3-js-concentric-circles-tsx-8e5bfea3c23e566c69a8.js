(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[3],{9646:function(e,t,r){"use strict";var n;r.d(t,{Z:function(){return p}});var i=new Uint8Array(16);function a(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"==typeof e&&o.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l,d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r},h=0,v=0;var p=function(e,t,r){var n=t&&r||0,i=t||new Array(16),o=(e=e||{}).node||l,s=void 0!==e.clockseq?e.clockseq:d;if(null==o||null==s){var c=e.random||(e.rng||a)();null==o&&(o=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==s&&(s=d=16383&(c[6]<<8|c[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:v+1,g=u-h+(p-v)/1e4;if(g<0&&void 0===e.clockseq&&(s=s+1&16383),(g<0||u>h)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=u,v=p,d=s;var m=(1e4*(268435455&(u+=122192928e5))+p)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=255&m;var y=u/4294967296*1e4&268435455;i[n++]=y>>>8&255,i[n++]=255&y,i[n++]=y>>>24&15|16,i[n++]=y>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var w=0;w<6;++w)i[n+w]=o[w];return t||f(i)}},6126:function(e,t,r){"use strict";var n;r.d(t,{H:function(){return i},d:function(){return n}}),function(e){e.STORYBOOK="storybook",e.TESTING="testing"}(n||(n={}));var i={SCRIPT:"/vendors/jquery-ui/jquery-ui.min.js",STYLE:"/vendors/jquery-ui/themes/base/jquery-ui.min.css"}},8839:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(7294),i=r(6126),a=r(4275),o=r(8634),s=r(2656),c=r.n(s),u=r(5221),l=r(9646),d=20,f=20,h=function(){function e(t){var r=this;this.state={dragX:0,dragY:0,selectedCircles:{},zoom:e.defaultZoom},this.handleResize=function(){r.render()},this.config=t;var n=(0,u.Ys)("#"+t.rootElId),i=n.append("svg"),a=i.append("g"),o=a.append("g"),s=o.append("text").attr("text-anchor","middle").attr("width","20px");this.circleClass="name-circle-"+(0,l.Z)().slice(0,6),this.elements={descriptionSel:s,dragSel:a,gSel:o,rootSel:n,svgSel:i},this.setupDrag(),this.render(),window.addEventListener("resize",this.handleResize)}e.renderChart=function(t){return new e(t)};var t=e.prototype;return t.teardown=function(){window.removeEventListener("resize",this.handleResize)},t.setZoom=function(t){var r,n,i,a,o,s,c,u,l=this.getDimensions(),d=l.height,f=l.width,h=(r={baseZoom:e.defaultZoom,newZoom:t,prevDragX:this.state.dragX,prevDragY:this.state.dragY,prevZoom:this.state.zoom,zoomPoint:{x:f/2,y:d/2}},n=r.baseZoom,i=r.newZoom,a=r.prevDragX,o=r.prevDragY,s=r.prevZoom,c=r.zoomPoint,u=(i-s)/n,{x:a+-c.x*u,y:o+-c.y*u});this.state.zoom=t,this.state.dragX=h.x,this.state.dragY=h.y,this.updateDrag()},t.updateDrag=function(){this.elements.dragSel.attr("transform","translate("+this.state.dragX+","+this.state.dragY+") scale("+this.state.zoom/e.defaultZoom+")")},t.setupDrag=function(){var e=this,t=this.elements.svgSel,r=(0,u.ohM)().on("drag",(function(t){e.state.dragX+=t.dx,e.state.dragY+=t.dy,e.updateDrag()}));t.style("cursor","move").call(r).on("wheel",null)},t.getDimensions=function(){var e=this.config,t=e.circlesData,r=e.getCircleValue,n=e.rootElId,i=document.getElementById(n).getBoundingClientRect().width-d-f;return{height:2.5*(0,u.Fp7)(t,r),width:i}},t.render=function(){var e=this,t=this.config,r=t.chartDescription,n=t.circlesData,i=t.getCircleId,a=t.getCircleTitle,o=t.getCircleValue,s=this.elements;this.updateDrag();var c=(0,u.Fp7)(n,o),l=(0,u.PKp)().domain([0,c]).range([0,.5]),h="orange",v=function(t){var r=i(t);if(e.state.selectedCircles[r])return h;var n=o(t),a=l(n);return(0,u.vcY)(a)},p=this.getDimensions(),g=p.height,m=p.width;s.svgSel.attr("width",m+d+f).attr("height",g+d+f);var y=n.slice(0).sort((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[1];return o(i)-o(n)})),w=s.gSel.selectAll(".circle-group").data(y,i);w.enter().append("g").attr("class","circle-group").append("circle").attr("class",this.circleClass),w.exit().remove();var C=Math.min(g/2,m/2),x=(0,u.BYU)().domain([0,c]).range([0,C]),k=s.gSel.selectAll("."+this.circleClass),S=this.state.selectedCircles,D=function(e){var t=i(e);return S[t]?"4px":"2px"};k.attr("cx",m/2).attr("cy",g/2).style("fill","rgba(0, 0, 0, 0)").style("stroke",v).style("stroke-width",D).attr("r",(function(e){return x(o(e))})).on("mouseenter",(function(){(0,u.Ys)(this).style("stroke",h).style("stroke-width","4px")})).on("mouseleave",(function(){(0,u.Ys)(this).style("stroke",v).style("stroke-width",D)})).on("click",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1],a=i(n);S[a]=!S[a],(0,u.Ys)(this).style("stroke",v).style("stroke-width",D)})).append("title").text(a),s.descriptionSel.text(r).attr("transform","translate("+m/2+","+(g+25)+")")},e}();h.defaultZoom=10;var v="chart",p="year-slider",g=function(){var e=(0,o.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.gyn)("/demos/data/d3js/concentric-circles/data.csv");case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object.assign({},e,{count:+e.count})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){return e.count},y=function(e){return e.name},w=function(e){return e.name+": "+e.count},C=function(e){var t,r=e.namesMetrics;return{chartDescription:"Circles radius are proportional to order in the ranking, click to select",circlesData:(t=new Set,r.sort((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[1];return i.count-n.count})).filter((function(e){return!t.has(e.name)&&(t.add(e.name),!0)})).reverse()),getCircleId:y,getCircleTitle:w,getCircleValue:m,rootElId:v}},x=function(){var e=(0,o.Z)(c().mark((function e(){var t,r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,r=h.defaultZoom,n=C({namesMetrics:t}),i=h.renderChart(n),$("#year-slider").slider({change:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1].value;i.setZoom(n)},max:100,min:r,value:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=x,S=function(e){var t=e.pageContext;return n.createElement(a.Z,{links:[i.H.STYLE],main:k,pageContext:t,scripts:[i.H.SCRIPT]},n.createElement("div",{style:{marginBottom:20}},n.createElement("p",null,"Zoom"),n.createElement("div",{id:p})),n.createElement("div",{id:v}))}},2656:function(e,t,r){e.exports=r(3076)},8634:function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,c,"next",e)}function c(e){n(o,i,a,s,c,"throw",e)}s(void 0)}))}}r.d(t,{Z:function(){return i}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-concentric-circles-tsx-8e5bfea3c23e566c69a8.js.map