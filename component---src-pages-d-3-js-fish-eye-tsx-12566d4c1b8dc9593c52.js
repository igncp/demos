(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[909],{5121:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return M}});var n=i(7294),o=i(4275),s=i(8634),a=i(2656),r=i.n(a),c=i(862),u=function(t){var e=t.method,i=t.source,n=t.target;return function(){var t=i[e].apply(i,arguments);return t===i?n:t}},d=function t(e){var i=e.distortion,n=e.focus,o=e.scale,s=i,a=n;function r(t){var e=o(t),i=e<a,n=(0,c.Wem)(o.range()),r=n[0],u=n[1],d=i?a-r:u-a;return 0===d&&(d=u-r),(i?-1:1)*d*(s+1)/(s+d/Math.abs(e-a))+a}var d=function(t){return function(e){return void 0===e?s:(t(e),r)}};return r.distortion=d((function(t){s=+t})),r.focus=d((function(t){a=+t})),r.copy=function(){return t({distortion:s,focus:a,scale:o.copy()})},r.nice=o.nice,r.ticks=o.ticks,r.tickFormat=o.tickFormat,r.domain=u({method:"domain",source:o,target:r}),r.range=u({method:"range",source:o,target:r}),r},l={scale:function(t){return d({distortion:3,focus:0,scale:t()})}},h="fish-eye-module--axis--33d9a",f="fish-eye-module--background--ac9ea",m="fish-eye-module--chartTitle--a1de9",v=70,p=70,g=50,x=80,y=700-x-v,b=function(){function t(t){this.width=0,this.config=t,this.setupRootEl(),this.setVars(),this.setDom(),this.setChartTitle(),this.setBackground(),this.setPointer(),this.setAxis(),this.setLabels(),this.setDots(),this.setTitles(),this.updateDimensions(),this.bindMousemove(),this.bindMouseLeave(),this.bindClick(),this.bindResize(),this.setZoom({animationDuration:0,distortion:0,focus:[0,0]})}t.isTouchDevice=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0};var e=t.prototype;return e.refresh=function(){this.updateDimensions(1e3)},e.setupRootEl=function(){var t=document.getElementById(this.config.rootElId);t.classList.add("fish-eye-module--fishEyeChart--20e7a"),this.width=t.getBoundingClientRect().width-p-g},e.isSmallDevice=function(){return this.width<500},e.setDom=function(){var t=(0,c.Ys)("#"+this.config.rootElId).append("svg"),e=t.append("g");this.dom={svg:t,svgG:e}},e.setChartTitle=function(){this.dom.svgG.append("text").attr("class",m).attr("text-anchor","middle").style("font-weight","bold")},e.setVars=function(){var t=(0,c.PKp)().domain(this.config.colorDomain).range(c.i4X),e=(0,c.PUr)().domain([0,5e8]).range([5,60]),i=l.scale(c.p2C).domain([200,1e5]).range([0,this.width]),n=l.scale(c.BYU).domain([20,90]).range([y,0]);this.vars={colorScale:t,focused:!1,radiusScale:e,xScale:i,yScale:n}},e.setAxis=function(){var t=(0,c.WUZ)(",d");this.dom.xAxis=(0,c.LLu)(this.vars.xScale).tickFormat((function(e){if(e<1e3)return t(e);var i=Math.round(e/1e3);return t(i)+"k"})).tickSize(-y),this.dom.yAxis=(0,c.y4O)(this.vars.yScale).tickSize(-this.width),this.dom.svgG.append("g").attr("class","x "+h).attr("transform","translate(0,"+y+")").call(this.dom.xAxis),this.dom.svgG.append("g").attr("class","y "+h).call(this.dom.yAxis)},e.setBackground=function(){return this.dom.svgG.append("rect").attr("class",f)},e.setLabels=function(){this.dom.svgG.append("text").attr("class","x label").attr("text-anchor","middle").text(this.config.xAxisLabel),this.dom.svgG.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-y/2).attr("y",-40).attr("dy",".75em").attr("transform","rotate(-90)").text(this.config.yAxisLabel)},e.position=function(t){var e=this;this.dom.svgG.attr("transform","translate("+(p-(this.isSmallDevice()?20:0))+","+x+")"),this.dom.dot.sort((function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var o=i[0],s=i[1];return e.config.getRadiusValue(s)-e.config.getRadiusValue(o)})).transition().duration(t).attr("cx",(function(t){var i=e.config.getXValue(t);return e.vars.xScale(i)})).attr("cy",(function(t){var i=e.config.getYValue(t);return e.vars.yScale(i)})).attr("r",(function(t){var i=e.config.getRadiusValue(t);return e.vars.radiusScale(i)/(e.isSmallDevice()?2:1)})),this.dom.xAxis.ticks(this.isSmallDevice()?2:void 0),this.dom.svgG.select(".x."+h).transition().duration(t).call(this.dom.xAxis),this.dom.svgG.select(".y."+h).transition().duration(t).call(this.dom.yAxis)},e.setDots=function(){var t=this;this.dom.dot=this.dom.svgG.append("g").attr("class","dots").selectAll(".dot").data(this.config.chartItems).enter().append("circle").attr("class","dot").style("fill",(function(e){var i=t.config.getColorValue(e);return t.vars.colorScale(i)})).style("stroke","black").style('"stroke-width"',"1px"),this.position(0)},e.setTitles=function(){this.dom.dot.append("title").attr("class","dot-title"),this.updateTitles()},e.setZoom=function(t){var e=t.animationDuration,i=t.distortion,n=t.focus;this.vars.xScale.distortion(i).focus(n[0]),this.vars.yScale.distortion(i).focus(n[1]),this.position(e)},e.updateTitles=function(){var t=this;this.dom.dot.selectAll(".dot-title").text((function(e){return t.config.getCircleTitle(e)})),this.dom.svgG.select("."+m).text(this.isSmallDevice()?this.config.titles.short:this.config.titles.long)},e.zoom=function(t){var e=t.animationDuration,i=t.interactionEvent,n=(0,c.cx$)(i);this.setZoom({animationDuration:e,distortion:2.5,focus:n})},e.setPointer=function(){this.dom.pointer=this.dom.svgG.append("text").text("+").attr("class","fish-eye-module--pointer--15827")},e.bindMousemove=function(){var e=this;return this.dom.svgG.on("mousemove",(function(i){t.isTouchDevice()||e.vars.focused||e.zoom({animationDuration:0,interactionEvent:i})}))},e.bindMouseLeave=function(){var t=this;return this.dom.svgG.on("mouseleave",(function(){t.vars.focused||t.setZoom({animationDuration:1e3,distortion:0,focus:[0,0]})}))},e.bindClick=function(){var e=this;this.dom.svgG.on("click",(function(i){var n=t.isTouchDevice();if(n||(e.vars.focused=!e.vars.focused,!e.vars.focused))e.dom.pointer.style("opacity",0),e.zoom({animationDuration:n?1e3:0,interactionEvent:i});else{var o=(0,c.cx$)(e);e.dom.pointer.attr("x",o[0]).attr("y",o[1]).style("opacity",1)}}))},e.updateDimensions=function(t){void 0===t&&(t=0),this.setupRootEl();var e=this.isSmallDevice()?20:0,i=this.width+e;this.dom.svg.attr("width",this.width+p+g).attr("height",y+x+v),this.dom.svgG.select("."+m).attr("transform","translate("+i/2+",-40)"),this.dom.svgG.select("."+f).attr("width",this.width).attr("height",y),this.dom.svgG.select(".x.label").attr("y",y+26).attr("x",this.width/2),this.vars.xScale.range([0,i]),this.updateTitles(),this.position(t)},e.bindResize=function(){var t=this;window.addEventListener("resize",(function(){t.updateDimensions()}))},t}(),w="chart",E="random-update",k=function(){var t=(0,s.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.AVB)("/demos/data/d3js/fish-eye/data.json"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(t){return t.income},A=function(t){return t.lifeExpectancy},S=function(t){return t.population},C=function(t){return t.region},G=function(t){for(var e=t.toFixed(0);;){var i=e.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(i===e)break;e=i}return e},L=function(t){return t.name+":\n- Income: "+G(t.income)+" $/P.C.\n- Population: "+G(t.population)+"\n- Life expectancy: "+t.lifeExpectancy+" years"},T=["Sub-Saharan Africa","South Asia","Middle East & North Africa","America","Europe & Central Asia","East Asia & Pacific"],P=function(t){return{chartItems:t,colorDomain:T,getCircleTitle:L,getColorValue:C,getRadiusValue:S,getXValue:D,getYValue:A,rootElId:w,titles:{long:"Income Per Capita vs Life Expectancy vs Population vs Region - 180 Countries",short:"Income Per Capita vs Life Expectancy"},xAxisLabel:"income per capita, inflation-adjusted (dollars)",yAxisLabel:"life expectancy (years)"}},V=function(){var t=(0,s.Z)(r().mark((function t(){var e,i,n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:i=t.sent,n=P(i),o=new b(n),null===(e=document.getElementById(E))||void 0===e||e.addEventListener("click",(function(){var t=function(t){return(0,c.Wem)(n.chartItems,(function(e){return e[t]}))},e=t("population"),i=t("income"),s=t("lifeExpectancy"),a=(0,c.vY$)().exponent(20).range(e),r=(0,c.vY$)().exponent(5).range(i),u=(0,c.vY$)().exponent(2).range(s);n.chartItems.forEach((function(t){Math.random()<.1&&(t.population=a(Math.random()),t.income=r(Math.random()),t.lifeExpectancy=u(Math.random()))})),o.refresh()}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=V,M=function(t){var e=t.pageContext;return n.createElement(o.Z,{main:I,pageContext:e},n.createElement("div",{style:{marginBottom:20,textAlign:"center"}},n.createElement("button",{className:"btn btn-primary",id:E},"Update random values")),n.createElement("div",{id:w}))}},2656:function(t,e,i){t.exports=i(3076)},8634:function(t,e,i){"use strict";function n(t,e,i,n,o,s,a){try{var r=t[s](a),c=r.value}catch(u){return void i(u)}r.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,i=arguments;return new Promise((function(o,s){var a=t.apply(e,i);function r(t){n(a,o,s,r,c,"next",t)}function c(t){n(a,o,s,r,c,"throw",t)}r(void 0)}))}}i.d(e,{Z:function(){return o}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-fish-eye-tsx-12566d4c1b8dc9593c52.js.map