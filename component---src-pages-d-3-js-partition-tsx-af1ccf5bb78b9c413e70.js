"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[505],{9646:function(t,e,n){var r;n.d(e,{Z:function(){return v}});var a=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(t){return"string"==typeof t&&i.test(t)},d=[],c=0;c<256;++c)d.push((c+256).toString(16).substr(1));var u,l,f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n},h=0,p=0;var v=function(t,e,n){var r=e&&n||0,a=e||new Array(16),i=(t=t||{}).node||u,s=void 0!==t.clockseq?t.clockseq:l;if(null==i||null==s){var d=t.random||(t.rng||o)();null==i&&(i=u=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==s&&(s=l=16383&(d[6]<<8|d[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,m=c-h+(v-p)/1e4;if(m<0&&void 0===t.clockseq&&(s=s+1&16383),(m<0||c>h)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,p=v,l=s;var g=(1e4*(268435455&(c+=122192928e5))+v)%4294967296;a[r++]=g>>>24&255,a[r++]=g>>>16&255,a[r++]=g>>>8&255,a[r++]=255&g;var y=c/4294967296*1e4&268435455;a[r++]=y>>>8&255,a[r++]=255&y,a[r++]=y>>>24&15|16,a[r++]=y>>>16&255,a[r++]=s>>>8|128,a[r++]=255&s;for(var x=0;x<6;++x)a[r+x]=i[x];return e||f(a)}},5283:function(t,e,n){n.r(e),n.d(e,{default:function(){return j}});var r=n(7294),a=n(1745),o=n(8634),i=n(2656),s=n.n(i),d=n(2421),c=n(8747),u=n.n(c),l=n(9646),f="chart",h="type-form",p="color-method";"undefined"!=typeof window&&n(5356);var v,m,g,y="#de7c03",x=d.nmz,w=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0},N=function(t){var e,n,r,a,o;return{depth:null!==(e=null==t?void 0:t.depth)&&void 0!==e?e:0,x0:null!==(n=null==t?void 0:t.x0)&&void 0!==n?n:0,x1:null!==(r=null==t?void 0:t.x1)&&void 0!==r?r:0,y0:null!==(a=null==t?void 0:t.y0)&&void 0!==a?a:0,y1:null!==(o=null==t?void 0:t.y1)&&void 0!==o?o:0}},b=function(t){var e=t.fn,n=t.getNodeId,r=t.initialData,a=t.isText;return function(t){var o=r.find((function(e){return e&&n(e.data)===n(t.data)})),i=N(t),s=N(o),c=i.x0===i.x1||a&&0===t.depth?i:Object.assign({},s,{y0:i.y0,y1:i.y1}),u=(0,d.sXR)(c,i);return function(t){var n=u(t);return e(n)}}},D=function(){function t(t){var e=this;this.color=function(t){return(0,e.colorScale)((0,e.config.getNodeColorOption)({depth:t.depth,node:t.data}))},this.handleResize=function(){e.render()},this.config=t;var n=t.rootElId,r=(0,d.Ys)("#"+n).append("svg").text(""),a=r.append("g"),o=a.append("g");this.state={descendants:[],drag:{x:0,y:0},isClearingSelection:!1,rootNode:null},this.selectors={path:"path-"+(0,l.Z)().slice(0,6),text:"text-"+(0,l.Z)().slice(0,6)},this.state.descendants=this.getDataHierarchy(),this.colorScale=(0,d.PKp)(d.rp.concat(d.i4X)),this.elements={svg:r,svgDrag:a,svgG:o},this.setupDrag(),window.addEventListener("resize",this.handleResize)}var e=t.prototype;return e.update=function(){this.state.descendants=this.getDataHierarchy(),this.renderDescendants()},e.render=function(){var t=this.getDimensions().width,e=this.elements,n=e.svg,r=e.svgG;n.attr("width",t).attr("height",700),r.attr("transform","translate("+t/2+",364)"),this.renderDescendants()},e.getDimensions=function(){var t=this.config.rootElId,e=document.getElementById(t).getBoundingClientRect().width,n=Math.max(e,700);return{chartWidth:n,radius:Math.min(n,700)/2,width:e}},e.getDataHierarchy=function(){var t=this.config,e=t.getHierarchySum,n=t.rootData,r=this.state.rootNode,a=this.getDimensions().radius,o=function t(e){return Object.assign({},e,"children"in e&&{children:e.children.map(t)})},i=o(r||n);return(0,d.uKc)().size([2*Math.PI,a])((0,d.bT9)(i).sum(e)).descendants()},e.setupDrag=function(){var t=this,e=this.elements,n=e.svg,r=e.svgDrag,a=function(e){t.state.drag.x+=e.dx,t.state.drag.y+=e.dy,r.attr("transform","translate("+t.state.drag.x+","+t.state.drag.y+")")},o=(0,d.ohM)().on("drag",a);n.style("cursor","move").call(o).on("drag",a).on("wheel",null)},e.renderDescendants=function(){var t=this,e=this.color,n=this.config,r=n.getColorOptions,a=n.getNodeId,o=n.getNodeLabel,i=n.getNodeTitle,s=this.elements.svgG,c=this.selectors,l=this.state.descendants,f=new Set;this.state.descendants.forEach((function(t){f.add(t.depth)})),this.colorScale.domain(r({depths:Array.from(f),nodes:this.state.descendants.map((function(t){return t.data}))}));var h=(0,d.Nb1)().startAngle((function(t){return t.x0})).endAngle((function(t){return t.x1})).innerRadius((function(t){return t.y0})).outerRadius((function(t){return t.y1})).padAngle(.01),p=function(t){if(!t.depth)return"";var e,n=h.centroid(Object.assign({},t,{x0:t.x0+.05*(t.x0>Math.PI?-1:1)}));return["rotate("+((e=90+180*(t.x0+(t.x1-t.x0)/2)/Math.PI)>90&&e<270?e-180:e)+","+n[0]+","+n[1]+")","translate("+n[0]+","+n[1]+")"].join(" ")},v=s.selectAll("path"),m=v.data(),g=v.data(l,(function(t){return"path-"+a(t.data)})),N=this.state.isClearingSelection?0:2e3;this.state.isClearingSelection=!1;var D=function(e){return!w()&&(0!==e.depth||t.state.rootNode)},E=function(t){t.style("cursor",(function(t){return D(t)?"pointer":"move"}))},C=function(t){t.attr("data-index",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1];return r})).style("fill",e).call(E)},S=g.enter().append("path").attr("class",c.path).style("stroke","#000").style("stroke-width","2px").style("stroke-dasharray","1,3").attr("d",h).call(C);g.exit().remove(),g.call(C).transition().duration(N).ease(x).attrTween("d",b({fn:h,getNodeId:a,initialData:m,isText:!1}));var A=s.selectAll("text"),k=A.data(),I=A.data(l,(function(t){return"text-"+a(t.data)}));I.exit().remove();var M=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],a=Math.abs(r.x0-r.x1)*r.y1;if(a<25)return 0;var o=Math.abs((r.x0+r.x1)/2-Math.PI)<.2;return o&&0!==r.depth?0:1},T=function(t){t.text((function(t){var e=o(t.data);return e.length>9?e.slice(0,9)+"...":e})).attr("data-index",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1];return r})).call(E)},z=I.enter().append("text").attr("class",c.text).style("fill","#333").style("cursor","default").style("font","bold 12px Arial").attr("text-anchor","middle").attr("transform",p).style("opacity",M).call(T);I.call(T).transition("movement").duration(N).ease(x).attrTween("transform",b({fn:p,getNodeId:a,initialData:k,isText:!0})),I.transition("opacity").duration(N).ease(x).style("opacity",M),[S,z].forEach((function(n){n.on("mouseover",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1],a=(0,d.Ys)(this).attr("data-index");D(r)&&((0,d.Ys)('path[data-index="'+a+'"]').style("fill",y),(0,d.Ys)('text[data-index="'+a+'"]').style("fill","white"))})),n.on("mouseout",(function(){var t=(0,d.Ys)(this).attr("data-index");(0,d.Ys)('path[data-index="'+t+'"]').style("fill",e),(0,d.Ys)('text[data-index="'+t+'"]').style("fill","#000")})),n.on("click",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[1];t.state.rootNode&&a(t.state.rootNode)===a(o.data)?(t.state.rootNode=null,t.state.isClearingSelection=!0):t.state.rootNode=o.data,t.state.descendants=t.getDataHierarchy(),t.renderDescendants()})),n.attr("title",(function(t){return i({nodeData:t.data,valueNum:t.value})}))})),w()||(u()("."+c.path).tooltip({track:!0}),u()("."+c.text).tooltip({track:!0}))},t}();!function(t){t.count="count",t.size="size"}(m||(m={})),function(t){t.depth="depth",t.id="id"}(g||(g={}));var E=((v={})[g.depth]="Node depth",v[g.id]="Node ID",v),C=function(){var t={colorMethod:g.id,partitionType:m.count},e=document.getElementById(h),n=document.getElementById(p);Object.values(g).forEach((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=e[0],o=document.createElement("option");o.setAttribute("value",a),o.innerHTML=E[a],n.appendChild(o)})),n.value=t.colorMethod;var r=function(){};e.addEventListener("change",(function(){t.partitionType=Array.from(e.elements).find((function(t){return t.checked})).value,t.colorMethod=n.value,r()}));return{formState:t,onStateChangeHandler:function(t){r=t}}},S=function(){var t=(0,o.Z)(s().mark((function t(){var e,n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.AVB)("/demos/data/d3js/partition/flare.json");case 2:return e=t.sent,n=0,r=function t(e){var r=n+=1,a="children"in e?e.children.map(t):null;return Object.assign({},e,a&&{children:a},{id:r})},t.abrupt("return",r(e));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(t){return t.name},k=function(t){var e=t.nodeData,n=t.valueNum;return'Name: "'+e.name+'"\nSize: '+("number"==typeof e.size?e.size.toLocaleString("en-GB"):"-")+"\nValue: "+("number"==typeof n?n.toLocaleString("en-GB"):"-")},I=function(t){return t.id},M=function(t){var e=t.rootData,n=t.state,r=new Set;!function t(e){var n,a=e.id;(r.add(a),"children"in e)&&(null===(n=e.children)||void 0===n||n.forEach(t))}(e);return{getColorOptions:function(t){var e=t.depths;return n.colorMethod===g.depth?e:Array.from(r)},getHierarchySum:function(t){var e;return n.partitionType===m.count?1:null!==(e=t.size)&&void 0!==e?e:0},getNodeColorOption:function(t){var e=t.depth,r=t.node;return n.colorMethod===g.depth?e:r.id},getNodeId:I,getNodeLabel:A,getNodeTitle:k,rootData:e,rootElId:f}},T=function(){var t=(0,o.Z)(s().mark((function t(){var e,n,r,a,o,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=C(),n=e.formState,r=e.onStateChangeHandler,t.next=3,S();case 3:a=t.sent,o=M({rootData:a,state:n}),(i=new D(o)).render(),r((function(){i.update()}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=T,R="partition-page-module--label--4f05c",j=function(t){var e=t.pageContext;return r.createElement(a.Z,{main:z,pageContext:e},r.createElement("form",{className:"partition-page-module--form--e20ba",id:h},r.createElement("span",null,r.createElement("span",null,"Color Method: "),r.createElement("select",{className:"form-select partition-page-module--colorSelect--4faaa",id:p})),r.createElement("div",{className:"partition-page-module--radios--886a8"},r.createElement("label",{className:R},r.createElement("input",{className:"form-check-inpu",name:"mode",type:"radio",value:"size"})," ","Size"),r.createElement("label",{className:R},r.createElement("input",{defaultChecked:!0,name:"mode",type:"radio",value:"count"})," Count"))),r.createElement("div",{id:f}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-partition-tsx-af1ccf5bb78b9c413e70.js.map