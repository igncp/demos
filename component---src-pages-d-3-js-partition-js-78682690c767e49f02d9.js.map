{"version":3,"sources":["webpack://demos/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://demos/./src/demos/partition/partition.js","webpack://demos/./src/pages/d3js/partition.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","colorScale","d3","renderChart","root","rootElId","width","document","getElementById","getBoundingClientRect","radius","Math","min","color","d","children","data","name","parent","svg","append","attr","partitionLayout","size","PI","parsedSize","sum","arc","startAngle","x0","endAngle","x1","innerRadius","y0","outerRadius","y1","path","selectAll","descendants","enter","depth","_d","i","style","texts","text","dx","abs","dy","centroid","forEach","set","on","index","selector","ROOT_PATH","demoInfo","pageContext","main","scripts","className","id"],"mappings":"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","file":"component---src-pages-d-3-js-partition-js-78682690c767e49f02d9.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import * as d3 from \"d3\"\n\nconst fetchData = () => d3.json(`${ROOT_PATH}data/d3js/partition/flare.json`)\n\n// @TODO: add back the count option\n\nconst height = 700\nconst colorScale = d3.scaleOrdinal(d3.schemePastel2)\n\nconst renderChart = ({ root, rootElId }) => {\n  const addTitles = (selectors) => {\n    selectors.forEach((selector) =>\n      selector.append(\"title\").text((d) => `${d.data.name}\\n${d.value}`)\n    )\n  }\n\n  const { width } = document.getElementById(\"chart\").getBoundingClientRect()\n  const radius = Math.min(width, height) / 2\n\n  const color = (d) =>\n    d.children ? colorScale(d.data.name) : colorScale(d.parent.name)\n\n  const svg = d3\n    .select(`#${rootElId}`)\n    .append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n    .append(\"g\")\n    .attr(\"transform\", `translate(${width / 2},${height * 0.52})`)\n\n  const partitionLayout = d3.partition().size([2 * Math.PI, radius])\n\n  const parsedSize = d3.hierarchy(root).sum((d) => d.size)\n\n  partitionLayout(parsedSize)\n\n  const arc = d3\n    .arc()\n    .startAngle((d) => d.x0)\n    .endAngle((d) => d.x1)\n    .innerRadius((d) => d.y0)\n    .outerRadius((d) => d.y1)\n\n  const path = svg\n    .selectAll(\"path\")\n    .data(parsedSize.descendants())\n    .enter()\n    .append(\"path\")\n    .attr(\"display\", (d) => (d.depth ? null : \"none\"))\n    .attr(\"data-index\", (_d, i) => i)\n    .attr(\"d\", arc)\n    .style(\"stroke\", \"#000\")\n    .style(\"stroke-width\", \"1px\")\n    .style(\"fill\", (d) => color(d))\n\n  const texts = svg\n    .selectAll(\"text\")\n    .data(parsedSize.descendants())\n    .enter()\n    .append(\"text\")\n    .text((d) => {\n      const dx = Math.abs(d.x0 - d.x1)\n      const dy = Math.abs(d.y0 - d.y1)\n\n      if (dx > 0.1 && dy > 0.1 && d.parent) {\n        return d.data.name\n      }\n\n      return \"\"\n    })\n    .attr(\"data-index\", (_d, i) => i)\n    .style(\"fill\", \"black\")\n    .attr(\"text-anchor\", \"middle\")\n    .style(\"font\", \"bold 12px Arial\")\n    .attr(\"transform\", (d) => {\n      const centroid = arc.centroid(d)\n      const rotation = 0\n\n      return `rotate(${rotation},${centroid[0]},${centroid[1]}) translate(${centroid})`\n    })\n    .style(\"cursor\", \"default\")\n\n  ;[path, texts].forEach((set) =>\n    set.on(\"mouseover\", function () {\n      const index = d3.select(this).attr(\"data-index\")\n\n      d3.select(`path[data-index=\"${index}\"]`).style(\"fill\", \"#333\")\n      d3.select(`text[data-index=\"${index}\"]`).style(\"fill\", \"white\")\n    })\n  )\n  ;[path, texts].forEach((set) =>\n    set.on(\"mouseout\", function () {\n      const index = d3.select(this).attr(\"data-index\")\n\n      d3.select(`path[data-index=\"${index}\"]`).style(\"fill\", color)\n      d3.select(`text[data-index=\"${index}\"]`).style(\"fill\", \"#000\")\n    })\n  )\n\n  addTitles([path, texts])\n}\n\nconst main = async () => {\n  const root = await fetchData()\n\n  renderChart({\n    root,\n    rootElId: \"chart\",\n  })\n}\n\nexport default main\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/partition/partition\"\n\nconst Partition = ({ pageContext: { demoInfo } }) => (\n  <Demo demoInfo={demoInfo} main={main} scripts={[\"/vendors/d3/d3.min.js\"]}>\n    <div className=\"partition-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default Partition\n"],"sourceRoot":""}