(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[537],{2137:function(t,e,n){"use strict";function r(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function c(t){r(i,a,o,c,s,"next",t)}function s(t){r(i,a,o,c,s,"throw",t)}c(void 0)}))}}n.d(e,{Z:function(){return a}})},3517:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return v}});var r=n(7294),a=n(7538),o=n(2137),i=n(7757),c=n.n(i),s=["January","February","March","April","May","June","July","August","September","October","November","December"],u=70,l=80,d=70,p=60,f=function(t){var e=t.append("defs").append("filter").attr("id","drop-shadow");e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",1),e.append("feOffset").attr("dx",1).attr("dy",1),e.append("feComponentTransfer").append("feFuncA").attr({slope:"1",type:"linear"});var n=e.append("feMerge");n.append("feMergeNode"),n.append("feMergeNode").attr("in","SourceGraphic")},m=function(){var t=(0,o.Z)(c().mark((function t(){var e,n,r,a,o,i,m,v,h,y,x,g,w,b;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d3.scale.category20(),n=[],r=d3.time.format("%Y-%m"),a=!1,o=$("#chart").innerWidth()-l-d,i=500-p-u,m=d3.time.scale().range([0,o]),v=d3.scale.linear().range([i,0]),h=d3.select("#chart").append("svg").attr("width",o+l+d).attr("height",i+p+u).append("g").attr("transform","translate("+l+","+p+")"),y=function(t,e){e||Object.keys(t).map(r.parse).filter(Number).forEach((function(t){return n.push(t)}));var a={name:t.name.replace(/(msa|necta div|met necta|met div)$/i,""),values:null};return a.values=n.map((function(e){return{city:a,date:e,value:t[r(e)]/100}})),a},t.next=12,new Promise((function(t){d3.tsv("/data/d3js/multiline-voronoi/data.tsv",y,(function(e,n){t(n)}))}));case 12:x=t.sent,m.domain(d3.extent(n)),v.domain([0,d3.max(x,(function(t){return d3.max(t.values,(function(t){return t.value}))}))]).nice(),h.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+i+")").call(d3.svg.axis().scale(m).orient("bottom")),h.append("g").attr("class","axis axis--y").call(d3.svg.axis().scale(v).orient("left").ticks(10,"%")).append("text").attr("x",20).attr("dy",".32em").style("font-weight","bold").text("US Unemployment Rate"),f(h),g=d3.svg.line().x((function(t){return m(t.date)})).y((function(t){return v(t.value)})),w=function(t){var e=h.append("g").attr("transform","translate(-100,-100)").attr("class","focus");e.append("circle").attr("r",3.5),e.append("text").attr("class","text1").attr("y",-30),e.append("text").attr("class","text2").attr("y",-10);var n=d3.geom.voronoi().x((function(t){return m(t.date)})).y((function(t){return v(t.value)})).clipExtent([[-l,-p],[o+d,i+u]]),r=h.append("g").attr("class","voronoi");r.selectAll("path").data(n(d3.nest().key((function(t){return m(t.date)+","+v(t.value)})).rollup((function(t){return t[0]})).entries(d3.merge(t.map((function(t){return t.values})))).map((function(t){return t.values})))).enter().append("path").attr("d",(function(t){return"M"+t.join("L")+"Z"})).datum((function(t){return t.point})).on("mouseover",(function(t){d3.select(t.city.line).classed("city--hover",!0),t.city.line.parentNode.appendChild(t.city.line),e.attr("transform","translate("+m(t.date)+","+v(t.value)+")"),e.select(".text1").text(t.city.name.trim()+": ");var n=s[t.date.getMonth()]+" of "+t.date.getFullYear();return e.select(".text2").text(" "+String((100*t.value).toFixed(2))+"% - "+n)})).on("mouseout",(function(t){return d3.select(t.city.line).classed("city--hover",!1),e.attr("transform","translate(-100,-100)")})).on("click",(function(t){a=!a,d3.selectAll(".cities").remove(),d3.selectAll(".voronoi").remove(),b(a?[t.city]:x)})),d3.select("#show-voronoi").property("disabled",!1).on("change",(function(){return r.classed("voronoi--show",this.checked)}))},(b=function(t){return h.append("g").attr("class","cities").selectAll("path").data(t).enter().append("path").attr("d",(function(t){return t.line=this,g(t.values)})).style("stroke",(function(t,n){return e(n)})).style("filter",(function(){return"url(#drop-shadow)"})),w(t)})(x);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(t){var e=t.pageContext.demoInfo;return r.createElement(a.Z,{demoInfo:e,main:m,scripts:["/vendors/d3/d3.min.js"]},r.createElement("form",null,r.createElement("input",{id:"show-voronoi",type:"checkbox"})," ",r.createElement("label",{htmlFor:"show-voronoi"},"Show Voronoi lines")),r.createElement("div",{className:"multiline-voronoi-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-multiline-voronoi-js-ad90f7118a6194978375.js.map