{"version":3,"sources":["webpack://demos/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://demos/./src/demos/_utils/fish-eye.ts","webpack://demos/./src/demos/fish-eye/fish-eye.ts","webpack://demos/./src/pages/d3js/fish-eye.tsx"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","createFishEyeScale","scale","initialDistortion","initialFocus","distortion","focus","fishEyeScale","val","x","isLeft","range","extent","min","max","m","n","Math","abs","copy","domain","result","nice","ticks","tickFormat","scaleType","fetchData","d3","ROOT_PATH","humanizeNumber","initialN","toString","n2","replace","margin","height","FishEyeChart","rootElId","data","setupRootEl","setVars","setDom","render","setChartTitle","setBackground","setPointer","setFilter","setAxis","setLabels","setDots","setTitles","bindMousemove","bindClick","rootEl","document","getElementById","classList","add","width","getBoundingClientRect","dom","svg","append","attr","text","style","colorScale","radiusScale","xScale","d3Fisheye","yScale","vars","focused","xAxis","tickSize","yAxis","call","filter","position","dot","d","income","lifeExpectancy","population","selectAll","enter","region","sort","a","b","name","zoom","ev","mouse","select","pointer","on","pageContext","main","id"],"mappings":"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","file":"component---src-pages-d-3-js-fish-eye-tsx-8df7882c0e8e737da681.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { extent } from \"d3\"\n\nfunction createFishEyeScale(\n  scale: any,\n  initialDistortion: number,\n  initialFocus: number\n) {\n  let distortion = initialDistortion\n  let focus = initialFocus\n\n  const fishEyeScale = (val: any): number => {\n    const x = scale(val)\n    const isLeft = x < focus\n    const range = extent<number>(scale.range()) as [number, number]\n    const min = range[0]\n    const max = range[1]\n\n    const m = isLeft ? focus - min : max - focus\n    const n = m === 0 ? max - min : m\n\n    const result =\n      ((isLeft ? -1 : 1) * n * (distortion + 1)) /\n        (distortion + n / Math.abs(x - focus)) +\n      focus\n\n    return result\n  }\n\n  fishEyeScale.distortion = (val: number) => {\n    distortion = val\n\n    return fishEyeScale\n  }\n\n  fishEyeScale.focus = (val: number) => {\n    focus = val\n\n    return fishEyeScale\n  }\n\n  fishEyeScale.copy = () => createFishEyeScale(scale.copy(), distortion, focus)\n\n  fishEyeScale.domain = (...args: any[]) => {\n    const result = scale.domain(...args)\n\n    return result === scale ? fishEyeScale : result\n  }\n\n  fishEyeScale.range = (...args: any[]) => {\n    const result = scale.range(...args)\n\n    return result === scale ? fishEyeScale : result\n  }\n\n  fishEyeScale.nice = scale.nice\n  fishEyeScale.ticks = scale.ticks\n  fishEyeScale.tickFormat = scale.tickFormat\n\n  return fishEyeScale\n}\n\nexport type FishEyeScale = ReturnType<typeof createFishEyeScale>\n\n// https://github.com/d3/d3-plugins/blob/master/fisheye/fisheye.js\nconst d3Fisheye = {\n  scale(scaleType: any): FishEyeScale {\n    return createFishEyeScale(scaleType(), 3, 0)\n  },\n}\n\nexport default d3Fisheye\n","import * as d3 from \"d3\"\n\nimport d3Fisheye, { FishEyeScale } from \"@/demos/_utils/fish-eye\"\n\nimport \"./fish-eye.styl\"\n\ntype DataItem = {\n  income: number\n  lifeExpectancy: number\n  name: string\n  population: number\n  region: string\n}\ntype Data = DataItem[]\n\nconst fetchData = async (): Promise<Data | undefined> =>\n  d3.json(`${ROOT_PATH}data/d3js/fish-eye/data.json`)\n\nconst humanizeNumber = (initialN: number): string => {\n  let n = initialN.toString()\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const n2 = n.replace(/(\\d)(\\d{3})($|,|\\.)/g, \"$1,$2$3\")\n\n    if (n === n2) {\n      break\n    }\n\n    n = n2\n  }\n\n  return n\n}\n\nconst margin = {\n  bottom: 70,\n  left: 70,\n  right: 50,\n  top: 80,\n}\nconst height = 700 - margin.top - margin.bottom\n\ntype FishEyeChartOpts = {\n  rootElId: string\n  data: Data\n}\n\nclass FishEyeChart {\n  private rootElId: string\n  private data: Data\n\n  private width!: number\n  private dom!: {\n    svg: d3.Selection<SVGGElement, unknown, HTMLElement, unknown>\n    dot?: d3.Selection<SVGCircleElement, DataItem, SVGGElement, unknown>\n    pointer?: d3.Selection<SVGTextElement, unknown, HTMLElement, unknown>\n    xAxis?: d3.Axis<DataItem[\"income\"]>\n    yAxis?: d3.Axis<DataItem[\"lifeExpectancy\"]>\n  }\n  private vars!: {\n    colorScale: d3.ScaleOrdinal<string, string, never>\n    focused: boolean\n    radiusScale: d3.ScalePower<number, number, never>\n    xScale: FishEyeScale\n    yScale: FishEyeScale\n  }\n\n  public constructor({ rootElId, data }: FishEyeChartOpts) {\n    this.rootElId = rootElId\n    this.data = data\n\n    this.setupRootEl()\n    this.setVars()\n    this.setDom()\n  }\n\n  public render() {\n    this.setChartTitle()\n    this.setBackground()\n    this.setPointer()\n    this.setFilter()\n    this.setAxis()\n    this.setLabels()\n    this.setDots()\n    this.setTitles()\n    this.bindMousemove()\n    this.bindClick()\n  }\n\n  private setupRootEl() {\n    const rootEl = document.getElementById(this.rootElId) as HTMLElement\n\n    rootEl.classList.add(\"fish-eye-chart\")\n\n    this.width =\n      rootEl.getBoundingClientRect().width - margin.left - margin.right\n  }\n\n  private setDom() {\n    this.dom = {\n      svg: d3\n        .select(`#${this.rootElId}`)\n        .append(\"svg\")\n        .attr(\"width\", this.width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`),\n    }\n  }\n\n  private setChartTitle() {\n    this.dom.svg\n      .append(\"text\")\n      .attr(\"class\", \"chart-title\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", `translate(${this.width / 2},-40)`)\n      .text(\n        \"Income Per Capita vs \" +\n          \"Life Expectancy vs Population vs Region - 180 Countries\"\n      )\n      .style(\"font-weight\", \"bold\")\n  }\n\n  private setVars() {\n    const colorScale = d3\n      .scaleOrdinal<string>()\n      .domain([\n        \"Sub-Saharan Africa\",\n        \"South Asia\",\n        \"Middle East & North Africa\",\n        \"America\",\n        \"Europe & Central Asia\",\n        \"East Asia & Pacific\",\n      ])\n      .range(d3.schemePastel2)\n\n    const radiusScale = d3.scaleSqrt().domain([0, 5e8]).range([5, 60])\n    const xScale = d3Fisheye\n      .scale(d3.scaleLog)\n      .domain([300, 1e5])\n      .range([0, this.width])\n    const yScale = d3Fisheye\n      .scale(d3.scaleLinear)\n      .domain([20, 90])\n      .range([height, 0])\n\n    this.vars = {\n      colorScale,\n      focused: false,\n      radiusScale,\n      xScale,\n      yScale,\n    }\n  }\n\n  private setAxis() {\n    this.dom.xAxis = d3\n      .axisBottom<DataItem[\"population\"]>(this.vars.xScale)\n      .tickFormat(d3.format(\",d\"))\n      .tickSize(-height)\n    this.dom.yAxis = d3\n      .axisLeft<DataItem[\"income\"]>(this.vars.yScale)\n      .tickSize(-this.width)\n    this.dom.svg\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .call(this.dom.xAxis)\n    this.dom.svg.append(\"g\").attr(\"class\", \"y axis\").call(this.dom.yAxis)\n  }\n\n  private setBackground() {\n    return this.dom.svg\n      .append(\"rect\")\n      .attr(\"class\", \"background\")\n      .attr(\"width\", this.width)\n      .attr(\"height\", height)\n  }\n\n  private setLabels() {\n    this.dom.svg\n      .append(\"text\")\n      .attr(\"class\", \"x label\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", this.width - 26)\n      .attr(\"y\", height + 26)\n      .text(\"income per capita, inflation-adjusted (dollars)\")\n\n    this.dom.svg\n      .append(\"text\")\n      .attr(\"class\", \"y label\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", -26)\n      .attr(\"y\", -40)\n      .attr(\"dy\", \".75em\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .text(\"life expectancy (years)\")\n  }\n\n  private setFilter() {\n    const defs = this.dom.svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr(\"id\", `drop-shadow-circles`)\n\n    filter\n      .attr(\"height\", \"500%\")\n      .attr(\"width\", \"500%\")\n      .attr(\"x\", \"-200%\")\n      .attr(\"y\", \"-200%\")\n\n    filter\n      .append(\"feOffset\")\n      .attr(\"dx\", 0.5)\n      .attr(\"dy\", 0.5)\n      .attr(\"in\", \"SourceGraphic\")\n      .attr(\"result\", \"offOut\")\n\n    filter\n      .append(\"feGaussianBlur\")\n      .attr(\"in\", \"offOut\")\n      .attr(\"result\", \"blurOut\")\n      .attr(\"stdDeviation\", 1.5)\n\n    filter\n      .append(\"feBlend\")\n      .attr(\"in\", \"SourceGraphic\")\n      .attr(\"in2\", \"blurOut\")\n      .attr(\"mode\", \"normal\")\n\n    filter\n      .append(\"feComponentTransfer\")\n      .append(\"feFuncA\")\n      .attr(\"slope\", 0.6)\n      .attr(\"type\", \"linear\")\n  }\n\n  private position() {\n    this.dom\n      .dot!.attr(\"cx\", (d) => this.vars.xScale(d.income))\n      .attr(\"cy\", (d) => this.vars.yScale(d.lifeExpectancy))\n      .attr(\"r\", (d) => this.vars.radiusScale(d.population))\n  }\n\n  private setDots() {\n    this.dom.dot = this.dom.svg\n      .append(\"g\")\n      .attr(\"class\", \"dots\")\n      .selectAll(\".dot\")\n      .data<DataItem>(this.data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"dot\")\n      .style(\"fill\", (d: DataItem) => this.vars.colorScale(d.region))\n      .style(\"filter\", \"url(#drop-shadow-circles)\")\n      .style(\"stroke\", \"black\")\n      .style('\"stroke-width\"', \"1px\")\n      .sort((a, b) => b.population - a.population)\n\n    this.position()\n  }\n\n  private setTitles() {\n    this.dom\n      .dot!.append(\"title\")\n      .text(\n        (d) =>\n          `${d.name}:\\n- Income: ${humanizeNumber(d.income)} $/P.C.\\n` +\n          `- Population: ${humanizeNumber(d.population)}\\n` +\n          `- Life expectancy: ${d.lifeExpectancy} years`\n      )\n  }\n\n  private zoom(ev: Event) {\n    const mouse = d3.pointer(ev)\n\n    this.vars.xScale.distortion(2.5).focus(mouse[0])\n    this.vars.yScale.distortion(2.5).focus(mouse[1])\n    this.position()\n\n    this.dom.svg.select<SVGGElement>(\".x.axis\").call(this.dom.xAxis!)\n    this.dom.svg.select<SVGGElement>(\".y.axis\").call(this.dom.yAxis!)\n  }\n\n  private setPointer() {\n    this.dom.pointer = this.dom.svg\n      .append(\"text\")\n      .text(\"+\")\n      .attr(\"class\", \"pointer\")\n  }\n\n  private bindMousemove() {\n    return this.dom.svg.on(\"mousemove\", (ev) => {\n      if (!this.vars.focused) {\n        this.zoom(ev)\n      }\n    })\n  }\n\n  private bindClick() {\n    this.dom.svg.on(\"click\", (ev: Event) => {\n      this.vars.focused = !this.vars.focused\n\n      if (this.vars.focused) {\n        const pointer = d3.pointer(this)\n\n        this.dom\n          .pointer!.attr(\"x\", pointer[0])\n          .attr(\"y\", pointer[1])\n          .style(\"opacity\", 1)\n\n        return\n      }\n\n      this.dom.pointer!.style(\"opacity\", 0)\n\n      this.zoom(ev)\n    })\n  }\n}\n\nconst main = async () => {\n  const data = await fetchData()\n\n  const chart = new FishEyeChart({\n    data: data as Data,\n    rootElId: \"chart\",\n  })\n\n  chart.render()\n}\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/fish-eye/fish-eye\"\n\nconst FishEye = ({ pageContext }: DemoPageProps) => (\n  <Demo main={main} pageContext={pageContext}>\n    <div id=\"chart\" />\n  </Demo>\n)\n\nexport default FishEye\n"],"sourceRoot":""}