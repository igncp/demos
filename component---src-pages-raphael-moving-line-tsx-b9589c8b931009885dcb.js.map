{"version":3,"sources":["webpack://demos/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://demos/./src/demos/_utils/browserRaphael.ts","webpack://demos/./src/demos/moving-line/moving-line.ts","webpack://demos/./src/pages/raphael/moving-line.tsx"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","Raphael","window","require","fetchData","fetch","ROOT_PATH","response","json","data","renderChart","graphData","rootElId","advanceGraph","current","charts","length","animateChart","drawPoints","points","i","xPos","xOffset","xDelta","yPos","yOffset","circle","paper","node","className","baseVal","attr","point","newData","newPath","upperLimit","parseInt","upper","lowerLimit","lower","scaleFactor","animate","cy","childNodes","remove","line","path","createPathString","rootEl","document","getElementById","classList","add","width","getBoundingClientRect","setInterval","initLineGraph","demoInfo","pageContext","main","id"],"mappings":"mGAAA,SAASA,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAIxB,SAASS,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMc,EAAGK,MAAMJ,EAAME,GAEzB,SAASd,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOgB,GACdrB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASgB,GAGnEjB,OAAMkB,O,kEC/BZ,IAAMC,EAA4B,oBAAXC,OAAyB,KAAOC,EAAQ,MAE/D,O,6ICqBMC,EAAS,mCAAG,sGACOC,MAASC,6CADhB,cACVC,EADU,gBAEGA,EAASC,OAFZ,cAEVC,EAFU,yBAITA,GAJS,2CAAH,qDAWTC,EAAc,SAAC,GAA8C,IAA5CC,EAA2C,EAA3CA,UAAWC,EAAgC,EAAhCA,SAqB1BC,EAAe,WACfF,EAAUG,QAAUH,EAAUI,OAAOC,OAAS,EAChDL,EAAUG,UAEVH,EAAUG,QAAU,EAGtBG,KAGIC,EAAa,WAQjB,IAPA,IACQC,EAAWR,EAAUI,OAAO,GAA5BI,OAEJC,EAAI,EAEAJ,EAAWG,EAAXH,OAEDI,EAAIJ,GAAQ,CACjB,IAAMK,EAAOV,EAAUW,QAAUF,EAAIT,EAAUY,OACzCC,EAAOb,EAAUc,QAEjBC,EAASf,EAAUgB,MAAMD,OAAOL,EAAMG,EAX/B,GAabE,EAAOE,KAAKC,UAAUC,QAAU,QAChCJ,EAAOK,KAAK,QAAZ,YACAZ,EAAOC,GAAGY,MAAQN,EAClBN,MAIEH,EAAe,WAcnB,IAbA,IAAMgB,EAAUtB,EAAUI,OAAOJ,EAAUG,SACvCoB,EAAU,GAERC,EAAaC,SAASH,EAAQI,QAAU,EACxCC,EAAaF,SAASH,EAAQM,QAAU,EACxCC,EAAc7B,EAAUc,SAAWU,EAAaG,GAE9CnB,EAAWR,EAAUI,OAAO,GAA5BI,OAEJC,EAAI,EAEAJ,EAAWG,EAAXH,OAEDI,EAAIJ,GACC,IAANI,GACFc,GAAW,KACXA,GAAcvB,EAAUW,QAAjB,IACPY,GACEvB,EAAUc,SACTQ,EAAQd,OAAOC,GAAGjC,MAAQmD,GAAcE,EAFpC,MAKPN,GAAW,KACXA,GAAcvB,EAAUW,QAAUF,EAAIT,EAAUY,OAAzC,IACPW,GACEvB,EAAUc,SACTQ,EAAQd,OAAOC,GAAGjC,MAAQmD,GAAcE,GAG7CrB,EAAOC,GAAGY,MAAMS,QACd,CACEC,GACE/B,EAAUc,SACTQ,EAAQd,OAAOC,GAAGjC,MAAQmD,GAAcE,GAE7C,IACA,eAEFrB,EAAOC,GAAGY,MAAMJ,KAAKe,WAAW,GAAGC,SACnCzB,EAAOC,GAAGY,MAAMD,KAAK,QAArB,UAAwCE,EAAQd,OAAOC,GAAGjC,OAC1DiC,IAGFT,EAAUkC,KAAKJ,QACb,CACEK,KAAMZ,GAER,IACA,gBAIEa,EAAmB,WAQvB,IAPA,IAAQ5B,EAAWR,EAAUI,OAAOJ,EAAUG,SAAtCK,OAEJ2B,EAAI,KAAQnC,EAAUW,QAAlB,KAA6BX,EAAUc,QAAUN,EAAO,GAAGhC,OAC/DiC,EAAI,EAEAJ,EAAWG,EAAXH,OAEDI,EAAIJ,GACT8B,GAAQ,MACRA,GAAWnC,EAAUW,QAAUF,EAAIT,EAAUY,OAAzC,IACJuB,GAAQnC,EAAUc,QAAUN,EAAOC,GAAGjC,MACtCiC,IAGF,OAAO0B,IAvHa,WACpB,IAAME,EAASC,SAASC,eAAetC,GAEvCoC,EAAOG,UAAUC,IAAI,qBAErB,IAAQC,EAAUL,EAAOM,wBAAjBD,MACF1B,GAAQ1B,OAAQW,EAAUyC,EAXrB,KAaX1C,EAAUgB,MAAQA,EAElB,IAAMmB,EAAOC,IAEPF,EAAOlB,EAAMmB,KAAKA,GAExBnC,EAAUkC,KAAOA,EACjB3B,IAEAqC,YAAY1C,EAAc,KAyG5B2C,IAYF,EATU,mCAAG,oGACQpD,IADR,OACLK,EADK,OAGXC,EAAY,CACVC,UAAWF,EACXG,SAAU,UALD,2CAAH,qDClJV,EANqB,SAAC,GAAD,IAAkB6C,EAAlB,EAAGC,YAAeD,SAAlB,OACnB,gBAAC,IAAD,CAAMA,SAAUA,EAAUE,KAAMA,GAC9B,uBAAKC,GAAG","file":"component---src-pages-raphael-moving-line-tsx-b9589c8b931009885dcb.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","const Raphael = typeof window === \"undefined\" ? null : require(\"raphael\")\n\nexport default Raphael\n","import { RaphaelPaper, RaphaelPath, RaphaelElement } from \"raphael\"\n\nimport Raphael from \"@/demos/_utils/browserRaphael\"\n\nimport \"./moving-line.styl\"\n\ntype Data = {\n  charts: Array<{\n    lower: string\n    points: Array<{\n      point: RaphaelElement\n      value: number\n    }>\n    upper: string\n  }>\n  current: number\n  line: RaphaelPath\n  paper: RaphaelPaper\n  xDelta: number\n  xOffset: number\n  yOffset: number\n}\n\nconst fetchData = async (): Promise<Data> => {\n  const response = await fetch(`${ROOT_PATH}data/raphael/moving-line/data.json`)\n  const data = await response.json()\n\n  return data\n}\n\nconst height = 300\n\ntype RenderChartOpts = { rootElId: string; graphData: Data }\n\nconst renderChart = ({ graphData, rootElId }: RenderChartOpts) => {\n  const initLineGraph = function () {\n    const rootEl = document.getElementById(rootElId) as HTMLElement\n\n    rootEl.classList.add(\"moving-line-chart\")\n\n    const { width } = rootEl.getBoundingClientRect()\n    const paper = Raphael(rootElId, width, height)\n\n    graphData.paper = paper\n\n    const path = createPathString()\n\n    const line = paper.path(path)\n\n    graphData.line = line\n    drawPoints()\n\n    setInterval(advanceGraph, 3000)\n  }\n\n  const advanceGraph = function () {\n    if (graphData.current < graphData.charts.length - 1) {\n      graphData.current++\n    } else {\n      graphData.current = 1\n    }\n\n    animateChart()\n  }\n\n  const drawPoints = function () {\n    const radius = 6\n    const { points } = graphData.charts[0]\n\n    let i = 0\n\n    const { length } = points\n\n    while (i < length) {\n      const xPos = graphData.xOffset + i * graphData.xDelta\n      const yPos = graphData.yOffset\n\n      const circle = graphData.paper.circle(xPos, yPos, radius)\n\n      circle.node.className.baseVal = \"point\"\n      circle.attr(\"title\", `Value: ${0}`)\n      points[i].point = circle\n      i++\n    }\n  }\n\n  const animateChart = function () {\n    const newData = graphData.charts[graphData.current]\n    let newPath = \"\"\n\n    const upperLimit = parseInt(newData.upper) || 1\n    const lowerLimit = parseInt(newData.lower) || 0\n    const scaleFactor = graphData.yOffset / (upperLimit - lowerLimit)\n\n    const { points } = graphData.charts[0]\n\n    let i = 0\n\n    const { length } = points\n\n    while (i < length) {\n      if (i === 0) {\n        newPath += \"M \"\n        newPath += `${graphData.xOffset} `\n        newPath += `${\n          graphData.yOffset -\n          (newData.points[i].value - lowerLimit) * scaleFactor\n        } `\n      } else {\n        newPath += \"L \"\n        newPath += `${graphData.xOffset + i * graphData.xDelta} `\n        newPath +=\n          graphData.yOffset -\n          (newData.points[i].value - lowerLimit) * scaleFactor\n      }\n\n      points[i].point.animate(\n        {\n          cy:\n            graphData.yOffset -\n            (newData.points[i].value - lowerLimit) * scaleFactor,\n        },\n        800,\n        \"ease-in-out\"\n      )\n      points[i].point.node.childNodes[0].remove()\n      points[i].point.attr(\"title\", `Value: ${newData.points[i].value}`)\n      i++\n    }\n\n    graphData.line.animate(\n      {\n        path: newPath,\n      },\n      800,\n      \"ease-in-out\"\n    )\n  }\n\n  const createPathString = function () {\n    const { points } = graphData.charts[graphData.current]\n\n    let path = `M ${graphData.xOffset} ${graphData.yOffset - points[0].value}`\n    let i = 0\n\n    const { length } = points\n\n    while (i < length) {\n      path += \" L \"\n      path += `${graphData.xOffset + i * graphData.xDelta} `\n      path += graphData.yOffset - points[i].value\n      i++\n    }\n\n    return path\n  }\n\n  initLineGraph()\n}\n\nconst main = async () => {\n  const data = await fetchData()\n\n  renderChart({\n    graphData: data,\n    rootElId: \"chart\",\n  })\n}\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/moving-line/moving-line\"\n\nconst CircularArcs = ({ pageContext: { demoInfo } }: DemoPageProps) => (\n  <Demo demoInfo={demoInfo} main={main}>\n    <div id=\"chart\" />\n  </Demo>\n)\n\nexport default CircularArcs\n"],"sourceRoot":""}