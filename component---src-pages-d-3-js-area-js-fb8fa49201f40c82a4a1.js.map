{"version":3,"sources":["webpack://demos/./src/demos/_utils/d3utils.js","webpack://demos/./src/demos/area/area.js","webpack://demos/./src/pages/d3js/area.js"],"names":["d3utils","colorsScale","colors","extent","c","d3","scale","linear","domain","range","colorScale","length","p","filterBlackOpacity","id","svg","deviation","slope","filter","append","attr","height","width","x","y","in","stdDeviation","dx","dy","type","feMerge","filterColor","extra","result","in2","mode","middleTitle","text","top","class","transform","String","style","selector","margin","select","bottom","left","right","tooltip","customOpts","opts","_","merge","elementSelector","followElement","followMouse","leftOffst","tOpts","container","viewport","topOffst","$","hover","e","css","pageX","pageY","position","csv","ROOT_PATH","_error","data","innerWidth","xMax","max","d","year","xMin","min","yMax","percent","yMin","xScale","yScale","xAxis","axis","tickFormat","format","innerTickSize","yAxis","orient","call","selectAll","area","interpolate","y0","y1","line","datum","voronoi","geom","point","clipExtent","enter","_d","i","index","join","on","demoInfo","pageContext","main","scripts","className"],"mappings":"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","file":"component---src-pages-d-3-js-area-js-fb8fa49201f40c82a4a1.js","sourcesContent":["const d3utils = {\n  colorsScale(colors, extent) {\n    const c = d3.scale.linear().domain(extent).range([0, 1])\n    const colorScale = d3.scale\n      .linear()\n      .domain(d3.range(0, 1, 1.0 / colors.length))\n      .range(colors)\n\n    return function (p) {\n      return colorScale(c(p))\n    }\n  },\n  filterBlackOpacity(id, svg, deviation, slope) {\n    const defs = svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr({\n      height: \"500%\",\n      id: `drop-shadow-${id}`,\n      width: \"500%\",\n      x: \"-200%\",\n      y: \"-200%\",\n    })\n\n    filter.append(\"feGaussianBlur\").attr({\n      in: \"SourceAlpha\",\n      stdDeviation: deviation,\n    })\n    filter.append(\"feOffset\").attr({\n      dx: 1,\n      dy: 1,\n    })\n    filter.append(\"feComponentTransfer\").append(\"feFuncA\").attr({\n      slope,\n      type: \"linear\",\n    })\n\n    const feMerge = filter.append(\"feMerge\")\n\n    feMerge.append(\"feMergeNode\")\n\n    return feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\")\n  },\n  filterColor(id, svg, deviation, slope, extra) {\n    if (extra == null) {\n      extra = false\n    }\n\n    const defs = svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr({\n      id: `drop-shadow-${id}`,\n    })\n\n    if (extra) {\n      filter.attr({\n        height: \"500%\",\n        width: \"500%\",\n        x: \"-200%\",\n        y: \"-200%\",\n      })\n    }\n\n    filter.append(\"feOffset\").attr({\n      dx: 0.5,\n      dy: 0.5,\n      in: \"SourceGraphic\",\n      result: \"offOut\",\n    })\n    filter.append(\"feGaussianBlur\").attr({\n      in: \"offOut\",\n      result: \"blurOut\",\n      stdDeviation: deviation,\n    })\n    filter.append(\"feBlend\").attr({\n      in: \"SourceGraphic\",\n      in2: \"blurOut\",\n      mode: \"normal\",\n    })\n\n    return filter.append(\"feComponentTransfer\").append(\"feFuncA\").attr({\n      slope,\n      type: \"linear\",\n    })\n  },\n  middleTitle(svg, width, text, top) {\n    if (top == null) {\n      top = -15\n    }\n\n    svg\n      .append(\"text\")\n      .attr({\n        class: \"chart-title\",\n        \"text-anchor\": \"middle\",\n        transform: `translate(${String(width / 2)},${top})`,\n      })\n      .text(text)\n      .style({\n        \"font-weight\": \"bold\",\n      })\n  },\n  svg(selector, width, height, margin) {\n    return d3\n      .select(selector)\n      .text(\"\")\n      .append(\"svg\")\n      .attr({\n        height: height + margin.top + margin.bottom,\n        width: width + margin.left + margin.right,\n      })\n      .append(\"g\")\n      .attr({\n        transform: `translate(${margin.left},${margin.top})`,\n      })\n  },\n  tooltip(selector, customOpts) {\n    if (customOpts == null) {\n      customOpts = {}\n    }\n\n    const defaultOpts = {\n      elementSelector: \"\",\n      followElement: false,\n      followMouse: false,\n      leftOffst: 60,\n      tOpts: {\n        container: \"body\",\n        viewport: {\n          selector: \"#chart svg\",\n        },\n      },\n      topOffst: 40,\n    }\n\n    const opts = _.merge(defaultOpts, customOpts)\n\n    $(selector).tooltip(opts.tOpts)\n\n    if (opts.followMouse) {\n      $(selector).hover((e) =>\n        $(\".tooltip\").css({\n          left: `${String(e.pageX - opts.leftOffst)}px`,\n          top: `${String(e.pageY - opts.topOffst)}px`,\n        })\n      )\n    } else if (opts.followElement) {\n      $(selector).hover(() =>\n        $(\".tooltip\").css({\n          left: `${String(\n            $(opts.elementSelector).position().left - opts.leftOffst\n          )}px`,\n          top: `${String(\n            $(opts.elementSelector).position().top - opts.topOffst\n          )}px`,\n        })\n      )\n    }\n  },\n}\n\nexport default d3utils\n","import d3utils from \"@/demos/_utils/d3utils\"\n\nconst main = () => {\n  d3.csv(`${ROOT_PATH}data/d3js/area/data.csv`, (_error, data) => {\n    const margin = {\n      bottom: 50,\n      left: 70,\n      right: 50,\n      top: 50,\n    }\n    const width = $(\"#chart\").innerWidth() - margin.left - margin.right\n    const height = 400 - margin.top - margin.bottom\n\n    const svg = d3utils.svg(\"#chart\", width, height, margin)\n\n    d3utils.middleTitle(\n      svg,\n      width,\n      \"Share of top decile [aka top 10%] in national income\"\n    )\n    d3utils.filterBlackOpacity(\"points\", svg, 2, 0.5)\n\n    const xMax = d3.max(data, (d) => d.year)\n    const xMin = d3.min(data, (d) => d.year)\n    const yMax = d3.max(data, (d) => d.percent / 100)\n    const yMin = d3.min(data, (d) => d.percent / 100)\n\n    const xScale = d3.scale.linear().range([0, width]).domain([xMin, xMax])\n    const yScale = d3.scale\n      .linear()\n      .range([0, height])\n      .domain([yMax + 0.05, yMin - 0.05])\n\n    const xAxis = d3.svg\n      .axis()\n      .scale(xScale)\n      .tickFormat(d3.format(\".\"))\n      .innerTickSize(-height)\n    const yAxis = d3.svg\n      .axis()\n      .scale(yScale)\n      .tickFormat(d3.format(\"%\"))\n      .innerTickSize(-width)\n      .orient(\"left\")\n\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", `translate(0,${String(height)})`)\n      .call(xAxis)\n      .selectAll(\"text\")\n      .attr({ dy: \"1.25em\" })\n\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .call(yAxis)\n      .selectAll(\"text\")\n      .attr({ dx: \"-.25em\" })\n\n    const area = d3.svg\n      .area()\n      .interpolate(\"monotone\")\n      .x((d) => xScale(d.year))\n      .y0(height)\n      .y1((d) => yScale(d.percent / 100))\n\n    const line = d3.svg\n      .line()\n      .x((d) => xScale(d.year))\n      .y((d) => yScale(d.percent / 100))\n\n    svg\n      .append(\"path\")\n      .datum(data)\n      .attr({ class: \"line\", \"clip-path\": \"url(#clip)\", d: line })\n\n    svg.append(\"clipPath\").attr({ id: \"clip\" }).append(\"rect\").attr({\n      height,\n      width,\n    })\n\n    svg\n      .append(\"path\")\n      .datum(data)\n      .attr({ class: \"area\", \"clip-path\": \"url(#clip)\", d: area })\n\n    const voronoi = d3.geom\n      .voronoi()\n      .x((point) => xScale(point.year))\n      .y((point) => yScale(point.percent / 100))\n      .clipExtent([\n        [-margin.left, -margin.top],\n        [width + margin.right, height + margin.bottom],\n      ])\n\n    const mouseover = (d) =>\n      d3.select(`.point-${d.index}`).style(\"display\", \"block\")\n\n    const mouseleave = (d) =>\n      d3.select(`.point-${d.index}`).style(\"display\", \"none\")\n\n    svg\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\n        \"transform\",\n        (d) => `translate(${String(xScale(d.year))},${yScale(d.percent / 100)})`\n      )\n      .attr(\"r\", \"5px\")\n      .attr(\"class\", (_d, i) => `point point-${i}`)\n      .style({ filter: \"url(#drop-shadow-points)\" })\n\n    const voronoiGroup = svg.append(\"g\").attr(\"class\", \"voronoi\")\n\n    voronoiGroup\n      .selectAll(\"path\")\n      .data(voronoi(data))\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", (d, i) => {\n        d.index = i\n\n        return `M${d.join(\"L\")}Z`\n      })\n      .on(\"mouseover\", mouseover)\n      .on(\"mouseleave\", mouseleave)\n      .attr(\"class\", \"voronoi-area\")\n      .append(\"title\")\n      .text((d) => `Year: ${d.point.year}: ` + `Percent: ${d.point.percent}%`)\n  })\n}\n\nexport default main\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/area/area\"\n\nimport \"@/demos/area/area.styl\"\n\nconst Area = ({ pageContext: { demoInfo } }) => (\n  <Demo\n    demoInfo={demoInfo}\n    main={main}\n    scripts={[\"/vendors/d3/d3.min.js\", \"/js/d3js-utils.js\"]}\n  >\n    <div className=\"area-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default Area\n"],"sourceRoot":""}