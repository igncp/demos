(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[201],{2137:function(t,e,n){"use strict";function r(t,e,n,r,a,u,o){try{var c=t[u](o),i=c.value}catch(l){return void n(l)}c.done?e(i):Promise.resolve(i).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,u){var o=t.apply(e,n);function c(t){r(o,a,u,c,i,"next",t)}function i(t){r(o,a,u,c,i,"throw",t)}c(void 0)}))}}n.d(e,{Z:function(){return a}})},6957:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return x}});var r=n(7294),a=n(1335),u=n(2137),o=n(7757),c=n.n(o),i=n(3241),l=function(){var t=(0,u.Z)(c().mark((function t(){var e,n,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.pvA)("/demos/data/d3js/trend-line/data.tsv");case 2:return e=t.sent,n=(0,i.Z1g)("%Y-%m-%d"),r=e.map((function(t){return{occurred:n(t.occurred),value:+t.value}})),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=50,s=50,p=50,f=50,m=500-f-d,v=2e3,h=function(t,e){var n=(0,i.FTZ)().domain([0,1]).range((0,i.w6H)(1,t.length+1));return function(r){var a=t.slice(0,n(r));return e(a)}},g=function(t){var e=t.data,n=t.initialZoomed,r=t.rootElId,a=document.getElementById(r);a.classList.add("trend-line-chart");var u=a.getBoundingClientRect().width-s-p,o=function(t){var n=(0,i.Ys)("#"+r).text("").append("svg").attr("height",m+f+d).attr("width",u+s+p).append("g").attr("transform","translate("+s+","+p+")"),a=(0,i.Xf)().range([0,u]),o=(0,i.BYU)().range([m,0]),c=(0,i.LLu)(a),l=(0,i.y4O)(o),g=(0,i.jvg)().x((function(t){return a(t.occurred)})).y((function(t){return o(t.value)}));a.domain((0,i.Wem)(e,(function(t){return t.occurred}))),o.domain([t?(0,i.VV$)(e,(function(t){return t.value})):0,(0,i.Fp7)(e,(function(t){return t.value}))]),n.append("g").attr("class","x axis").attr("transform","translate(0,"+m+")").call(c),n.append("g").attr("class","y axis").call(l),n.append("path").datum(e).transition().duration(v).attrTween("d",(function(){return h(e,g)})).attr("class","line");var y=function(t){var e={},n=t.length,r=0,a=0,u=0,o=0,c=0;return t.forEach((function(t){r+=t.occurred.getTime(),a+=t.value,o+=t.occurred.getTime()*t.occurred.getTime(),c+=t.value*t.value,u+=t.occurred.getTime()*t.value})),e.slope=(n*u-r*a)/(n*o-r*r),e.intercept=(a-e.slope*r)/n,e.r2=Math.pow((n*u-r*a)/Math.sqrt((n*o-r*r)*(n*c-a*a)),2),e}(e),x=(0,i.jvg)().x((function(t){return a(t.occurred)})).y((function(t){var e=y.intercept+y.slope*+t.occurred;return o(e)}));n.append("path").datum(e).transition().delay(v).duration(v).attrTween("d",(function(){return h(e,x)})).attr("class","rline"),n.append("text").attr("transform","translate("+.7*u+","+.7*m+")").style("opacity",0).transition().delay(4e3).text("Slope: "+y.slope.toExponential(3)).style("opacity",1)};return o(n),{renderContent:o}},y=function(){var t=(0,u.Z)(c().mark((function t(){var e,n,r,a,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="chart",t.next=3,l();case 3:n=t.sent,a=g({data:n,initialZoomed:(r=function(){return document.querySelector('input[value="zoom"]').checked})(),rootElId:e}),u=a.renderContent,(0,i.td_)('input[name="mode"]').on("change",(function(){var t=r();u(t)}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(t){var e=t.pageContext;return r.createElement(a.Z,{main:y,pageContext:e},r.createElement("form",null,r.createElement("label",null,r.createElement("input",{defaultChecked:!0,name:"mode",type:"radio",value:"zoom"})," Zoom"),r.createElement("label",null,r.createElement("input",{name:"mode",type:"radio",value:"normal"})," Normal")),r.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-trend-line-tsx-3bf1af1f9ef1720d303a.js.map