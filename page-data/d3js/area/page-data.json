{
    "componentChunkName": "component---src-pages-d-3-js-area-tsx",
    "path": "/d3js/area/",
    "result": {"pageContext":{"demoInfo":{"dataFiles":["data.csv"],"docs":[["d3-selection API reference","https://github.com/d3/d3-selection#api-reference"],["d3-selection Types","https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-selection/index.d.ts"],["d3-shape API reference","https://github.com/d3/d3-shape#api-reference"],["d3-shape Types","https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-shape/index.d.ts"],["d3-scale API reference","https://github.com/d3/d3-scale#api-reference"],["d3-scale Types","https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-scale/index.d.ts"],["d3-axis API reference","https://github.com/d3/d3-axis#api-reference"],["d3-axis Types","https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-axis/index.d.ts"],["d3-delaunay API reference","https://github.com/d3/d3-delaunay#api-reference"],["d3-delaunay Types","https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-delaunay/index.d.ts"],["Delaunay Triangulation Wikipedia Article","https://en.wikipedia.org/wiki/Delaunay_triangulation"]],"isCompleted":true,"name":"Area","notes":[],"sources":["http://codepen.io/notno/pen/ilvsd"],"summary":["This chart is a mix of a common area + line chart plus Voronoi to properly display the points on mouse move. For the x and y axis, it uses two linear scales. It uses a SVG 'path' for printing the area, and a different SVG 'path' to print the line.","It uses an SVG 'clipPath' element with a 'rect' to limit the area and line paths. This doesn't look necessary, because after removing it, the area has the same dimensions. However I kept it because it was in the original source and it showcases this approach.","The voronoi lines are applied to a SVG 'path' element using 'voronoi.renderCell'. Because no context is passed to this method, it returns the SVG path by default. Each fragment of the voronoi chart has a fill value with opacity 0 in order to detect the mouse events.","The only return value from the render function is a function to allow toggling the visibility of the voronoi lines. This is done by changing the CSS class without re-rendering."],"category":"d3js","files":{"demoCSS":[{"content":"<span class=\"token selector\">.form </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">flex-wrap</span><span class=\"token punctuation\">:</span> wrap<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">gap</span><span class=\"token punctuation\">:</span> 10px 20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">justify-content</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/area-page.module.css"},{"content":"<span class=\"token selector\">.areaChart </span><span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">path.line </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> #25a6fc<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 3.5px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">path.area </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> #6e6ea7<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0.5<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.axis </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> #333<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">shape-rendering</span><span class=\"token punctuation\">:</span> crispedges<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.chartTitle </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> bold<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.x.axis .minor </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> #000<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.axis path,\n  .axis line </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">shape-rendering</span><span class=\"token punctuation\">:</span> crispedges<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> #ccc<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.y.axis line,\n  .y.axis path,\n  .x.axis line,\n  .x.axis path </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> #ccc<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.voronoi </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> #999<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 0.1<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.voronoi.showVoronoi </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.point </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> #69d895<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/chart/area-chart.module.css"}],"demoTS":[{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  AppState<span class=\"token punctuation\">,</span>\n  DataSource<span class=\"token punctuation\">,</span>\n  GenericItem<span class=\"token punctuation\">,</span>\n  createChartConfig<span class=\"token punctuation\">,</span>\n  dataSourceToName<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./area-config\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">DATA_SOURCE_SELECT_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">TOGGLE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  setupChartControls<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./area-controls\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AreaChart <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./chart/area-chart\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ui-constants\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">main</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> appState<span class=\"token operator\">:</span> AppState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    source<span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">INCOME</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> chartConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">createChartConfig</span><span class=\"token punctuation\">(</span>appState<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> areaChart <span class=\"token operator\">=</span> AreaChart<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">renderChart</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>GenericItem<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>chartConfig<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">setupChartControls</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">onToggleVoronoiClick</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      areaChart<span class=\"token punctuation\">.</span><span class=\"token function\">toggleVoronoi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onUpdateRandomValue</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">onUpdateRandomValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n      areaChart<span class=\"token punctuation\">.</span><span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onUpdateSelect</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>newDataSource<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">updateSource</span><span class=\"token punctuation\">(</span>newDataSource <span class=\"token keyword\">as</span> DataSource<span class=\"token punctuation\">)</span>\n\n      areaChart<span class=\"token punctuation\">.</span><span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    selectOptions<span class=\"token operator\">:</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>DataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      inputValue<span class=\"token operator\">:</span> dataSource<span class=\"token punctuation\">,</span>\n      label<span class=\"token operator\">:</span> dataSourceToName<span class=\"token punctuation\">[</span>dataSource<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">DATA_SOURCE_SELECT_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">TOGGLE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> main\n","filePath":"src/demos/area/area.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getIncomeConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./sources/income-config\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> IncomeItem <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./sources/income-item-model\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  NobelPrizeItem<span class=\"token punctuation\">,</span>\n  getNobelPrizesConfig<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./sources/nobel-prizes-config\"</span>\n\n<span class=\"token keyword\">enum</span> DataSource <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">INCOME</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"income\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">NOBEL_PRIZES</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"nobel-prizes\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> dataSourceToName<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span>DataSource<span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">INCOME</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Income\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">NOBEL_PRIZES</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Nobel Prizes (external API)\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">AppState</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  source<span class=\"token operator\">:</span> DataSource\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">GenericItem</span> <span class=\"token operator\">=</span> IncomeItem <span class=\"token operator\">|</span> NobelPrizeItem\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createChartConfig</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>appState<span class=\"token operator\">:</span> AppState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>incomeResult<span class=\"token punctuation\">,</span> nobelPrizesResult<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token builtin\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token function\">getIncomeConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">getNobelPrizesConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getResult</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>source<span class=\"token operator\">?</span><span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>source <span class=\"token operator\">??</span> appState<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">NOBEL_PRIZES</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> nobelPrizesResult\n      <span class=\"token keyword\">case</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">INCOME</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> incomeResult\n\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Unknown source\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getConfig</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>source<span class=\"token operator\">?</span><span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getResult</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>config\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    config<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">getAreaPoints</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAreaPoints</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getChartTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getChartTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getChartTitleShort</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getChartTitleShort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getItemId</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>nodeItem<span class=\"token operator\">:</span> GenericItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token comment\">// @ts-expect-error</span>\n        <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span>nodeItem<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getItemId</span><span class=\"token punctuation\">(</span>nodeItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getItemTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>nodeItem<span class=\"token operator\">:</span> GenericItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token comment\">// @ts-expect-error</span>\n        <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span>nodeItem<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getItemTitle</span><span class=\"token punctuation\">(</span>nodeItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getItemXValue</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>nodeItem<span class=\"token operator\">:</span> GenericItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token comment\">// @ts-expect-error</span>\n        <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span>nodeItem<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getItemXValue</span><span class=\"token punctuation\">(</span>nodeItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getItemYValue</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>nodeItem<span class=\"token operator\">:</span> GenericItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token comment\">// @ts-expect-error</span>\n        <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span>nodeItem<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getItemYValue</span><span class=\"token punctuation\">(</span>nodeItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getRootElId</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRootElId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getXAxisFormat</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getXAxisFormat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">getYAxisFormat</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getYAxisFormat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onUpdateRandomValue</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onUpdateRandomValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">updateSource</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>source<span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      appState<span class=\"token punctuation\">.</span>source <span class=\"token operator\">=</span> source\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span>\n  createChartConfig<span class=\"token punctuation\">,</span>\n  AppState<span class=\"token punctuation\">,</span>\n  DataSource<span class=\"token punctuation\">,</span>\n  dataSourceToName<span class=\"token punctuation\">,</span>\n  GenericItem<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/area-config.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">DATA_SOURCE_SELECT_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">TOGGLE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ui-constants\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setupChartControls</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  onToggleVoronoiClick<span class=\"token punctuation\">,</span>\n  onUpdateRandomValue<span class=\"token punctuation\">,</span>\n  onUpdateSelect<span class=\"token punctuation\">,</span>\n  selectOptions<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">onToggleVoronoiClick</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  <span class=\"token function-variable function\">onUpdateRandomValue</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  <span class=\"token function-variable function\">onUpdateSelect</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  selectOptions<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> inputValue<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> label<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> dataSourceSelect <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>\n    <span class=\"token constant\">DATA_SOURCE_SELECT_ID</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLSelectElement\n  <span class=\"token keyword\">const</span> toggleButtonElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>\n    <span class=\"token constant\">TOGGLE_BUTTON_ID</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLElement\n  <span class=\"token keyword\">const</span> updateButtonElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>\n    <span class=\"token constant\">UPDATE_BUTTON_ID</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLElement\n\n  selectOptions<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span>selectOption<span class=\"token punctuation\">,</span> selectOptionIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> sourceOption <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"option\"</span><span class=\"token punctuation\">)</span>\n\n    sourceOption<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value\"</span><span class=\"token punctuation\">,</span> selectOption<span class=\"token punctuation\">.</span>inputValue<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>selectOptionIndex <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      sourceOption<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"selected\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"selected\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    sourceOption<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> selectOption<span class=\"token punctuation\">.</span>label\n\n    dataSourceSelect<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>sourceOption<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  dataSourceSelect<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"change\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">onUpdateSelect</span><span class=\"token punctuation\">(</span>dataSourceSelect<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  toggleButtonElement<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>clickEvent<span class=\"token operator\">:</span> MouseEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    clickEvent<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">onToggleVoronoiClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  updateButtonElement<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>clickEvent<span class=\"token operator\">:</span> MouseEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    clickEvent<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">onUpdateRandomValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">DATA_SOURCE_SELECT_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">TOGGLE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  setupChartControls<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/area-controls.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  BaseType<span class=\"token punctuation\">,</span>\n  Selection<span class=\"token punctuation\">,</span>\n  area <span class=\"token keyword\">as</span> areaD3<span class=\"token punctuation\">,</span>\n  axisBottom<span class=\"token punctuation\">,</span>\n  axisLeft<span class=\"token punctuation\">,</span>\n  line <span class=\"token keyword\">as</span> lineD3<span class=\"token punctuation\">,</span>\n  max<span class=\"token punctuation\">,</span>\n  min<span class=\"token punctuation\">,</span>\n  scaleLinear<span class=\"token punctuation\">,</span>\n  scaleQuantize<span class=\"token punctuation\">,</span>\n  select<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n<span class=\"token keyword\">import</span> $ <span class=\"token keyword\">from</span> <span class=\"token string\">\"jquery\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"jquery-ui/themes/base/all.css\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> v1 <span class=\"token keyword\">as</span> uuidv1 <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"uuid\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"./area-chart.module.css\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VoronoiGroup <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./voronoi-group\"</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jquery-ui/ui/widgets/tooltip\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">filterBlackOpacity</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  deviation<span class=\"token punctuation\">,</span>\n  id<span class=\"token punctuation\">,</span>\n  slope<span class=\"token punctuation\">,</span>\n  svg<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  deviation<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  slope<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  svg<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> defs <span class=\"token operator\">=</span> svg<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"defs\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> filter <span class=\"token operator\">=</span> defs\n    <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"filter\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"500%\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">drop-shadow-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"500%\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-200%\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-200%\"</span><span class=\"token punctuation\">)</span>\n\n  filter\n    <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"feGaussianBlur\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"in\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"SourceAlpha\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"stdDeviation\"</span><span class=\"token punctuation\">,</span> deviation<span class=\"token punctuation\">)</span>\n\n  filter<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"feOffset\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dx\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dy\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  filter\n    <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"feComponentTransfer\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"feFuncA\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"slope\"</span><span class=\"token punctuation\">,</span> slope<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"linear\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> feMerge <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"feMerge\"</span><span class=\"token punctuation\">)</span>\n\n  feMerge<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"feMergeNode\"</span><span class=\"token punctuation\">)</span>\n\n  feMerge<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"feMergeNode\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"in\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"SourceGraphic\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ChartConfig<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">getAreaPoints</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> AreaPoint<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token function-variable function\">getChartTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getChartTitleShort</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getItemId</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>areaPoint<span class=\"token operator\">:</span> AreaPoint<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getItemTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>areaPoint<span class=\"token operator\">:</span> AreaPoint<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getItemXValue</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>areaPoint<span class=\"token operator\">:</span> AreaPoint<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span>\n  <span class=\"token function-variable function\">getItemYValue</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>areaPoint<span class=\"token operator\">:</span> AreaPoint<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span>\n  <span class=\"token function-variable function\">getRootElId</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getXAxisFormat</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>record<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">{</span> <span class=\"token function-variable function\">valueOf</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getYAxisFormat</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>record<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">{</span> <span class=\"token function-variable function\">valueOf</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">BaseChart</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">refresh</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  <span class=\"token function-variable function\">tearDown</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  <span class=\"token function-variable function\">toggleVoronoi</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CommonSelection<span class=\"token operator\">&lt;</span>El <span class=\"token keyword\">extends</span> BaseType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> Selection<span class=\"token operator\">&lt;</span>\n  El<span class=\"token punctuation\">,</span>\n  <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span>\n  HTMLElement<span class=\"token punctuation\">,</span>\n  <span class=\"token builtin\">unknown</span>\n<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ChartElements<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> Readonly<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n  areaSel<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGPathElement<span class=\"token operator\">></span>\n  backgroundBands<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token operator\">></span>\n  chartTitleSel<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGTextElement<span class=\"token operator\">></span>\n  clipRect<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGRectElement<span class=\"token operator\">></span>\n  clipTopRect<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGRectElement<span class=\"token operator\">></span>\n  lineSel<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGPathElement<span class=\"token operator\">></span>\n  svg<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGSVGElement<span class=\"token operator\">></span>\n  svgG<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token operator\">></span>\n  voronoiGroup<span class=\"token operator\">:</span> VoronoiGroup<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span>\n  xAxisSel<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token operator\">></span>\n  yAxisSel<span class=\"token operator\">:</span> CommonSelection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AreaChart<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BaseChart</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> config<span class=\"token operator\">:</span> ChartConfig<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> svgOpacityFilter<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> elements<span class=\"token operator\">:</span> ChartElements<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>chartConfig<span class=\"token operator\">:</span> ChartConfig<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>config <span class=\"token operator\">=</span> chartConfig\n\n    <span class=\"token keyword\">const</span> rootElId <span class=\"token operator\">=</span> chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getRootElId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> svg <span class=\"token operator\">=</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">#</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rootElId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"svg\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> svgG <span class=\"token operator\">=</span> svg<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>areaChart<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> backgroundBands <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> chartTitleSel <span class=\"token operator\">=</span> svgG\n      <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>chartTitle<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text-anchor\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"middle\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"font-weight\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bold\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> xAxisSel <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> yAxisSel <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> lineSel <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> areaSel <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> voronoiGroup <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VoronoiGroup<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span>svgG<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> clipRect <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clipPath\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"clip\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rect\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// This is exclusively for clipping the vertical axis</span>\n    <span class=\"token keyword\">const</span> clipTopRect <span class=\"token operator\">=</span> svgG\n      <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clipPath\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"clip-top\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rect\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>svgOpacityFilter <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">opacity-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">uuidv1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n\n    <span class=\"token function\">filterBlackOpacity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      deviation<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      id<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>svgOpacityFilter<span class=\"token punctuation\">,</span>\n      slope<span class=\"token operator\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>\n      svg<span class=\"token operator\">:</span> svgG<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elements <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      areaSel<span class=\"token punctuation\">,</span>\n      backgroundBands<span class=\"token punctuation\">,</span>\n      chartTitleSel<span class=\"token punctuation\">,</span>\n      clipRect<span class=\"token punctuation\">,</span>\n      clipTopRect<span class=\"token punctuation\">,</span>\n      lineSel<span class=\"token punctuation\">,</span>\n      svg<span class=\"token punctuation\">,</span>\n      svgG<span class=\"token punctuation\">,</span>\n      voronoiGroup<span class=\"token punctuation\">,</span>\n      xAxisSel<span class=\"token punctuation\">,</span>\n      yAxisSel<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleWindowResize<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generic-function\"><span class=\"token function\">renderChart</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>chartConfig<span class=\"token operator\">:</span> ChartConfig<span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AreaChart</span><span class=\"token punctuation\">(</span>chartConfig<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span>cancelAnimation<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span>cancelAnimation<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">tearDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleWindowResize<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">toggleVoronoi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">.</span>voronoiGroup<span class=\"token punctuation\">.</span><span class=\"token function\">toggleVoronoi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>cancelAnimation<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> rootElId <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span><span class=\"token function\">getRootElId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>rootElId<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLElement\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> isSmallDevice <span class=\"token operator\">=</span> width <span class=\"token operator\">&lt;</span> <span class=\"token number\">500</span>\n    <span class=\"token keyword\">const</span> animationDuration <span class=\"token operator\">=</span> cancelAnimation <span class=\"token operator\">||</span> isSmallDevice <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> <span class=\"token number\">1000</span>\n\n    <span class=\"token keyword\">const</span> margin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      bottom<span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> isSmallDevice <span class=\"token operator\">?</span> <span class=\"token number\">50</span> <span class=\"token operator\">:</span> <span class=\"token number\">70</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> isSmallDevice <span class=\"token operator\">?</span> <span class=\"token number\">10</span> <span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n      top<span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> innerWidth <span class=\"token operator\">=</span> width <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>left <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>right\n    <span class=\"token keyword\">const</span> height <span class=\"token operator\">=</span> <span class=\"token number\">400</span> <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>top <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>bottom\n\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> config<span class=\"token operator\">:</span> chartConfig <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n\n    <span class=\"token keyword\">const</span> areaPoints <span class=\"token operator\">=</span> chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getAreaPoints</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> tooltipItemClass <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">tooltip-item-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">uuidv1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token keyword\">const</span> pointClassPrefix <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">point-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">uuidv1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token template-punctuation string\">`</span></span>\n\n    <span class=\"token keyword\">const</span> titleYOffset <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">15</span>\n    <span class=\"token keyword\">const</span> axisTickSize <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      elements<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        areaSel<span class=\"token punctuation\">,</span>\n        backgroundBands<span class=\"token punctuation\">,</span>\n        chartTitleSel<span class=\"token punctuation\">,</span>\n        clipRect<span class=\"token punctuation\">,</span>\n        clipTopRect<span class=\"token punctuation\">,</span>\n        lineSel<span class=\"token punctuation\">,</span>\n        svg<span class=\"token punctuation\">,</span>\n        svgG<span class=\"token punctuation\">,</span>\n        voronoiGroup<span class=\"token punctuation\">,</span>\n        xAxisSel<span class=\"token punctuation\">,</span>\n        yAxisSel<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n\n    svg\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">,</span> height <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>top <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>bottom<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">,</span> innerWidth <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>left <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span>\n\n    svgG<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>margin<span class=\"token punctuation\">.</span>left<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>margin<span class=\"token punctuation\">.</span>top<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n    chartTitleSel\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>left<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>titleYOffset<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        isSmallDevice\n          <span class=\"token operator\">?</span> chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getChartTitleShort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token operator\">:</span> chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getChartTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> xMax <span class=\"token operator\">=</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>areaPoints<span class=\"token punctuation\">,</span> chartConfig<span class=\"token punctuation\">.</span>getItemXValue<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">number</span>\n    <span class=\"token keyword\">const</span> xMin <span class=\"token operator\">=</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>areaPoints<span class=\"token punctuation\">,</span> chartConfig<span class=\"token punctuation\">.</span>getItemXValue<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">number</span>\n\n    <span class=\"token keyword\">const</span> yMax <span class=\"token operator\">=</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>areaPoints<span class=\"token punctuation\">,</span> chartConfig<span class=\"token punctuation\">.</span>getItemYValue<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">number</span>\n    <span class=\"token keyword\">const</span> yMin <span class=\"token operator\">=</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>areaPoints<span class=\"token punctuation\">,</span> chartConfig<span class=\"token punctuation\">.</span>getItemYValue<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">number</span>\n\n    <span class=\"token keyword\">const</span> xScale <span class=\"token operator\">=</span> <span class=\"token function\">scaleLinear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">domain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>xMin<span class=\"token punctuation\">,</span> xMax<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> innerWidth<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> yScale <span class=\"token operator\">=</span> <span class=\"token function\">scaleLinear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">domain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>yMax <span class=\"token operator\">+</span> <span class=\"token number\">0.05</span><span class=\"token punctuation\">,</span> yMin <span class=\"token operator\">-</span> <span class=\"token number\">0.05</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">extractXScale</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>areaPoint<span class=\"token operator\">:</span> AreaPoint<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      <span class=\"token function\">xScale</span><span class=\"token punctuation\">(</span>chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getItemXValue</span><span class=\"token punctuation\">(</span>areaPoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">extractYScale</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>areaPoint<span class=\"token operator\">:</span> AreaPoint<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      <span class=\"token function\">yScale</span><span class=\"token punctuation\">(</span>chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getItemYValue</span><span class=\"token punctuation\">(</span>areaPoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getSmallDeviceTicksScale</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      <span class=\"token function\">scaleQuantize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">domain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> rangeIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> rangeIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> ticks <span class=\"token operator\">=</span> isSmallDevice <span class=\"token operator\">?</span> <span class=\"token function\">getSmallDeviceTicksScale</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n\n    <span class=\"token keyword\">const</span> xAxisFormat <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span><span class=\"token function\">getXAxisFormat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> yAxisFormat <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span><span class=\"token function\">getYAxisFormat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> xAxis <span class=\"token operator\">=</span> <span class=\"token function\">axisBottom</span><span class=\"token punctuation\">(</span>xScale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">tickFormat</span><span class=\"token punctuation\">(</span>xAxisFormat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ticks</span><span class=\"token punctuation\">(</span>ticks<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> yAxis <span class=\"token operator\">=</span> <span class=\"token function\">axisLeft</span><span class=\"token punctuation\">(</span>yScale<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">tickFormat</span><span class=\"token punctuation\">(</span>yAxisFormat<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">tickSize</span><span class=\"token punctuation\">(</span>axisTickSize<span class=\"token punctuation\">)</span>\n\n    xAxisSel\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styles<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styles<span class=\"token punctuation\">.</span>axis<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(0,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>height<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>xAxis<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dy\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1.25em\"</span><span class=\"token punctuation\">)</span>\n\n    yAxisSel\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styles<span class=\"token punctuation\">.</span>y<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styles<span class=\"token punctuation\">.</span>axis<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clip-path\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url(#clip-top)\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">transition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">duration</span><span class=\"token punctuation\">(</span>animationDuration<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>yAxis<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dx\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-.25em\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> area <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">areaD3</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span>extractXScale<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">y0</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">y1</span><span class=\"token punctuation\">(</span>extractYScale<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> line <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">lineD3</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>AreaPoint<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span>extractXScale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">y</span><span class=\"token punctuation\">(</span>extractYScale<span class=\"token punctuation\">)</span>\n\n    lineSel\n      <span class=\"token punctuation\">.</span><span class=\"token function\">datum</span><span class=\"token punctuation\">(</span>areaPoints<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clip-path\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url(#clip)\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>line<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">transition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">duration</span><span class=\"token punctuation\">(</span>animationDuration<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span> line<span class=\"token punctuation\">)</span>\n\n    clipRect<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">,</span> innerWidth<span class=\"token punctuation\">)</span>\n\n    clipTopRect\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">,</span> innerWidth<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"translate(-50,-5)\"</span><span class=\"token punctuation\">)</span>\n\n    areaSel\n      <span class=\"token punctuation\">.</span><span class=\"token function\">datum</span><span class=\"token punctuation\">(</span>areaPoints<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>area<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clip-path\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url(#clip)\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">transition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">duration</span><span class=\"token punctuation\">(</span>animationDuration<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span> area<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mouseenter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> areaPoint<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> AreaPoint<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pointClassPrefix<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getItemId</span><span class=\"token punctuation\">(</span>areaPoint<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"display\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"block\"</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mouseleave</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> areaPoint<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> AreaPoint<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pointClassPrefix<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getItemId</span><span class=\"token punctuation\">(</span>areaPoint<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"display\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"none\"</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> bandsNumber <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n    <span class=\"token keyword\">const</span> bandsData <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> bandsNumber <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> bandIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> bandIndex\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> bandHeight <span class=\"token operator\">=</span> height <span class=\"token operator\">/</span> bandsNumber\n\n    <span class=\"token keyword\">const</span> bands <span class=\"token operator\">=</span> backgroundBands<span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rect\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>bandsData<span class=\"token punctuation\">)</span>\n\n    bands<span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rect\"</span><span class=\"token punctuation\">)</span>\n    bands<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    backgroundBands\n      <span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">selectAll</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGRectElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rect\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clip-path\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url(#clip)\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">,</span> innerWidth<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fill\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> bandIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        bandIndex <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"#f7f7f7\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"#ffffff\"</span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"backgroundBands\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">,</span> bandHeight<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>band<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> band <span class=\"token operator\">*</span> bandHeight<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> circleData <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>areaPoints<span class=\"token punctuation\">)</span>\n\n    circleData<span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">)</span>\n    circleData<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    svgG\n      <span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">selectAll</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGCircleElement<span class=\"token punctuation\">,</span> AreaPoint<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"5px\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"filter\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(#drop-shadow-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>svgOpacityFilter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>areaPoint<span class=\"token operator\">:</span> AreaPoint<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">extractXScale</span><span class=\"token punctuation\">(</span>areaPoint<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">extractYScale</span><span class=\"token punctuation\">(</span>areaPoint<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>areaPoint<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n            styles<span class=\"token punctuation\">.</span>point\n          <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tooltipItemClass<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pointClassPrefix<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chartConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getItemId</span><span class=\"token punctuation\">(</span>\n            areaPoint\n          <span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mouseenter\"</span><span class=\"token punctuation\">,</span> mouseenter<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mouseleave\"</span><span class=\"token punctuation\">,</span> mouseleave<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">,</span> chartConfig<span class=\"token punctuation\">.</span>getItemTitle<span class=\"token punctuation\">)</span>\n\n    voronoiGroup<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      animationDuration<span class=\"token punctuation\">,</span>\n      boundaries<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token operator\">-</span>margin<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">-</span>margin<span class=\"token punctuation\">.</span>top<span class=\"token punctuation\">,</span>\n        innerWidth <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">,</span>\n        height <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>bottom<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      className<span class=\"token operator\">:</span> tooltipItemClass<span class=\"token punctuation\">,</span>\n      clipPath<span class=\"token operator\">:</span> <span class=\"token string\">\"url(#clip)\"</span><span class=\"token punctuation\">,</span>\n      extractXScale<span class=\"token punctuation\">,</span>\n      extractYScale<span class=\"token punctuation\">,</span>\n      filter<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">url(#drop-shadow-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>svgOpacityFilter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      getItemId<span class=\"token operator\">:</span> chartConfig<span class=\"token punctuation\">.</span>getItemId<span class=\"token punctuation\">,</span>\n      getTitle<span class=\"token operator\">:</span> chartConfig<span class=\"token punctuation\">.</span>getItemTitle<span class=\"token punctuation\">,</span>\n      mouseenter<span class=\"token punctuation\">,</span>\n      mouseleave<span class=\"token punctuation\">,</span>\n      points<span class=\"token operator\">:</span> areaPoints<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tooltipItemClass<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      track<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> <span class=\"token function-variable function\">handleWindowResize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> ChartConfig<span class=\"token punctuation\">,</span> AreaChart <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/chart/area-chart.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  BaseType<span class=\"token punctuation\">,</span>\n  Selection<span class=\"token punctuation\">,</span>\n  color <span class=\"token keyword\">as</span> colorD3<span class=\"token punctuation\">,</span>\n  scaleOrdinal<span class=\"token punctuation\">,</span>\n  schemePastel2<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Delaunay <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3-delaunay\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">HAS_VORONOI_ATTR</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">VORONOI_ITEM</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../ui-constants\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"./area-chart.module.css\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">RenderOpts<span class=\"token operator\">&lt;</span>Point<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  animationDuration<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  boundaries<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n  className<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  clipPath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">extractXScale</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>point<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span>\n  <span class=\"token function-variable function\">extractYScale</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>point<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span>\n  filter<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getItemId</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>point<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>point<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">mouseenter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>_<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> point<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  <span class=\"token function-variable function\">mouseleave</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>_<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> point<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  points<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">VoronoiGroup<span class=\"token operator\">&lt;</span>Point<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> voronoiGroup<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>\n    SVGGElement<span class=\"token punctuation\">,</span>\n    <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span>\n    BaseType<span class=\"token punctuation\">,</span>\n    <span class=\"token builtin\">unknown</span>\n  <span class=\"token operator\">></span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    hasVoronoi<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n    parent<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>voronoiGroup <span class=\"token operator\">=</span> parent<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">toggleVoronoi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hasVoronoi <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hasVoronoi\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setVoronoi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    animationDuration<span class=\"token punctuation\">,</span>\n    boundaries<span class=\"token punctuation\">,</span>\n    className<span class=\"token punctuation\">,</span>\n    clipPath<span class=\"token punctuation\">,</span>\n    extractXScale<span class=\"token punctuation\">,</span>\n    extractYScale<span class=\"token punctuation\">,</span>\n    filter<span class=\"token punctuation\">,</span>\n    getItemId<span class=\"token punctuation\">,</span>\n    getTitle<span class=\"token punctuation\">,</span>\n    mouseenter<span class=\"token punctuation\">,</span>\n    mouseleave<span class=\"token punctuation\">,</span>\n    points<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RenderOpts<span class=\"token operator\">&lt;</span>Point<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> voronoiGroup <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">const</span> voronoiData <span class=\"token operator\">=</span> voronoiGroup\n      <span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">selectAll</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGPathElement<span class=\"token punctuation\">,</span> Point<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getItemId</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    voronoiData<span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n    voronoiData<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> colorScale <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">scaleOrdinal</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>schemePastel2<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> voronoi <span class=\"token operator\">=</span> Delaunay<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">,</span> extractXScale<span class=\"token punctuation\">,</span> extractYScale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">voronoi</span><span class=\"token punctuation\">(</span>\n      boundaries\n    <span class=\"token punctuation\">)</span>\n\n    voronoiGroup\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clip-path\"</span><span class=\"token punctuation\">,</span> clipPath<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>voronoi<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">selectAll</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGPathElement<span class=\"token punctuation\">,</span> Point<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fill\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> itemId <span class=\"token operator\">=</span> <span class=\"token function\">getItemId</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> colorHex <span class=\"token operator\">=</span> <span class=\"token function\">colorScale</span><span class=\"token punctuation\">(</span>itemId<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> itemColor <span class=\"token operator\">=</span> <span class=\"token function\">colorD3</span><span class=\"token punctuation\">(</span>colorHex<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span>\n\n        itemColor<span class=\"token punctuation\">.</span>opacity <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span>\n\n        <span class=\"token keyword\">return</span> itemColor<span class=\"token punctuation\">.</span><span class=\"token function\">formatRgb</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mouseenter\"</span><span class=\"token punctuation\">,</span> mouseenter<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mouseleave\"</span><span class=\"token punctuation\">,</span> mouseleave<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> className<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token constant\">VORONOI_ITEM</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> itemIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> itemIndex<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">,</span> getTitle<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"filter\"</span><span class=\"token punctuation\">,</span> filter<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">transition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">duration</span><span class=\"token punctuation\">(</span>animationDuration<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> pointIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> voronoi<span class=\"token punctuation\">.</span><span class=\"token function\">renderCell</span><span class=\"token punctuation\">(</span>pointIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setVoronoi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">setVoronoi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> hasVoronoi <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      voronoiGroup<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">const</span> currentClass <span class=\"token operator\">=</span> voronoiGroup<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> showVoronoi <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> styles\n\n    <span class=\"token keyword\">const</span> currentClassWithoutVoronoi <span class=\"token operator\">=</span> currentClass\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>showVoronoi<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> newClass <span class=\"token operator\">=</span> hasVoronoi\n      <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentClassWithoutVoronoi<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>showVoronoi<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token operator\">:</span> currentClassWithoutVoronoi\n\n    voronoiGroup<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> newClass<span class=\"token punctuation\">)</span>\n\n    voronoiGroup<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token constant\">HAS_VORONOI_ATTR</span><span class=\"token punctuation\">,</span> hasVoronoi<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> VoronoiGroup <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/chart/voronoi-group.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ChartConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./chart/area-chart\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">ConfigResult<span class=\"token operator\">&lt;</span>ConfigData<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  config<span class=\"token operator\">:</span> ChartConfig<span class=\"token operator\">&lt;</span>ConfigData<span class=\"token operator\">></span>\n  <span class=\"token function-variable function\">onUpdateRandomValue</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">enum</span> DataSource <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">INCOME</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"income\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">NOBEL_PRIZES</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"nobel-prizes\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/config-types.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> format <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ChartConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../chart/area-chart\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ConfigResult <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../config-types\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../ui-constants\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> IncomeItem <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./income-item-model\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Config</span> <span class=\"token operator\">=</span> ChartConfig<span class=\"token operator\">&lt;</span>IncomeItem<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">const</span> getItemXValue<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getItemXValue\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>incomeItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  incomeItem<span class=\"token punctuation\">.</span><span class=\"token function\">getYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> getItemYValue<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getItemYValue\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>incomeItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  incomeItem<span class=\"token punctuation\">.</span><span class=\"token function\">getNormalizedValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> getItemId<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getItemId\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>incomeItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>incomeItem<span class=\"token punctuation\">.</span>source<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>incomeItem<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token keyword\">const</span> getItemTitle<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getItemTitle\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>incomeItem<span class=\"token operator\">:</span> IncomeItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  incomeItem<span class=\"token punctuation\">.</span><span class=\"token function\">getSummary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> chartTitle <span class=\"token operator\">=</span> <span class=\"token string\">\"Share of top decile [aka top 10%] in national income\"</span>\n<span class=\"token keyword\">const</span> chartTitleShort <span class=\"token operator\">=</span> chartTitle<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" [aka top 10%]\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">IncomeResult</span> <span class=\"token operator\">=</span> ConfigResult<span class=\"token operator\">&lt;</span>IncomeItem<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">const</span> getIncomeConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>IncomeResult<span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> dataPoints <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> IncomeItem<span class=\"token punctuation\">.</span><span class=\"token function\">fetchAndCreateCollection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">getAreaPoints</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> dataPoints<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getChartTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chartTitle<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getChartTitleShort</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chartTitleShort<span class=\"token punctuation\">,</span>\n    getItemId<span class=\"token punctuation\">,</span>\n    getItemTitle<span class=\"token punctuation\">,</span>\n    getItemXValue<span class=\"token punctuation\">,</span>\n    getItemYValue<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getRootElId</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getXAxisFormat</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".0f\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getXAxisLabel</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getYAxisFormat</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".0%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getYAxisLabel</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onUpdateRandomValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> <span class=\"token number\">50</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> randomIndex <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> dataPoints<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> randomChange <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.5</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n      dataPoints<span class=\"token punctuation\">[</span>randomIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">changePercentage</span><span class=\"token punctuation\">(</span>randomChange<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    config<span class=\"token punctuation\">,</span>\n    onUpdateRandomValue<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> getIncomeConfig <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/sources/income-config.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> csv <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> DataSource <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../config-types\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">IncomeItemBase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  percent<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  year<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">IncomeItemData</span> <span class=\"token operator\">=</span> Omit<span class=\"token operator\">&lt;</span>IncomeItemBase<span class=\"token punctuation\">,</span> <span class=\"token string\">\"percent\"</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span>\n  percentage<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  pointIndex<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IncomeItem</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> source<span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">INCOME</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> incomeItemData<span class=\"token operator\">:</span> IncomeItemData\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>incomeItemData<span class=\"token operator\">:</span> IncomeItemData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>source <span class=\"token operator\">=</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">INCOME</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incomeItemData <span class=\"token operator\">=</span> incomeItemData\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incomeItemData<span class=\"token punctuation\">.</span>percentage <span class=\"token operator\">=</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incomeItemData<span class=\"token punctuation\">.</span>percentage<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token function\">fetchAndCreateCollection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>IncomeItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token punctuation\">(</span><span class=\"token function\">csv</span><span class=\"token punctuation\">(</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">ROOT_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">data/d3js/area/data.csv</span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> IncomeItemBase<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">const</span> incomeItemsData <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span>point<span class=\"token punctuation\">,</span> pointIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>point<span class=\"token punctuation\">,</span>\n      percentage<span class=\"token operator\">:</span> point<span class=\"token punctuation\">.</span>percent<span class=\"token punctuation\">,</span>\n      pointIndex<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> incomeItemsData<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span>incomeItemData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IncomeItem</span><span class=\"token punctuation\">(</span>incomeItemData<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">getYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incomeItemData<span class=\"token punctuation\">.</span>year\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">changePercentage</span><span class=\"token punctuation\">(</span>percentageChange<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> valueWithLowerBound <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incomeItemData<span class=\"token punctuation\">.</span>percentage <span class=\"token operator\">+</span> percentageChange<span class=\"token punctuation\">,</span>\n      <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> newValue <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> valueWithLowerBound<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incomeItemData<span class=\"token punctuation\">.</span>percentage <span class=\"token operator\">=</span> newValue\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">getNormalizedValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incomeItemData<span class=\"token punctuation\">.</span>percentage <span class=\"token operator\">/</span> <span class=\"token number\">100</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incomeItemData<span class=\"token punctuation\">.</span>pointIndex\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">getSummary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> incomeItemData <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Year: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n      incomeItemData<span class=\"token punctuation\">.</span>year\n    <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, Percentage: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>incomeItemData<span class=\"token punctuation\">.</span>percentage<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">%</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> IncomeItem <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/sources/income-item-model.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> format<span class=\"token punctuation\">,</span> json <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ChartConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../chart/area-chart\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ConfigResult<span class=\"token punctuation\">,</span> DataSource <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../config-types\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../ui-constants\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NobelPrizeResponse</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  laureates<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n    birth<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> date<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span>\n    id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    nobelPrizes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> awardYear<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NobelPrizeItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  birthYear<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  prizeYear<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  source<span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">NOBEL_PRIZES</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Config</span> <span class=\"token operator\">=</span> ChartConfig<span class=\"token operator\">&lt;</span>NobelPrizeItem<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">const</span> getItemXValue<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getItemXValue\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> laureate<span class=\"token punctuation\">.</span>birthYear\n<span class=\"token keyword\">const</span> getItemYValue<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getItemYValue\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> laureate<span class=\"token punctuation\">.</span>prizeYear\n<span class=\"token keyword\">const</span> getItemId<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getItemId\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>laureate<span class=\"token punctuation\">.</span>source<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>laureate<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token keyword\">const</span> getItemTitle<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getItemTitle\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"nobel-prizes\"</span>\n<span class=\"token keyword\">const</span> chartTitleShort <span class=\"token operator\">=</span> <span class=\"token string\">\"Nobel Prizes (subset)\"</span>\n<span class=\"token keyword\">const</span> chartTitle <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chartTitleShort<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> year of birth (x) vs. year of award (y)</span><span class=\"token template-punctuation string\">`</span></span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NobelPrizesResult</span> <span class=\"token operator\">=</span> ConfigResult<span class=\"token operator\">&lt;</span>NobelPrizeItem<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">const</span> getNobelPrizesConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>NobelPrizesResult<span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> initialData <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">json</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"https://api.nobelprize.org/2.1/laureates?limit=100\"</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> NobelPrizeResponse\n\n  <span class=\"token keyword\">const</span> birthYears <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> dataPoints<span class=\"token operator\">:</span> NobelPrizeItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> initialData<span class=\"token punctuation\">.</span>laureates\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> laureate<span class=\"token punctuation\">.</span>birth <span class=\"token operator\">&amp;&amp;</span> laureate<span class=\"token punctuation\">.</span>nobelPrizes<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>laureate<span class=\"token punctuation\">.</span>nobelPrizes <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>laureate<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> birthYear <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>birthYears<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>birthYear<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n      <span class=\"token punctuation\">}</span>\n\n      birthYears<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>birthYear<span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">const</span> newItem<span class=\"token operator\">:</span> NobelPrizeItem <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        birthYear<span class=\"token punctuation\">,</span>\n        id<span class=\"token operator\">:</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        prizeYear<span class=\"token operator\">:</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">.</span>nobelPrizes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>awardYear<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        source<span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token constant\">NOBEL_PRIZES</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> newItem\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>laureate<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>laureate<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> NobelPrizeItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n  dataPoints<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span>laureateA<span class=\"token punctuation\">,</span> laureateB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> laureateA<span class=\"token punctuation\">.</span>birthYear <span class=\"token operator\">-</span> laureateB<span class=\"token punctuation\">.</span>birthYear\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">getAreaPoints</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> dataPoints<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getChartTitle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chartTitle<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getChartTitleShort</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chartTitleShort<span class=\"token punctuation\">,</span>\n    getItemId<span class=\"token punctuation\">,</span>\n    getItemTitle<span class=\"token punctuation\">,</span>\n    getItemXValue<span class=\"token punctuation\">,</span>\n    getItemYValue<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getRootElId</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getXAxisFormat</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".0f\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getYAxisFormat</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".0f\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onUpdateRandomValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> <span class=\"token number\">50</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> randomIndex <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> dataPoints<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> randomChange <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.5</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n      dataPoints<span class=\"token punctuation\">[</span>randomIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>prizeYear <span class=\"token operator\">=</span>\n        dataPoints<span class=\"token punctuation\">[</span>randomIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>prizeYear <span class=\"token operator\">+</span> randomChange\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token builtin\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    config<span class=\"token punctuation\">,</span>\n    onUpdateRandomValue<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> getNobelPrizesConfig<span class=\"token punctuation\">,</span> NobelPrizeItem <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/sources/nobel-prizes-config.ts"},{"content":"<span class=\"token keyword\">const</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"chart\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DATA_SOURCE_SELECT_ID</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"data-source-select\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TOGGLE_BUTTON_ID</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"toggle-voronoi\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">UPDATE_BUTTON_ID</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"update-voronoi\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">VORONOI_ITEM</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"data-voronoi-item\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">HAS_VORONOI_ATTR</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"data-has-voronoi\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">DATA_SOURCE_SELECT_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">HAS_VORONOI_ATTR</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">TOGGLE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">VORONOI_ITEM</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/area/ui-constants.ts"}],"page":{"content":"<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> DemoPageProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/common\"</span>\n\n<span class=\"token keyword\">import</span> Demo <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/components/demo\"</span>\n\n<span class=\"token keyword\">import</span> main<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">DATA_SOURCE_SELECT_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">TOGGLE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_BUTTON_ID</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/demos/area/area\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/demos/area/area-page.module.css\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Area</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> DemoPageProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Demo</span></span> <span class=\"token attr-name\">main</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>main<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">pageContext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>pageContext<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-select<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">DATA_SOURCE_SELECT_ID</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn btn-info<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">TOGGLE_BUTTON_ID</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Toggle Voronoi\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn btn-success<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">UPDATE_BUTTON_ID</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Update Random Values\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Demo</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Area\n","type":"tsx"}},"key":"area"},"meta":{"description":"Area Chart example, using D3.js, with a transparent Voronoi overlay that gives the functionality know fast the nearest point to the mouse."}}},
    "staticQueryHashes": []}