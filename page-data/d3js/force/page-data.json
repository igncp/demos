{
    "componentChunkName": "component---src-pages-d-3-js-force-tsx",
    "path": "/d3js/force/",
    "result": {"pageContext":{"demoInfo":{"dataFiles":["links.json","nodes.json"],"docs":[["d3-force API reference","https://github.com/d3/d3-force#api-reference"],["d3-force Types","https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/d3-force/index.d.ts"]],"isCompleted":true,"name":"Force","notes":[],"sources":["http://codepen.io/MidnightLightning/pen/dclbA"],"summary":[],"category":"d3js","files":{"demoCSS":[{"content":"<span class=\"token selector\">.form </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token selector\">select </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline-block<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/force/force-page.module.css"},{"content":"<span class=\"token selector\">.forceChart </span><span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.linkCurved </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> #666<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 1.5px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">circle </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> #9c9<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> #fff<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 1.5px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">text </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> #999<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font</span><span class=\"token punctuation\">:</span> 20px sans-serif<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.node text </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> #000<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 12px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/force/force.module.css"}],"demoTS":[{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ForceChart <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./chart/force-chart\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getChartConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./force-config\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> setupControls <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./force-controls\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fetchForceData <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./force-data\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">RADIUS_SELECT_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ui-constants\"</span>\n\n<span class=\"token comment\">// @TODO: refactors, responsive, interactions</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">main</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> forceData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchForceData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> chartConfig <span class=\"token operator\">=</span> <span class=\"token function\">getChartConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> forceData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ForceChart</span><span class=\"token punctuation\">(</span>chartConfig<span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">setupControls</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    initialRadiusValue<span class=\"token operator\">:</span> ForceChart<span class=\"token punctuation\">.</span>defaultRadius<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">onRadiusChange</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      chart<span class=\"token punctuation\">.</span><span class=\"token function\">setRadius</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">RADIUS_SELECT_ID</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> main\n","filePath":"src/demos/force/force.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  Selection<span class=\"token punctuation\">,</span>\n  Simulation<span class=\"token punctuation\">,</span>\n  SimulationLinkDatum<span class=\"token punctuation\">,</span>\n  SimulationNodeDatum<span class=\"token punctuation\">,</span>\n  forceCenter<span class=\"token punctuation\">,</span>\n  forceCollide <span class=\"token keyword\">as</span> forceCollideD3<span class=\"token punctuation\">,</span>\n  forceLink <span class=\"token keyword\">as</span> forceLinkD3<span class=\"token punctuation\">,</span>\n  forceManyBody<span class=\"token punctuation\">,</span>\n  forceSimulation<span class=\"token punctuation\">,</span>\n  select<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"../force.module.css\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BackgroundDrag<span class=\"token punctuation\">,</span> CustomDragEvent<span class=\"token punctuation\">,</span> NodeDrag <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./force-drag\"</span>\n\n<span class=\"token keyword\">const</span> settings <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  defaultTextOpacity<span class=\"token operator\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>\n  strength<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n  textDY<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getNodeId</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">:</span> SimulationNodeDatum<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">node-text-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>node<span class=\"token punctuation\">.</span>index<span class=\"token operator\">!</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ChartConfig<span class=\"token operator\">&lt;</span>NodeData<span class=\"token punctuation\">,</span> LinkData<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  forceData<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> links<span class=\"token operator\">:</span> LinkData<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> nodes<span class=\"token operator\">:</span> NodeData<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">getNodeText</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>node<span class=\"token operator\">:</span> NodeData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">string</span>\n  height<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  radius<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  rootElId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ChartElements</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  svg<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGSVGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n  svgDrag<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n  svgG<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ForceChart<span class=\"token operator\">&lt;</span>NodeData<span class=\"token punctuation\">,</span> LinkData <span class=\"token keyword\">extends</span> SimulationLinkDatum<span class=\"token operator\">&lt;</span>NodeData<span class=\"token operator\">>></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> defaultRadius <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> backgroundDrag<span class=\"token operator\">:</span> BackgroundDrag<span class=\"token operator\">&lt;</span>SVGSVGElement<span class=\"token punctuation\">,</span> SVGGElement<span class=\"token operator\">></span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> config<span class=\"token operator\">:</span> ChartConfig<span class=\"token operator\">&lt;</span>NodeData<span class=\"token punctuation\">,</span> LinkData<span class=\"token operator\">></span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> elements<span class=\"token operator\">:</span> ChartElements\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> simulation<span class=\"token operator\">:</span> Simulation<span class=\"token operator\">&lt;</span>NodeData<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n  <span class=\"token keyword\">private</span> state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    radius<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> forceNodes<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>NodeData <span class=\"token operator\">&amp;</span> SimulationNodeDatum<span class=\"token operator\">></span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> forceLinks<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>\n    SimulationLinkDatum<span class=\"token operator\">&lt;</span>NodeData <span class=\"token operator\">&amp;</span> SimulationNodeDatum<span class=\"token operator\">></span>\n  <span class=\"token operator\">></span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>config<span class=\"token operator\">:</span> ChartConfig<span class=\"token operator\">&lt;</span>NodeData<span class=\"token punctuation\">,</span> LinkData<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>config <span class=\"token operator\">=</span> config\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      radius<span class=\"token operator\">:</span> config<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">??</span> ForceChart<span class=\"token punctuation\">.</span>defaultRadius<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> forceData<span class=\"token punctuation\">,</span> rootElId <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> config\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> links<span class=\"token punctuation\">,</span> nodes <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> forceData\n\n    <span class=\"token keyword\">const</span> rootEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>rootElId<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLElement\n\n    rootEl<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>forceChart<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> svg <span class=\"token operator\">=</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">#</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rootElId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"svg\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> svgDrag <span class=\"token operator\">=</span> svg<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> svgG <span class=\"token operator\">=</span> svgDrag<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elements <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> svg<span class=\"token punctuation\">,</span> svgDrag<span class=\"token punctuation\">,</span> svgG <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>backgroundDrag <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BackgroundDrag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      svg<span class=\"token punctuation\">,</span>\n      svgDrag<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> forceLink <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">forceLinkD3</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>NodeData<span class=\"token punctuation\">,</span> LinkData<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">links</span><span class=\"token punctuation\">(</span>\n      links<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>link <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> forceCollide <span class=\"token operator\">=</span> <span class=\"token function\">forceCollideD3</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">strength</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">iterations</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> simulation <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">forceSimulation</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>NodeData<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n      nodes<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>node <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">force</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"link\"</span><span class=\"token punctuation\">,</span> forceLink<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">force</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"collide\"</span><span class=\"token punctuation\">,</span> forceCollide<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tick\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>simulation <span class=\"token operator\">=</span> simulation\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>forceNodes <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>simulation<span class=\"token punctuation\">.</span><span class=\"token function\">nodes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>forceLinks <span class=\"token operator\">=</span> forceLink<span class=\"token punctuation\">.</span><span class=\"token function\">links</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>backgroundDrag<span class=\"token punctuation\">.</span><span class=\"token function\">setupBackgroundDrag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleResize<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">setRadius</span><span class=\"token punctuation\">(</span>radius<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">=</span> radius\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getNodes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span> radius<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> <span class=\"token function-variable function\">handleResize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      config<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> height<span class=\"token punctuation\">,</span> rootElId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n\n    <span class=\"token keyword\">const</span> rootEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>rootElId<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLElement\n\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> width <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> rootEl<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>simulation\n      <span class=\"token punctuation\">.</span><span class=\"token function\">force</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"charge\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">forceManyBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">strength</span><span class=\"token punctuation\">(</span>settings<span class=\"token punctuation\">.</span>strength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">force</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">forceCenter</span><span class=\"token punctuation\">(</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> height <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">.</span>svg<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateLinks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateNodes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">updateLinks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      elements<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> svgG <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">const</span> linksEls <span class=\"token operator\">=</span> svgG\n      <span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">selectAll</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGPathElement<span class=\"token punctuation\">,</span> ForceChart<span class=\"token operator\">&lt;</span>NodeData<span class=\"token punctuation\">,</span> LinkData<span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token string\">\"forceLinks\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styles<span class=\"token punctuation\">.</span>linkCurved<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>forceLinks<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">type</span> <span class=\"token class-name\">ForceNode</span> <span class=\"token operator\">=</span> NodeData <span class=\"token operator\">&amp;</span> SimulationNodeDatum\n\n    linksEls\n      <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">append</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGPathElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>linksEls<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>forceLink<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> source<span class=\"token punctuation\">,</span> target <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> forceLink <span class=\"token keyword\">as</span> <span class=\"token punctuation\">{</span>\n          source<span class=\"token operator\">:</span> ForceNode\n          target<span class=\"token operator\">:</span> ForceNode\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">const</span> dx <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>x<span class=\"token operator\">!</span> <span class=\"token operator\">-</span> source<span class=\"token punctuation\">.</span>x<span class=\"token operator\">!</span>\n        <span class=\"token keyword\">const</span> dy <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>y<span class=\"token operator\">!</span> <span class=\"token operator\">-</span> source<span class=\"token punctuation\">.</span>y<span class=\"token operator\">!</span>\n        <span class=\"token keyword\">const</span> dr <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>dx <span class=\"token operator\">*</span> dx <span class=\"token operator\">+</span> dy <span class=\"token operator\">*</span> dy<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1.3</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">M</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>source<span class=\"token punctuation\">.</span>x<span class=\"token operator\">!</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>source<span class=\"token punctuation\">.</span>y<span class=\"token operator\">!</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">A</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dr<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dr<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 0 0,1 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>target<span class=\"token punctuation\">.</span>x<span class=\"token operator\">!</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>target<span class=\"token punctuation\">.</span>y<span class=\"token operator\">!</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>linkCurved<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"marker-end\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url(#end)\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> forceLinkIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">link-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>forceLinkIndex<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n    linksEls<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">updateNodes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">type</span> <span class=\"token class-name\">ForceNode</span> <span class=\"token operator\">=</span> ForceChart<span class=\"token operator\">&lt;</span>NodeData<span class=\"token punctuation\">,</span> LinkData<span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token string\">\"forceNodes\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      config<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> getNodeText <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      elements<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> svgG <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      forceNodes<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n\n    <span class=\"token keyword\">const</span> nodesEls <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getNodes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>forceNodes<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> textsEls <span class=\"token operator\">=</span> svgG\n      <span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">selectAll</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGTextElement<span class=\"token punctuation\">,</span> ForceNode<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>forceNodes<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">type</span> <span class=\"token class-name\">DragOpts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      dragEvent<span class=\"token operator\">:</span> CustomDragEvent\n      node<span class=\"token operator\">:</span> ForceNode\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onDrag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dragEvent<span class=\"token punctuation\">,</span> node <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> DragOpts<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">.</span>fx <span class=\"token operator\">=</span> dragEvent<span class=\"token punctuation\">.</span>x\n      node<span class=\"token punctuation\">.</span>fy <span class=\"token operator\">=</span> dragEvent<span class=\"token punctuation\">.</span>y\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onDragEnded</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dragEvent<span class=\"token punctuation\">,</span> node <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> DragOpts<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>dragEvent<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>simulation<span class=\"token punctuation\">.</span><span class=\"token function\">alphaTarget</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      node<span class=\"token punctuation\">.</span>fx <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n      node<span class=\"token punctuation\">.</span>fy <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onDragStart</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dragEvent<span class=\"token punctuation\">,</span> node <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> DragOpts<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>dragEvent<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>simulation<span class=\"token punctuation\">.</span><span class=\"token function\">alphaTarget</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">restart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      node<span class=\"token punctuation\">.</span>fx <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>x\n      node<span class=\"token punctuation\">.</span>fy <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>y\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> addInteraction <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>SVGType <span class=\"token keyword\">extends</span> <span class=\"token class-name\">SVGCircleElement</span> <span class=\"token operator\">|</span> SVGTextElement<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n      selection<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGType<span class=\"token punctuation\">,</span> ForceNode<span class=\"token punctuation\">,</span> SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> nodeDrag <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NodeDrag<span class=\"token operator\">&lt;</span>ForceNode<span class=\"token punctuation\">,</span> SVGType<span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        onDrag<span class=\"token punctuation\">,</span>\n        onDragEnded<span class=\"token punctuation\">,</span>\n        onDragStart<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      selection\n        <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mouseenter\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> forceNode<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">#</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getNodeId</span><span class=\"token punctuation\">(</span>forceNode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"opacity\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fill\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#000\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mouseleave\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> forceNode<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">#</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getNodeId</span><span class=\"token punctuation\">(</span>forceNode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"opacity\"</span><span class=\"token punctuation\">,</span> settings<span class=\"token punctuation\">.</span>defaultTextOpacity<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fill\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>nodeDrag<span class=\"token punctuation\">.</span>setupNodes<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cursor\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"pointer\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    nodesEls\n      <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>nodesEls<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cx\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>forceNode<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> forceNode<span class=\"token punctuation\">.</span>x<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cy\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>forceNode<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> forceNode<span class=\"token punctuation\">.</span>y<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fill\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>addInteraction<span class=\"token punctuation\">)</span>\n\n    textsEls\n      <span class=\"token punctuation\">.</span><span class=\"token function\">enter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>textsEls<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>getNodeText<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>forceNode<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> forceNode<span class=\"token punctuation\">.</span>x<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>forceNode<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> forceNode<span class=\"token punctuation\">.</span>y<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dy\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> settings<span class=\"token punctuation\">.</span>textDY<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> getNodeId<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"opacity\"</span><span class=\"token punctuation\">,</span> settings<span class=\"token punctuation\">.</span>defaultTextOpacity<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>addInteraction<span class=\"token punctuation\">)</span>\n\n    nodesEls<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    textsEls<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">getNodes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">type</span> <span class=\"token class-name\">ForceNode</span> <span class=\"token operator\">=</span> NodeData <span class=\"token operator\">&amp;</span> SimulationNodeDatum\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">.</span>svgG<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">selectAll</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGCircleElement<span class=\"token punctuation\">,</span> ForceNode<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> ChartConfig<span class=\"token punctuation\">,</span> ForceChart <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/force/chart/force-chart.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> D3DragEvent<span class=\"token punctuation\">,</span> Selection<span class=\"token punctuation\">,</span> drag <span class=\"token keyword\">as</span> dragD3 <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CustomDragEvent</span> <span class=\"token operator\">=</span> DragEvent <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> active<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ChartElements<span class=\"token operator\">&lt;</span>SVGType <span class=\"token keyword\">extends</span> SVGElement<span class=\"token punctuation\">,</span> SVGDrag <span class=\"token keyword\">extends</span> SVGElement<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  svg<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGType<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n  svgDrag<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGDrag<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BackgroundDrag<span class=\"token operator\">&lt;</span>SVGType <span class=\"token keyword\">extends</span> SVGElement<span class=\"token punctuation\">,</span> SVGDrag <span class=\"token keyword\">extends</span> SVGElement<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> elements<span class=\"token operator\">:</span> ChartElements<span class=\"token operator\">&lt;</span>SVGType<span class=\"token punctuation\">,</span> SVGDrag<span class=\"token operator\">></span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    dragX<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n    dragY<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>elements<span class=\"token operator\">:</span> ChartElements<span class=\"token operator\">&lt;</span>SVGType<span class=\"token punctuation\">,</span> SVGDrag<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elements <span class=\"token operator\">=</span> elements\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      dragX<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      dragY<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">setupBackgroundDrag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      elements<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> svg<span class=\"token punctuation\">,</span> svgDrag <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n      dragEvent<span class=\"token operator\">:</span> D3DragEvent<span class=\"token operator\">&lt;</span>SVGSVGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dragX <span class=\"token operator\">+=</span> dragEvent<span class=\"token punctuation\">.</span>dx\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dragY <span class=\"token operator\">+=</span> dragEvent<span class=\"token punctuation\">.</span>dy\n\n      svgDrag<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dragX<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dragY<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> dragBehavior <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">dragD3</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SVGType<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"drag\"</span><span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span>\n\n    svg\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cursor\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"move\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>dragBehavior<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"drag\"</span><span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wheel\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NodeDragOpts<span class=\"token operator\">&lt;</span>NodeType<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">onDrag</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>args<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> dragEvent<span class=\"token operator\">:</span> CustomDragEvent<span class=\"token punctuation\">;</span> node<span class=\"token operator\">:</span> NodeType <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  <span class=\"token function-variable function\">onDragEnded</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>args<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> dragEvent<span class=\"token operator\">:</span> CustomDragEvent<span class=\"token punctuation\">;</span> node<span class=\"token operator\">:</span> NodeType <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n  <span class=\"token function-variable function\">onDragStart</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>args<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> dragEvent<span class=\"token operator\">:</span> CustomDragEvent<span class=\"token punctuation\">;</span> node<span class=\"token operator\">:</span> NodeType <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">NodeDrag<span class=\"token operator\">&lt;</span>NodeType<span class=\"token punctuation\">,</span> El <span class=\"token keyword\">extends</span> SVGElement<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> opts<span class=\"token operator\">:</span> NodeDragOpts<span class=\"token operator\">&lt;</span>NodeType<span class=\"token operator\">></span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>opts<span class=\"token operator\">:</span> NodeDragOpts<span class=\"token operator\">&lt;</span>NodeType<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>opts <span class=\"token operator\">=</span> opts\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function-variable function\">setupNodes</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    selection<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>El<span class=\"token punctuation\">,</span> NodeType<span class=\"token punctuation\">,</span> SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dragstarted</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span>dragEvent<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CustomDragEvent<span class=\"token punctuation\">,</span> NodeType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>opts<span class=\"token punctuation\">.</span><span class=\"token function\">onDragStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        dragEvent<span class=\"token punctuation\">,</span>\n        node<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dragged</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span>dragEvent<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CustomDragEvent<span class=\"token punctuation\">,</span> NodeType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>opts<span class=\"token punctuation\">.</span><span class=\"token function\">onDrag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        dragEvent<span class=\"token punctuation\">,</span>\n        node<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dragended</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span>dragEvent<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CustomDragEvent<span class=\"token punctuation\">,</span> NodeType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>opts<span class=\"token punctuation\">.</span><span class=\"token function\">onDragEnded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        dragEvent<span class=\"token punctuation\">,</span>\n        node<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">selection</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>\n      <span class=\"token generic-function\"><span class=\"token function\">dragD3</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>El<span class=\"token punctuation\">,</span> NodeType<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"start\"</span><span class=\"token punctuation\">,</span> dragstarted<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"drag\"</span><span class=\"token punctuation\">,</span> dragged<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"end\"</span><span class=\"token punctuation\">,</span> dragended<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> BackgroundDrag<span class=\"token punctuation\">,</span> NodeDrag<span class=\"token punctuation\">,</span> CustomDragEvent <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/force/chart/force-drag.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ChartConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./chart/force-chart\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SampleLink<span class=\"token punctuation\">,</span> SampleNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./force-data\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ui-constants\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Config</span> <span class=\"token operator\">=</span> ChartConfig<span class=\"token operator\">&lt;</span>SampleNode<span class=\"token punctuation\">,</span> SampleLink<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">const</span> getNodeText<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getNodeText\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> node<span class=\"token punctuation\">.</span>name\n\n<span class=\"token keyword\">const</span> getChartConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  forceData<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  forceData<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"forceData\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Config <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  forceData<span class=\"token punctuation\">,</span>\n  getNodeText<span class=\"token punctuation\">,</span>\n  height<span class=\"token operator\">:</span> <span class=\"token number\">600</span><span class=\"token punctuation\">,</span>\n  rootElId<span class=\"token operator\">:</span> <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> getChartConfig <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/force/force-config.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">RADIUS_SELECT_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ui-constants\"</span>\n\n<span class=\"token keyword\">const</span> radiusOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Opts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  initialRadiusValue<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  <span class=\"token function-variable function\">onRadiusChange</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setupControls</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>opts<span class=\"token operator\">:</span> Opts<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> select <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token constant\">RADIUS_SELECT_ID</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLSelectElement\n\n  radiusOptions<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>optionValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> option <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"option\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> optionValuePx <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>optionValue<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span>\n\n    option<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> optionValuePx\n    option<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> optionValue<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// eslint-disable-line id-denylist</span>\n\n    select<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>option<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// eslint-disable-next-line id-denylist</span>\n  select<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> opts<span class=\"token punctuation\">.</span>initialRadiusValue<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  select<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"change\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    opts<span class=\"token punctuation\">.</span><span class=\"token function\">onRadiusChange</span><span class=\"token punctuation\">(</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>select<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/force/force-controls.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> json <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">SampleNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">SampleLink</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  source<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  strength<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  target<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchForceData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>nodes<span class=\"token punctuation\">,</span> links<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token builtin\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">ROOT_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">data/d3js/force/nodes.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">ROOT_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">data/d3js/force/links.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token punctuation\">[</span>SampleNode<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> SampleLink<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    links<span class=\"token punctuation\">,</span>\n    nodes<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> fetchForceData<span class=\"token punctuation\">,</span> SampleNode<span class=\"token punctuation\">,</span> SampleLink <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/force/force-data.ts"},{"content":"<span class=\"token keyword\">const</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"chart\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">RADIUS_SELECT_ID</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"radius-select\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">RADIUS_SELECT_ID</span> <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/force/ui-constants.ts"}],"page":{"content":"<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> DemoPageProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/common\"</span>\n\n<span class=\"token keyword\">import</span> Demo <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/components/demo\"</span>\n\n<span class=\"token keyword\">import</span> main<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">RADIUS_SELECT_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/demos/force/force\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> style <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/demos/force/force-page.module.css\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Force</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> DemoPageProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Demo</span></span> <span class=\"token attr-name\">main</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>main<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">pageContext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>pageContext<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Radius: </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-select<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">RADIUS_SELECT_ID</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Demo</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Force\n","type":"tsx"}},"key":"force"},"meta":{"description":"Force Chart example using D3.js with two source files of data, that shows how a process with several cycles and paths can be represented."}}},
    "staticQueryHashes": []}