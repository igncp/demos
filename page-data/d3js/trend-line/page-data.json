{
    "componentChunkName": "component---src-pages-d-3-js-trend-line-tsx",
    "path": "/d3js/trend-line/",
    "result": {"pageContext":{"demoInfo":{"dataFiles":["data.tsv"],"docs":[],"isCompleted":true,"name":"Trend line","notes":["Added both line animations","Changed y scale domain"],"sources":["http://codepen.io/arundhaj/pen/ouyjd","http://big-elephants.com/2014-06/unrolling-line-charts-d3js/"],"summary":[],"category":"d3js","files":{"demoCSS":[{"content":"<span class=\"token selector\">.form </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/trend-line/trend-line-page.module.css"},{"content":"<span class=\"token selector\">.trendLineChart </span><span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.axis </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">font</span><span class=\"token punctuation\">:</span> 10px sans-serif<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.axis path,\n  line </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">shape-rendering</span><span class=\"token punctuation\">:</span> crispedges<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> #000<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.line </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> steelblue<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 1.5px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.rline </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke-dasharray</span><span class=\"token punctuation\">:</span> 5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">stroke-width</span><span class=\"token punctuation\">:</span> 1.5px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n","filePath":"src/demos/trend-line/trend-line.module.css"}],"demoTS":[{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> selectAll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> TrendLineChart <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./trend-line-chart\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fetchData<span class=\"token punctuation\">,</span> getChartConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./trend-line-chart-config\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ui-constants\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">main</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> lineData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getIsZoomed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input[value=\"zoom\"]'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLInputElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>checked\n\n  <span class=\"token keyword\">const</span> chartConfig <span class=\"token operator\">=</span> <span class=\"token function\">getChartConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    initialZoomed<span class=\"token operator\">:</span> <span class=\"token function\">getIsZoomed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    lineData<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TrendLineChart</span><span class=\"token punctuation\">(</span>chartConfig<span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input[name=\"mode\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"change\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> isZoomed <span class=\"token operator\">=</span> <span class=\"token function\">getIsZoomed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    chart<span class=\"token punctuation\">.</span><span class=\"token function\">renderContent</span><span class=\"token punctuation\">(</span>isZoomed<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> main\n","filePath":"src/demos/trend-line/trend-line.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> timeParse<span class=\"token punctuation\">,</span> tsv <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ChartConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./trend-line-chart\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ui-constants\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">InitialDataItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  occurred<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token comment\">// eslint-disable-line id-denylist</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">DataItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  arbitraryValue<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  occurred<span class=\"token operator\">:</span> Date\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createLinearRegression</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>lineData<span class=\"token operator\">:</span> DataItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> linearRegression<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    intercept<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n    r2<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n    slope<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> itemsNum <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> lineData\n\n  <span class=\"token keyword\">let</span> sumX <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> sumY <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> sumXY <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> sumXX <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> sumYY <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n  lineData<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    sumY <span class=\"token operator\">+=</span> lineItem<span class=\"token punctuation\">.</span>arbitraryValue\n    sumYY <span class=\"token operator\">+=</span> lineItem<span class=\"token punctuation\">.</span>arbitraryValue <span class=\"token operator\">*</span> lineItem<span class=\"token punctuation\">.</span>arbitraryValue\n    sumXY <span class=\"token operator\">+=</span> lineItem<span class=\"token punctuation\">.</span>occurred<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> lineItem<span class=\"token punctuation\">.</span>arbitraryValue\n\n    sumX <span class=\"token operator\">+=</span> lineItem<span class=\"token punctuation\">.</span>occurred<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sumXX <span class=\"token operator\">+=</span> lineItem<span class=\"token punctuation\">.</span>occurred<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> lineItem<span class=\"token punctuation\">.</span>occurred<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  linearRegression<span class=\"token punctuation\">.</span>slope <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span>itemsNum <span class=\"token operator\">*</span> sumXY <span class=\"token operator\">-</span> sumX <span class=\"token operator\">*</span> sumY<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>itemsNum <span class=\"token operator\">*</span> sumXX <span class=\"token operator\">-</span> sumX <span class=\"token operator\">*</span> sumX<span class=\"token punctuation\">)</span>\n  linearRegression<span class=\"token punctuation\">.</span>intercept <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>sumY <span class=\"token operator\">-</span> linearRegression<span class=\"token punctuation\">.</span>slope <span class=\"token operator\">*</span> sumX<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> itemsNum\n  linearRegression<span class=\"token punctuation\">.</span>r2 <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span>itemsNum <span class=\"token operator\">*</span> sumXY <span class=\"token operator\">-</span> sumX <span class=\"token operator\">*</span> sumY<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span>\n      Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span>itemsNum <span class=\"token operator\">*</span> sumXX <span class=\"token operator\">-</span> sumX <span class=\"token operator\">*</span> sumX<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>itemsNum <span class=\"token operator\">*</span> sumYY <span class=\"token operator\">-</span> sumY <span class=\"token operator\">*</span> sumY<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">2</span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> linearRegression\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> fetchData <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>DataItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">tsv</span><span class=\"token punctuation\">(</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">ROOT_PATH</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">data/d3js/trend-line/data.tsv</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> InitialDataItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">const</span> timeFormat <span class=\"token operator\">=</span> <span class=\"token function\">timeParse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>responseItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    arbitraryValue<span class=\"token operator\">:</span> <span class=\"token operator\">+</span>responseItem<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span>\n    occurred<span class=\"token operator\">:</span> <span class=\"token function\">timeFormat</span><span class=\"token punctuation\">(</span>responseItem<span class=\"token punctuation\">.</span>occurred<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Config</span> <span class=\"token operator\">=</span> ChartConfig<span class=\"token operator\">&lt;</span>DataItem<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">const</span> getFullLineX<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getFullLineX\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> lineItem<span class=\"token punctuation\">.</span>occurred\n<span class=\"token keyword\">const</span> getFullLineY<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getFullLineY\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  lineItem<span class=\"token punctuation\">.</span>arbitraryValue\n<span class=\"token keyword\">const</span> getDashedLineX<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getDashedLineX\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> lineItem<span class=\"token punctuation\">.</span>occurred\n\n<span class=\"token keyword\">const</span> getChartConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  initialZoomed<span class=\"token punctuation\">,</span>\n  lineData<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  initialZoomed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span>\n  lineData<span class=\"token operator\">:</span> DataItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Config <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> linearRegression <span class=\"token operator\">=</span> <span class=\"token function\">createLinearRegression</span><span class=\"token punctuation\">(</span>lineData<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> getDashedLineY<span class=\"token operator\">:</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"getDashedLineY\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    linearRegression<span class=\"token punctuation\">.</span>intercept<span class=\"token operator\">!</span> <span class=\"token operator\">+</span> linearRegression<span class=\"token punctuation\">.</span>slope<span class=\"token operator\">!</span> <span class=\"token operator\">*</span> <span class=\"token operator\">+</span>lineItem<span class=\"token punctuation\">.</span>occurred\n  <span class=\"token keyword\">const</span> chartText <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Slope: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>linearRegression<span class=\"token punctuation\">.</span>slope<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span><span class=\"token function\">toExponential</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    chartText<span class=\"token punctuation\">,</span>\n    getDashedLineX<span class=\"token punctuation\">,</span>\n    getDashedLineY<span class=\"token punctuation\">,</span>\n    getFullLineX<span class=\"token punctuation\">,</span>\n    getFullLineY<span class=\"token punctuation\">,</span>\n    initialZoomed<span class=\"token punctuation\">,</span>\n    lineData<span class=\"token punctuation\">,</span>\n    rootElId<span class=\"token operator\">:</span> <span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> fetchData<span class=\"token punctuation\">,</span> getChartConfig <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/trend-line/trend-line-chart-config.ts"},{"content":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  Line<span class=\"token punctuation\">,</span>\n  Selection<span class=\"token punctuation\">,</span>\n  axisBottom<span class=\"token punctuation\">,</span>\n  axisLeft<span class=\"token punctuation\">,</span>\n  line <span class=\"token keyword\">as</span> d3Line<span class=\"token punctuation\">,</span>\n  extent<span class=\"token punctuation\">,</span>\n  max<span class=\"token punctuation\">,</span>\n  min<span class=\"token punctuation\">,</span>\n  range<span class=\"token punctuation\">,</span>\n  scaleLinear<span class=\"token punctuation\">,</span>\n  scaleQuantile<span class=\"token punctuation\">,</span>\n  scaleTime<span class=\"token punctuation\">,</span>\n  select<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"d3\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"./trend-line.module.css\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">ANIMATION_MS</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ui-constants\"</span>\n\n<span class=\"token keyword\">const</span> margin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  bottom<span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n  left<span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n  right<span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n  top<span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> height <span class=\"token operator\">=</span> <span class=\"token number\">500</span> <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>top <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>bottom\n\n<span class=\"token keyword\">const</span> getInterpolation <span class=\"token operator\">=</span>\n  <span class=\"token operator\">&lt;</span>ChartData<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    line<span class=\"token punctuation\">,</span>\n    lineData<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    line<span class=\"token operator\">:</span> Line<span class=\"token operator\">&lt;</span>ChartData<span class=\"token operator\">></span>\n    lineData<span class=\"token operator\">:</span> ChartData<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> interpolate <span class=\"token operator\">=</span> <span class=\"token function\">scaleQuantile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">domain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> lineData<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>t<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> interpolatedLine <span class=\"token operator\">=</span> lineData<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token function\">interpolate</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token function\">line</span><span class=\"token punctuation\">(</span>interpolatedLine<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ChartConfig<span class=\"token operator\">&lt;</span>ChartData<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  chartText<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token function-variable function\">getDashedLineX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>lineData<span class=\"token operator\">:</span> ChartData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Date\n  <span class=\"token function-variable function\">getDashedLineY</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>lineData<span class=\"token operator\">:</span> ChartData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span>\n  <span class=\"token function-variable function\">getFullLineX</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>lineData<span class=\"token operator\">:</span> ChartData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Date\n  <span class=\"token function-variable function\">getFullLineY</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>lineData<span class=\"token operator\">:</span> ChartData<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">number</span>\n  initialZoomed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span>\n  lineData<span class=\"token operator\">:</span> ChartData<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  rootElId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ChartElements</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  chartText<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGTextElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n  dashedLine<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGPathElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n  fullLine<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGPathElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n  rootEl<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n  svg<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGSVGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n  svgG<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n  xAxis<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n  yAxis<span class=\"token operator\">:</span> Selection<span class=\"token operator\">&lt;</span>SVGGElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TrendLineChart<span class=\"token operator\">&lt;</span>ChartData<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> elements<span class=\"token operator\">:</span> ChartElements\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> config<span class=\"token operator\">:</span> ChartConfig<span class=\"token operator\">&lt;</span>ChartData<span class=\"token operator\">></span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> isZoomed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    isZoomed<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>config<span class=\"token operator\">:</span> ChartConfig<span class=\"token operator\">&lt;</span>ChartData<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> initialZoomed<span class=\"token punctuation\">,</span> rootElId <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> config\n\n    <span class=\"token keyword\">const</span> rootEl <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">select</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>HTMLElement<span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">#</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rootElId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> svg <span class=\"token operator\">=</span> rootEl<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"svg\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> svgG <span class=\"token operator\">=</span> svg<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> xAxis <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> yAxis <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> fullLine <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> dashedLine <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> chartText <span class=\"token operator\">=</span> svgG<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elements <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      chartText<span class=\"token punctuation\">,</span>\n      dashedLine<span class=\"token punctuation\">,</span>\n      fullLine<span class=\"token punctuation\">,</span>\n      rootEl<span class=\"token punctuation\">,</span>\n      svg<span class=\"token punctuation\">,</span>\n      svgG<span class=\"token punctuation\">,</span>\n      xAxis<span class=\"token punctuation\">,</span>\n      yAxis<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>config <span class=\"token operator\">=</span> config\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">renderContent</span><span class=\"token punctuation\">(</span>initialZoomed<span class=\"token punctuation\">)</span>\n\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleResize<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">renderContent</span><span class=\"token punctuation\">(</span>isZoomed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isZoomed <span class=\"token operator\">=</span> isZoomed\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>withAnimation<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> finalAnimationTime <span class=\"token operator\">=</span> withAnimation <span class=\"token operator\">?</span> <span class=\"token constant\">ANIMATION_MS</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      config<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        getDashedLineX<span class=\"token punctuation\">,</span>\n        getDashedLineY<span class=\"token punctuation\">,</span>\n        getFullLineX<span class=\"token punctuation\">,</span>\n        getFullLineY<span class=\"token punctuation\">,</span>\n        lineData<span class=\"token punctuation\">,</span>\n        rootElId<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      config<span class=\"token punctuation\">,</span>\n      elements<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        chartText<span class=\"token punctuation\">,</span>\n        dashedLine<span class=\"token punctuation\">,</span>\n        fullLine<span class=\"token punctuation\">,</span>\n        svg<span class=\"token punctuation\">,</span>\n        svgG<span class=\"token punctuation\">,</span>\n        xAxis<span class=\"token operator\">:</span> xAxisSel<span class=\"token punctuation\">,</span>\n        yAxis<span class=\"token operator\">:</span> yAxisSel<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> isZoomed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">const</span> container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>rootElId<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLElement\n\n    container<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>trendLineChart<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> width <span class=\"token operator\">=</span>\n      container<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>width <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>left <span class=\"token operator\">-</span> margin<span class=\"token punctuation\">.</span>right\n\n    svg\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">,</span> height <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>top <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>bottom<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">,</span> width <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>left <span class=\"token operator\">+</span> margin<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span>\n    svgG<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>margin<span class=\"token punctuation\">.</span>left<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>margin<span class=\"token punctuation\">.</span>right<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token function\">scaleTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">domain</span><span class=\"token punctuation\">(</span><span class=\"token function\">extent</span><span class=\"token punctuation\">(</span>lineData<span class=\"token punctuation\">,</span> getFullLineX<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token punctuation\">[</span>Date<span class=\"token punctuation\">,</span> Date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token function\">scaleLinear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>height<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">domain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        isZoomed <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>lineData<span class=\"token punctuation\">,</span> getFullLineY<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>lineData<span class=\"token punctuation\">,</span> getFullLineY<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> xAxis <span class=\"token operator\">=</span> <span class=\"token function\">axisBottom</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> yAxis <span class=\"token operator\">=</span> <span class=\"token function\">axisLeft</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> line <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">d3Line</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>ChartData<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFullLineX</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFullLineY</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    xAxisSel\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">x </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styles<span class=\"token punctuation\">.</span>axis<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(0,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>height<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>xAxis<span class=\"token punctuation\">)</span>\n    yAxisSel<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">y </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styles<span class=\"token punctuation\">.</span>axis<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>yAxis<span class=\"token punctuation\">)</span>\n\n    fullLine\n      <span class=\"token punctuation\">.</span><span class=\"token function\">datum</span><span class=\"token punctuation\">(</span>lineData<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">transition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">duration</span><span class=\"token punctuation\">(</span>finalAnimationTime<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attrTween</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">getInterpolation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          line<span class=\"token punctuation\">,</span>\n          lineData<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>line<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> regressionLine <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">d3Line</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>ChartData<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token function\">getDashedLineX</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token function\">getDashedLineY</span><span class=\"token punctuation\">(</span>lineItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    dashedLine\n      <span class=\"token punctuation\">.</span><span class=\"token function\">datum</span><span class=\"token punctuation\">(</span>lineData<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">transition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">delay</span><span class=\"token punctuation\">(</span>finalAnimationTime<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">duration</span><span class=\"token punctuation\">(</span>finalAnimationTime<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attrTween</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">getInterpolation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          line<span class=\"token operator\">:</span> regressionLine<span class=\"token punctuation\">,</span>\n          lineData<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>rline<span class=\"token punctuation\">)</span>\n\n    chartText\n      <span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"transform\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.7</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.7</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"opacity\"</span><span class=\"token punctuation\">,</span> finalAnimationTime <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">transition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">delay</span><span class=\"token punctuation\">(</span>finalAnimationTime <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>chartText<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"opacity\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> <span class=\"token function-variable function\">handleResize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> TrendLineChart<span class=\"token punctuation\">,</span> ChartConfig <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/trend-line/trend-line-chart.ts"},{"content":"<span class=\"token keyword\">const</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"chart\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">ANIMATION_MS</span> <span class=\"token operator\">=</span> <span class=\"token number\">2000</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">ANIMATION_MS</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span>\n","filePath":"src/demos/trend-line/ui-constants.ts"}],"page":{"content":"<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> DemoPageProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/common\"</span>\n\n<span class=\"token keyword\">import</span> Demo <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/components/demo\"</span>\n\n<span class=\"token keyword\">import</span> main<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONTAINER_ID</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/demos/trend-line/trend-line\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/demos/trend-line/trend-line-page.module.css\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TrendLine</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> DemoPageProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Demo</span></span> <span class=\"token attr-name\">main</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>main<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">pageContext</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>pageContext<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">defaultChecked</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mode<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zoom<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> Zoom\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mode<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>normal<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> Normal\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">CONTAINER_ID</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Demo</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TrendLine\n","type":"tsx"}},"key":"trend-line"},"meta":{"description":"Example of trend-line using D3.js, with extra animations."}}},
    "staticQueryHashes": []}