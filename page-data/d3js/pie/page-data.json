{"componentChunkName":"component---src-pages-d-3-js-pie-js","path":"/d3js/pie/","result":{"pageContext":{"demoInfo":{"data":["data.json"],"name":"Pie","notes":["Added the animation (transition) by changing a random slice data by a random integer between range"],"sources":["http://codepen.io/nishidh41/pen/Frzhq"],"category":"d3js","files":{"js":"const main = () => {\n  const width = $(\"#chart\").innerWidth()\n  const height = 300\n  const outerRadius = 100\n  const color = d3.scale.category20()\n  let arc = {}\n\n  const stashArcs = (d) => {\n    d.data.ea0 = _.cloneDeep(d)\n  }\n\n  const arcTween = (ar) => {\n    const i = d3.interpolate(ar.data.ea0, ar)\n\n    ar.data.ea0 = i(0)\n\n    return (t) => arc(i(t))\n  }\n\n  const textTransform = function (d) {\n    d.outerRadius = outerRadius\n    d.innerRadius = outerRadius / 2\n\n    return `translate(${arc.centroid(d)})`\n  }\n\n  return d3.json(`${ROOT_PATH}data/d3js/pie/data.json`, (_error, data) => {\n    const pie = d3.layout\n      .pie()\n      .sort(null)\n      .value((d) => d.val)\n\n    arc = d3.svg.arc().outerRadius(outerRadius)\n\n    const svg = d3\n      .select(\"#chart\")\n      .append(\"svg:svg\")\n      .attr({\n        height,\n        width,\n      })\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 2},${height / 2})`)\n\n    const slices = svg\n      .selectAll(\".slice\")\n      .data(pie(data))\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"slice\")\n\n    const path = slices\n      .append(\"path\")\n      .attr({\n        d: arc,\n        fill(_d, i) {\n          return color(i)\n        },\n      })\n      .each(stashArcs)\n\n    const labels = slices\n      .filter((d) => d.endAngle - d.startAngle > 0.2)\n      .append(\"text\")\n      .attr({ dy: \".35em\", \"text-anchor\": \"middle\" })\n      .attr(\"transform\", textTransform)\n      .style({ fill: \"White\", font: \"bold 12px Arial\" })\n      .text((d) => d.data.val)\n\n    slices.append(\"title\").text((d) => d.data.label)\n\n    return d3.select(\"#change-data\").on(\"click\", () => {\n      const index = Math.floor(Math.random() * 5)\n\n      data[index].val = Math.floor(Math.random() * 44) + 2\n\n      path.data(pie(data)).transition().duration(1000).attrTween(\"d\", arcTween)\n\n      return labels\n        .data(pie(data))\n        .transition()\n        .duration(1000)\n        .attr(\"transform\", textTransform)\n        .each(\"start\", function (d) {\n          return d3.select(this).text(d.data.val)\n        })\n    })\n  })\n}\n\nexport default main\n","page":"import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/pie/pie\"\n\nconst Pie = ({ pageContext: { demoInfo } }) => (\n  <Demo demoInfo={demoInfo} main={main} scripts={[\"/vendors/d3/d3.min.js\"]}>\n    <form>\n      <button className=\"btn btn-success\" id=\"change-data\" type=\"button\">\n        Change\n      </button>\n    </form>\n    <div className=\"pie-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default Pie\n","styl":null,"ts":null},"key":"pie"}}},"staticQueryHashes":[]}