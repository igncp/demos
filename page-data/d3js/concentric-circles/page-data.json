{"componentChunkName":"component---src-pages-d-3-js-concentric-circles-js","path":"/d3js/concentric-circles/","result":{"pageContext":{"demoInfo":{"data":[],"name":"Concentric Circles","notes":["Data of baby names in New York 2012","Custom color scale","Added box shadow filter"],"sources":["http://codepen.io/notno/pen/wgyAz","http://bl.ocks.org/cpbotha/5200394","http://stackoverflow.com/questions/17671252/d3-create-a-continous-color-scale-with-many-strings-inputs-for-the-range-and-dy"],"category":"d3js","files":{"js":"const main = () => {\n  d3.csv(\"/data/d3js/concentric-circles/data.csv\", (data) => {\n    const colours = [\"#7C7CC9\", \"#52D552\", \"#337233\", \"#323247\"]\n    const c = d3.scale\n      .linear()\n      .domain(d3.extent(data, (d) => +d.count))\n      .range([0, 1])\n\n    const heatmapColour = d3.scale\n      .linear()\n      .domain(d3.range(0, 1, 1.0 / colours.length))\n      .range(colours)\n\n    const colorize = function (d) {\n      return heatmapColour(c(d.count))\n    }\n\n    const margin = {\n      bottom: 20,\n      left: 20,\n      right: 20,\n      top: 20,\n    }\n    const width = $(\"#chart\").innerWidth() - margin.left - margin.right\n    const height = d3.max(data, (d) => +d.count) * 2.5\n\n    const strokeWidth = \"2px\"\n    const dataMax = d3.max(data, (d) => +d.count)\n    const svg = d3\n      .select(\"#chart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.left + margin.right)\n      .append(\"g\")\n\n    const defs = svg.append(\"defs\")\n    const filter = defs.append(\"filter\").attr(\"id\", \"drop-shadow\")\n\n    filter\n      .append(\"feGaussianBlur\")\n      .attr(\"in\", \"SourceAlpha\")\n      .attr(\"stdDeviation\", 9)\n    filter.append(\"feOffset\").attr(\"dx\", 5).attr(\"dy\", 5)\n    filter.append(\"feComponentTransfer\").append(\"feFuncA\").attr({\n      slope: \".3\",\n      type: \"linear\",\n    })\n\n    const feMerge = filter.append(\"feMerge\")\n\n    feMerge.append(\"feMergeNode\")\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\")\n\n    const circleGroup = svg\n      .selectAll(\"g\")\n      .data(data, (d) => d.name)\n      .enter()\n      .append(\"g\")\n\n    const circles = circleGroup.append(\"svg:circle\")\n    const rScale = d3.scale\n      .pow()\n      .exponent(0.9)\n      .range([5, 300])\n      .domain(d3.extent(data, (d) => +d.count))\n\n    circles\n      .attr(\"cx\", width / 2)\n      .attr(\"cy\", height / 2)\n      .attr(\"r\", (d) => rScale(d.count))\n      .attr(\"class\", \"name-circle\")\n      .attr(\"data-title\", (d) => `${d.name}: ${d.count}`)\n      .style(\"fill\", \"#FFF\")\n      .style(\"stroke\", (d) => colorize(d))\n      .style(\"stroke-width\", strokeWidth)\n      .style(\"filter\", (d) => {\n        if (d.count > dataMax / 3) {\n          return \"url(#drop-shadow)\"\n        }\n\n        return \"\"\n      })\n      .on(\"mouseover\", function () {\n        d3.select(this).style(\"stroke\", \"#D88021\").style(\"stroke-width\", \"10px\")\n      })\n      .on(\"mouseleave\", function () {\n        d3.select(this)\n          .style(\"stroke\", (d) => colorize(d))\n          .style(\"stroke-width\", strokeWidth)\n      })\n\n    d3utils.tooltip(\".name-circle\", {\n      followMouse: true,\n    })\n\n    svg\n      .append(\"text\")\n      .text(\n        \"Circles radius are proportional to the count of times the name appears\"\n      )\n      .attr(\"transform\", `translate(${width / 2},${height - 10})`)\n      .attr(\"width\", \"20px\")\n  })\n}\n\nexport default main\n","page":"import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/concentric-circles/concentric-circles\"\n\nconst ConcentricCircles = ({ pageContext: { demoInfo } }) => (\n  <Demo\n    demoInfo={demoInfo}\n    main={main}\n    scripts={[\"/vendors/d3/d3.min.js\", \"/js/d3js-utils.js\"]}\n  >\n    <div className=\"concentric-circles-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default ConcentricCircles\n","styl":null,"ts":null},"key":"concentric-circles"}}},"staticQueryHashes":[]}