{"version":3,"file":"component---src-pages-d-3-js-mareys-schedule-tsx-2fc59cd8f095e0060526.js","mappings":"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","sources":["webpack://demos/./node_modules/uuid/dist/esm-browser/rng.js","webpack://demos/./node_modules/uuid/dist/esm-browser/regex.js","webpack://demos/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://demos/./node_modules/uuid/dist/esm-browser/validate.js","webpack://demos/./node_modules/uuid/dist/esm-browser/v1.js","webpack://demos/./src/demos/mareys-schedule/crossing-lines-chart.ts","webpack://demos/./src/demos/mareys-schedule/crossing-lines-chart.module.css","webpack://demos/./src/demos/mareys-schedule/ui-constants.ts","webpack://demos/./src/demos/mareys-schedule/mareys-schedule-data-model.ts","webpack://demos/./src/demos/mareys-schedule/mareys-schedule-chart-config.ts","webpack://demos/./src/demos/mareys-schedule/mareys-schedule-controls.ts","webpack://demos/./src/demos/mareys-schedule/mareys-schedule.ts","webpack://demos/./src/pages/d3js/mareys-schedule.tsx","webpack://demos/./src/demos/mareys-schedule/mareys-schedule-page.module.css"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import {\n  D3DragEvent,\n  Selection,\n  axisBottom,\n  axisTop,\n  drag as dragD3,\n  extent,\n  line as lineD3,\n  scaleLinear,\n  scaleTime,\n  select,\n} from \"d3\"\nimport $ from \"jquery\"\nimport \"jquery-ui/themes/base/all.css\"\nimport { v1 as uuid } from \"uuid\"\n\nimport * as styles from \"./crossing-lines-chart.module.css\"\nimport { MIN_WIDTH } from \"./ui-constants\"\n\nif (typeof window !== \"undefined\") {\n  require(\"jquery-ui/ui/widgets/tooltip\")\n}\n\ntype HorizontalMarker = {\n  key: string\n  label: string\n  position: number\n}\n\ntype Point = {\n  horizontalMarker: HorizontalMarker\n  lineId: number\n  x: Date | null\n}\n\nenum LineStyle {\n  Black = \"Black\",\n  Orange = \"Orange\",\n  Red = \"Red\",\n}\n\ntype Line = {\n  id: number\n  points: Point[]\n}\n\ntype CrossingLines = {\n  horizontalMarkers: HorizontalMarker[]\n  lines: Line[]\n}\n\ntype TimeRange = [Date, Date]\n\nconst lineStyleToClassName: { [key in LineStyle]: string } = {\n  [LineStyle.Red]: styles.redLine,\n  [LineStyle.Orange]: styles.orangeLine,\n  [LineStyle.Black]: styles.blackLine,\n}\n\nconst filterBlackOpacity = ({\n  deviation,\n  id,\n  slope,\n  svg,\n}: {\n  deviation: number\n  id: string\n  slope: number\n  svg: Selection<SVGGElement, unknown, HTMLElement, unknown>\n}) => {\n  const defs = svg.append(\"defs\")\n  const filter = defs\n    .append(\"filter\")\n    .attr(\"height\", \"500%\")\n    .attr(\"id\", `drop-shadow-${id}`)\n    .attr(\"width\", \"500%\")\n    .attr(\"x\", \"-200%\")\n    .attr(\"y\", \"-200%\")\n\n  filter\n    .append(\"feGaussianBlur\")\n    .attr(\"in\", \"SourceAlpha\")\n    .attr(\"stdDeviation\", deviation)\n\n  filter.append(\"feOffset\").attr(\"dx\", 1).attr(\"dy\", 1)\n  filter\n    .append(\"feComponentTransfer\")\n    .append(\"feFuncA\")\n    .attr(\"slope\", slope)\n    .attr(\"type\", \"linear\")\n\n  const feMerge = filter.append(\"feMerge\")\n\n  feMerge.append(\"feMergeNode\")\n\n  feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\")\n}\n\nconst margin = {\n  bottom: 50,\n  left: 120,\n  right: 50,\n  top: 80,\n}\n\nconst height = 600 - margin.top - margin.bottom\n\ntype ChartConfig = {\n  chartTitle: string\n  crossingLinesData: CrossingLines\n  getLineStyle: (line: Line) => LineStyle\n  getLineTitle: (line: Line) => string\n  getPointTitle: (point: Point) => string\n  getXAxisLabel: (date: Date) => string\n  onPointClick: (point: Point) => void\n  rootElId: string\n}\n\ntype ChartElements = {\n  chartTitle: Selection<SVGTextElement, unknown, HTMLElement, unknown>\n  clipPath: Selection<SVGRectElement, unknown, HTMLElement, unknown>\n  horizongalAxis: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  linesWrapper: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  svg: Selection<SVGSVGElement, unknown, HTMLElement, unknown>\n  svgDrag: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  svgG: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  xAxisBottom: Selection<SVGGElement, unknown, HTMLElement, unknown>\n  xAxisTop: Selection<SVGGElement, unknown, HTMLElement, unknown>\n}\n\nclass CrossingLinesChart {\n  private readonly elements: ChartElements\n  private readonly config: ChartConfig\n  private readonly selectors: {\n    clipId: string\n    filterId: string\n    linePathClass: string\n    pointCircleClass: string\n  }\n\n  private dragX: number\n\n  private latesTimeRange: TimeRange\n\n  public constructor(chartConfig: ChartConfig) {\n    this.config = chartConfig\n\n    const { rootElId } = chartConfig\n    const rootEl = document.getElementById(rootElId) as HTMLElement\n\n    rootEl.classList.add(styles.mareysScheduleChart)\n\n    this.selectors = {\n      clipId: `clip-${uuid().slice(0, 6)}`,\n      filterId: `lines-${uuid().slice(0, 6)}`,\n      linePathClass: `line-${uuid().slice(0, 6)}`,\n      pointCircleClass: `point-${uuid().slice(0, 6)}`,\n    }\n\n    const svg = select(`#${rootElId}`).append(\"svg\")\n    const svgDrag = svg.append(\"g\")\n    const svgG = svgDrag.append(\"g\")\n    const chartTitle = svgG.append(\"text\")\n    const clipPath = svgG\n      .append(\"defs\")\n      .append(\"clipPath\")\n      .attr(\"id\", this.selectors.clipId)\n      .append(\"rect\")\n    const horizongalAxis = svgG\n      .append(\"g\")\n      .attr(\"class\", styles.horizontalMarker)\n    const xAxisTop = svgG.append(\"g\").attr(\"class\", `x top ${styles.axis}`)\n    const xAxisBottom = svgG\n      .append(\"g\")\n      .attr(\"class\", `x bottom ${styles.axis}`)\n    const linesWrapper = svgG.append(\"g\")\n\n    filterBlackOpacity({\n      deviation: 2,\n      id: this.selectors.filterId,\n      slope: 0.2,\n      svg: svgG,\n    })\n\n    this.elements = {\n      chartTitle,\n      clipPath,\n      horizongalAxis,\n      linesWrapper,\n      svg,\n      svgDrag,\n      svgG,\n      xAxisBottom,\n      xAxisTop,\n    }\n\n    this.dragX = 0\n\n    this.latesTimeRange = [new Date(), new Date()]\n\n    window.addEventListener(\"resize\", this.handleResize)\n  }\n\n  public refresh(timeRange: TimeRange) {\n    this.latesTimeRange = timeRange\n\n    const [timeStart, timeEnd] = timeRange\n\n    const {\n      config: { crossingLinesData, rootElId },\n      config,\n      elements: {\n        chartTitle,\n        clipPath,\n        horizongalAxis,\n        linesWrapper,\n        svg,\n        svgG,\n        xAxisBottom,\n        xAxisTop,\n      },\n      selectors: { clipId, filterId, linePathClass, pointCircleClass },\n    } = this\n    const { horizontalMarkers, lines } = crossingLinesData\n    const rootEl = document.getElementById(rootElId) as HTMLElement\n    const realWidth =\n      rootEl.getBoundingClientRect().width - margin.left - margin.right\n    const width = Math.max(realWidth, MIN_WIDTH)\n    const x = scaleTime().domain([timeStart, timeEnd]).range([0, width])\n    const y = scaleLinear().range([0, height])\n    const xAxisTopFn = axisTop<Date>(x)\n      .ticks(8)\n      .tickFormat(config.getXAxisLabel)\n    const xAxisBottomFn = axisBottom<Date>(x)\n      .ticks(8)\n      .tickFormat(config.getXAxisLabel)\n\n    svg\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .attr(\"width\", width + margin.left + margin.right)\n    svgG.attr(\"transform\", `translate(${margin.left},${margin.top})`)\n\n    chartTitle\n      .attr(\"class\", styles.chartTitle)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", `translate(${width / 2},-40)`)\n      .text(config.chartTitle)\n      .style(\"font-weight\", \"bold\")\n\n    clipPath\n      .attr(\"y\", -margin.top)\n      .attr(\"width\", width)\n      .attr(\"height\", height + margin.top + margin.bottom)\n\n    y.domain(\n      extent(\n        horizontalMarkers,\n        (horizontalMarker) => horizontalMarker.position\n      ) as [number, number]\n    )\n\n    const horizontalMarkersSelection = horizongalAxis\n      .selectAll(\"g\")\n      .data(horizontalMarkers)\n      .enter()\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        (horizontalMarker) => `translate(0,${y(horizontalMarker.position)})`\n      )\n\n    horizontalMarkersSelection\n      .append(\"text\")\n      .attr(\"x\", -6)\n      .attr(\"dy\", \".35em\")\n      .text((horizontalMarker) => horizontalMarker.label)\n\n    horizontalMarkersSelection.append(\"line\").attr(\"x2\", width)\n    xAxisTop.call(xAxisTopFn)\n    xAxisBottom.attr(\"transform\", `translate(0,${height})`).call(xAxisBottomFn)\n\n    const mouseover = (...[, line]: [unknown, Line]) => {\n      select(`.line-${line.id}`).select(\"path\").style(\"stroke-width\", \"5px\")\n    }\n\n    const mouseleave = (...[, line]: [unknown, Line]) => {\n      select(`.line-${line.id}`).select(\"path\").style(\"stroke-width\", \"2.5px\")\n    }\n\n    const linesSelection = linesWrapper\n      .attr(\"class\", styles.line)\n      .attr(\"clip-path\", `url(#${clipId})`)\n      .selectAll(\"g\")\n      .data(lines)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", (crossingLine) => {\n        const lineStyle = config.getLineStyle(crossingLine)\n        const { [lineStyle]: lineClass } = lineStyleToClassName\n\n        return `${lineClass} line-${crossingLine.id}`\n      })\n      .on(\"mouseover\", mouseover)\n      .on(\"mouseleave\", mouseleave)\n\n    const line = lineD3<Point>()\n      .x((point) => x(point.x!))\n      .y((point) => y(point.horizontalMarker.position))\n\n    linesSelection.append(\"path\")\n\n    const lineGroup = linesWrapper.selectAll(\"g\")\n\n    lineGroup\n      .selectAll<SVGPathElement, Line>(\"path\")\n      .attr(\"d\", (crossingLine) => line(crossingLine.points))\n      .attr(\"class\", linePathClass)\n      .attr(\"title\", config.getLineTitle)\n\n    linesSelection\n      .selectAll(\"circle\")\n      .data((crossingLine) => crossingLine.points)\n      .enter()\n      .append(\"circle\")\n      .style(\"cursor\", \"pointer\")\n      .on(\"click\", (...[, point]) => {\n        config.onPointClick(point)\n      })\n      .style(\"filter\", `url(#drop-shadow-${filterId})`)\n      .attr(\"r\", \"5px\")\n      .attr(\"class\", pointCircleClass)\n\n    lineGroup\n      .selectAll<SVGCircleElement, Point>(\"circle\")\n      .attr(\n        \"transform\",\n        (point) =>\n          `translate(${x(point.x!)},${y(point.horizontalMarker.position)})`\n      )\n      .attr(\"title\", (point) => config.getPointTitle(point))\n\n    $(`.${linePathClass}`).tooltip({\n      track: true,\n    })\n\n    $(`.${pointCircleClass}`).tooltip({\n      track: true,\n    })\n\n    this.setupDrag(realWidth)\n  }\n\n  private setupDrag(containerWidth: number) {\n    const { elements } = this\n\n    const canUseDrag = containerWidth < MIN_WIDTH\n\n    const updateDrag = () => {\n      if (canUseDrag) {\n        this.dragX = Math.min(0, this.dragX)\n        this.dragX = Math.max(containerWidth - MIN_WIDTH, this.dragX)\n      } else {\n        this.dragX = 0\n      }\n\n      this.elements.svgDrag.attr(\"transform\", `translate(${this.dragX},0)`)\n    }\n\n    const dragHandler = (\n      dragEvent: D3DragEvent<SVGSVGElement, unknown, unknown>\n    ) => {\n      if (!canUseDrag) {\n        return\n      }\n\n      this.dragX += dragEvent.dx\n\n      updateDrag()\n    }\n\n    const dragBehavior = dragD3<SVGSVGElement, unknown>().on(\n      \"drag\",\n      dragHandler\n    )\n\n    elements.svg\n      .style(\"cursor\", canUseDrag ? \"move\" : \"default\")\n      .call(dragBehavior)\n      .on(\"drag\", dragHandler)\n\n    updateDrag()\n  }\n\n  private readonly handleResize = () => {\n    this.refresh(this.latesTimeRange)\n  }\n}\n\nexport {\n  ChartConfig,\n  CrossingLinesChart,\n  HorizontalMarker,\n  LineStyle,\n  TimeRange,\n}\n","// extracted by mini-css-extract-plugin\nexport var mareysScheduleChart = \"crossing-lines-chart-module--mareysScheduleChart--629f6\";\nexport var axis = \"crossing-lines-chart-module--axis--6022c\";\nexport var chartTitle = \"crossing-lines-chart-module--chartTitle--26c62\";\nexport var horizontalMarker = \"crossing-lines-chart-module--horizontalMarker--7c37e\";\nexport var line = \"crossing-lines-chart-module--line--be274\";\nexport var blackLine = \"crossing-lines-chart-module--blackLine--957c7\";\nexport var orangeLine = \"crossing-lines-chart-module--orangeLine--16216\";\nexport var redLine = \"crossing-lines-chart-module--redLine--c046b\";","const CONTAINER_ID = \"chart\"\nconst MIN_WIDTH = 710\n\nexport { CONTAINER_ID, MIN_WIDTH }\n","import { timeFormat, timeParse, tsv } from \"d3\"\n\nconst timeFormatStr = \"%I:%M%p\"\n\nconst getParseTime = () => timeParse(timeFormatStr)\n\nconst parseTime = (timeStr: string): Date => {\n  const timeDate = getParseTime()(timeStr)\n\n  if (timeDate !== null && timeDate.getHours() < 3) {\n    timeDate.setDate(timeDate.getDate() + 1)\n  }\n\n  return timeDate!\n}\n\ntype TrainType = \"B\" | \"L\" | \"N\"\n\ntype RawDataItem = {\n  [stop: string]: string\n  direction: string\n  number: string\n  type: TrainType\n}\n\ntype Station = {\n  distance: number\n  key: string\n  name: string\n  zone: number\n}\n\ntype Stop = {\n  station: Station\n  time: Date | null\n  trainId: number\n}\n\ntype Train = {\n  direction: string\n  id: number\n  number: string\n  stops: Stop[]\n  type: TrainType\n}\n\ntype SchedulesData = {\n  stations: Station[]\n  trains: Train[]\n}\n\nclass MareysSchedules {\n  private readonly schedulesData: SchedulesData\n  private constructor(schedulesData: SchedulesData) {\n    this.schedulesData = schedulesData\n  }\n\n  public static async fetchAndCreateSchedules(): Promise<MareysSchedules> {\n    const originalItems = (await tsv(\n      `${ROOT_PATH}data/d3js/mareys-schedule/data.tsv`\n    )) as unknown as RawDataItem[]\n\n    const stations: Station[] = []\n\n    const trains: Train[] = originalItems\n      .map((...[train, trainIndex]) => {\n        if (trainIndex === 0) {\n          for (const key in train) {\n            if (/^stop\\|/.test(key)) {\n              const stopFragments = key.split(\"|\")\n\n              stations.push({\n                distance: +stopFragments[2],\n                key,\n                name: stopFragments[1],\n                zone: +stopFragments[3],\n              })\n            }\n          }\n        }\n\n        return {\n          direction: train.direction,\n          id: trainIndex,\n          number: train.number,\n          stops: stations\n            .map((station) => ({\n              station,\n              time: parseTime(train[station.key]),\n              trainId: trainIndex,\n            }))\n            .filter((station) => (station.time as unknown) !== null),\n          type: train.type,\n        }\n      })\n      .filter((train) => /[NLB]/.test(train.type))\n\n    const schedulesData = {\n      stations,\n      trains,\n    }\n\n    return new MareysSchedules(schedulesData)\n  }\n\n  public static convertDateToString(date: Date): string {\n    return timeFormat(timeFormatStr)(date)\n  }\n\n  public static convertStringToDate(dateStr: string): Date {\n    return parseTime(dateStr)\n  }\n\n  public static getTrainTitle(trainData: Train): string {\n    const {\n      stops: { 0: firstStop, [trainData.stops.length - 1]: lastStop },\n    } = trainData\n\n    const stops = [firstStop, lastStop].map((stop) => stop.station.name)\n\n    if (trainData.direction === \"S\") {\n      stops.reverse()\n    }\n\n    return `${stops[1]} -> ${stops[0]}`\n  }\n\n  public getStations() {\n    return this.schedulesData.stations.slice()\n  }\n\n  public getTrains() {\n    return this.schedulesData.trains.slice()\n  }\n\n  public getTrainsMap() {\n    return this.schedulesData.trains.reduce<{ [id: string]: Train }>(\n      (...[acc, train]) => {\n        acc[train.id] = train\n\n        return acc\n      },\n      {}\n    )\n  }\n}\n\nexport { MareysSchedules }\n","import qs from \"query-string\"\n\nimport {\n  ChartConfig,\n  HorizontalMarker,\n  LineStyle,\n} from \"./crossing-lines-chart\"\nimport { MareysSchedules } from \"./mareys-schedule-data-model\"\nimport { CONTAINER_ID } from \"./ui-constants\"\n\nconst formatAMPM = (date: Date) => {\n  let hours = date.getHours()\n  const ampm = hours >= 12 ? \"PM\" : \"AM\"\n\n  hours = hours % 12\n  hours = hours ? hours : 12\n\n  const minutes = date.getMinutes()\n  const minutesStr = minutes < 10 ? `0${minutes}` : minutes.toString()\n\n  return `${hours}:${minutesStr} ${ampm}`\n}\n\nexport const createChartConfig = (schedules: MareysSchedules): ChartConfig => {\n  const stations = schedules.getStations()\n  const horizontalMarkers: HorizontalMarker[] = stations.map((station) => ({\n    key: station.key,\n    label: station.name,\n    position: station.distance,\n  }))\n\n  const horizontalMarkerMap = horizontalMarkers.reduce<{\n    [key: string]: HorizontalMarker\n  }>((...[acc, horizontalMarker]) => {\n    acc[horizontalMarker.key] = horizontalMarker\n\n    return acc\n  }, {})\n\n  const trains = schedules.getTrains()\n\n  const lines = trains.map((train) => ({\n    id: train.id,\n    points: train.stops.map((stop) => ({\n      horizontalMarker: horizontalMarkerMap[stop.station.key],\n      lineId: stop.trainId,\n      x: stop.time,\n    })),\n  }))\n\n  const trainsMap = schedules.getTrainsMap()\n\n  const getLineTitle: ChartConfig[\"getLineTitle\"] = (line) => {\n    const { [line.id]: trainData } = trainsMap\n\n    return MareysSchedules.getTrainTitle(trainData)\n  }\n\n  const getPointTitle: ChartConfig[\"getPointTitle\"] = (point) => {\n    const { [point.lineId]: train } = trainsMap\n\n    return `${MareysSchedules.getTrainTitle(train)}\\n${\n      point.horizontalMarker.label\n    } at ${formatAMPM(point.x!)}`\n  }\n\n  const getLineStyle: ChartConfig[\"getLineStyle\"] = (line) => {\n    const { [line.id]: train } = trainsMap\n\n    switch (train.type) {\n      case \"B\":\n        return LineStyle.Red\n      case \"L\":\n        return LineStyle.Black\n      case \"N\":\n        return LineStyle.Orange\n\n      default:\n        return LineStyle.Red\n    }\n  }\n\n  const crossingLinesData: ChartConfig[\"crossingLinesData\"] = {\n    horizontalMarkers,\n    lines,\n  }\n\n  const chartTitle = \"E.J. Mareyâ€™s graphical train schedule (4:30AM - 1:30AM)\"\n\n  const getXAxisLabel: ChartConfig[\"getXAxisLabel\"] = (date) =>\n    MareysSchedules.convertDateToString(date)\n\n  const onPointClick: ChartConfig[\"onPointClick\"] = (point) => {\n    window.open(\n      `https://www.google.com/search?${qs.stringify({\n        q: `Station California ${point.horizontalMarker.label}`,\n      })}`\n    )\n  }\n\n  return {\n    chartTitle,\n    crossingLinesData,\n    getLineStyle,\n    getLineTitle,\n    getPointTitle,\n    getXAxisLabel,\n    onPointClick,\n    rootElId: CONTAINER_ID,\n  }\n}\n","import $ from \"jquery\"\nimport \"jquery-ui/themes/base/all.css\"\n\nimport { TimeRange } from \"./crossing-lines-chart\"\nimport { MareysSchedules } from \"./mareys-schedule-data-model\"\n\nif (typeof window !== \"undefined\") {\n  require(\"jquery-ui/ui/widgets/slider\")\n}\n\ntype ScheduleLimits = [number, number]\n\nconst RANGE_ID = \"schedule-range\"\n\nconst convertLimitsToTimes = (limits: ScheduleLimits): [string, string] => {\n  const times: string[] = []\n\n  limits.forEach((limit) => {\n    const wholeMinutes = (limit / 100) * 1200\n\n    let fragment = \"AM\"\n    let hours = Math.floor(wholeMinutes / 60)\n    let minutes = Math.floor(wholeMinutes % 60)\n\n    if (minutes > 30) {\n      minutes = minutes - 30\n      hours = hours + 1\n    } else {\n      minutes = minutes + 30\n    }\n\n    hours = hours + 4\n\n    if (hours > 23) {\n      if (hours === 24) {\n        hours = hours - 12\n      } else {\n        hours = hours - 24\n      }\n    } else if (hours > 11) {\n      fragment = \"PM\"\n\n      if (hours !== 12) {\n        hours = hours - 12\n      }\n    }\n\n    const minutesStr = minutes < 10 ? `0${minutes}` : minutes.toString()\n\n    const finalTime = `${hours}:${minutesStr}${fragment}`\n\n    return times.push(finalTime)\n  })\n\n  return times as [string, string]\n}\n\nconst setupControls = (updateScheduleLimits: (limits: TimeRange) => void) => {\n  const slider = $(`#${RANGE_ID}`)\n\n  slider.slider({\n    change: () => {\n      const limits = slider.slider(\"values\") as ScheduleLimits\n      const timeLimits = convertLimitsToTimes(limits).map(\n        MareysSchedules.convertStringToDate\n      ) as [Date, Date]\n\n      updateScheduleLimits(timeLimits)\n    },\n    range: true,\n  })\n\n  slider.slider(\"values\", [10, 50])\n}\n\nexport { RANGE_ID, setupControls }\n","import { CrossingLinesChart } from \"./crossing-lines-chart\"\nimport { createChartConfig } from \"./mareys-schedule-chart-config\"\nimport { RANGE_ID, setupControls } from \"./mareys-schedule-controls\"\nimport { MareysSchedules } from \"./mareys-schedule-data-model\"\nimport { CONTAINER_ID } from \"./ui-constants\"\n\nconst main = async () => {\n  const schedules = await MareysSchedules.fetchAndCreateSchedules()\n\n  const chartConfig = createChartConfig(schedules)\n\n  const chart = new CrossingLinesChart(chartConfig)\n\n  setupControls((timeLimits) => {\n    chart.refresh(timeLimits)\n  })\n}\n\nexport { CONTAINER_ID, RANGE_ID }\n\nexport default main\n","import React from \"react\"\n\nimport { DemoPageProps } from \"@/common\"\n\nimport Demo from \"@/components/demo\"\n\nimport main, {\n  CONTAINER_ID,\n  RANGE_ID,\n} from \"@/demos/mareys-schedule/mareys-schedule\"\nimport * as styles from \"@/demos/mareys-schedule/mareys-schedule-page.module.css\"\n\nconst MareysSchedule = ({ pageContext }: DemoPageProps) => (\n  <Demo main={main} pageContext={pageContext}>\n    <div className={styles.slider} id={RANGE_ID} />\n    <div id={CONTAINER_ID} />\n  </Demo>\n)\n\nexport default MareysSchedule\n","// extracted by mini-css-extract-plugin\nexport var slider = \"mareys-schedule-page-module--slider--aac0e\";"],"names":["getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","byteToHex","i","push","toString","substr","_nodeId","_clockseq","arr","offset","arguments","length","undefined","toLowerCase","TypeError","_lastMSecs","_lastNSecs","options","buf","b","Array","node","clockseq","seedBytes","random","msecs","Date","now","nsecs","dt","tl","tmh","n","LineStyle","axis","CONTAINER_ID","window","require","lineStyleToClassName","Red","Orange","Black","margin","height","CrossingLinesChart","chartConfig","handleResize","refresh","latesTimeRange","this","config","rootElId","document","getElementById","classList","add","selectors","clipId","slice","filterId","linePathClass","pointCircleClass","svg","select","append","svgDrag","svgG","chartTitle","clipPath","attr","horizongalAxis","xAxisTop","styles","xAxisBottom","linesWrapper","deviation","id","slope","filter","feMerge","filterBlackOpacity","elements","dragX","addEventListener","timeRange","timeStart","timeEnd","crossingLinesData","horizontalMarkers","lines","realWidth","getBoundingClientRect","width","Math","max","x","scaleTime","domain","range","y","scaleLinear","xAxisTopFn","axisTop","ticks","tickFormat","getXAxisLabel","xAxisBottomFn","axisBottom","text","style","extent","horizontalMarker","position","horizontalMarkersSelection","selectAll","data","enter","label","call","linesSelection","crossingLine","lineStyle","getLineStyle","on","line","lineD3","point","lineGroup","points","getLineTitle","onPointClick","getPointTitle","$","tooltip","track","setupDrag","containerWidth","canUseDrag","updateDrag","min","dragHandler","dragEvent","dx","dragBehavior","dragD3","timeFormatStr","parseTime","timeStr","timeDate","timeParse","getParseTime","getHours","setDate","getDate","MareysSchedules","schedulesData","fetchAndCreateSchedules","tsv","ROOT_PATH","originalItems","stations","trains","map","train","trainIndex","key","test","stopFragments","split","distance","name","zone","direction","number","stops","station","time","trainId","type","convertDateToString","date","timeFormat","convertStringToDate","dateStr","getTrainTitle","trainData","stop","reverse","getStations","getTrains","getTrainsMap","reduce","acc","createChartConfig","schedules","horizontalMarkerMap","lineId","trainsMap","hours","ampm","minutes","getMinutes","formatAMPM","open","qs","q","RANGE_ID","setupControls","updateScheduleLimits","slider","change","timeLimits","limits","times","forEach","limit","wholeMinutes","fragment","floor","finalTime","convertLimitsToTimes","main","chart","pageContext","className"],"sourceRoot":""}