{"version":3,"sources":["webpack://demos/./src/demos/fish-eye/fish-eye.js","webpack://demos/./src/pages/d3js/fish-eye.js"],"names":["ch","rootElId","setCg","setDom","setVars","getData","render","setChartTitle","setBackground","setPointer","setFilter","setAxis","setLabels","setDots","setTitles","bindMousemove","bindClick","cg","margin","bottom","left","right","top","height","width","document","getElementById","getBoundingClientRect","dom","svg","d3","select","append","attr","cb","json","ROOT_PATH","nations","data","d3utils","vars","colorScale","scale","category10","domain","focused","radiusScale","sqrt","range","xScale","fisheye","log","yScale","linear","xAxis","axis","orient","tickFormat","format","tickSize","yAxis","call","text","dot","d","income","lifeExpectancy","population","selectAll","enter","style","region","position","sort","a","b","name","humanizeNumber","mouse","this","distortion","focus","pointer","on","zoom","n","toString","n2","replace","ready","demoInfo","pageContext","main","scripts","className","id"],"mappings":"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","file":"component---src-pages-d-3-js-fish-eye-js-05dd8835b330aa56d935.js","sourcesContent":["import d3utils from \"@/demos/_utils/d3utils\"\n\nconst ch = {\n  rootElId: \"chart\",\n}\n\nch.ready = function () {\n  ch.setCg()\n  ch.setDom()\n  ch.setVars()\n\n  return ch.getData(ch.render)\n}\n\nch.render = function () {\n  ch.setChartTitle()\n  ch.setBackground()\n  ch.setPointer()\n  ch.setFilter()\n  ch.setAxis()\n  ch.setLabels()\n  ch.setDots()\n  ch.setTitles()\n  ch.bindMousemove()\n  ch.bindClick()\n}\n\nch.setCg = function () {\n  ch.cg = {\n    margin: {\n      bottom: 70,\n      left: 70,\n      right: 50,\n      top: 80,\n    },\n  }\n  ch.cg.height = 700 - ch.cg.margin.top - ch.cg.margin.bottom\n\n  ch.cg.width =\n    document.getElementById(\"chart\").getBoundingClientRect().width -\n    ch.cg.margin.left -\n    ch.cg.margin.right\n}\n\nch.setDom = function () {\n  ch.dom = {\n    svg: d3\n      .select(`#${ch.rootElId}`)\n      .append(\"svg\")\n      .attr(\"width\", ch.cg.width + ch.cg.margin.left + ch.cg.margin.right)\n      .attr(\"height\", ch.cg.height + ch.cg.margin.top + ch.cg.margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${ch.cg.margin.left},${ch.cg.margin.top})`),\n  }\n}\n\nch.getData = function (cb) {\n  d3.json(`${ROOT_PATH}data/d3js/fish-eye/data.json`, (nations) => {\n    ch.data = nations\n\n    return cb()\n  })\n}\n\nch.setChartTitle = function () {\n  return d3utils.middleTitle(\n    ch.dom.svg,\n    ch.cg.width,\n    \"Income Per Capita vs \" +\n      \"Life Expectancy vs Population vs Region - 180 Countries\",\n    -40\n  )\n}\n\nch.setVars = function () {\n  ch.vars = {\n    colorScale: d3.scale\n      .category10()\n      .domain([\n        \"Sub-Saharan Africa\",\n        \"South Asia\",\n        \"Middle East & North Africa\",\n        \"America\",\n        \"Europe & Central Asia\",\n        \"East Asia & Pacific\",\n      ]),\n    focused: false,\n    radiusScale: d3.scale.sqrt().domain([0, 5e8]).range([5, 60]),\n    xScale: d3.fisheye\n      .scale(d3.scale.log)\n      .domain([300, 1e5])\n      .range([0, ch.cg.width]),\n    yScale: d3.fisheye\n      .scale(d3.scale.linear)\n      .domain([20, 90])\n      .range([ch.cg.height, 0]),\n  }\n}\n\nch.setAxis = function () {\n  ch.dom.xAxis = d3.svg\n    .axis()\n    .orient(\"bottom\")\n    .scale(ch.vars.xScale)\n    .tickFormat(d3.format(\",d\"))\n    .tickSize(-ch.cg.height)\n  ch.dom.yAxis = d3.svg\n    .axis()\n    .scale(ch.vars.yScale)\n    .orient(\"left\")\n    .tickSize(-ch.cg.width)\n  ch.dom.svg\n    .append(\"g\")\n    .attr(\"class\", \"x axis\")\n    .attr(\"transform\", `translate(0,${ch.cg.height})`)\n    .call(ch.dom.xAxis)\n  ch.dom.svg.append(\"g\").attr(\"class\", \"y axis\").call(ch.dom.yAxis)\n}\n\nch.setBackground = function () {\n  return ch.dom.svg\n    .append(\"rect\")\n    .attr(\"class\", \"background\")\n    .attr(\"width\", ch.cg.width)\n    .attr(\"height\", ch.cg.height)\n}\n\nch.setLabels = function () {\n  ch.dom.svg\n    .append(\"text\")\n    .attr(\"class\", \"x label\")\n    .attr(\"text-anchor\", \"end\")\n    .attr(\"x\", ch.cg.width - 26)\n    .attr(\"y\", ch.cg.height + 26)\n    .text(\"income per capita, inflation-adjusted (dollars)\")\n\n  ch.dom.svg\n    .append(\"text\")\n    .attr(\"class\", \"y label\")\n    .attr(\"text-anchor\", \"end\")\n    .attr(\"x\", -26)\n    .attr(\"y\", -40)\n    .attr(\"dy\", \".75em\")\n    .attr(\"transform\", \"rotate(-90)\")\n    .text(\"life expectancy (years)\")\n}\n\nch.setFilter = function () {\n  return d3utils.filterColor(\"circles\", ch.dom.svg, 1.5, 0.6, true)\n}\n\nch.position = function (dot) {\n  dot\n    .attr(\"cx\", (d) => ch.vars.xScale(d.income))\n    .attr(\"cy\", (d) => ch.vars.yScale(d.lifeExpectancy))\n    .attr(\"r\", (d) => ch.vars.radiusScale(d.population))\n}\n\nch.setDots = function () {\n  ch.dom.dot = ch.dom.svg\n    .append(\"g\")\n    .attr(\"class\", \"dots\")\n    .selectAll(\".dot\")\n    .data(ch.data)\n    .enter()\n    .append(\"circle\")\n    .attr(\"class\", \"dot\")\n    .style(\"fill\", (d) => ch.vars.colorScale(d.region))\n    .style(\"filter\", \"url(#drop-shadow-circles)\")\n    .style(\"stroke\", \"black\")\n    .style('\"stroke-width\"', \"1px\")\n    .call(ch.position)\n    .sort((a, b) => b.population - a.population)\n}\n\nch.setTitles = function () {\n  ch.dom.dot\n    .append(\"title\")\n    .text(\n      (d) =>\n        `${d.name}:\\n- Income: ${ch.humanizeNumber(d.income)} $/P.C.\\n` +\n        `- Population: ${ch.humanizeNumber(d.population)}\\n` +\n        `- Life expectancy: ${d.lifeExpectancy} years`\n    )\n}\n\nch.zoom = function () {\n  const mouse = d3.mouse(this)\n\n  ch.vars.xScale.distortion(2.5).focus(mouse[0])\n  ch.vars.yScale.distortion(2.5).focus(mouse[1])\n  ch.dom.dot.call(ch.position)\n  ch.dom.svg.select(\".x.axis\").call(ch.dom.xAxis)\n\n  return ch.dom.svg.select(\".y.axis\").call(ch.dom.yAxis)\n}\n\nch.setPointer = function () {\n  ch.dom.pointer = ch.dom.svg.append(\"text\").text(\"+\").attr(\"class\", \"pointer\")\n}\n\nch.bindMousemove = function () {\n  return ch.dom.svg.on(\"mousemove\", function () {\n    if (!ch.vars.focused) {\n      ch.zoom.call(this)\n    }\n  })\n}\n\nch.bindClick = function () {\n  return ch.dom.svg.on(\"click\", function () {\n    ch.vars.focused = !ch.vars.focused\n\n    if (ch.vars.focused) {\n      const mouse = d3.mouse(this)\n\n      return ch.dom.pointer\n        .attr(\"x\", mouse[0])\n        .attr(\"y\", mouse[1])\n        .style(\"opacity\", 1)\n    }\n\n    ch.dom.pointer.style(\"opacity\", 0)\n\n    return ch.zoom.call(this)\n  })\n}\n\nch.humanizeNumber = function (n) {\n  n = n.toString()\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const n2 = n.replace(/(\\d)(\\d{3})($|,|\\.)/g, \"$1,$2$3\")\n\n    if (n === n2) {\n      break\n    } else {\n      n = n2\n    }\n  }\n\n  return n\n}\n\nexport default () => {\n  ch.ready()\n}\n","import React from \"react\"\n\nimport Demo from \"@/components/demo\"\n\nimport main from \"@/demos/fish-eye/fish-eye\"\n\nimport \"@/demos/fish-eye/fish-eye.styl\"\n\nconst FishEye = ({ pageContext: { demoInfo } }) => (\n  <Demo\n    demoInfo={demoInfo}\n    main={main}\n    scripts={[\n      \"/vendors/d3/d3.min.js\",\n      \"/vendors/d3-plugins/fisheye/fisheye.js\",\n      \"/js/d3js-utils.js\",\n    ]}\n  >\n    <div className=\"fish-eye-chart\" id=\"chart\" />\n  </Demo>\n)\n\nexport default FishEye\n"],"sourceRoot":""}