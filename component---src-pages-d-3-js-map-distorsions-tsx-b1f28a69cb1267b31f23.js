"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[640],{5885:function(t,e,n){n.r(e),n.d(e,{default:function(){return G}});var r=n(7294),a=n(1745),s=n(8634),i=n(2656),o=n.n(i),l=n(8558),d=n(2203),c=n(8747),u=n.n(c),p=function(){function t(t){var e=t.chart,n=t.dragArea,r=t.svg;this.state={dragX:0,marginLeft:0,width:0},this.elements={chart:e,dragArea:n,svg:r}}var e=t.prototype;return e.setDimensions=function(t){var e=t.marginLeft,n=t.width;this.state.width=n,this.state.marginLeft=e},e.refresh=function(){var t=this.elements.svg,e=this.getDragDiffWidth();t.style("cursor",e>0?"move":"default")},e.reset=function(){var t=this;this.refresh();var e=this.elements.svg;this.state.dragX=0;var n=function(e){t.state.dragX+=e.dx;var n=t.getDragDiffWidth();n>0?(t.state.dragX=Math.min(t.state.dragX,0),t.state.dragX=Math.max(t.state.dragX,-n)):t.state.dragX=0,t.updateDrag()},r=(0,l.ohM)().on("drag",n);this.updateDrag(),e.call(r).on("drag",n)},e.updateDrag=function(){this.elements.dragArea.attr("transform","translate("+this.state.dragX+",0)")},e.getDragDiffWidth=function(){var t=this.elements.chart,e=this.state,n=e.marginLeft,r=e.width-n;return t.node().getClientRects()[0].width-r},t}(),f="map-distorsions-module--mapDistorsionsChart--5416d",m="map-distorsions-module--background--bd031",h="map-distorsions-module--foreground--c78ab",g="map-distorsions-module--axis--cd688",v="map-distorsions-module--title--9d8e9",y="map-distorsions-module--inactive--dc4a0",w="map-distorsions-module--active--8e5d5";"undefined"!=typeof window&&n(5356);var A,b=function(t){return t.length>20?t.slice(0,20)+"...":t},x=20,C=200,D=40,k=90,L=750-k-x,B=function(){this.parentNode.appendChild(this)},N=["#7C7CC9","#429742","#63BD28","#D14141"];!function(t){t.Number="number",t.String="string"}(A||(A={}));var S,E=function(){function t(t){var e=this;this.handleResize=function(){e.render()},this.config=t;var n=t.rootElId;document.getElementById(n).classList.add(f);var r,a,s,i,o,d=(0,l.Ys)("#"+n).append("svg"),c=d.append("g"),u=c.append("g"),m=u.append("text"),h=u.append("g"),g=u.append("g");this.elements={background:h,dragArea:c,foreground:g,svg:d,svgG:u,title:m},a=(r={deviation:2,id:"lines",slope:.4,svg:u}).deviation,s=r.id,i=r.slope,(o=r.svg.append("defs").append("filter").attr("id","drop-shadow-"+s)).append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),o.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",a),o.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),o.append("feComponentTransfer").append("feFuncA").attr("slope",i).attr("type","linear"),this.dragModule=new p({chart:u,dragArea:c,svg:d}),this.render(),window.addEventListener("resize",this.handleResize)}return t.prototype.render=function(){var t,e=this.config,n=e.chartSmallTitle,r=e.chartTitle,a=e.dimensions,s=e.getTooltipText,i=e.lines,o=e.onLineClick,d=e.rootElId,c=document.getElementById(d),p=null!==(t=navigator.deviceMemory)&&void 0!==t?t:0;c.classList.add(f);var S=Math.max(700,c.getBoundingClientRect().width-C-D),E=S<500;this.dragModule.setDimensions({marginLeft:C,width:S});var T=this.elements,X=T.background,M=T.foreground,Y=T.svg,O=T.svgG,U=T.title;Y.attr("height",L+k+x).attr("width",S+C+D),O.attr("transform","translate("+C+","+k+")"),U.attr("text-anchor","middle").attr("transform","translate("+S/2+",-60)").style("font-weight","bold").text(E?n:r);var j=(0,l.q2y)().domain(a.map((function(t){return t.name}))).range([0,S]),G=(0,l.jvg)().defined((function(t){return!isNaN(t[1])})),I=O.selectAll(".dimension").data(a).enter().append("g").attr("class","dimension");O.selectAll(".dimension").attr("transform",(function(t){return"translate("+j(t.name)+")"}));var R,W,q,z=(R=[0,i.length-1],W=(0,l.BYU)().domain(R).range([0,1]),q=(0,l.BYU)().domain((0,l.w6H)(0,1,1/N.length)).range(N),function(t){return q(W(t))});a.forEach((function(t){return t.scale.range([0,L]).domain(t.type===A.Number?(0,l.Wem)(i,(function(e){return+e[t.name]})):i.map((function(e){var n=e[t.name];return b(n)})).sort())}));var Z=function(t){var e=a.map((function(e){var n=t[e.name];return[j(e.name),e.scale("string"==typeof n?b(n):n)]}));return G(e)};X.attr("class",m).selectAll("path").data(i).enter().append("path"),X.selectAll("path").attr("d",Z).style("cursor","pointer").attr("title",s).on("click",o),M.attr("class",h).selectAll("path").data(i).enter().append("path").attr("data-title",s),M.selectAll("path").attr("d",Z),I.append("g").attr("class",g).each((function(t){var e=(0,l.y4O)(t.scale);return(0,l.Ys)(this).call(e)})).append("text").attr("class",v).attr("text-anchor","middle").attr("y",-9).text((function(t){return t.name})),O.select("."+g).selectAll("text:not(."+v+")").attr("class","map-distorsions-module--label--b1604").data(i,(function(t){return t.name})).style("fill",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1];return z(r)}));var F=O.selectAll("."+g+" text,."+m+" path,."+h+" path"),H=p>=8&&"url(#drop-shadow-lines)";O.selectAll("."+h+" path").style("filter",H).style("stroke",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1];return z(r)})),F.on("mouseover",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1];O.selectAll("."+h+" path").style("filter","none"),O.classed(w,!0),F.classed(y,(function(t){return t.name!==r.name})),F.filter((function(t){return t.name===r.name})).each(B)})).on("mouseout",(function(){O.selectAll("."+h+" path").style("filter",H),O.classed(w,!1),F.classed(y,!1)})),u()("."+m+" path, ."+h+" path").tooltip({track:!0}),this.dragModule.reset()},t}(),T="chart";!function(t){t.Acc40="Acc. 40ยบ 150%",t.Angular="Angular",t.Areal="Areal",t.Scale="Scale"}(S||(S={}));var X=function(t){var e=[S.Acc40,S.Scale,S.Areal,S.Angular].map((function(e){return Number(t[e]).toFixed(2)+" ("+e+")"}));return t.name+": "+e.join(", ")},M=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1];window.open("https://www.google.com/search?"+d.stringify({q:r.name+" map projection",tbm:"isch"}))},Y=[{name:"name",scale:(0,l.q2y)(),type:A.String},{name:S.Acc40,scale:(0,l.BYU)(),type:A.Number},{name:S.Scale,scale:(0,l.BYU)(),type:A.Number},{name:S.Areal,scale:(0,l.PUr)(),type:A.Number},{name:S.Angular,scale:(0,l.BYU)(),type:A.Number}],O=function(){var t=(0,s.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.pvA)("/demos/data/d3js/map-distorsions/data.tsv");case 2:return e=t.sent.sort((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0].name,a=e[1].name;return r===a?0:r<a?-1:1})),T,t.abrupt("return",{chartSmallTitle:"Lower is better.",chartTitle:"Comparison of 41 map projections by four different types of distortion. Lower is better.",dimensions:Y,getTooltipText:X,lines:e,onLineClick:M,rootElId:"chart"});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=(0,s.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:e=t.sent,new E(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=U,G=function(t){var e=t.pageContext;return r.createElement(a.Z,{main:j,pageContext:e},r.createElement("div",{id:T}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-map-distorsions-tsx-b1f28a69cb1267b31f23.js.map