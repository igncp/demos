(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[305],{1745:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(7294),a=n(5414),o=n(2552),l=function(e){var t,n=e.isCompleted,a=e.mainSource,l=e.name;return r.createElement("h2",{className:"row",id:o.dc},r.createElement("span",{className:"col-xs-12 col-sm-10 p-0"},r.createElement("span",{className:o.jS},l," Chart "),r.createElement("small",{id:o.l4,title:"Main Source"},r.createElement("a",{href:a,rel:"noreferrer",target:"_blank"},"source")),!n&&r.createElement("small",{id:o.oT,title:"This demo is still work in progress"},"WIP")),r.createElement("span",Object.assign({className:"col-sm-2 p-0 d-xs-none "+o.eR},((t={})["data-back-home"]="",t)),r.createElement("a",{className:"btn btn-info",href:"/demos/",role:"button"},r.createElement("span",{className:"glyphicon glyphicon-home"})," Home")))},i=function(e){return"src/demos/"+e+"/tests/"+e+".e2e.ts"},s=function(){var e=(0,r.useState)(null),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e="undefined"==typeof window?null:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth);null!==e&&n(e)}),[]),t},c=function(e){var t=e.content,n=(0,r.useState)(!1),a=n[0],l=n[1],i=s();return null===i?null:!i||i<1280&&!a?r.createElement("div",{className:o.wI},r.createElement("button",{className:o.W2+" btn btn-light",onClick:function(){return l(!0)},type:"button"},"Show Code")):r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t}}))},u=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://github.com/igncp/demos/blob/main/"+t,rel:"noreferrer",target:"_blank"},"Code in Github"))},m=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://igncp.github.io/demos/coverage-ts/files/"+t+".html",rel:"noreferrer",target:"_blank"},"TypeScript coverage report"))},d=function(e){var t=e.demoInfo;if("undefined"==typeof window)return null;var n="pages/"+t.category+"/"+t.key+"."+t.files.page.type;return r.createElement("div",null,!!t.notes.length&&r.createElement("div",{className:"bs-callout bs-callout-info"+o.$c},r.createElement("p",null,r.createElement("strong",null,"Notes:")),r.createElement("ul",null,t.notes.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1];return r.createElement("li",{dangerouslySetInnerHTML:{__html:a},key:o})})))),!!t.summary.length&&r.createElement("div",{className:"bs-callout bs-callout-summary "+o.$c},r.createElement("p",null,r.createElement("strong",null,"Implementation Summary:")),r.createElement("ul",null,t.summary.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1];return r.createElement("p",{dangerouslySetInnerHTML:{__html:a},key:o})})))),r.createElement("div",{className:"bs-callout bs-callout-primary",id:o.V2},r.createElement("p",null,r.createElement("strong",null,"Sources:")),r.createElement("ul",null,t.sources.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],l=t[1];return r.createElement("li",{key:l},r.createElement("span",{className:o.hB},"[",l+1,"]"),":"," ",r.createElement("a",{href:a},a))})))),!!t.docs.length&&r.createElement("div",{className:"bs-callout bs-callout-secondary",id:"docs"},r.createElement("p",null,r.createElement("strong",null,"Docs:")),r.createElement("div",{className:o.Jw},t.docs.map((function(e){return r.createElement("span",{className:o._q,key:e[1]},r.createElement("a",{href:e[1],rel:"noreferrer",target:"_blank"},e[0]))})))),!!t.dataFiles.length&&r.createElement("div",{className:"bs-callout bs-callout-warning",id:o.sD},r.createElement("p",null,r.createElement("strong",null,"Data files: "),t.dataFiles.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=n[0],l=n[1];return r.createElement("a",{href:"/demos/data/"+t.category+"/"+t.key+"/"+o,key:l},o)})))),r.createElement("div",{className:"bs-callout bs-callout-success",id:"code"},r.createElement("p",null,r.createElement("strong",null,"Code:")),r.createElement("ul",null,t.files.demoTS.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var l=n[0],s=l.content,d=l.filePath,f=n[1];return r.createElement("li",{key:d},r.createElement("p",null,r.createElement("span",{className:o.s2},d)," ",r.createElement(u,{filePath:d})," ",r.createElement(m,{filePath:d}),0===f&&r.createElement(r.Fragment,null,r.createElement("span",null," | "),r.createElement("a",{href:"https://github.com/igncp/demos/blob/main/"+i(t.key),rel:"noreferrer",target:"_blank"},"E2E tests"))),r.createElement(c,{content:s}),r.createElement("div",{className:o.XP}))})),r.createElement("li",null,r.createElement("p",null,r.createElement("span",{className:o.s2},n)," ",r.createElement(u,{filePath:n})," ",r.createElement(m,{filePath:n})),r.createElement(c,{content:t.files.page.content}),!!t.files.demoCSS.length&&r.createElement("div",{className:o.XP})),t.files.demoCSS.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var l=n[0],i=l.content,s=l.filePath,m=n[1];return r.createElement("li",{key:s},r.createElement("p",null,r.createElement("span",{className:o.s2},s)," ",r.createElement(u,{filePath:s})),r.createElement(c,{content:i}),m!==t.files.demoCSS.length-1&&r.createElement("div",{className:o.XP}))})))))},f=n(2504),p=function(e){return"/"===e[0]?"/demos/"+e.replace(/^\//,""):e},h=function(e){var t=e.main,n=e.children,o=e.scripts,i=void 0===o?[]:o,s=e.links,c=void 0===s?[]:s,u=e.pageContext,m=u.demoInfo,h=u.meta,g=m.isCompleted,v=m.name,y=m.sources;return(0,r.useEffect)((function(){"undefined"!=typeof window&&t().catch((function(e){console.error("error:",e)}))}),[]),r.createElement(f.Z,null,r.createElement(a.q,{link:c.map((function(e){return{href:p(e),rel:"stylesheet",type:"text/css"}})),meta:[{content:h.description,name:"description"}],script:i.map((function(e){return{src:p(e),type:"text/javascript"}})),title:m.name+" | Demos igncp"}),r.createElement(l,{isCompleted:g,mainSource:y[0],name:v}),n,r.createElement(d,{demoInfo:m}))}},2504:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),a=n(2552),o=function(){return r.createElement("footer",{className:a.Mv},r.createElement("p",null,(new Date).getFullYear()))},l=function(){return r.createElement("div",{className:a.H6},r.createElement("h1",{className:"row"},r.createElement("span",{className:"col-3 col-md-8 p-0"},r.createElement("a",{href:"/demos/"},"Demos")," ",r.createElement("small",{className:"hide-tablet"},"interactive data visualization examples")),r.createElement("span",{className:"col-9 col-md-4 p-0",id:a.ak},r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=follow",width:"119"}),r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=fork",width:"62"}),r.createElement("iframe",{frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=watch",width:"52"}))))},i=function(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement("div",{className:a.Mg},r.createElement("div",{className:"px-3 px-sm-5"},r.createElement(l,null),t)),r.createElement(o,null))}},1335:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r=n(7294),a=n(1745),o=n(8634),l=n(2656),i=n.n(l),s=n(8126),c=n(2149),u="multiline-voronoi-module--axis--73b38",m="multiline-voronoi-module--lineHover--07a40",d="multiline-voronoi-module--formVoronoi--b33e2",f=300,p=function(){function e(e){var t=this;this.handleResize=function(){t.render()},this.config=e;var n=(0,s.Ys)("#"+this.config.rootElId).append("svg"),r=n.append("g"),a=r.append("g").attr("class",u+" axis--x"),o=r.append("g").attr("class",u+" axis--y");r.append("text").attr("x",20).attr("dy",".32em").style("font-weight","bold").text(this.config.chartTitle),function(e){var t=e.append("defs").append("filter").attr("id","drop-shadow");t.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",1),t.append("feOffset").attr("dx",1).attr("dy",1),t.append("feComponentTransfer").append("feFuncA").attr("slope","1").attr("type","linear");var n=t.append("feMerge");n.append("feMergeNode"),n.append("feMergeNode").attr("in","SourceGraphic")}(r);var l=r.append("g").attr("class","multiline-voronoi-module--lines--3e92b"),i=r.append("circle").attr("r",3.5),c=r.append("g").attr("class","multiline-voronoi-module--voronoi--c0339"),m=function(e){var t=e.append("g").attr("class","multiline-voronoi-module--tooltip--f507c").attr("transform","translate(-100,-100)");return t.append("rect").attr("transform","translate(-150,-50)").attr("fill","white").attr("height",50).attr("width",f).attr("rx",5).attr("ry",5).style("filter","url(#drop-shadow)").style("opacity","0.65").style("pointer-events","none").style("cursor","default"),t.append("text").attr("class","text1").attr("y",-30),t.append("text").attr("class","text2").attr("y",-10),t}(r);this.elements={circle:i,linesWrapper:l,svg:n,svgG:r,tooltip:m,voronoiGroup:c,xAxis:a,yAxis:o},this.state={clickToggle:!1,usedLines:this.config.lines},this.render(),window.addEventListener("resize",this.handleResize)}e.getMargin=function(e){var t={bottom:70,left:80,right:70,top:60};return e<530?Object.assign({},t,{left:35,right:5}):t};var t=e.prototype;return t.setVoronoi=function(e){this.elements.voronoiGroup.classed("multiline-voronoi-module--voronoiShow--cb86f",e)},t.render=function(){var t=this,n=this.config,r=n.lines,a=n.rootElId,o=n.times,l=this.elements,i=(0,s.PKp)(s.i4X),u=document.getElementById(a);u.classList.add("multiline-voronoi-module--multilineVoronoiChart--706ac");var d=u.getBoundingClientRect().width,f=e.getMargin(d),p=u.getBoundingClientRect().width-f.left-f.right,h=p<530,g=500-f.top-f.bottom,v=(0,s.Xf)().range([0,p]),y=(0,s.BYU)().range([g,0]),E=function(e){return v(t.config.getPointXValue(e))},b=function(e){return y(t.config.getPointYValue(e))},w={};l.svg.attr("width",p+f.left+f.right).attr("height",g+f.top+f.bottom),l.svgG.attr("transform","translate("+f.left+","+f.top+")"),v.domain((0,s.Wem)(o)),y.domain([0,(0,s.Fp7)(r,(function(e){return(0,s.Fp7)(t.config.getLinePoints(e),t.config.getPointYValue)}))]).nice(),l.xAxis.attr("transform","translate(0,"+g+")").call((0,s.LLu)(v).ticks(h?2:void 0)),l.yAxis.call((0,s.y4O)(y).ticks(10,"%"));var N=(0,s.jvg)().x(E).y(b),k=this.config,x=this.state.usedLines,P=l.linesWrapper.selectAll("path").data(x);P.enter().append("path").style("filter","url(#drop-shadow)"),P.exit().remove(),l.linesWrapper.selectAll("path").attr("d",(function(e){var t=k.getLineId(e);w[t]=this;var n=k.getLinePoints(e);return N(n)})).style("stroke",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return i(r.toString())}));var S=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=n[1];t.state.clickToggle=!t.state.clickToggle,t.state.usedLines=t.state.clickToggle?[r.find((function(e){return k.getLineId(e)===k.getLineIdFromPoint(o)}))]:r,l.tooltip.on("mouseover",null).on("click",null),t.render()},L=x.reduce((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=k.getLinePoints(a);return o.forEach((function(e){r.push(e)})),r}),[]),A=c.Z.from(L,E,b).voronoi([-f.left,-f.top,p+f.right,g+f.bottom]),C=this.elements.voronoiGroup.selectAll("path").data(L,(function(e){return k.getLineIdFromPoint(e)+"-"+k.getPointXValue(e)}));C.enter().append("path"),C.exit().remove(),this.elements.voronoiGroup.selectAll("path").attr("d",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return A.renderCell(r)})).on("mouseover",(function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[1],o=k.getLineIdFromPoint(a),i=w[o];(0,s.Ys)(i).classed(m,!0),i.parentNode.appendChild(i);var c=E(a),u=b(a),d=Math.min(p-150,Math.max(150,c)),f=u;l.tooltip.attr("transform","translate("+d+","+f+")").on("mouseover",(function(){e(null,a)})).on("click",(function(){S(null,a)})),l.circle.attr("transform","translate("+c+","+u+")"),l.tooltip.select(".text1").text(k.getTooltipPart1(a)),l.tooltip.select(".text2").text(k.getTooltipPart2(a))})).on("mouseout",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1],a=k.getLineIdFromPoint(r),o=w[a];return(0,s.Ys)(o).classed(m,!1),l.tooltip.attr("transform","translate(-100,-100)")})).on("click",S)},e}(),h="chart",g="show-voronoi",v=["January","February","March","April","May","June","July","August","September","October","November","December"],y="%Y-%m",E=function(){var e=(0,o.Z)(i().mark((function e(){var t,n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.i$Z)(y),n=(0,s.Z1g)(y),e.next=4,(0,s.pvA)("/demos/data/d3js/multiline-voronoi/data.tsv");case 4:return r=e.sent,a=Object.keys(r[0]).map((function(e){return n(e)})).filter(Number),o=r.map((function(e){var n=e.name.replace(/(msa|necta div|met necta|met div)$/i,"").trim();return{metrics:a.map((function(r){var a=t(r),o=e[a],l=Number(o)/100;return{cityName:n,date:r,employmentRate:l}})),name:n}})),e.abrupt("return",{cities:o,months:a});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){return e.name},w=function(e){return e.metrics},N=function(e){return e.employmentRate},k=function(e){return e.cityName.trim()+": "},x=function(e){var t=v[e.date.getMonth()]+" of "+e.date.getFullYear();return" "+(100*e.employmentRate).toFixed(2)+"% - "+t},P=function(e){return e.cityName},S=function(e){return e.date},L=function(e){var t=e.cities,n=e.months;return{chartTitle:"US Unemployment Rate",getLineId:b,getLineIdFromPoint:P,getLinePoints:w,getPointXValue:S,getPointYValue:N,getTooltipPart1:k,getTooltipPart2:x,lines:t,rootElId:h,times:n}},A=function(){var e=(0,o.Z)(i().mark((function e(){var t,n,r,a,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,n=t.cities,r=t.months,a=L({cities:n,months:r}),o=new p(a),l=document.getElementById(d),document.getElementById(h).appendChild(l),(0,s.Ys)("#show-voronoi").property("disabled",!1).on("change",(function(e){o.setVoronoi(e.target.checked||!1)}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=A,I=function(e){var t=e.pageContext;return r.createElement(a.Z,{main:C,pageContext:t},r.createElement("form",{id:d},r.createElement("input",{className:"form-check-input",id:g,type:"checkbox"})," ",r.createElement("label",{htmlFor:g},"Show Voronoi lines")),r.createElement("div",{id:h}))}},2656:function(e,t,n){e.exports=n(3076)},2552:function(e,t,n){"use strict";n.d(t,{eR:function(){return r},rT:function(){return a},UG:function(){return o},ZV:function(){return l},Bf:function(){return i},K7:function(){return s},wI:function(){return c},W2:function(){return u},jS:function(){return m},XP:function(){return d},s2:function(){return f},Mv:function(){return p},eQ:function(){return h},Be:function(){return g},$c:function(){return v},Mg:function(){return y},hB:function(){return E},H6:function(){return b},YX:function(){return w},Jw:function(){return N},_q:function(){return k},zG:function(){return x},Vj:function(){return P},pn:function(){return S},x:function(){return L},oT:function(){return A},dc:function(){return C},l4:function(){return I},sD:function(){return T},V2:function(){return F},ak:function(){return M}});var r="styles-module--backHome--b9e05",a="styles-module--bullet--337e0",o="styles-module--d3js--ff3aa",l="styles-module--raphael--40af0",i="styles-module--storybook--f1bcc",s="styles-module--testing--9f8b3",c="styles-module--codeFragment--8d705",u="styles-module--codeFragmentButton--98bc0",m="styles-module--demoName--4057d",d="styles-module--divisor--4c75d",f="styles-module--fileNameWrapper--e0bd4",p="styles-module--footer--a0f96",h="styles-module--homeDemoNumber--755fe",g="styles-module--homeDemoNameLink--4b57a",v="styles-module--notes--e1c07",y="styles-module--rootLayout--03362",E="styles-module--sourceNumber--335c1",b="styles-module--pageHeader--06484",w="styles-module--rowWrapper--9f3a4",N="styles-module--tagCollection--c96c8",k="styles-module--tag--8c674",x="styles-module--demosLegend--16d25",P="styles-module--demosLists--52492",S="styles-module--highlightStorybook--b465e",L="styles-module--highlightTesting--b7d3f",A="styles-module--demoWip--18449",C="styles-module--demoTitle--7c73a",I="styles-module--mainSource--f7ebb",T="styles-module--dataList--54f77",F="styles-module--sourcesList--27e91",M="styles-module--ghButtons--1d466"},8634:function(e,t,n){"use strict";function r(e,t,n,r,a,o,l){try{var i=e[o](l),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var l=e.apply(t,n);function i(e){r(l,a,o,i,s,"next",e)}function s(e){r(l,a,o,i,s,"throw",e)}i(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-multiline-voronoi-tsx-95ef26d5b3338e92a924.js.map