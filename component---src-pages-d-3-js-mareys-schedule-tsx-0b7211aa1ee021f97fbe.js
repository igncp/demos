(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[175],{1616:function(t,e,n){"use strict";var r=n(2453),a=n(2492),o=n.n(a),i={colorsScale:function(t,e){var n=r.BYU().domain(e).range([0,1]),a=r.BYU().domain(r.w6H(0,1,1/t.length)).range(t);return function(t){return a(n(t))}},filterBlackOpacity:function(t,e,n,r){var a=e.append("defs").append("filter").attr("height","500%").attr("id","drop-shadow-"+t).attr("width","500%").attr("x","-200%").attr("y","-200%");a.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",n),a.append("feOffset").attr("dx",1).attr("dy",1),a.append("feComponentTransfer").append("feFuncA").attr("slope",r).attr("type","linear");var o=a.append("feMerge");return o.append("feMergeNode"),o.append("feMergeNode").attr("in","SourceGraphic")},filterColor:function(t,e,n,r,a){null==a&&(a=!1);var o=e.append("defs").append("filter").attr("id","drop-shadow-"+t);return a&&o.attr("height","500%").attr("width","500%").attr("x","-200%").attr("y","-200%"),o.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),o.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",n),o.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),o.append("feComponentTransfer").append("feFuncA").attr("slope",r).attr("type","linear")},middleTitle:function(t,e,n,r){null==r&&(r=-15),t.append("text").attr("class","chart-title").attr("text-anchor","middle").attr("transform","translate("+String(e/2)+","+r+")").text(n).style("font-weight","bold")},svg:function(t,e,n,a){return r.Ys(t).text("").append("svg").attr("height",n+a.top+a.bottom).attr("width",e+a.left+a.right).append("g").attr("transform","translate("+a.left+","+a.top+")")},tooltip:function(t,e){null==e&&(e={});var n=o()({elementSelector:"",followElement:!1,followMouse:!1,leftOffst:60,tOpts:{container:"body",viewport:{selector:"#chart svg"}},topOffst:40},e);$(t).tooltip(n.tOpts),n.followMouse?$(t).hover((function(t){return $(".tooltip").css({left:String(t.pageX-n.leftOffst)+"px",top:String(t.pageY-n.topOffst)+"px"})})):n.followElement&&$(t).hover((function(){return $(".tooltip").css({left:String($(n.elementSelector).position().left-n.leftOffst)+"px",top:String($(n.elementSelector).position().top-n.topOffst)+"px"})}))}};e.Z=i},6159:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var r=n(7294),a=n(2247),o=n(2137),i=n(7757),s=n.n(i),u=n(2453),p=n(6073),c=n.n(p),l=n(928),f=n.n(l),d=n(1616),m=function(){var t=(0,o.Z)(s().mark((function t(){var e,n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.pvA("/demos/data/d3js/mareys-schedule/data.tsv");case 2:return e=t.sent,n=[],r=e.map((function(t,e){if(0===e)for(var r in t)if(/^stop\|/.test(r)){var a=r.split("|");n.push({distance:+a[2],key:r,name:a[1],zone:+a[3]})}return{direction:t.direction,index:e,number:t.number,stops:n.map((function(n){return{station:n,time:g(t[n.key]),trainIndex:e}})).filter((function(t){return null!==t.time})),type:t.type}})),t.abrupt("return",{stations:n,trains:r});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(t){return"S"===t.direction?t.stops[0].station.name+" -> "+f()(t.stops).station.name:f()(t.stops).station.name+" -> "+t.stops[0].station.name},v=function(){return u.Z1g("%I:%M%p")},g=function(t){var e=v()(t);return null!==e&&e.getHours()<3&&e.setDate(e.getDate()+1),e},x={bottom:50,left:120,right:50,top:80},y=600-x.top-x.bottom,w=function(t){var e=t.rootElId,n=t.data,r=n.stations,a=n.trains,o=document.getElementById(e);o.classList.add("mareys-schedule-chart");var i=o.getBoundingClientRect().width-x.left-x.right,s=function(t){var n=u.Xf().domain([g(t[0]),g(t[1])]).range([0,i]),o=u.BYU().range([0,y]),s=v(),p=u.F5q(n).ticks(8).tickFormat(s),c=u.LLu(n).ticks(8).tickFormat(s),l=d.Z.svg("#"+e,i,y,x);d.Z.middleTitle(l,i,"E.J. Mareyâ€™s graphical train schedule  (4:30AM - 1:30AM)",-40),d.Z.filterBlackOpacity("trains",l,2,.2),l.append("defs").append("clipPath").attr("id","clip").append("rect").attr("y",-x.top).attr("width",i).attr("height",y+x.top+x.bottom),o.domain(u.Wem(r,(function(t){return t.distance})));var f=l.append("g").attr("class","station").selectAll("g").data(r).enter().append("g").attr("transform",(function(t){return"translate(0,"+o(t.distance)+")"}));f.append("text").attr("x",-6).attr("dy",".35em").text((function(t){return t.name})),f.append("line").attr("x2",i),l.append("g").attr("class","x top axis").call(p),l.append("g").attr("class","x bottom axis").attr("transform","translate(0,"+y+")").call(c);var m=l.append("g").attr("class","train").attr("clip-path","url(#clip)").selectAll("g").data(a.filter((function(t){return/[NLB]/.test(t.type)}))).enter().append("g").attr("class",(function(t){return t.type+" train-"+t.index})).on("mouseover",(function(t,e){u.Ys(".train-"+e.index).select("path").style("stroke-width","5px")})).on("mouseleave",(function(t,e){u.Ys(".train-"+e.index).select("path").style("stroke-width","2.5px")})),w=u.jvg().x((function(t){return n(t.time)})).y((function(t){return o(t.station.distance)}));m.append("path").attr("d",(function(t){return w(t.stops)})).append("title").text((function(t){return h(t)})),m.selectAll("circle").data((function(t){return t.stops})).enter().append("circle").attr("transform",(function(t){return"translate("+n(t.time)+","+o(t.station.distance)+")"})).style("filter","url(#drop-shadow-trains)").attr("r","5px").append("title").text((function(t){return h(a[t.trainIndex])+"\n"+t.station.name+" at "+function(t){var e=t.getHours(),n=e>=12?"PM":"AM";e=(e%=12)||12;var r=t.getMinutes();return e+":"+(r<10?"0"+r:r.toString())+" "+n}(t.time)}))};return{refresh:function(t){!function(t){var e=t.limits,n=t.redraw,r=[];c()(e,(function(t){var e=t/100*1200,n="AM",a=Math.floor(e/60),o=Math.floor(e%60);o>30?(o-=30,a+=1):o+=30,(a+=4)>23?a-=24===a?12:24:a>11&&(n="PM",12!==a&&(a-=12));var i=o<10?"0"+String(o):o.toString(),s=String(a)+":"+i+n;return r.push(s)})),n(r)}({limits:t,redraw:s})}}},O=function(){var t=(0,o.Z)(s().mark((function t(){var e,n,r,a,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="chart",t.next=3,m();case 3:n=t.sent,r=w({data:n,rootElId:e}),a=r.refresh,(o=$(".slider")).slider({change:function(){var t=o.slider("values");a(t)},range:!0}),o.slider("values",[10,50]);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(t){var e=t.pageContext.demoInfo;return r.createElement(a.Z,{demoInfo:e,links:["/vendors/jquery-ui/themes/base/theme.css","/vendors/jquery-ui/themes/base/slider.css"],main:O,scripts:["/vendors/jquery-ui/jquery-ui.min.js","/vendors/jquery-ui/ui/slider.js"]},r.createElement("div",null,r.createElement("div",{className:"slider"})),r.createElement("div",{id:"chart"}))}},7412:function(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},4140:function(t,e,n){var r=n(7816),a=n(9291)(r);t.exports=a},7816:function(t,e,n){var r=n(8483),a=n(3674);t.exports=function(t,e){return t&&r(t,e,a)}},280:function(t,e,n){var r=n(5726),a=n(6916),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return a(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},4290:function(t,e,n){var r=n(6557);t.exports=function(t){return"function"==typeof t?t:r}},9291:function(t,e,n){var r=n(8612);t.exports=function(t,e){return function(n,a){if(null==n)return n;if(!r(n))return t(n,a);for(var o=n.length,i=e?o:-1,s=Object(n);(e?i--:++i<o)&&!1!==a(s[i],i,s););return n}}},6916:function(t,e,n){var r=n(5569)(Object.keys,Object);t.exports=r},6073:function(t,e,n){t.exports=n(4486)},4486:function(t,e,n){var r=n(7412),a=n(4140),o=n(4290),i=n(1469);t.exports=function(t,e){return(i(t)?r:a)(t,o(e))}},3674:function(t,e,n){var r=n(4636),a=n(280),o=n(8612);t.exports=function(t){return o(t)?r(t):a(t)}},928:function(t){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-mareys-schedule-tsx-0b7211aa1ee021f97fbe.js.map