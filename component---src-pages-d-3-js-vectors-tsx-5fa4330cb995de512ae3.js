(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[902],{7021:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7294),a=r(2247),l=function(){var e="chart",t=document.getElementById(e);t.classList.add("vectors-chart");var r=t.getBoundingClientRect().width,n=d3.select("#chart").append("svg").attr("width",r).attr("height",500),a=[{id:"A",reflexive:!1},{id:"B",reflexive:!1},{id:"C",reflexive:!1}],l="C".charCodeAt(0),i=[{left:!1,right:!0,source:a[0],target:a[1]},{left:!1,right:!0,source:a[1],target:a[2]}];n.append("svg:defs").append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",6).attr("markerWidth",3).attr("markerHeight",3).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","#000"),n.append("svg:defs").append("svg:marker").attr("id","start-arrow").attr("viewBox","0 -5 10 10").attr("refX",4).attr("markerWidth",3).attr("markerHeight",3).attr("orient","auto").append("svg:path").attr("d","M10,-5L0,0L10,5").attr("fill","#000");var s=n.append("svg:path").attr("class","link dragline hidden").attr("d","M0,0L0,0"),d=n.append("svg:g").selectAll("path"),o=n.append("svg:g").selectAll("g"),u=d3.layout.force().nodes(a).links(i).size([r,500]).linkDistance(150).charge(-500).on("tick",(function(){return d.attr("d",(function(e){var t=e.target.x-e.source.x,r=e.target.y-e.source.y,n=Math.sqrt(t*t+r*r),a=t/n,l=r/n,i=e.left?17:12,s=e.right?17:12;return"M"+(e.source.x+i*a)+","+(e.source.y+i*l)+"L"+(e.target.x-s*a)+","+(e.target.y-s*l)})),o.attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}))})),c=null,f=null,v=null,g=null,h=null,p=function(){g=null,h=null,v=null},m=function e(){(d=d.data(i)).classed("selected",(function(e){return e===f})).style("marker-start",(function(e){return e.left?"url(#start-arrow)":""})).style("marker-end",(function(e){return e.right?"url(#end-arrow)":""})),d.enter().append("svg:path").attr("class","link").classed("selected",(function(e){return e===f})).style("marker-start",(function(e){return e.left?"url(#start-arrow)":""})).style("marker-end",(function(e){return e.right?"url(#end-arrow)":""})).on("mousedown",(function(t){d3.event.ctrlKey||(f=(v=t)===f?null:v,c=null,e())})),d.exit().remove(),(o=o.data(a,(function(e){return e.id}))).selectAll("circle").style("fill",(function(e){return e===c?d3.rgb((e.id,"#FFF")).darker().toString():(e.id,"#FFF")})).classed("reflexive",(function(e){return e.reflexive}));var t=o.enter().append("svg:g");return t.append("svg:circle").attr("class","node").attr("r",12).style("fill",(function(e){return e===c?d3.rgb((e.id,"#FFF")).brighter().toString():(e.id,"#FFF")})).style("stroke",(function(e){return d3.rgb((e.id,"#FFF")).darker().toString()})).classed("reflexive",(function(e){return e.reflexive})).on("mouseover",(function(e){g&&e!==g&&d3.select(this).attr("transform","scale(1.1)")})).on("mouseout",(function(e){g&&e!==g&&d3.select(this).attr("transform","")})).on("mousedown",(function(t){d3.event.ctrlKey||(c=(g=t)===c?null:g,f=null,s.style("marker-end","url(#end-arrow)").classed("hidden",!1).attr("d","M"+g.x+","+g.y+"L"+g.x+","+g.y),e())})).on("mouseup",(function(t){var r=null,n=null,a=null;if(g)if(s.classed("hidden",!0).style("marker-end",""),(h=t)!==g){d3.select(this).attr("transform",""),g.id<h.id?(n=g,a=h,r="right"):(n=h,a=g,r="left");var l=i.filter((function(e){return e.source===n&&e.target===a}))[0];l?l[r]=!0:((l={left:!1,right:!1,source:n,target:a})[r]=!0,i.push(l)),f=l,c=null,e()}else p()})),t.append("svg:text").attr("x",0).attr("y",4).attr("class","id").text((function(e){return e.id})),o.exit().remove(),u.start()},k=-1;n.on("mousedown",(function(){if(n.classed("active",!0),!(d3.event.ctrlKey||g||v)){var e=d3.mouse(this),t={id:String.fromCharCode(++l),reflexive:!1};t.x=e[0],t.y=e[1],a.push(t),m()}})).on("mousemove",(function(){g&&(s.attr("d","M"+g.x+","+g.y+"L"+d3.mouse(this)[0]+","+d3.mouse(this)[1]),m())})).on("mouseup",(function(){return g&&s.classed("hidden",!0).style("marker-end",""),n.classed("active",!1),p()})),d3.select(window).on("keydown",(function(){var e;if((d3.event.preventDefault(),-1===k)&&(k=d3.event.keyCode,17===d3.event.keyCode&&(o.call(u.drag),n.classed("ctrl",!0)),c||f))switch(d3.event.keyCode){case 46:return c?(a.splice(a.indexOf(c),1),e=c,i.filter((function(t){return t.source===e||t.target===e})).map((function(e){return i.splice(i.indexOf(e),1)}))):f&&i.splice(i.indexOf(f),1),f=null,c=null,void m();case 66:return f&&(f.left=!0,f.right=!0),void m();case 76:return f&&(f.left=!0,f.right=!1),void m();case 82:return c?c.reflexive=!c.reflexive:f&&(f.left=!1,f.right=!0),void m()}})).on("keyup",(function(){k=-1,17===d3.event.keyCode&&(o.on("mousedown.drag",null).on("touchstart.drag",null),n.classed("ctrl",!1))})),m()},i=function(e){var t=e.pageContext.demoInfo;return n.createElement(a.Z,{demoInfo:t,main:l,scripts:["/vendors/d3/d3.min.js"]},n.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-vectors-tsx-5fa4330cb995de512ae3.js.map