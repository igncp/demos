(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[201],{4275:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7294),a=n(5414),l=n(2552),o=function(e){var t=e.isCompleted,n=e.mainSource,a=e.name;return r.createElement("h2",{className:"row",id:l.dc},r.createElement("span",{className:"col-xs-12 col-sm-10 p-0"},r.createElement("span",{className:l.jS},a," Chart "),r.createElement("small",{id:l.l4,title:"Main Source"},r.createElement("a",{href:n},"···")),!t&&r.createElement("small",{id:l.oT,title:"This demo is still work in progress"},"WIP")),r.createElement("span",{className:"col-sm-2 p-0 d-xs-none "+l.eR},r.createElement("a",{className:"btn btn-info",href:"/demos/",role:"button"},r.createElement("span",{className:"glyphicon glyphicon-home"})," Home")))},c=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://github.com/igncp/demos/blob/main/"+t,rel:"noreferrer",target:"_blank"},"Code in Github"))},i=function(e){var t=e.filePath;return r.createElement(r.Fragment,null,r.createElement("span",null,"| "),r.createElement("a",{href:"https://igncp.github.io/demos/coverage-ts/files/"+t+".html",rel:"noreferrer",target:"_blank"},"TypeScript coverage report"))},s=function(e){var t=e.demoInfo;if("undefined"==typeof window)return null;var n="pages/"+t.category+"/"+t.key+"."+t.files.page.type;return r.createElement("div",null,!!t.notes.length&&r.createElement("div",{className:"bs-callout bs-callout-info"+l.$c},r.createElement("p",null,r.createElement("strong",null,"Notes:")),r.createElement("ul",null,t.notes.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],l=t[1];return r.createElement("li",{dangerouslySetInnerHTML:{__html:a},key:l})})))),!!t.summary.length&&r.createElement("div",{className:"bs-callout bs-callout-summary "+l.$c},r.createElement("p",null,r.createElement("strong",null,"Implementation Summary:")),r.createElement("ul",null,t.summary.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],l=t[1];return r.createElement("p",{dangerouslySetInnerHTML:{__html:a},key:l})})))),r.createElement("div",{className:"bs-callout bs-callout-primary",id:l.V2},r.createElement("p",null,r.createElement("strong",null,"Sources:")),r.createElement("ul",null,t.sources.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],o=t[1];return r.createElement("li",{key:o},r.createElement("span",{className:l.hB},"[",o+1,"]"),":"," ",r.createElement("a",{href:a},a))})))),!!t.docs.length&&r.createElement("div",{className:"bs-callout bs-callout-secondary",id:"docs"},r.createElement("p",null,r.createElement("strong",null,"Docs:")),r.createElement("ul",null,t.docs.map((function(e){return r.createElement("li",{key:e[1],style:{border:"1px solid #157ad4",borderRadius:5,display:"inline-block",margin:5,padding:5}},r.createElement("a",{href:e[1],rel:"noreferrer",target:"_blank"},e[0]))})))),!!t.dataFiles.length&&r.createElement("div",{className:"bs-callout bs-callout-warning",id:l.sD},r.createElement("p",null,r.createElement("strong",null,"Data files: "),t.dataFiles.map((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var l=n[0],o=n[1];return r.createElement("a",{href:"/demos/data/"+t.category+"/"+t.key+"/"+l,key:o},l)})))),r.createElement("div",{className:"bs-callout bs-callout-success",id:"code"},r.createElement("p",null,r.createElement("strong",null,"Code:")),r.createElement("ul",null,t.files.demoTS.map((function(e){var t=e.content,n=e.filePath;return r.createElement("li",{key:n},r.createElement("p",null,r.createElement("span",{className:l.s2},n)," ",r.createElement(r.Fragment,null,r.createElement(c,{filePath:n})," ",r.createElement(i,{filePath:n}))),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t}})))})),r.createElement("li",null,r.createElement("p",null,r.createElement("span",{className:l.s2},n)," ",r.createElement(c,{filePath:n})," ",r.createElement(i,{filePath:n})),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t.files.page.content}}))),t.files.demoCSS.map((function(e){var t=e.content,n=e.filePath;return r.createElement("li",{key:n},r.createElement("p",null,r.createElement("span",{className:l.s2},n)," ",r.createElement(c,{filePath:n})),r.createElement("pre",null,r.createElement("code",{dangerouslySetInnerHTML:{__html:t}})))})))))},u=n(2504),m=function(e){return"/"===e[0]?"/demos/"+e.replace(/^\//,""):e},d=function(e){var t=e.main,n=e.children,l=e.scripts,c=void 0===l?[]:l,i=e.links,d=void 0===i?[]:i,f=e.pageContext,p=f.demoInfo,h=f.meta,g=p.isCompleted,E=p.name,y=p.sources;return(0,r.useEffect)((function(){"undefined"!=typeof window&&t().catch((function(e){console.error("error:",e)}))}),[]),r.createElement(u.Z,null,r.createElement(a.q,{link:d.map((function(e){return{href:m(e),rel:"stylesheet",type:"text/css"}})),meta:[{content:h.description,name:"description"}],script:c.map((function(e){return{src:m(e),type:"text/javascript"}})),title:p.name+" | Demos igncp"}),r.createElement(o,{isCompleted:g,mainSource:y[0],name:E}),n,r.createElement(s,{demoInfo:p}))}},2504:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(7294),a=n(2552),l=function(){return r.createElement("footer",{className:a.Mv},r.createElement("p",null,(new Date).getFullYear()))},o=function(){return r.createElement("div",{className:a.H6},r.createElement("h1",{className:"row"},r.createElement("span",{className:"col-3 col-md-8 p-0"},r.createElement("a",{href:"/demos/"},"Demos")," ",r.createElement("small",{className:"hide-tablet"},"interactive data visualization examples")),r.createElement("span",{className:"col-9 col-md-4 p-0",id:a.ak},r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=follow",width:"119"}),r.createElement("iframe",{className:"hide-mobile",frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=fork",width:"62"}),r.createElement("iframe",{frameBorder:"0",height:"20",scrolling:"0",src:"https://ghbtns.com/github-btn.html?user=igncp&repo=demos&type=watch",width:"52"}))))},c=function(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement("div",{className:a.Mg},r.createElement("div",{className:"px-3 px-sm-5"},r.createElement(o,null),t)),r.createElement(l,null))}},4645:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r=n(7294),a=n(4275),l=n(8634),o=n(2656),c=n.n(o),i=n(5221),s="trend-line-module--axis--df010",u="chart",m=50,d=50,f=50,p=50,h=500-p-m,g=function(e){var t=e.line,n=e.lineData;return function(){var e=(0,i.FTZ)().domain([0,1]).range((0,i.w6H)(1,n.length+1));return function(r){var a=n.slice(0,e(r));return t(a)}}},E=function(){function e(e){var t=this;this.state={isZoomed:!1},this.handleResize=function(){t.render(!1)};var n=e.initialZoomed,r=e.rootElId,a=(0,i.Ys)("#"+r),l=a.append("svg"),o=l.append("g"),c=o.append("g"),s=o.append("g"),u=o.append("path"),m=o.append("path"),d=o.append("text");this.elements={chartText:d,dashedLine:m,fullLine:u,rootEl:a,svg:l,svgG:o,xAxis:c,yAxis:s},this.config=e,this.renderContent(n),window.addEventListener("resize",this.handleResize)}var t=e.prototype;return t.renderContent=function(e){this.state.isZoomed=e,this.render(!0)},t.render=function(e){var t=e?2e3:0,n=this.config,r=n.getDashedLineX,a=n.getDashedLineY,l=n.getFullLineX,o=n.getFullLineY,c=n.lineData,u=n.rootElId,E=this.config,y=this.elements,v=y.chartText,b=y.dashedLine,w=y.fullLine,x=y.svg,N=y.svgG,k=y.xAxis,L=y.yAxis,T=this.state.isZoomed,D=document.getElementById(u);D.classList.add("trend-line-module--trendLineChart--39352");var S=D.getBoundingClientRect().width-d-f;x.attr("height",h+p+m).attr("width",S+d+f),N.attr("transform","translate("+d+","+f+")");var C=(0,i.Xf)().range([0,S]).domain((0,i.Wem)(c,l)),Z=(0,i.BYU)().range([h,0]).domain([T?(0,i.VV$)(c,o):0,(0,i.Fp7)(c,o)]),I=(0,i.LLu)(C),_=(0,i.y4O)(Z),F=(0,i.jvg)().x((function(e){return C(l(e))})).y((function(e){return Z(o(e))}));k.attr("class","x "+s).attr("transform","translate(0,"+h+")").call(I),L.attr("class","y "+s).call(_),w.datum(c).interrupt().transition().duration(t).attrTween("d",g({line:F,lineData:c})).attr("class","trend-line-module--line--8249c");var M=(0,i.jvg)().x((function(e){return C(r(e))})).y((function(e){return Z(a(e))}));b.datum(c).attr("d",null).interrupt().transition().delay(t).duration(t).attrTween("d",g({line:M,lineData:c})).attr("class","trend-line-module--rline--34ea5"),v.attr("transform","translate("+.7*S+","+.7*h+")").style("opacity",t?0:1).interrupt().transition().delay(2*t).text(E.chartText).style("opacity",1)},e}(),y=function(){var e=(0,l.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.pvA)("/demos/data/d3js/trend-line/data.tsv");case 2:return t=e.sent,n=(0,i.Z1g)("%Y-%m-%d"),e.abrupt("return",t.map((function(e){return{arbitraryValue:+e.value,occurred:n(e.occurred)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){return e.occurred},b=function(e){return e.arbitraryValue},w=function(e){return e.occurred},x=function(e){var t=e.initialZoomed,n=e.lineData,r=function(e){var t={},n=e.length,r=0,a=0,l=0,o=0,c=0;return e.forEach((function(e){a+=e.arbitraryValue,c+=e.arbitraryValue*e.arbitraryValue,l+=e.occurred.getTime()*e.arbitraryValue,r+=e.occurred.getTime(),o+=e.occurred.getTime()*e.occurred.getTime()})),t.slope=(n*l-r*a)/(n*o-r*r),t.intercept=(a-t.slope*r)/n,t.r2=Math.pow((n*l-r*a)/Math.sqrt((n*o-r*r)*(n*c-a*a)),2),t}(n);return{chartText:"Slope: "+r.slope.toExponential(3),getDashedLineX:w,getDashedLineY:function(e){return r.intercept+r.slope*+e.occurred},getFullLineX:v,getFullLineY:b,initialZoomed:t,lineData:n,rootElId:u}},N=function(){var e=(0,l.Z)(c().mark((function e(){var t,n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,r=x({initialZoomed:(n=function(){return document.querySelector('input[value="zoom"]').checked})(),lineData:t}),a=new E(r),(0,i.td_)('input[name="mode"]').on("change",(function(){var e=n();a.renderContent(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=N,L=function(e){var t=e.pageContext;return r.createElement(a.Z,{main:k,pageContext:t},r.createElement("form",null,r.createElement("label",null,r.createElement("input",{defaultChecked:!0,name:"mode",type:"radio",value:"zoom"})," Zoom"),r.createElement("label",null,r.createElement("input",{name:"mode",type:"radio",value:"normal"})," Normal")),r.createElement("div",{id:u}))}},2656:function(e,t,n){e.exports=n(3076)},2552:function(e,t,n){"use strict";n.d(t,{eR:function(){return r},rT:function(){return a},UG:function(){return l},ZV:function(){return o},Bf:function(){return c},K7:function(){return i},jS:function(){return s},s2:function(){return u},Mv:function(){return m},eQ:function(){return d},Be:function(){return f},$c:function(){return p},Mg:function(){return h},hB:function(){return g},H6:function(){return E},YX:function(){return y},zG:function(){return v},Vj:function(){return b},pn:function(){return w},x:function(){return x},oT:function(){return N},dc:function(){return k},l4:function(){return L},sD:function(){return T},V2:function(){return D},ak:function(){return S}});var r="styles-module--backHome--b9e05",a="styles-module--bullet--337e0",l="styles-module--d3js--ff3aa",o="styles-module--raphael--40af0",c="styles-module--storybook--f1bcc",i="styles-module--testing--9f8b3",s="styles-module--demoName--4057d",u="styles-module--fileNameWrapper--e0bd4",m="styles-module--footer--a0f96",d="styles-module--homeDemoNumber--755fe",f="styles-module--homeDemoNameLink--4b57a",p="styles-module--notes--e1c07",h="styles-module--rootLayout--03362",g="styles-module--sourceNumber--335c1",E="styles-module--pageHeader--06484",y="styles-module--rowWrapper--9f3a4",v="styles-module--demosLegend--16d25",b="styles-module--demosLists--52492",w="styles-module--highlightStorybook--b465e",x="styles-module--highlightTesting--b7d3f",N="styles-module--demoWip--18449",k="styles-module--demoTitle--7c73a",L="styles-module--mainSource--f7ebb",T="styles-module--dataList--54f77",D="styles-module--sourcesList--27e91",S="styles-module--ghButtons--1d466"},8634:function(e,t,n){"use strict";function r(e,t,n,r,a,l,o){try{var c=e[l](o),i=c.value}catch(s){return void n(s)}c.done?t(i):Promise.resolve(i).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,l){var o=e.apply(t,n);function c(e){r(o,a,l,c,i,"next",e)}function i(e){r(o,a,l,c,i,"throw",e)}c(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-d-3-js-trend-line-tsx-3e27cf582cb5fe84f6d7.js.map