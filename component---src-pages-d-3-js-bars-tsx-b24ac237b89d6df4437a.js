"use strict";(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[964],{9646:function(t,e,r){var n;r.d(e,{Z:function(){return v}});var a=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function(t){return"string"==typeof t&&i.test(t)},l=[],u=0;u<256;++u)l.push((u+256).toString(16).substr(1));var c,d,h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]).toLowerCase();if(!o(r))throw TypeError("Stringified UUID is invalid");return r},f=0,g=0;var v=function(t,e,r){var n=e&&r||0,a=e||new Array(16),i=(t=t||{}).node||c,o=void 0!==t.clockseq?t.clockseq:d;if(null==i||null==o){var l=t.random||(t.rng||s)();null==i&&(i=c=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==o&&(o=d=16383&(l[6]<<8|l[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:g+1,m=u-f+(v-g)/1e4;if(m<0&&void 0===t.clockseq&&(o=o+1&16383),(m<0||u>f)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=u,g=v,d=o;var p=(1e4*(268435455&(u+=122192928e5))+v)%4294967296;a[n++]=p>>>24&255,a[n++]=p>>>16&255,a[n++]=p>>>8&255,a[n++]=255&p;var y=u/4294967296*1e4&268435455;a[n++]=y>>>8&255,a[n++]=255&y,a[n++]=y>>>24&15|16,a[n++]=y>>>16&255,a[n++]=o>>>8|128,a[n++]=255&o;for(var b=0;b<6;++b)a[n+b]=i[b];return e||h(a)}},7112:function(t,e,r){r.r(e),r.d(e,{default:function(){return D}});var n=r(7294),a=r(4275),s=r(8634),i=r(2656),o=r.n(i),l=r(5221),u=r(8747),c=r.n(u),d=r(9646),h=function(){function t(t){var e=t.chart,r=t.dragArea,n=t.svg;this.state={dragX:0,marginLeft:0,width:0},this.elements={chart:e,dragArea:r,svg:n}}var e=t.prototype;return e.setDimensions=function(t){var e=t.marginLeft,r=t.width;this.state.width=r,this.state.marginLeft=e},e.refresh=function(){var t=this.elements.svg,e=this.getDragDiffWidth();t.style("cursor",e>0?"move":"default")},e.reset=function(){var t=this;this.refresh();var e=this.elements.svg;this.state.dragX=0;var r=function(e){t.state.dragX+=e.dx;var r=t.getDragDiffWidth();r>0?(t.state.dragX=Math.min(t.state.dragX,0),t.state.dragX=Math.max(t.state.dragX,-r)):t.state.dragX=0,t.updateDrag()},n=(0,l.ohM)().on("drag",r);this.updateDrag(),e.call(n).on("drag",r)},e.updateDrag=function(){this.elements.dragArea.attr("transform","translate("+this.state.dragX+",0)")},e.getDragDiffWidth=function(){var t=this.elements.chart,e=this.state,r=e.marginLeft,n=e.width-r;return t.node().getClientRects()[0].width-n},t}(),f="bars-module--axis--8e5e1",g="bars-module--addItemButton--4a90d";"undefined"!=typeof window&&r(5356);var v=160,m=100,p=500-2*m,y=30,b=["#323247","#7C7CC9","#72B66C","#429742"],x=function(t){return p-7*t.metric},w=function(t){return 7*t.metric},A=function(){function t(t){var e=this,r=t.bars,n=t.rootElId;this.state={interval:null},this.handleResize=function(){e.render()},this.bars=r,this.rootElId=n,this.barClassName="bars-"+(0,d.Z)().slice(0,6);var a=(0,l.Ys)("#"+n).append("svg");a.append("g").append("filter").attr("height","300%").attr("x","-100%").attr("y","-100%").attr("id","blur").attr("width","300%").append("feGaussianBlur").attr("stdDeviation","2 2");var s=a.append("g"),i=s.append("g"),o=i.append("g"),u=o.append("text"),c=i.append("g"),f=c.append("text");this.elements={chart:i,dragArea:s,svg:a,xAxisG:o,xAxisText:u,yAxisG:c,yAxisText:f},this.dragModule=new h({chart:i,dragArea:s,svg:a}),this.color=null,this.render(),window.addEventListener("resize",this.handleResize)}var e=t.prototype;return e.addBar=function(t){this.bars.push(t)},e.getBars=function(){return this.bars.slice()},e.refresh=function(){this.drawRectangles(),this.redraw()},e.render=function(){var t=this.bars,e=this.rootElId,r=document.getElementById(e).getBoundingClientRect().width,n=(0,l.BYU)().domain((0,l.Wem)(t,(function(t){return t.metric}))).range([0,1]),a=(0,l.BYU)().domain((0,l.w6H)(0,1,1/b.length)).range(b);this.color=function(t){return a(n(t.metric))};var s=this.elements,i=s.chart,o=s.svg,u=s.xAxisG,c=s.xAxisText,d=s.yAxisG,h=s.yAxisText;o.attr("height",500).attr("width",r).attr("class","bars-module--barsChart--e89b5");var g=r>600?v:80;this.dragModule.setDimensions({marginLeft:g,width:r}),i.attr("transform","translate("+g+","+m+")"),this.state.interval&&clearInterval(this.state.interval),this.state.interval=setInterval(this.getIntervalFn(),1e3);var x=(0,l.BYU)().domain([.5,t.length+.5]).range([1,y*t.length]),w=(0,l.BYU)().domain([0,(0,l.Fp7)(t,(function(t){return t.metric}))]).rangeRound([0,-7*(0,l.Fp7)(t,(function(t){return t.metric}))]);u.attr("class","xAxis "+f).attr("transform","translate(0,"+p+")").call((0,l.LLu)(x)),c.attr("transform","translate("+y*t.length/2+" ,0)").attr("class","xAxisLabel").attr("y",40).attr("font-size","1.3em").attr("fill","black").style("text-anchor","end").text("Number"),d.attr("class","yAxis "+f).attr("transform","translate(0,"+p+")").call((0,l.y4O)(w)),h.attr("transform","translate(-30,-220)").attr("y",40).attr("font-size","1.3em").attr("fill","black").style("text-anchor","end").text("Value"),this.dragModule.reset(),this.drawRectangles()},e.clearInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){this.state.interval&&clearInterval(this.state.interval)})),e.getBarsSelection=function(){return this.elements.chart.selectAll("rect")},e.drawRectangles=function(){var t=this,e=this.bars,r=this.color;this.getBarsSelection().data(e).enter().append("rect").attr("x",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[1];return y*n})).attr("y",x).attr("width",y).attr("height",w).attr("class",this.barClassName).attr("fill",(function(t){return r(t)})).on("mouseover",(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[1];t.getBarsSelection().style("filter",(function(t){return t.id===a.id?null:"url(#blur)"})),t.clearInterval()})).on("mouseleave",(function(){t.getBarsSelection().style("filter",null),t.clearInterval(),t.state.interval=setInterval(t.getIntervalFn(),1e3)})).attr("title",(function(t){return t.metric})),c()("."+this.barClassName).tooltip({track:!0})},e.getIntervalFn=function(){var t=this;return function(){var e=t.bars;e.unshift(e.pop()),t.redraw()}},e.redraw=function(){var t=this.bars,e=this.color,r=this.elements.chart,n=(0,l.BYU)().domain([.5,t.length+.5]).range([1,y*t.length]),a=(0,l.LLu)(n);r.select(".xAxis").transition().duration(500).call(a),r.select(".xAxisLabel").transition().duration(500).attr("transform","translate("+y*t.length/2+" ,0)"),r.selectAll("rect").data(t).transition().duration(500).attr("y",x).attr("height",w).attr("fill",e).select("title").text((function(t){return t.metric})),this.dragModule.refresh()},t}(),C="chart",B=function(){var t=(0,s.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/demos/data/d3js/bars/data.json");case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=(0,s.Z)(o().mark((function t(){var e,r,n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B();case 2:e=t.sent,r={bars:{bars:e}.bars.map((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],a=e[1];return{id:a,metric:n}})),rootElId:C},n=new A(r),(a=document.getElementById(g)).addEventListener("click",(function(){var t=n.getBars(),e=(0,l.Fp7)(t,(function(t){return t.id}))+1;n.addBar({id:e,metric:Math.floor(Math.random()*(0,l.Fp7)(t,(function(t){return t.metric})))+1}),n.refresh(),t.length>=20&&a.setAttribute("disabled","disabled")}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=I,D=function(t){var e=t.pageContext;return n.createElement(a.Z,{main:E,pageContext:e},n.createElement("form",null,n.createElement("button",{className:"btn btn-info",id:g,type:"button"},"Add item")),n.createElement("div",{id:C}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-bars-tsx-b24ac237b89d6df4437a.js.map