(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[305],{2137:function(t,e,n){"use strict";function r(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function c(t){r(i,a,o,c,s,"next",t)}function s(t){r(i,a,o,c,s,"throw",t)}c(void 0)}))}}n.d(e,{Z:function(){return a}})},6375:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return y}});var r=n(7294),a=n(2247),o=n(2137),i=n(7757),c=n.n(i),s=n(2453),u=function(){var t=d3.time.format("%Y-%m"),e=[];return new Promise((function(n){d3.tsv("/demos/data/d3js/multiline-voronoi/data.tsv",(function(n,r){r||Object.keys(n).map(t.parse).filter(Number).forEach((function(t){return e.push(t)}));var a={name:n.name.replace(/(msa|necta div|met necta|met div)$/i,""),values:null};return a.values=e.map((function(e){return{city:a,date:e,value:n[t(e)]/100}})),a}),(function(t,r){n({cities:r,months:e})}))}))},l=["January","February","March","April","May","June","July","August","September","October","November","December"],d=70,p=80,f=70,m=60,v=function(t){var e=t.rootElId,n=t.cities,r=t.months,a=d3.scale.category20(),o=!1,i=document.getElementById(e);i.classList.add("multiline-voronoi-chart");var c=i.getBoundingClientRect().width-p-f,u=500-m-d,v=d3.time.scale().range([0,c]),h=s.BYU().range([u,0]),y=d3.select("#"+e).append("svg").attr("width",c+p+f).attr("height",u+m+d).append("g").attr("transform","translate("+p+","+m+")");v.domain(s.Wem(r)),h.domain([0,s.Fp7(n,(function(t){return s.Fp7(t.values,(function(t){return t.value}))}))]).nice(),y.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+u+")").call(d3.svg.axis().scale(v).orient("bottom")),y.append("g").attr("class","axis axis--y").call(d3.svg.axis().scale(h).orient("left").ticks(10,"%")).append("text").attr("x",20).attr("dy",".32em").style("font-weight","bold").text("US Unemployment Rate"),function(t){var e=t.append("defs").append("filter").attr("id","drop-shadow");e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",1),e.append("feOffset").attr("dx",1).attr("dy",1),e.append("feComponentTransfer").append("feFuncA").attr("slope","1").attr("type","linear");var n=e.append("feMerge");n.append("feMergeNode"),n.append("feMergeNode").attr("in","SourceGraphic")}(y);var g=s.jvg().x((function(t){return v(t.date)})).y((function(t){return h(t.value)})),x=function(t){var e=y.append("g").attr("transform","translate(-100,-100)").attr("class","focus");e.append("circle").attr("r",3.5),e.append("text").attr("class","text1").attr("y",-30),e.append("text").attr("class","text2").attr("y",-10);var r=d3.geom.voronoi().x((function(t){return v(t.date)})).y((function(t){return h(t.value)})).clipExtent([[-p,-m],[c+f,u+d]]),a=y.append("g").attr("class","voronoi");a.selectAll("path").data(r(d3.nest().key((function(t){return v(t.date)+","+h(t.value)})).rollup((function(t){return t[0]})).entries(d3.merge(t.map((function(t){return t.values})))).map((function(t){return t.values})))).enter().append("path").attr("d",(function(t){return"M"+t.join("L")+"Z"})).datum((function(t){return t.point})).on("mouseover",(function(t){d3.select(t.city.line).classed("city--hover",!0),t.city.line.parentNode.appendChild(t.city.line),e.attr("transform","translate("+v(t.date)+","+h(t.value)+")"),e.select(".text1").text(t.city.name.trim()+": ");var n=l[t.date.getMonth()]+" of "+t.date.getFullYear();return e.select(".text2").text(" "+String((100*t.value).toFixed(2))+"% - "+n)})).on("mouseout",(function(t){return d3.select(t.city.line).classed("city--hover",!1),e.attr("transform","translate(-100,-100)")})).on("click",(function(t){o=!o,d3.selectAll(".cities").remove(),d3.selectAll(".voronoi").remove(),w(o?[t.city]:n)})),d3.select("#show-voronoi").property("disabled",!1).on("change",(function(){return a.classed("voronoi--show",this.checked)}))},w=function(t){return y.append("g").attr("class","cities").selectAll("path").data(t).enter().append("path").attr("d",(function(t){return t.line=this,g(t.values)})).style("stroke",(function(t,e){return a(e)})).style("filter",(function(){return"url(#drop-shadow)"})),x(t)};w(n)},h=function(){var t=(0,o.Z)(c().mark((function t(){var e,n,r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="chart",t.next=3,u();case 3:n=t.sent,r=n.cities,a=n.months,v({cities:r,months:a,rootElId:e});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(t){var e=t.pageContext.demoInfo;return r.createElement(a.Z,{demoInfo:e,main:h,scripts:["/vendors/d3/d3.min.js"]},r.createElement("form",null,r.createElement("input",{id:"show-voronoi",type:"checkbox"})," ",r.createElement("label",{htmlFor:"show-voronoi"},"Show Voronoi lines")),r.createElement("div",{id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-multiline-voronoi-tsx-5bfe234feda5f2db3555.js.map