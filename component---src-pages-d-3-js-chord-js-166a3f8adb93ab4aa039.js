(self.webpackChunkdemos=self.webpackChunkdemos||[]).push([[32],{2137:function(t,r,e){"use strict";function n(t,r,e,n,a,i,o){try{var u=t[i](o),d=u.value}catch(s){return void e(s)}u.done?r(d):Promise.resolve(d).then(n,a)}function a(t){return function(){var r=this,e=arguments;return new Promise((function(a,i){var o=t.apply(r,e);function u(t){n(o,a,i,u,d,"next",t)}function d(t){n(o,a,i,u,d,"throw",t)}u(void 0)}))}}e.d(r,{Z:function(){return a}})},7445:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return m}});var n=e(7294),a=e(7538),i=e(2137),o=e(7757),u=e.n(o),d=e(8646),s=function(){var t=(0,i.Z)(u().mark((function t(){var r,e,n,a,i,o,s,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.gyn("/demos/data/d3js/chord/data.csv");case 2:return r=t.sent,e=[],n={},a=[],i=[],o=0,s=function(t){return n[t]||(n[t]={id:o++,name:t}),n[t]},c=r.map((function(t){return Object.assign({},t,{creditor:s(t.creditor),debtor:Object.assign({},s(t.debtor),{risk:t.risk})})})),Array.from({length:o}).forEach((function(t,r){a[r]=[],i[r]=[],Array.from({length:o}).forEach((function(t,e){a[r][e]=null,i[r][e]=null}))})),c.forEach((function(t){a[t.creditor.id][t.debtor.id]=t,i[t.debtor.id][t.creditor.id]=t,e[t.creditor.id]=t.creditor,e[t.debtor.id]=t.debtor})),t.abrupt("return",{credits:i,debits:a,fullList:e});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(t,r,e,n){var a=t.append("defs").append("filter").attr("id","drop-shadow-"+r);a.append("feOffset").attr("dx",.5).attr("dy",.5).attr("in","SourceGraphic").attr("result","offOut"),a.append("feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation",e),a.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),a.append("feComponentTransfer").append("feFuncA").attr("slope",n).attr("type","linear")},l=["#39B347","#C92E47","#DB704D","#FFA22C","#5E92AA","#F8EDD3"],f=20,p=50,h=500,g=function(t){var r=t.rootElId,e=t.data,n=document.getElementById(r).getBoundingClientRect().width/2-20,a=Math.min(n,h)/2-4,i=a-20,o=d.WUZ(",.3r"),u=d.Nb1().innerRadius(i).outerRadius(a),s=d.Ys("#"+r),g=e.debits,v=e.credits,m=e.fullList,x=s.selectAll("div").data([g,v]).enter().append("div").style("display","inline-block").style("width",n+"px").style("height",h+p+f+"px").append("svg:svg").attr("width",n).attr("height",h+p+f).append("svg:g").attr("transform","translate("+n/2+","+String(250+p)+")"),y=x.filter((function(t,r){return 0===r})),b=x.filter((function(t,r){return 1===r})),w=function(t,r){return t.append("text").text(r).attr("transform","translate(0,-260)").attr("class","chart-title").attr("text-anchor","middle")};w(y,"Debits"),w(b,"Credits"),c(x,"chords",2,.4),c(x,"headings",3,.5);var k=d.BYU().domain(d.Wem([0,m.length-1])).range([0,1]),B=d.BYU().domain(d.w6H(0,1,1/l.length)).range(l),E=function(t){return B(k(t))};x.each((function(t,r){var e=d.Ys(this),n=t.map((function(t){return t.map((function(t){return t?+t.amount:0}))})),a=d.fFo().sortGroups(d.$1i).sortSubgroups(d.$1i).sortChords(d.$1i)(n),s=d.N22().radius(i);e.selectAll("path.chord").data(a).enter().append("svg:path").attr("class","chord").style("fill",(function(t){return E(t.target.index)})).style("filter","url(#drop-shadow-chords)").style("stroke",(function(t){var r=E(t.target.index);return d.B8C(r).darker().formatHex()})).style("stroke-width",2).attr("d",s).append("svg:title").text((function(t){var r=m[t.source.index],e=m[t.target.index];return r.name+" owes "+e.name+" $"+o(t.source.value)+"B."}));var c=e.selectAll("g.group").data(a.groups).enter().append("svg:g").attr("class","group");c.append("svg:path").style("fill",(function(t){return E(t.index)})).attr("id",(function(t){return"group"+t.index+"-"+r})).attr("d",u).style("filter",(function(){return"url(#drop-shadow-headings)"})).append("svg:title").text((function(t){return m[t.index].name+" "+(r?"owes":"is owed")+" $"+o(t.value)+"B."})),c.append("svg:text").attr("x",6).attr("dy",15).filter((function(t){return t.value>150})).append("svg:textPath").attr("xlink:href",(function(t){return"#group"+t.index+"-"+r})).text((function(t){return m[t.index].name})).attr("class","heading-title")}))},v=function(){var t=(0,i.Z)(u().mark((function t(){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:r=t.sent,g({data:r,rootElId:"chart"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(t){var r=t.pageContext.demoInfo;return n.createElement(a.Z,{demoInfo:r,main:v},n.createElement("div",{className:"chord-chart",id:"chart"}))}}}]);
//# sourceMappingURL=component---src-pages-d-3-js-chord-js-166a3f8adb93ab4aa039.js.map